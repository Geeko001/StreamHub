var Fm=Object.defineProperty;var Vm=(n,r,s)=>r in n?Fm(n,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[r]=s;var En=(n,r,s)=>Vm(n,typeof r!="symbol"?r+"":r,s);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const u of d.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function s(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(l){if(l.ep)return;l.ep=!0;const d=s(l);fetch(l.href,d)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(a,l,d){var u=null;if(d!==void 0&&(u=""+d),l.key!==void 0&&(u=""+l.key),"key"in l){d={};for(var c in l)c!=="key"&&(d[c]=l[c])}else d=l;return l=d.ref,{$$typeof:n,type:a,key:u,ref:l!==void 0?l:null,props:d}}return reactJsxRuntime_production.Fragment=r,reactJsxRuntime_production.jsx=s,reactJsxRuntime_production.jsxs=s,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),x=Symbol.iterator;function T(z){return z===null||typeof z!="object"?null:(z=x&&z[x]||z["@@iterator"],typeof z=="function"?z:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,C={};function k(z,Z,ce){this.props=z,this.context=Z,this.refs=C,this.updater=ce||S}k.prototype.isReactComponent={},k.prototype.setState=function(z,Z){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Z,"setState")},k.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function I(){}I.prototype=k.prototype;function N(z,Z,ce){this.props=z,this.context=Z,this.refs=C,this.updater=ce||S}var F=N.prototype=new I;F.constructor=N,_(F,k.prototype),F.isPureReactComponent=!0;var j=Array.isArray;function V(){}var M={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function Se(z,Z,ce){var Ie=ce.ref;return{$$typeof:n,type:z,key:Z,ref:Ie!==void 0?Ie:null,props:ce}}function Q(z,Z){return Se(z.type,Z,z.props)}function ee(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function we(z){var Z={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ce){return Z[ce]})}var he=/\/+/g;function He(z,Z){return typeof z=="object"&&z!==null&&z.key!=null?we(""+z.key):Z.toString(36)}function Je(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(V,V):(z.status="pending",z.then(function(Z){z.status==="pending"&&(z.status="fulfilled",z.value=Z)},function(Z){z.status==="pending"&&(z.status="rejected",z.reason=Z)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function de(z,Z,ce,Ie,Fe){var at=typeof z;(at==="undefined"||at==="boolean")&&(z=null);var nt=!1;if(z===null)nt=!0;else switch(at){case"bigint":case"string":case"number":nt=!0;break;case"object":switch(z.$$typeof){case n:case r:nt=!0;break;case y:return nt=z._init,de(nt(z._payload),Z,ce,Ie,Fe)}}if(nt)return Fe=Fe(z),nt=Ie===""?"."+He(z,0):Ie,j(Fe)?(ce="",nt!=null&&(ce=nt.replace(he,"$&/")+"/"),de(Fe,Z,ce,"",function(De){return De})):Fe!=null&&(ee(Fe)&&(Fe=Q(Fe,ce+(Fe.key==null||z&&z.key===Fe.key?"":(""+Fe.key).replace(he,"$&/")+"/")+nt)),Z.push(Fe)),1;nt=0;var Ce=Ie===""?".":Ie+":";if(j(z))for(var ke=0;ke<z.length;ke++)Ie=z[ke],at=Ce+He(Ie,ke),nt+=de(Ie,Z,ce,at,Fe);else if(ke=T(z),typeof ke=="function")for(z=ke.call(z),ke=0;!(Ie=z.next()).done;)Ie=Ie.value,at=Ce+He(Ie,ke++),nt+=de(Ie,Z,ce,at,Fe);else if(at==="object"){if(typeof z.then=="function")return de(Je(z),Z,ce,Ie,Fe);throw Z=String(z),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return nt}function Be(z,Z,ce){if(z==null)return z;var Ie=[],Fe=0;return de(z,Ie,"","",function(at){return Z.call(ce,at,Fe++)}),Ie}function me(z){if(z._status===-1){var Z=z._result;Z=Z(),Z.then(function(ce){(z._status===0||z._status===-1)&&(z._status=1,z._result=ce)},function(ce){(z._status===0||z._status===-1)&&(z._status=2,z._result=ce)}),z._status===-1&&(z._status=0,z._result=Z)}if(z._status===1)return z._result.default;throw z._result}var Ue=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},W={map:Be,forEach:function(z,Z,ce){Be(z,function(){Z.apply(this,arguments)},ce)},count:function(z){var Z=0;return Be(z,function(){Z++}),Z},toArray:function(z){return Be(z,function(Z){return Z})||[]},only:function(z){if(!ee(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return react_production.Activity=b,react_production.Children=W,react_production.Component=k,react_production.Fragment=s,react_production.Profiler=l,react_production.PureComponent=N,react_production.StrictMode=a,react_production.Suspense=p,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(z){return M.H.useMemoCache(z)}},react_production.cache=function(z){return function(){return z.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(z,Z,ce){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var Ie=_({},z.props),Fe=z.key;if(Z!=null)for(at in Z.key!==void 0&&(Fe=""+Z.key),Z)!q.call(Z,at)||at==="key"||at==="__self"||at==="__source"||at==="ref"&&Z.ref===void 0||(Ie[at]=Z[at]);var at=arguments.length-2;if(at===1)Ie.children=ce;else if(1<at){for(var nt=Array(at),Ce=0;Ce<at;Ce++)nt[Ce]=arguments[Ce+2];Ie.children=nt}return Se(z.type,Fe,Ie)},react_production.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:d,_context:z},z},react_production.createElement=function(z,Z,ce){var Ie,Fe={},at=null;if(Z!=null)for(Ie in Z.key!==void 0&&(at=""+Z.key),Z)q.call(Z,Ie)&&Ie!=="key"&&Ie!=="__self"&&Ie!=="__source"&&(Fe[Ie]=Z[Ie]);var nt=arguments.length-2;if(nt===1)Fe.children=ce;else if(1<nt){for(var Ce=Array(nt),ke=0;ke<nt;ke++)Ce[ke]=arguments[ke+2];Fe.children=Ce}if(z&&z.defaultProps)for(Ie in nt=z.defaultProps,nt)Fe[Ie]===void 0&&(Fe[Ie]=nt[Ie]);return Se(z,at,Fe)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(z){return{$$typeof:c,render:z}},react_production.isValidElement=ee,react_production.lazy=function(z){return{$$typeof:y,_payload:{_status:-1,_result:z},_init:me}},react_production.memo=function(z,Z){return{$$typeof:h,type:z,compare:Z===void 0?null:Z}},react_production.startTransition=function(z){var Z=M.T,ce={};M.T=ce;try{var Ie=z(),Fe=M.S;Fe!==null&&Fe(ce,Ie),typeof Ie=="object"&&Ie!==null&&typeof Ie.then=="function"&&Ie.then(V,Ue)}catch(at){Ue(at)}finally{Z!==null&&ce.types!==null&&(Z.types=ce.types),M.T=Z}},react_production.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},react_production.use=function(z){return M.H.use(z)},react_production.useActionState=function(z,Z,ce){return M.H.useActionState(z,Z,ce)},react_production.useCallback=function(z,Z){return M.H.useCallback(z,Z)},react_production.useContext=function(z){return M.H.useContext(z)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(z,Z){return M.H.useDeferredValue(z,Z)},react_production.useEffect=function(z,Z){return M.H.useEffect(z,Z)},react_production.useEffectEvent=function(z){return M.H.useEffectEvent(z)},react_production.useId=function(){return M.H.useId()},react_production.useImperativeHandle=function(z,Z,ce){return M.H.useImperativeHandle(z,Z,ce)},react_production.useInsertionEffect=function(z,Z){return M.H.useInsertionEffect(z,Z)},react_production.useLayoutEffect=function(z,Z){return M.H.useLayoutEffect(z,Z)},react_production.useMemo=function(z,Z){return M.H.useMemo(z,Z)},react_production.useOptimistic=function(z,Z){return M.H.useOptimistic(z,Z)},react_production.useReducer=function(z,Z,ce){return M.H.useReducer(z,Z,ce)},react_production.useRef=function(z){return M.H.useRef(z)},react_production.useState=function(z){return M.H.useState(z)},react_production.useSyncExternalStore=function(z,Z,ce){return M.H.useSyncExternalStore(z,Z,ce)},react_production.useTransition=function(){return M.H.useTransition()},react_production.version="19.2.4",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(n){function r(de,Be){var me=de.length;de.push(Be);e:for(;0<me;){var Ue=me-1>>>1,W=de[Ue];if(0<l(W,Be))de[Ue]=Be,de[me]=W,me=Ue;else break e}}function s(de){return de.length===0?null:de[0]}function a(de){if(de.length===0)return null;var Be=de[0],me=de.pop();if(me!==Be){de[0]=me;e:for(var Ue=0,W=de.length,z=W>>>1;Ue<z;){var Z=2*(Ue+1)-1,ce=de[Z],Ie=Z+1,Fe=de[Ie];if(0>l(ce,me))Ie<W&&0>l(Fe,ce)?(de[Ue]=Fe,de[Ie]=me,Ue=Ie):(de[Ue]=ce,de[Z]=me,Ue=Z);else if(Ie<W&&0>l(Fe,me))de[Ue]=Fe,de[Ie]=me,Ue=Ie;else break e}}return Be}function l(de,Be){var me=de.sortIndex-Be.sortIndex;return me!==0?me:de.id-Be.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;n.unstable_now=function(){return d.now()}}else{var u=Date,c=u.now();n.unstable_now=function(){return u.now()-c}}var p=[],h=[],y=1,b=null,x=3,T=!1,S=!1,_=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function F(de){for(var Be=s(h);Be!==null;){if(Be.callback===null)a(h);else if(Be.startTime<=de)a(h),Be.sortIndex=Be.expirationTime,r(p,Be);else break;Be=s(h)}}function j(de){if(_=!1,F(de),!S)if(s(p)!==null)S=!0,V||(V=!0,we());else{var Be=s(h);Be!==null&&Je(j,Be.startTime-de)}}var V=!1,M=-1,q=5,Se=-1;function Q(){return C?!0:!(n.unstable_now()-Se<q)}function ee(){if(C=!1,V){var de=n.unstable_now();Se=de;var Be=!0;try{e:{S=!1,_&&(_=!1,I(M),M=-1),T=!0;var me=x;try{t:{for(F(de),b=s(p);b!==null&&!(b.expirationTime>de&&Q());){var Ue=b.callback;if(typeof Ue=="function"){b.callback=null,x=b.priorityLevel;var W=Ue(b.expirationTime<=de);if(de=n.unstable_now(),typeof W=="function"){b.callback=W,F(de),Be=!0;break t}b===s(p)&&a(p),F(de)}else a(p);b=s(p)}if(b!==null)Be=!0;else{var z=s(h);z!==null&&Je(j,z.startTime-de),Be=!1}}break e}finally{b=null,x=me,T=!1}Be=void 0}}finally{Be?we():V=!1}}}var we;if(typeof N=="function")we=function(){N(ee)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,He=he.port2;he.port1.onmessage=ee,we=function(){He.postMessage(null)}}else we=function(){k(ee,0)};function Je(de,Be){M=k(function(){de(n.unstable_now())},Be)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(de){de.callback=null},n.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<de?Math.floor(1e3/de):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(de){switch(x){case 1:case 2:case 3:var Be=3;break;default:Be=x}var me=x;x=Be;try{return de()}finally{x=me}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(de,Be){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var me=x;x=de;try{return Be()}finally{x=me}},n.unstable_scheduleCallback=function(de,Be,me){var Ue=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Ue+me:Ue):me=Ue,de){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=me+W,de={id:y++,callback:Be,priorityLevel:de,startTime:me,expirationTime:W,sortIndex:-1},me>Ue?(de.sortIndex=me,r(h,de),s(p)===null&&de===s(h)&&(_?(I(M),M=-1):_=!0,Je(j,me-Ue))):(de.sortIndex=W,r(p,de),S||T||(S=!0,V||(V=!0,we()))),de},n.unstable_shouldYield=Q,n.unstable_wrapCallback=function(de){var Be=x;return function(){var me=x;x=Be;try{return de.apply(this,arguments)}finally{x=me}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var n=requireReact();function r(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(r(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},l=Symbol.for("react.portal");function d(p,h,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:p,containerInfo:h,implementation:y}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,reactDom_production.createPortal=function(p,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(r(299));return d(p,h,null,y)},reactDom_production.flushSync=function(p){var h=u.T,y=a.p;try{if(u.T=null,a.p=2,p)return p()}finally{u.T=h,a.p=y,a.d.f()}},reactDom_production.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,a.d.C(p,h))},reactDom_production.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},reactDom_production.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var y=h.as,b=c(y,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,T=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?a.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:b,integrity:x,fetchPriority:T}):y==="script"&&a.d.X(p,{crossOrigin:b,integrity:x,fetchPriority:T,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},reactDom_production.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=c(h.as,h.crossOrigin);a.d.M(p,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&a.d.M(p)},reactDom_production.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,b=c(y,h.crossOrigin);a.d.L(p,y,{crossOrigin:b,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},reactDom_production.preloadModule=function(p,h){if(typeof p=="string")if(h){var y=c(h.as,h.crossOrigin);a.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else a.d.m(p)},reactDom_production.requestFormReset=function(p){a.d.r(p)},reactDom_production.unstable_batchedUpdates=function(p,h){return p(h)},reactDom_production.useFormState=function(p,h,y){return u.H.useFormState(p,h,y)},reactDom_production.useFormStatus=function(){return u.H.useHostTransitionStatus()},reactDom_production.version="19.2.4",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var n=requireScheduler(),r=requireReact(),s=requireReactDom();function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function u(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function c(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(d(e)!==e)throw Error(a(188))}function h(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(a(188));return t!==e?null:e}for(var i=e,o=t;;){var m=i.return;if(m===null)break;var g=m.alternate;if(g===null){if(o=m.return,o!==null){i=o;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===i)return p(m),e;if(g===o)return p(m),t;g=g.sibling}throw Error(a(188))}if(i.return!==o.return)i=m,o=g;else{for(var D=!1,L=m.child;L;){if(L===i){D=!0,i=m,o=g;break}if(L===o){D=!0,o=m,i=g;break}L=L.sibling}if(!D){for(L=g.child;L;){if(L===i){D=!0,i=g,o=m;break}if(L===o){D=!0,o=g,i=m;break}L=L.sibling}if(!D)throw Error(a(189))}}if(i.alternate!==o)throw Error(a(190))}if(i.tag!==3)throw Error(a(188));return i.stateNode.current===i?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),N=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),Se=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function we(e){return e===null||typeof e!="object"?null:(e=ee&&e[ee]||e["@@iterator"],typeof e=="function"?e:null)}var he=Symbol.for("react.client.reference");function He(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===he?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case k:return"Profiler";case C:return"StrictMode";case j:return"Suspense";case V:return"SuspenseList";case Se:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case N:return e.displayName||"Context";case I:return(e._context.displayName||"Context")+".Consumer";case F:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return t=e.displayName||null,t!==null?t:He(e.type)||"Memo";case q:t=e._payload,e=e._init;try{return He(e(t))}catch{}}return null}var Je=Array.isArray,de=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Be=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Ue=[],W=-1;function z(e){return{current:e}}function Z(e){0>W||(e.current=Ue[W],Ue[W]=null,W--)}function ce(e,t){W++,Ue[W]=e.current,e.current=t}var Ie=z(null),Fe=z(null),at=z(null),nt=z(null);function Ce(e,t){switch(ce(at,t),ce(Fe,e),ce(Ie,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Hd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Hd(t),e=Gd(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Z(Ie),ce(Ie,e)}function ke(){Z(Ie),Z(Fe),Z(at)}function De(e){e.memoizedState!==null&&ce(nt,e);var t=Ie.current,i=Gd(t,e.type);t!==i&&(ce(Fe,e),ce(Ie,i))}function mt(e){Fe.current===e&&(Z(Ie),Z(Fe)),nt.current===e&&(Z(nt),io._currentValue=me)}var tt,oe;function pe(e){if(tt===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);tt=t&&t[1]||"",oe=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tt+e+oe}var Re=!1;function Ze(e,t){if(!e||Re)return"";Re=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var je=function(){throw Error()};if(Object.defineProperty(je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(je,[])}catch(Me){var Ae=Me}Reflect.construct(e,[],je)}else{try{je.call()}catch(Me){Ae=Me}e.call(je.prototype)}}else{try{throw Error()}catch(Me){Ae=Me}(je=e())&&typeof je.catch=="function"&&je.catch(function(){})}}catch(Me){if(Me&&Ae&&typeof Me.stack=="string")return[Me.stack,Ae.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=o.DetermineComponentFrameRoot(),D=g[0],L=g[1];if(D&&L){var $=D.split(`
`),Ee=L.split(`
`);for(m=o=0;o<$.length&&!$[o].includes("DetermineComponentFrameRoot");)o++;for(;m<Ee.length&&!Ee[m].includes("DetermineComponentFrameRoot");)m++;if(o===$.length||m===Ee.length)for(o=$.length-1,m=Ee.length-1;1<=o&&0<=m&&$[o]!==Ee[m];)m--;for(;1<=o&&0<=m;o--,m--)if($[o]!==Ee[m]){if(o!==1||m!==1)do if(o--,m--,0>m||$[o]!==Ee[m]){var Ne=`
`+$[o].replace(" at new "," at ");return e.displayName&&Ne.includes("<anonymous>")&&(Ne=Ne.replace("<anonymous>",e.displayName)),Ne}while(1<=o&&0<=m);break}}}finally{Re=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?pe(i):""}function Qe(e,t){switch(e.tag){case 26:case 27:case 5:return pe(e.type);case 16:return pe("Lazy");case 13:return e.child!==t&&t!==null?pe("Suspense Fallback"):pe("Suspense");case 19:return pe("SuspenseList");case 0:case 15:return Ze(e.type,!1);case 11:return Ze(e.type.render,!1);case 1:return Ze(e.type,!0);case 31:return pe("Activity");default:return""}}function Ye(e){try{var t="",i=null;do t+=Qe(e,i),i=e,e=e.return;while(e);return t}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var fe=Object.prototype.hasOwnProperty,Le=n.unstable_scheduleCallback,$e=n.unstable_cancelCallback,ze=n.unstable_shouldYield,ft=n.unstable_requestPaint,Dt=n.unstable_now,Rt=n.unstable_getCurrentPriorityLevel,kt=n.unstable_ImmediatePriority,O=n.unstable_UserBlockingPriority,w=n.unstable_NormalPriority,R=n.unstable_LowPriority,K=n.unstable_IdlePriority,ue=n.log,xe=n.unstable_setDisableYieldValue,Pe=null,pt=null;function St(e){if(typeof ue=="function"&&xe(e),pt&&typeof pt.setStrictMode=="function")try{pt.setStrictMode(Pe,e)}catch{}}var Ke=Math.clz32?Math.clz32:Br,Lt=Math.log,_t=Math.LN2;function Br(e){return e>>>=0,e===0?32:31-(Lt(e)/_t|0)|0}var st=256,hr=262144,mr=4194304;function Vn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ir(e,t,i){var o=e.pendingLanes;if(o===0)return 0;var m=0,g=e.suspendedLanes,D=e.pingedLanes;e=e.warmLanes;var L=o&134217727;return L!==0?(o=L&~g,o!==0?m=Vn(o):(D&=L,D!==0?m=Vn(D):i||(i=L&~e,i!==0&&(m=Vn(i))))):(L=o&~g,L!==0?m=Vn(L):D!==0?m=Vn(D):i||(i=o&~e,i!==0&&(m=Vn(i)))),m===0?0:t!==0&&t!==m&&(t&g)===0&&(g=m&-m,i=t&-t,g>=i||g===32&&(i&4194048)!==0)?t:m}function Hn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function va(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G(){var e=mr;return mr<<=1,(mr&62914560)===0&&(mr=4194304),e}function Y(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function We(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function et(e,t,i,o,m,g){var D=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var L=e.entanglements,$=e.expirationTimes,Ee=e.hiddenUpdates;for(i=D&~i;0<i;){var Ne=31-Ke(i),je=1<<Ne;L[Ne]=0,$[Ne]=-1;var Ae=Ee[Ne];if(Ae!==null)for(Ee[Ne]=null,Ne=0;Ne<Ae.length;Ne++){var Me=Ae[Ne];Me!==null&&(Me.lane&=-536870913)}i&=~je}o!==0&&ct(e,o,0),g!==0&&m===0&&e.tag!==0&&(e.suspendedLanes|=g&~(D&~t))}function ct(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-Ke(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|i&261930}function xt(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var o=31-Ke(i),m=1<<o;m&t|e[o]&t&&(e[o]|=t),i&=~m}}function qt(e,t){var i=t&-t;return i=(i&42)!==0?1:fi(i),(i&(e.suspendedLanes|t))!==0?0:i}function fi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function kn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function xr(){var e=Be.p;return e!==0?e:(e=window.event,e===void 0?32:mh(e.type))}function Pr(e,t){var i=Be.p;try{return Be.p=e,t()}finally{Be.p=i}}var Gn=Math.random().toString(36).slice(2),Ht="__reactFiber$"+Gn,Jt="__reactProps$"+Gn,gn="__reactContainer$"+Gn,tr="__reactEvents$"+Gn,Or="__reactListeners$"+Gn,vn="__reactHandles$"+Gn,Pn="__reactResources$"+Gn,Xn="__reactMarker$"+Gn;function ba(e){delete e[Ht],delete e[Jt],delete e[tr],delete e[Or],delete e[vn]}function Tr(e){var t=e[Ht];if(t)return t;for(var i=e.parentNode;i;){if(t=i[gn]||i[Ht]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Zd(e);e!==null;){if(i=e[Ht])return i;e=Zd(e)}return t}e=i,i=e.parentNode}return null}function Kt(e){if(e=e[Ht]||e[gn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Kn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(a(33))}function Dn(e){var t=e[Pn];return t||(t=e[Pn]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ln(e){e[Xn]=!0}var Nr=new Set,Xi={};function pr(e,t){Sr(e,t),Sr(e+"Capture",t)}function Sr(e,t){for(Xi[e]=t,e=0;e<t.length;e++)Nr.add(t[e])}var qr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cs={},Ki={};function co(e){return fe.call(Ki,e)?!0:fe.call(cs,e)?!1:qr.test(e)?Ki[e]=!0:(cs[e]=!0,!1)}function At(e,t,i){if(co(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function Wi(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function nr(e,t,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+o)}}function wn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function di(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fo(e,t,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,g=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return m.call(this)},set:function(D){i=""+D,g.call(this,D)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(D){i=""+D},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xa(e){if(!e._valueTracker){var t=di(e)?"checked":"value";e._valueTracker=fo(e,t,""+e[t])}}function fs(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),o="";return e&&(o=di(e)?e.checked?"true":"false":e.value),e=o,e!==i?(t.setValue(e),!0):!1}function Ut(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Yi=/[\n"\\]/g;function bn(e){return e.replace(Yi,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Er(e,t,i,o,m,g,D,L){e.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?e.type=D:e.removeAttribute("type"),t!=null?D==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+wn(t)):e.value!==""+wn(t)&&(e.value=""+wn(t)):D!=="submit"&&D!=="reset"||e.removeAttribute("value"),t!=null?$i(e,D,wn(t)):i!=null?$i(e,D,wn(i)):o!=null&&e.removeAttribute("value"),m==null&&g!=null&&(e.defaultChecked=!!g),m!=null&&(e.checked=m&&typeof m!="function"&&typeof m!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?e.name=""+wn(L):e.removeAttribute("name")}function Ta(e,t,i,o,m,g,D,L){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),t!=null||i!=null){if(!(g!=="submit"&&g!=="reset"||t!=null)){xa(e);return}i=i!=null?""+wn(i):"",t=t!=null?""+wn(t):i,L||t===e.value||(e.value=t),e.defaultValue=t}o=o??m,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=L?e.checked:!!o,e.defaultChecked=!!o,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(e.name=D),xa(e)}function $i(e,t,i){t==="number"&&Ut(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function gr(e,t,i,o){if(e=e.options,t){t={};for(var m=0;m<i.length;m++)t["$"+i[m]]=!0;for(i=0;i<e.length;i++)m=t.hasOwnProperty("$"+e[i].value),e[i].selected!==m&&(e[i].selected=m),m&&o&&(e[i].defaultSelected=!0)}else{for(i=""+wn(i),t=null,m=0;m<e.length;m++){if(e[m].value===i){e[m].selected=!0,o&&(e[m].defaultSelected=!0);return}t!==null||e[m].disabled||(t=e[m])}t!==null&&(t.selected=!0)}}function ds(e,t,i){if(t!=null&&(t=""+wn(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+wn(i):""}function Qi(e,t,i,o){if(t==null){if(o!=null){if(i!=null)throw Error(a(92));if(Je(o)){if(1<o.length)throw Error(a(93));o=o[0]}i=o}i==null&&(i=""),t=i}i=wn(t),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o),xa(e)}function Lr(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var El=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ot(e,t,i){var o=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,i):typeof i!="number"||i===0||El.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function hs(e,t,i){if(t!=null&&typeof t!="object")throw Error(a(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var m in t)o=t[m],t.hasOwnProperty(m)&&i[m]!==o&&Ot(e,m,o)}else for(var g in t)t.hasOwnProperty(g)&&Ot(e,g,t[g])}function ps(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),On=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yr(e){return On.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function qn(){}var rr=null;function Sa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var jr=null,en=null;function Wn(e){var t=Kt(e);if(t&&(e=t.stateNode)){var i=e[Jt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Er(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+bn(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var o=i[t];if(o!==e&&o.form===e.form){var m=o[Jt]||null;if(!m)throw Error(a(90));Er(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(t=0;t<i.length;t++)o=i[t],o.form===e.form&&fs(o)}break e;case"textarea":ds(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&gr(e,!!i.multiple,t,!1)}}}var zr=!1;function hi(e,t,i){if(zr)return e(t,i);zr=!0;try{var o=e(t);return o}finally{if(zr=!1,(jr!==null||en!==null)&&(tl(),jr&&(t=jr,e=en,en=jr=null,Wn(t),e)))for(t=0;t<e.length;t++)Wn(e[t])}}function Ur(e,t){var i=e.stateNode;if(i===null)return null;var o=i[Jt]||null;if(o===null)return null;i=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(a(231,t,typeof i));return i}var xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gs=!1;if(xn)try{var Mn={};Object.defineProperty(Mn,"passive",{get:function(){gs=!0}}),window.addEventListener("test",Mn,Mn),window.removeEventListener("test",Mn,Mn)}catch{gs=!1}var ir=null,Ea=null,mi=null;function pi(){if(mi)return mi;var e,t=Ea,i=t.length,o,m="value"in ir?ir.value:ir.textContent,g=m.length;for(e=0;e<i&&t[e]===m[e];e++);var D=i-e;for(o=1;o<=D&&t[i-o]===m[g-o];o++);return mi=m.slice(e,1<o?1-o:void 0)}function gi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zi(){return!0}function ho(){return!1}function fn(e){function t(i,o,m,g,D){this._reactName=i,this._targetInst=m,this.type=o,this.nativeEvent=g,this.target=D,this.currentTarget=null;for(var L in e)e.hasOwnProperty(L)&&(i=e[L],this[L]=i?i(g):g[L]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Zi:ho,this.isPropagationStopped=ho,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Zi)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Zi)},persist:function(){},isPersistent:Zi}),t}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wa=fn(Fr),wr=b({},Fr,{view:0,detail:0}),_a=fn(wr),Ji,ys,ea,Aa=b({},wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ea&&(ea&&e.type==="mousemove"?(Ji=e.screenX-ea.screenX,ys=e.screenY-ea.screenY):ys=Ji=0,ea=e),Ji)},movementY:function(e){return"movementY"in e?e.movementY:ys}}),Ra=fn(Aa),vs=b({},Aa,{dataTransfer:0}),mo=fn(vs),Ca=b({},wr,{relatedTarget:0}),yi=fn(Ca),ka=b({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),po=fn(ka),_l=b({},Fr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vi=fn(_l),bs=b({},Fr,{data:0}),Da=fn(bs),xs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ts={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ta(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Tn[e])?!!t[e]:!1}function Vr(){return ta}var go=b({},wr,{key:function(e){if(e.key){var t=xs[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ts[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vr,charCode:function(e){return e.type==="keypress"?gi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ma=fn(go),yo=b({},Aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ss=fn(yo),Ba=b({},wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vr}),Es=fn(Ba),Hr=b({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ws=fn(Hr),_s=b({},Aa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ia=fn(_s),As=b({},Fr,{newState:0,oldState:0}),vo=fn(As),Al=[9,13,27,32],na=xn&&"CompositionEvent"in window,_r=null;xn&&"documentMode"in document&&(_r=document.documentMode);var Rl=xn&&"TextEvent"in window&&!_r,Pa=xn&&(!na||_r&&8<_r&&11>=_r),Oa=" ",bo=!1;function Rs(e,t){switch(e){case"keyup":return Al.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xo(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gr=!1;function To(e,t){switch(e){case"compositionend":return xo(t);case"keypress":return t.which!==32?null:(bo=!0,Oa);case"textInput":return e=t.data,e===Oa&&bo?null:e;default:return null}}function Cl(e,t){if(Gr)return e==="compositionend"||!na&&Rs(e,t)?(e=pi(),mi=Ea=ir=null,Gr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pa&&t.locale!=="ko"?null:t.data;default:return null}}var So={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Na(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!So[e.type]:t==="textarea"}function Cs(e,t,i,o){jr?en?en.push(o):en=[o]:jr=o,t=ll(t,"onChange"),0<t.length&&(i=new wa("onChange","change",null,i,o),e.push({event:i,listeners:t}))}var bi=null,ra=null;function kl(e){Ld(e,0)}function qa(e){var t=Kn(e);if(fs(t))return e}function ia(e,t){if(e==="change")return t}var ar=!1;if(xn){var tn;if(xn){var xi="oninput"in document;if(!xi){var Xr=document.createElement("div");Xr.setAttribute("oninput","return;"),xi=typeof Xr.oninput=="function"}tn=xi}else tn=!1;ar=tn&&(!document.documentMode||9<document.documentMode)}function Eo(){bi&&(bi.detachEvent("onpropertychange",La),ra=bi=null)}function La(e){if(e.propertyName==="value"&&qa(ra)){var t=[];Cs(t,ra,e,Sa(e)),hi(kl,t)}}function wo(e,t,i){e==="focusin"?(Eo(),bi=t,ra=i,bi.attachEvent("onpropertychange",La)):e==="focusout"&&Eo()}function Kr(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qa(ra)}function ks(e,t){if(e==="click")return qa(t)}function Ti(e,t){if(e==="input"||e==="change")return qa(t)}function Ar(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bn=typeof Object.is=="function"?Object.is:Ar;function f(e,t){if(Bn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var m=i[o];if(!fe.call(t,m)||!Bn(e[m],t[m]))return!1}return!0}function v(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function E(e,t){var i=v(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=t&&o>=t)return{node:i,offset:t-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=v(i)}}function A(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?A(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function B(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ut(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Ut(e.document)}return t}function P(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var U=xn&&"documentMode"in document&&11>=document.documentMode,H=null,te=null,ye=null,ne=!1;function J(e,t,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;ne||H==null||H!==Ut(o)||(o=H,"selectionStart"in o&&P(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ye&&f(ye,o)||(ye=o,o=ll(te,"onSelect"),0<o.length&&(t=new wa("onSelect","select",null,t,i),e.push({event:t,listeners:o}),t.target=H)))}function ae(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var le={animationend:ae("Animation","AnimationEnd"),animationiteration:ae("Animation","AnimationIteration"),animationstart:ae("Animation","AnimationStart"),transitionrun:ae("Transition","TransitionRun"),transitionstart:ae("Transition","TransitionStart"),transitioncancel:ae("Transition","TransitionCancel"),transitionend:ae("Transition","TransitionEnd")},re={},ie={};xn&&(ie=document.createElement("div").style,"AnimationEvent"in window||(delete le.animationend.animation,delete le.animationiteration.animation,delete le.animationstart.animation),"TransitionEvent"in window||delete le.transitionend.transition);function be(e){if(re[e])return re[e];if(!le[e])return e;var t=le[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in ie)return re[e]=t[i];return e}var _e=be("animationend"),ve=be("animationiteration"),Oe=be("animationstart"),Ve=be("transitionrun"),rt=be("transitionstart"),it=be("transitioncancel"),Ge=be("transitionend"),lt=new Map,ot="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ot.push("scrollEnd");function Xe(e,t){lt.set(e,t),pr(t,[e])}var ut=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},bt=[],Ct=0,gt=0;function Tt(){for(var e=Ct,t=gt=Ct=0;t<e;){var i=bt[t];bt[t++]=null;var o=bt[t];bt[t++]=null;var m=bt[t];bt[t++]=null;var g=bt[t];if(bt[t++]=null,o!==null&&m!==null){var D=o.pending;D===null?m.next=m:(m.next=D.next,D.next=m),o.pending=m}g!==0&&Rr(i,m,g)}}function Wt(e,t,i,o){bt[Ct++]=e,bt[Ct++]=t,bt[Ct++]=i,bt[Ct++]=o,gt|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function In(e,t,i,o){return Wt(e,t,i,o),Si(e)}function Vt(e,t){return Wt(e,null,null,t),Si(e)}function Rr(e,t,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var m=!1,g=e.return;g!==null;)g.childLanes|=i,o=g.alternate,o!==null&&(o.childLanes|=i),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(m=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,m&&t!==null&&(m=31-Ke(i),e=g.hiddenUpdates,o=e[m],o===null?e[m]=[t]:o.push(t),t.lane=i|536870912),g):null}function Si(e){if(50<Qs)throw Qs=0,Lu=null,Error(a(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ja={};function _h(e,t,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(e,t,i,o){return new _h(e,t,i,o)}function Dl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wr(e,t){var i=e.alternate;return i===null?(i=Yn(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function vc(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function _o(e,t,i,o,m,g){var D=0;if(o=e,typeof e=="function")Dl(e)&&(D=1);else if(typeof e=="string")D=Dm(e,i,Ie.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Se:return e=Yn(31,i,t,m),e.elementType=Se,e.lanes=g,e;case _:return aa(i.children,m,g,t);case C:D=8,m|=24;break;case k:return e=Yn(12,i,t,m|2),e.elementType=k,e.lanes=g,e;case j:return e=Yn(13,i,t,m),e.elementType=j,e.lanes=g,e;case V:return e=Yn(19,i,t,m),e.elementType=V,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N:D=10;break e;case I:D=9;break e;case F:D=11;break e;case M:D=14;break e;case q:D=16,o=null;break e}D=29,i=Error(a(130,e===null?"null":typeof e,"")),o=null}return t=Yn(D,i,t,m),t.elementType=e,t.type=o,t.lanes=g,t}function aa(e,t,i,o){return e=Yn(7,e,o,t),e.lanes=i,e}function Ml(e,t,i){return e=Yn(6,e,null,t),e.lanes=i,e}function bc(e){var t=Yn(18,null,null,0);return t.stateNode=e,t}function Bl(e,t,i){return t=Yn(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var xc=new WeakMap;function sr(e,t){if(typeof e=="object"&&e!==null){var i=xc.get(e);return i!==void 0?i:(t={value:e,source:t,stack:Ye(t)},xc.set(e,t),t)}return{value:e,source:t,stack:Ye(t)}}var za=[],Ua=0,Ao=null,Ds=0,or=[],lr=0,Ei=null,Cr=1,kr="";function Yr(e,t){za[Ua++]=Ds,za[Ua++]=Ao,Ao=e,Ds=t}function Tc(e,t,i){or[lr++]=Cr,or[lr++]=kr,or[lr++]=Ei,Ei=e;var o=Cr;e=kr;var m=32-Ke(o)-1;o&=~(1<<m),i+=1;var g=32-Ke(t)+m;if(30<g){var D=m-m%5;g=(o&(1<<D)-1).toString(32),o>>=D,m-=D,Cr=1<<32-Ke(t)+m|i<<m|o,kr=g+e}else Cr=1<<g|i<<m|o,kr=e}function Il(e){e.return!==null&&(Yr(e,1),Tc(e,1,0))}function Pl(e){for(;e===Ao;)Ao=za[--Ua],za[Ua]=null,Ds=za[--Ua],za[Ua]=null;for(;e===Ei;)Ei=or[--lr],or[lr]=null,kr=or[--lr],or[lr]=null,Cr=or[--lr],or[lr]=null}function Sc(e,t){or[lr++]=Cr,or[lr++]=kr,or[lr++]=Ei,Cr=t.id,kr=t.overflow,Ei=e}var _n=null,nn=null,Nt=!1,wi=null,ur=!1,Ol=Error(a(519));function _i(e){var t=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ms(sr(t,e)),Ol}function Ec(e){var t=e.stateNode,i=e.type,o=e.memoizedProps;switch(t[Ht]=e,t[Jt]=o,i){case"dialog":Bt("cancel",t),Bt("close",t);break;case"iframe":case"object":case"embed":Bt("load",t);break;case"video":case"audio":for(i=0;i<Js.length;i++)Bt(Js[i],t);break;case"source":Bt("error",t);break;case"img":case"image":case"link":Bt("error",t),Bt("load",t);break;case"details":Bt("toggle",t);break;case"input":Bt("invalid",t),Ta(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Bt("invalid",t);break;case"textarea":Bt("invalid",t),Qi(t,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||o.suppressHydrationWarning===!0||Fd(t.textContent,i)?(o.popover!=null&&(Bt("beforetoggle",t),Bt("toggle",t)),o.onScroll!=null&&Bt("scroll",t),o.onScrollEnd!=null&&Bt("scrollend",t),o.onClick!=null&&(t.onclick=qn),t=!0):t=!1,t||_i(e,!0)}function wc(e){for(_n=e.return;_n;)switch(_n.tag){case 5:case 31:case 13:ur=!1;return;case 27:case 3:ur=!0;return;default:_n=_n.return}}function Fa(e){if(e!==_n)return!1;if(!Nt)return wc(e),Nt=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Ju(e.type,e.memoizedProps)),i=!i),i&&nn&&_i(e),wc(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));nn=Qd(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));nn=Qd(e)}else t===27?(t=nn,ji(e.type)?(e=ic,ic=null,nn=e):nn=t):nn=_n?fr(e.stateNode.nextSibling):null;return!0}function sa(){nn=_n=null,Nt=!1}function Nl(){var e=wi;return e!==null&&(Un===null?Un=e:Un.push.apply(Un,e),wi=null),e}function Ms(e){wi===null?wi=[e]:wi.push(e)}var ql=z(null),oa=null,$r=null;function Ai(e,t,i){ce(ql,t._currentValue),t._currentValue=i}function Qr(e){e._currentValue=ql.current,Z(ql)}function Ll(e,t,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===i)break;e=e.return}}function jl(e,t,i,o){var m=e.child;for(m!==null&&(m.return=e);m!==null;){var g=m.dependencies;if(g!==null){var D=m.child;g=g.firstContext;e:for(;g!==null;){var L=g;g=m;for(var $=0;$<t.length;$++)if(L.context===t[$]){g.lanes|=i,L=g.alternate,L!==null&&(L.lanes|=i),Ll(g.return,i,e),o||(D=null);break e}g=L.next}}else if(m.tag===18){if(D=m.return,D===null)throw Error(a(341));D.lanes|=i,g=D.alternate,g!==null&&(g.lanes|=i),Ll(D,i,e),D=null}else D=m.child;if(D!==null)D.return=m;else for(D=m;D!==null;){if(D===e){D=null;break}if(m=D.sibling,m!==null){m.return=D.return,D=m;break}D=D.return}m=D}}function Va(e,t,i,o){e=null;for(var m=t,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var D=m.alternate;if(D===null)throw Error(a(387));if(D=D.memoizedProps,D!==null){var L=m.type;Bn(m.pendingProps.value,D.value)||(e!==null?e.push(L):e=[L])}}else if(m===nt.current){if(D=m.alternate,D===null)throw Error(a(387));D.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(e!==null?e.push(io):e=[io])}m=m.return}e!==null&&jl(t,e,i,o),t.flags|=262144}function Ro(e){for(e=e.firstContext;e!==null;){if(!Bn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function la(e){oa=e,$r=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function An(e){return _c(oa,e)}function Co(e,t){return oa===null&&la(e),_c(e,t)}function _c(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},$r===null){if(e===null)throw Error(a(308));$r=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else $r=$r.next=t;return i}var Ah=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},Rh=n.unstable_scheduleCallback,Ch=n.unstable_NormalPriority,dn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zl(){return{controller:new Ah,data:new Map,refCount:0}}function Bs(e){e.refCount--,e.refCount===0&&Rh(Ch,function(){e.controller.abort()})}var Is=null,Ul=0,Ha=0,Ga=null;function kh(e,t){if(Is===null){var i=Is=[];Ul=0,Ha=Hu(),Ga={status:"pending",value:void 0,then:function(o){i.push(o)}}}return Ul++,t.then(Ac,Ac),t}function Ac(){if(--Ul===0&&Is!==null){Ga!==null&&(Ga.status="fulfilled");var e=Is;Is=null,Ha=0,Ga=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Dh(e,t){var i=[],o={status:"pending",value:null,reason:null,then:function(m){i.push(m)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var m=0;m<i.length;m++)(0,i[m])(t)},function(m){for(o.status="rejected",o.reason=m,m=0;m<i.length;m++)(0,i[m])(void 0)}),o}var Rc=de.S;de.S=function(e,t){dd=Dt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&kh(e,t),Rc!==null&&Rc(e,t)};var ua=z(null);function Fl(){var e=ua.current;return e!==null?e:Zt.pooledCache}function ko(e,t){t===null?ce(ua,ua.current):ce(ua,t.pool)}function Cc(){var e=Fl();return e===null?null:{parent:dn._currentValue,pool:e}}var Xa=Error(a(460)),Vl=Error(a(474)),Do=Error(a(542)),Mo={then:function(){}};function kc(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Dc(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(qn,qn),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Bc(e),e;default:if(typeof t.status=="string")t.then(qn,qn);else{if(e=Zt,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var m=t;m.status="fulfilled",m.value=o}},function(o){if(t.status==="pending"){var m=t;m.status="rejected",m.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Bc(e),e}throw fa=t,Xa}}function ca(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(fa=i,Xa):i}}var fa=null;function Mc(){if(fa===null)throw Error(a(459));var e=fa;return fa=null,e}function Bc(e){if(e===Xa||e===Do)throw Error(a(483))}var Ka=null,Ps=0;function Bo(e){var t=Ps;return Ps+=1,Ka===null&&(Ka=[]),Dc(Ka,e,t)}function Os(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Io(e,t){throw t.$$typeof===x?Error(a(525)):(e=Object.prototype.toString.call(t),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ic(e){function t(ge,se){if(e){var Te=ge.deletions;Te===null?(ge.deletions=[se],ge.flags|=16):Te.push(se)}}function i(ge,se){if(!e)return null;for(;se!==null;)t(ge,se),se=se.sibling;return null}function o(ge){for(var se=new Map;ge!==null;)ge.key!==null?se.set(ge.key,ge):se.set(ge.index,ge),ge=ge.sibling;return se}function m(ge,se){return ge=Wr(ge,se),ge.index=0,ge.sibling=null,ge}function g(ge,se,Te){return ge.index=Te,e?(Te=ge.alternate,Te!==null?(Te=Te.index,Te<se?(ge.flags|=67108866,se):Te):(ge.flags|=67108866,se)):(ge.flags|=1048576,se)}function D(ge){return e&&ge.alternate===null&&(ge.flags|=67108866),ge}function L(ge,se,Te,qe){return se===null||se.tag!==6?(se=Ml(Te,ge.mode,qe),se.return=ge,se):(se=m(se,Te),se.return=ge,se)}function $(ge,se,Te,qe){var yt=Te.type;return yt===_?Ne(ge,se,Te.props.children,qe,Te.key):se!==null&&(se.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===q&&ca(yt)===se.type)?(se=m(se,Te.props),Os(se,Te),se.return=ge,se):(se=_o(Te.type,Te.key,Te.props,null,ge.mode,qe),Os(se,Te),se.return=ge,se)}function Ee(ge,se,Te,qe){return se===null||se.tag!==4||se.stateNode.containerInfo!==Te.containerInfo||se.stateNode.implementation!==Te.implementation?(se=Bl(Te,ge.mode,qe),se.return=ge,se):(se=m(se,Te.children||[]),se.return=ge,se)}function Ne(ge,se,Te,qe,yt){return se===null||se.tag!==7?(se=aa(Te,ge.mode,qe,yt),se.return=ge,se):(se=m(se,Te),se.return=ge,se)}function je(ge,se,Te){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=Ml(""+se,ge.mode,Te),se.return=ge,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case T:return Te=_o(se.type,se.key,se.props,null,ge.mode,Te),Os(Te,se),Te.return=ge,Te;case S:return se=Bl(se,ge.mode,Te),se.return=ge,se;case q:return se=ca(se),je(ge,se,Te)}if(Je(se)||we(se))return se=aa(se,ge.mode,Te,null),se.return=ge,se;if(typeof se.then=="function")return je(ge,Bo(se),Te);if(se.$$typeof===N)return je(ge,Co(ge,se),Te);Io(ge,se)}return null}function Ae(ge,se,Te,qe){var yt=se!==null?se.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return yt!==null?null:L(ge,se,""+Te,qe);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case T:return Te.key===yt?$(ge,se,Te,qe):null;case S:return Te.key===yt?Ee(ge,se,Te,qe):null;case q:return Te=ca(Te),Ae(ge,se,Te,qe)}if(Je(Te)||we(Te))return yt!==null?null:Ne(ge,se,Te,qe,null);if(typeof Te.then=="function")return Ae(ge,se,Bo(Te),qe);if(Te.$$typeof===N)return Ae(ge,se,Co(ge,Te),qe);Io(ge,Te)}return null}function Me(ge,se,Te,qe,yt){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return ge=ge.get(Te)||null,L(se,ge,""+qe,yt);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case T:return ge=ge.get(qe.key===null?Te:qe.key)||null,$(se,ge,qe,yt);case S:return ge=ge.get(qe.key===null?Te:qe.key)||null,Ee(se,ge,qe,yt);case q:return qe=ca(qe),Me(ge,se,Te,qe,yt)}if(Je(qe)||we(qe))return ge=ge.get(Te)||null,Ne(se,ge,qe,yt,null);if(typeof qe.then=="function")return Me(ge,se,Te,Bo(qe),yt);if(qe.$$typeof===N)return Me(ge,se,Te,Co(se,qe),yt);Io(se,qe)}return null}function dt(ge,se,Te,qe){for(var yt=null,jt=null,ht=se,wt=se=0,Pt=null;ht!==null&&wt<Te.length;wt++){ht.index>wt?(Pt=ht,ht=null):Pt=ht.sibling;var zt=Ae(ge,ht,Te[wt],qe);if(zt===null){ht===null&&(ht=Pt);break}e&&ht&&zt.alternate===null&&t(ge,ht),se=g(zt,se,wt),jt===null?yt=zt:jt.sibling=zt,jt=zt,ht=Pt}if(wt===Te.length)return i(ge,ht),Nt&&Yr(ge,wt),yt;if(ht===null){for(;wt<Te.length;wt++)ht=je(ge,Te[wt],qe),ht!==null&&(se=g(ht,se,wt),jt===null?yt=ht:jt.sibling=ht,jt=ht);return Nt&&Yr(ge,wt),yt}for(ht=o(ht);wt<Te.length;wt++)Pt=Me(ht,ge,wt,Te[wt],qe),Pt!==null&&(e&&Pt.alternate!==null&&ht.delete(Pt.key===null?wt:Pt.key),se=g(Pt,se,wt),jt===null?yt=Pt:jt.sibling=Pt,jt=Pt);return e&&ht.forEach(function(Hi){return t(ge,Hi)}),Nt&&Yr(ge,wt),yt}function vt(ge,se,Te,qe){if(Te==null)throw Error(a(151));for(var yt=null,jt=null,ht=se,wt=se=0,Pt=null,zt=Te.next();ht!==null&&!zt.done;wt++,zt=Te.next()){ht.index>wt?(Pt=ht,ht=null):Pt=ht.sibling;var Hi=Ae(ge,ht,zt.value,qe);if(Hi===null){ht===null&&(ht=Pt);break}e&&ht&&Hi.alternate===null&&t(ge,ht),se=g(Hi,se,wt),jt===null?yt=Hi:jt.sibling=Hi,jt=Hi,ht=Pt}if(zt.done)return i(ge,ht),Nt&&Yr(ge,wt),yt;if(ht===null){for(;!zt.done;wt++,zt=Te.next())zt=je(ge,zt.value,qe),zt!==null&&(se=g(zt,se,wt),jt===null?yt=zt:jt.sibling=zt,jt=zt);return Nt&&Yr(ge,wt),yt}for(ht=o(ht);!zt.done;wt++,zt=Te.next())zt=Me(ht,ge,wt,zt.value,qe),zt!==null&&(e&&zt.alternate!==null&&ht.delete(zt.key===null?wt:zt.key),se=g(zt,se,wt),jt===null?yt=zt:jt.sibling=zt,jt=zt);return e&&ht.forEach(function(Um){return t(ge,Um)}),Nt&&Yr(ge,wt),yt}function Qt(ge,se,Te,qe){if(typeof Te=="object"&&Te!==null&&Te.type===_&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case T:e:{for(var yt=Te.key;se!==null;){if(se.key===yt){if(yt=Te.type,yt===_){if(se.tag===7){i(ge,se.sibling),qe=m(se,Te.props.children),qe.return=ge,ge=qe;break e}}else if(se.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===q&&ca(yt)===se.type){i(ge,se.sibling),qe=m(se,Te.props),Os(qe,Te),qe.return=ge,ge=qe;break e}i(ge,se);break}else t(ge,se);se=se.sibling}Te.type===_?(qe=aa(Te.props.children,ge.mode,qe,Te.key),qe.return=ge,ge=qe):(qe=_o(Te.type,Te.key,Te.props,null,ge.mode,qe),Os(qe,Te),qe.return=ge,ge=qe)}return D(ge);case S:e:{for(yt=Te.key;se!==null;){if(se.key===yt)if(se.tag===4&&se.stateNode.containerInfo===Te.containerInfo&&se.stateNode.implementation===Te.implementation){i(ge,se.sibling),qe=m(se,Te.children||[]),qe.return=ge,ge=qe;break e}else{i(ge,se);break}else t(ge,se);se=se.sibling}qe=Bl(Te,ge.mode,qe),qe.return=ge,ge=qe}return D(ge);case q:return Te=ca(Te),Qt(ge,se,Te,qe)}if(Je(Te))return dt(ge,se,Te,qe);if(we(Te)){if(yt=we(Te),typeof yt!="function")throw Error(a(150));return Te=yt.call(Te),vt(ge,se,Te,qe)}if(typeof Te.then=="function")return Qt(ge,se,Bo(Te),qe);if(Te.$$typeof===N)return Qt(ge,se,Co(ge,Te),qe);Io(ge,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint"?(Te=""+Te,se!==null&&se.tag===6?(i(ge,se.sibling),qe=m(se,Te),qe.return=ge,ge=qe):(i(ge,se),qe=Ml(Te,ge.mode,qe),qe.return=ge,ge=qe),D(ge)):i(ge,se)}return function(ge,se,Te,qe){try{Ps=0;var yt=Qt(ge,se,Te,qe);return Ka=null,yt}catch(ht){if(ht===Xa||ht===Do)throw ht;var jt=Yn(29,ht,null,ge.mode);return jt.lanes=qe,jt.return=ge,jt}finally{}}}var da=Ic(!0),Pc=Ic(!1),Ri=!1;function Hl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ci(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ki(e,t,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Ft&2)!==0){var m=o.pending;return m===null?t.next=t:(t.next=m.next,m.next=t),o.pending=t,t=Si(e),Rr(e,null,i),t}return Wt(e,o,t,i),Si(e)}function Ns(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,xt(e,i)}}function Xl(e,t){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var m=null,g=null;if(i=i.firstBaseUpdate,i!==null){do{var D={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};g===null?m=g=D:g=g.next=D,i=i.next}while(i!==null);g===null?m=g=t:g=g.next=t}else m=g=t;i={baseState:o.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var Kl=!1;function qs(){if(Kl){var e=Ga;if(e!==null)throw e}}function Ls(e,t,i,o){Kl=!1;var m=e.updateQueue;Ri=!1;var g=m.firstBaseUpdate,D=m.lastBaseUpdate,L=m.shared.pending;if(L!==null){m.shared.pending=null;var $=L,Ee=$.next;$.next=null,D===null?g=Ee:D.next=Ee,D=$;var Ne=e.alternate;Ne!==null&&(Ne=Ne.updateQueue,L=Ne.lastBaseUpdate,L!==D&&(L===null?Ne.firstBaseUpdate=Ee:L.next=Ee,Ne.lastBaseUpdate=$))}if(g!==null){var je=m.baseState;D=0,Ne=Ee=$=null,L=g;do{var Ae=L.lane&-536870913,Me=Ae!==L.lane;if(Me?(It&Ae)===Ae:(o&Ae)===Ae){Ae!==0&&Ae===Ha&&(Kl=!0),Ne!==null&&(Ne=Ne.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var dt=e,vt=L;Ae=t;var Qt=i;switch(vt.tag){case 1:if(dt=vt.payload,typeof dt=="function"){je=dt.call(Qt,je,Ae);break e}je=dt;break e;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=vt.payload,Ae=typeof dt=="function"?dt.call(Qt,je,Ae):dt,Ae==null)break e;je=b({},je,Ae);break e;case 2:Ri=!0}}Ae=L.callback,Ae!==null&&(e.flags|=64,Me&&(e.flags|=8192),Me=m.callbacks,Me===null?m.callbacks=[Ae]:Me.push(Ae))}else Me={lane:Ae,tag:L.tag,payload:L.payload,callback:L.callback,next:null},Ne===null?(Ee=Ne=Me,$=je):Ne=Ne.next=Me,D|=Ae;if(L=L.next,L===null){if(L=m.shared.pending,L===null)break;Me=L,L=Me.next,Me.next=null,m.lastBaseUpdate=Me,m.shared.pending=null}}while(!0);Ne===null&&($=je),m.baseState=$,m.firstBaseUpdate=Ee,m.lastBaseUpdate=Ne,g===null&&(m.shared.lanes=0),Pi|=D,e.lanes=D,e.memoizedState=je}}function Oc(e,t){if(typeof e!="function")throw Error(a(191,e));e.call(t)}function Nc(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Oc(i[e],t)}var Wa=z(null),Po=z(0);function qc(e,t){e=si,ce(Po,e),ce(Wa,t),si=e|t.baseLanes}function Wl(){ce(Po,si),ce(Wa,Wa.current)}function Yl(){si=Po.current,Z(Wa),Z(Po)}var $n=z(null),cr=null;function Di(e){var t=e.alternate;ce(un,un.current&1),ce($n,e),cr===null&&(t===null||Wa.current!==null||t.memoizedState!==null)&&(cr=e)}function $l(e){ce(un,un.current),ce($n,e),cr===null&&(cr=e)}function Lc(e){e.tag===22?(ce(un,un.current),ce($n,e),cr===null&&(cr=e)):Mi()}function Mi(){ce(un,un.current),ce($n,$n.current)}function Qn(e){Z($n),cr===e&&(cr=null),Z(un)}var un=z(0);function Oo(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||nc(i)||rc(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zr=0,Et=null,Yt=null,hn=null,No=!1,Ya=!1,ha=!1,qo=0,js=0,$a=null,Mh=0;function sn(){throw Error(a(321))}function Ql(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Bn(e[i],t[i]))return!1;return!0}function Zl(e,t,i,o,m,g){return Zr=g,Et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,de.H=e===null||e.memoizedState===null?Sf:hu,ha=!1,g=i(o,m),ha=!1,Ya&&(g=zc(t,i,o,m)),jc(e),g}function jc(e){de.H=Fs;var t=Yt!==null&&Yt.next!==null;if(Zr=0,hn=Yt=Et=null,No=!1,js=0,$a=null,t)throw Error(a(300));e===null||mn||(e=e.dependencies,e!==null&&Ro(e)&&(mn=!0))}function zc(e,t,i,o){Et=e;var m=0;do{if(Ya&&($a=null),js=0,Ya=!1,25<=m)throw Error(a(301));if(m+=1,hn=Yt=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}de.H=Ef,g=t(i,o)}while(Ya);return g}function Bh(){var e=de.H,t=e.useState()[0];return t=typeof t.then=="function"?zs(t):t,e=e.useState()[0],(Yt!==null?Yt.memoizedState:null)!==e&&(Et.flags|=1024),t}function Jl(){var e=qo!==0;return qo=0,e}function eu(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function tu(e){if(No){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}No=!1}Zr=0,hn=Yt=Et=null,Ya=!1,js=qo=0,$a=null}function Nn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Et.memoizedState=hn=e:hn=hn.next=e,hn}function cn(){if(Yt===null){var e=Et.alternate;e=e!==null?e.memoizedState:null}else e=Yt.next;var t=hn===null?Et.memoizedState:hn.next;if(t!==null)hn=t,Yt=e;else{if(e===null)throw Et.alternate===null?Error(a(467)):Error(a(310));Yt=e,e={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},hn===null?Et.memoizedState=hn=e:hn=hn.next=e}return hn}function Lo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zs(e){var t=js;return js+=1,$a===null&&($a=[]),e=Dc($a,e,t),t=Et,(hn===null?t.memoizedState:hn.next)===null&&(t=t.alternate,de.H=t===null||t.memoizedState===null?Sf:hu),e}function jo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return zs(e);if(e.$$typeof===N)return An(e)}throw Error(a(438,String(e)))}function nu(e){var t=null,i=Et.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var o=Et.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(m){return m.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Lo(),Et.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),o=0;o<e;o++)i[o]=Q;return t.index++,i}function Jr(e,t){return typeof t=="function"?t(e):t}function zo(e){var t=cn();return ru(t,Yt,e)}function ru(e,t,i){var o=e.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=i;var m=e.baseQueue,g=o.pending;if(g!==null){if(m!==null){var D=m.next;m.next=g.next,g.next=D}t.baseQueue=m=g,o.pending=null}if(g=e.baseState,m===null)e.memoizedState=g;else{t=m.next;var L=D=null,$=null,Ee=t,Ne=!1;do{var je=Ee.lane&-536870913;if(je!==Ee.lane?(It&je)===je:(Zr&je)===je){var Ae=Ee.revertLane;if(Ae===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null}),je===Ha&&(Ne=!0);else if((Zr&Ae)===Ae){Ee=Ee.next,Ae===Ha&&(Ne=!0);continue}else je={lane:0,revertLane:Ee.revertLane,gesture:null,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},$===null?(L=$=je,D=g):$=$.next=je,Et.lanes|=Ae,Pi|=Ae;je=Ee.action,ha&&i(g,je),g=Ee.hasEagerState?Ee.eagerState:i(g,je)}else Ae={lane:je,revertLane:Ee.revertLane,gesture:Ee.gesture,action:Ee.action,hasEagerState:Ee.hasEagerState,eagerState:Ee.eagerState,next:null},$===null?(L=$=Ae,D=g):$=$.next=Ae,Et.lanes|=je,Pi|=je;Ee=Ee.next}while(Ee!==null&&Ee!==t);if($===null?D=g:$.next=L,!Bn(g,e.memoizedState)&&(mn=!0,Ne&&(i=Ga,i!==null)))throw i;e.memoizedState=g,e.baseState=D,e.baseQueue=$,o.lastRenderedState=g}return m===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function iu(e){var t=cn(),i=t.queue;if(i===null)throw Error(a(311));i.lastRenderedReducer=e;var o=i.dispatch,m=i.pending,g=t.memoizedState;if(m!==null){i.pending=null;var D=m=m.next;do g=e(g,D.action),D=D.next;while(D!==m);Bn(g,t.memoizedState)||(mn=!0),t.memoizedState=g,t.baseQueue===null&&(t.baseState=g),i.lastRenderedState=g}return[g,o]}function Uc(e,t,i){var o=Et,m=cn(),g=Nt;if(g){if(i===void 0)throw Error(a(407));i=i()}else i=t();var D=!Bn((Yt||m).memoizedState,i);if(D&&(m.memoizedState=i,mn=!0),m=m.queue,ou(Hc.bind(null,o,m,e),[e]),m.getSnapshot!==t||D||hn!==null&&hn.memoizedState.tag&1){if(o.flags|=2048,Qa(9,{destroy:void 0},Vc.bind(null,o,m,i,t),null),Zt===null)throw Error(a(349));g||(Zr&127)!==0||Fc(o,t,i)}return i}function Fc(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Et.updateQueue,t===null?(t=Lo(),Et.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Vc(e,t,i,o){t.value=i,t.getSnapshot=o,Gc(t)&&Xc(e)}function Hc(e,t,i){return i(function(){Gc(t)&&Xc(e)})}function Gc(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Bn(e,i)}catch{return!0}}function Xc(e){var t=Vt(e,2);t!==null&&Fn(t,e,2)}function au(e){var t=Nn();if(typeof e=="function"){var i=e;if(e=i(),ha){St(!0);try{i()}finally{St(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:e},t}function Kc(e,t,i,o){return e.baseState=i,ru(e,Yt,typeof o=="function"?o:Jr)}function Ih(e,t,i,o,m){if(Vo(e))throw Error(a(485));if(e=t.action,e!==null){var g={payload:m,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){g.listeners.push(D)}};de.T!==null?i(!0):g.isTransition=!1,o(g),i=t.pending,i===null?(g.next=t.pending=g,Wc(t,g)):(g.next=i.next,t.pending=i.next=g)}}function Wc(e,t){var i=t.action,o=t.payload,m=e.state;if(t.isTransition){var g=de.T,D={};de.T=D;try{var L=i(m,o),$=de.S;$!==null&&$(D,L),Yc(e,t,L)}catch(Ee){su(e,t,Ee)}finally{g!==null&&D.types!==null&&(g.types=D.types),de.T=g}}else try{g=i(m,o),Yc(e,t,g)}catch(Ee){su(e,t,Ee)}}function Yc(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){$c(e,t,o)},function(o){return su(e,t,o)}):$c(e,t,i)}function $c(e,t,i){t.status="fulfilled",t.value=i,Qc(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,Wc(e,i)))}function su(e,t,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=i,Qc(t),t=t.next;while(t!==o)}e.action=null}function Qc(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Zc(e,t){return t}function Jc(e,t){if(Nt){var i=Zt.formState;if(i!==null){e:{var o=Et;if(Nt){if(nn){t:{for(var m=nn,g=ur;m.nodeType!==8;){if(!g){m=null;break t}if(m=fr(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){nn=fr(m.nextSibling),o=m.data==="F!";break e}}_i(o)}o=!1}o&&(t=i[0])}}return i=Nn(),i.memoizedState=i.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zc,lastRenderedState:t},i.queue=o,i=bf.bind(null,Et,o),o.dispatch=i,o=au(!1),g=du.bind(null,Et,!1,o.queue),o=Nn(),m={state:t,dispatch:null,action:e,pending:null},o.queue=m,i=Ih.bind(null,Et,m,g,i),m.dispatch=i,o.memoizedState=e,[t,i,!1]}function ef(e){var t=cn();return tf(t,Yt,e)}function tf(e,t,i){if(t=ru(e,t,Zc)[0],e=zo(Jr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=zs(t)}catch(D){throw D===Xa?Do:D}else o=t;t=cn();var m=t.queue,g=m.dispatch;return i!==t.memoizedState&&(Et.flags|=2048,Qa(9,{destroy:void 0},Ph.bind(null,m,i),null)),[o,g,e]}function Ph(e,t){e.action=t}function nf(e){var t=cn(),i=Yt;if(i!==null)return tf(t,i,e);cn(),t=t.memoizedState,i=cn();var o=i.queue.dispatch;return i.memoizedState=e,[t,o,!1]}function Qa(e,t,i,o){return e={tag:e,create:i,deps:o,inst:t,next:null},t=Et.updateQueue,t===null&&(t=Lo(),Et.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,t.lastEffect=e),e}function rf(){return cn().memoizedState}function Uo(e,t,i,o){var m=Nn();Et.flags|=e,m.memoizedState=Qa(1|t,{destroy:void 0},i,o===void 0?null:o)}function Fo(e,t,i,o){var m=cn();o=o===void 0?null:o;var g=m.memoizedState.inst;Yt!==null&&o!==null&&Ql(o,Yt.memoizedState.deps)?m.memoizedState=Qa(t,g,i,o):(Et.flags|=e,m.memoizedState=Qa(1|t,g,i,o))}function af(e,t){Uo(8390656,8,e,t)}function ou(e,t){Fo(2048,8,e,t)}function Oh(e){Et.flags|=4;var t=Et.updateQueue;if(t===null)t=Lo(),Et.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function sf(e){var t=cn().memoizedState;return Oh({ref:t,nextImpl:e}),function(){if((Ft&2)!==0)throw Error(a(440));return t.impl.apply(void 0,arguments)}}function of(e,t){return Fo(4,2,e,t)}function lf(e,t){return Fo(4,4,e,t)}function uf(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cf(e,t,i){i=i!=null?i.concat([e]):null,Fo(4,4,uf.bind(null,t,e),i)}function lu(){}function ff(e,t){var i=cn();t=t===void 0?null:t;var o=i.memoizedState;return t!==null&&Ql(t,o[1])?o[0]:(i.memoizedState=[e,t],e)}function df(e,t){var i=cn();t=t===void 0?null:t;var o=i.memoizedState;if(t!==null&&Ql(t,o[1]))return o[0];if(o=e(),ha){St(!0);try{e()}finally{St(!1)}}return i.memoizedState=[o,t],o}function uu(e,t,i){return i===void 0||(Zr&1073741824)!==0&&(It&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=md(),Et.lanes|=e,Pi|=e,i)}function hf(e,t,i,o){return Bn(i,t)?i:Wa.current!==null?(e=uu(e,i,o),Bn(e,t)||(mn=!0),e):(Zr&42)===0||(Zr&1073741824)!==0&&(It&261930)===0?(mn=!0,e.memoizedState=i):(e=md(),Et.lanes|=e,Pi|=e,t)}function mf(e,t,i,o,m){var g=Be.p;Be.p=g!==0&&8>g?g:8;var D=de.T,L={};de.T=L,du(e,!1,t,i);try{var $=m(),Ee=de.S;if(Ee!==null&&Ee(L,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var Ne=Dh($,o);Us(e,t,Ne,er(e))}else Us(e,t,o,er(e))}catch(je){Us(e,t,{then:function(){},status:"rejected",reason:je},er())}finally{Be.p=g,D!==null&&L.types!==null&&(D.types=L.types),de.T=D}}function Nh(){}function cu(e,t,i,o){if(e.tag!==5)throw Error(a(476));var m=pf(e).queue;mf(e,m,t,me,i===null?Nh:function(){return gf(e),i(o)})}function pf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:me},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function gf(e){var t=pf(e);t.next===null&&(t=e.alternate.memoizedState),Us(e,t.next.queue,{},er())}function fu(){return An(io)}function yf(){return cn().memoizedState}function vf(){return cn().memoizedState}function qh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=er();e=Ci(i);var o=ki(t,e,i);o!==null&&(Fn(o,t,i),Ns(o,t,i)),t={cache:zl()},e.payload=t;return}t=t.return}}function Lh(e,t,i){var o=er();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Vo(e)?xf(t,i):(i=In(e,t,i,o),i!==null&&(Fn(i,e,o),Tf(i,t,o)))}function bf(e,t,i){var o=er();Us(e,t,i,o)}function Us(e,t,i,o){var m={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Vo(e))xf(t,m);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=t.lastRenderedReducer,g!==null))try{var D=t.lastRenderedState,L=g(D,i);if(m.hasEagerState=!0,m.eagerState=L,Bn(L,D))return Wt(e,t,m,0),Zt===null&&Tt(),!1}catch{}finally{}if(i=In(e,t,m,o),i!==null)return Fn(i,e,o),Tf(i,t,o),!0}return!1}function du(e,t,i,o){if(o={lane:2,revertLane:Hu(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Vo(e)){if(t)throw Error(a(479))}else t=In(e,i,o,2),t!==null&&Fn(t,e,2)}function Vo(e){var t=e.alternate;return e===Et||t!==null&&t===Et}function xf(e,t){Ya=No=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Tf(e,t,i){if((i&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,i|=o,t.lanes=i,xt(e,i)}}var Fs={readContext:An,use:jo,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useLayoutEffect:sn,useInsertionEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useSyncExternalStore:sn,useId:sn,useHostTransitionStatus:sn,useFormState:sn,useActionState:sn,useOptimistic:sn,useMemoCache:sn,useCacheRefresh:sn};Fs.useEffectEvent=sn;var Sf={readContext:An,use:jo,useCallback:function(e,t){return Nn().memoizedState=[e,t===void 0?null:t],e},useContext:An,useEffect:af,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,Uo(4194308,4,uf.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Uo(4194308,4,e,t)},useInsertionEffect:function(e,t){Uo(4,2,e,t)},useMemo:function(e,t){var i=Nn();t=t===void 0?null:t;var o=e();if(ha){St(!0);try{e()}finally{St(!1)}}return i.memoizedState=[o,t],o},useReducer:function(e,t,i){var o=Nn();if(i!==void 0){var m=i(t);if(ha){St(!0);try{i(t)}finally{St(!1)}}}else m=t;return o.memoizedState=o.baseState=m,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:m},o.queue=e,e=e.dispatch=Lh.bind(null,Et,e),[o.memoizedState,e]},useRef:function(e){var t=Nn();return e={current:e},t.memoizedState=e},useState:function(e){e=au(e);var t=e.queue,i=bf.bind(null,Et,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:lu,useDeferredValue:function(e,t){var i=Nn();return uu(i,e,t)},useTransition:function(){var e=au(!1);return e=mf.bind(null,Et,e.queue,!0,!1),Nn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var o=Et,m=Nn();if(Nt){if(i===void 0)throw Error(a(407));i=i()}else{if(i=t(),Zt===null)throw Error(a(349));(It&127)!==0||Fc(o,t,i)}m.memoizedState=i;var g={value:i,getSnapshot:t};return m.queue=g,af(Hc.bind(null,o,g,e),[e]),o.flags|=2048,Qa(9,{destroy:void 0},Vc.bind(null,o,g,i,t),null),i},useId:function(){var e=Nn(),t=Zt.identifierPrefix;if(Nt){var i=kr,o=Cr;i=(o&~(1<<32-Ke(o)-1)).toString(32)+i,t="_"+t+"R_"+i,i=qo++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=Mh++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:fu,useFormState:Jc,useActionState:Jc,useOptimistic:function(e){var t=Nn();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=du.bind(null,Et,!0,i),i.dispatch=t,[e,t]},useMemoCache:nu,useCacheRefresh:function(){return Nn().memoizedState=qh.bind(null,Et)},useEffectEvent:function(e){var t=Nn(),i={impl:e};return t.memoizedState=i,function(){if((Ft&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}},hu={readContext:An,use:jo,useCallback:ff,useContext:An,useEffect:ou,useImperativeHandle:cf,useInsertionEffect:of,useLayoutEffect:lf,useMemo:df,useReducer:zo,useRef:rf,useState:function(){return zo(Jr)},useDebugValue:lu,useDeferredValue:function(e,t){var i=cn();return hf(i,Yt.memoizedState,e,t)},useTransition:function(){var e=zo(Jr)[0],t=cn().memoizedState;return[typeof e=="boolean"?e:zs(e),t]},useSyncExternalStore:Uc,useId:yf,useHostTransitionStatus:fu,useFormState:ef,useActionState:ef,useOptimistic:function(e,t){var i=cn();return Kc(i,Yt,e,t)},useMemoCache:nu,useCacheRefresh:vf};hu.useEffectEvent=sf;var Ef={readContext:An,use:jo,useCallback:ff,useContext:An,useEffect:ou,useImperativeHandle:cf,useInsertionEffect:of,useLayoutEffect:lf,useMemo:df,useReducer:iu,useRef:rf,useState:function(){return iu(Jr)},useDebugValue:lu,useDeferredValue:function(e,t){var i=cn();return Yt===null?uu(i,e,t):hf(i,Yt.memoizedState,e,t)},useTransition:function(){var e=iu(Jr)[0],t=cn().memoizedState;return[typeof e=="boolean"?e:zs(e),t]},useSyncExternalStore:Uc,useId:yf,useHostTransitionStatus:fu,useFormState:nf,useActionState:nf,useOptimistic:function(e,t){var i=cn();return Yt!==null?Kc(i,Yt,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:nu,useCacheRefresh:vf};Ef.useEffectEvent=sf;function mu(e,t,i,o){t=e.memoizedState,i=i(o,t),i=i==null?t:b({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var pu={enqueueSetState:function(e,t,i){e=e._reactInternals;var o=er(),m=Ci(o);m.payload=t,i!=null&&(m.callback=i),t=ki(e,m,o),t!==null&&(Fn(t,e,o),Ns(t,e,o))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var o=er(),m=Ci(o);m.tag=1,m.payload=t,i!=null&&(m.callback=i),t=ki(e,m,o),t!==null&&(Fn(t,e,o),Ns(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=er(),o=Ci(i);o.tag=2,t!=null&&(o.callback=t),t=ki(e,o,i),t!==null&&(Fn(t,e,i),Ns(t,e,i))}};function wf(e,t,i,o,m,g,D){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,g,D):t.prototype&&t.prototype.isPureReactComponent?!f(i,o)||!f(m,g):!0}function _f(e,t,i,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,o),t.state!==e&&pu.enqueueReplaceState(t,t.state,null)}function ma(e,t){var i=t;if("ref"in t){i={};for(var o in t)o!=="ref"&&(i[o]=t[o])}if(e=e.defaultProps){i===t&&(i=b({},i));for(var m in e)i[m]===void 0&&(i[m]=e[m])}return i}function Af(e){ut(e)}function Rf(e){console.error(e)}function Cf(e){ut(e)}function Ho(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function kf(e,t,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function gu(e,t,i){return i=Ci(i),i.tag=3,i.payload={element:null},i.callback=function(){Ho(e,t)},i}function Df(e){return e=Ci(e),e.tag=3,e}function Mf(e,t,i,o){var m=i.type.getDerivedStateFromError;if(typeof m=="function"){var g=o.value;e.payload=function(){return m(g)},e.callback=function(){kf(t,i,o)}}var D=i.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(e.callback=function(){kf(t,i,o),typeof m!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var L=o.stack;this.componentDidCatch(o.value,{componentStack:L!==null?L:""})})}function jh(e,t,i,o,m){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=i.alternate,t!==null&&Va(t,i,m,!0),i=$n.current,i!==null){switch(i.tag){case 31:case 13:return cr===null?nl():i.alternate===null&&on===0&&(on=3),i.flags&=-257,i.flags|=65536,i.lanes=m,o===Mo?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([o]):t.add(o),Uu(e,o,m)),!1;case 22:return i.flags|=65536,o===Mo?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([o]):i.add(o)),Uu(e,o,m)),!1}throw Error(a(435,i.tag))}return Uu(e,o,m),nl(),!1}if(Nt)return t=$n.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=m,o!==Ol&&(e=Error(a(422),{cause:o}),Ms(sr(e,i)))):(o!==Ol&&(t=Error(a(423),{cause:o}),Ms(sr(t,i))),e=e.current.alternate,e.flags|=65536,m&=-m,e.lanes|=m,o=sr(o,i),m=gu(e.stateNode,o,m),Xl(e,m),on!==4&&(on=2)),!1;var g=Error(a(520),{cause:o});if(g=sr(g,i),$s===null?$s=[g]:$s.push(g),on!==4&&(on=2),t===null)return!0;o=sr(o,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=m&-m,i.lanes|=e,e=gu(i.stateNode,o,e),Xl(i,e),!1;case 1:if(t=i.type,g=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Oi===null||!Oi.has(g))))return i.flags|=65536,m&=-m,i.lanes|=m,m=Df(m),Mf(m,e,i,o),Xl(i,m),!1}i=i.return}while(i!==null);return!1}var yu=Error(a(461)),mn=!1;function Rn(e,t,i,o){t.child=e===null?Pc(t,null,i,o):da(t,e.child,i,o)}function Bf(e,t,i,o,m){i=i.render;var g=t.ref;if("ref"in o){var D={};for(var L in o)L!=="ref"&&(D[L]=o[L])}else D=o;return la(t),o=Zl(e,t,i,D,g,m),L=Jl(),e!==null&&!mn?(eu(e,t,m),ei(e,t,m)):(Nt&&L&&Il(t),t.flags|=1,Rn(e,t,o,m),t.child)}function If(e,t,i,o,m){if(e===null){var g=i.type;return typeof g=="function"&&!Dl(g)&&g.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=g,Pf(e,t,g,o,m)):(e=_o(i.type,null,o,t,t.mode,m),e.ref=t.ref,e.return=t,t.child=e)}if(g=e.child,!_u(e,m)){var D=g.memoizedProps;if(i=i.compare,i=i!==null?i:f,i(D,o)&&e.ref===t.ref)return ei(e,t,m)}return t.flags|=1,e=Wr(g,o),e.ref=t.ref,e.return=t,t.child=e}function Pf(e,t,i,o,m){if(e!==null){var g=e.memoizedProps;if(f(g,o)&&e.ref===t.ref)if(mn=!1,t.pendingProps=o=g,_u(e,m))(e.flags&131072)!==0&&(mn=!0);else return t.lanes=e.lanes,ei(e,t,m)}return vu(e,t,i,o,m)}function Of(e,t,i,o){var m=o.children,g=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((t.flags&128)!==0){if(g=g!==null?g.baseLanes|i:i,e!==null){for(o=t.child=e.child,m=0;o!==null;)m=m|o.lanes|o.childLanes,o=o.sibling;o=m&~g}else o=0,t.child=null;return Nf(e,t,g,i,o)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ko(t,g!==null?g.cachePool:null),g!==null?qc(t,g):Wl(),Lc(t);else return o=t.lanes=536870912,Nf(e,t,g!==null?g.baseLanes|i:i,i,o)}else g!==null?(ko(t,g.cachePool),qc(t,g),Mi(),t.memoizedState=null):(e!==null&&ko(t,null),Wl(),Mi());return Rn(e,t,m,i),t.child}function Vs(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Nf(e,t,i,o,m){var g=Fl();return g=g===null?null:{parent:dn._currentValue,pool:g},t.memoizedState={baseLanes:i,cachePool:g},e!==null&&ko(t,null),Wl(),Lc(t),e!==null&&Va(e,t,o,!0),t.childLanes=m,null}function Go(e,t){return t=Ko({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function qf(e,t,i){return da(t,e.child,null,i),e=Go(t,t.pendingProps),e.flags|=2,Qn(t),t.memoizedState=null,e}function zh(e,t,i){var o=t.pendingProps,m=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Nt){if(o.mode==="hidden")return e=Go(t,o),t.lanes=536870912,Vs(null,e);if($l(t),(e=nn)?(e=$d(e,ur),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ei!==null?{id:Cr,overflow:kr}:null,retryLane:536870912,hydrationErrors:null},i=bc(e),i.return=t,t.child=i,_n=t,nn=null)):e=null,e===null)throw _i(t);return t.lanes=536870912,null}return Go(t,o)}var g=e.memoizedState;if(g!==null){var D=g.dehydrated;if($l(t),m)if(t.flags&256)t.flags&=-257,t=qf(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(a(558));else if(mn||Va(e,t,i,!1),m=(i&e.childLanes)!==0,mn||m){if(o=Zt,o!==null&&(D=qt(o,i),D!==0&&D!==g.retryLane))throw g.retryLane=D,Vt(e,D),Fn(o,e,D),yu;nl(),t=qf(e,t,i)}else e=g.treeContext,nn=fr(D.nextSibling),_n=t,Nt=!0,wi=null,ur=!1,e!==null&&Sc(t,e),t=Go(t,o),t.flags|=4096;return t}return e=Wr(e.child,{mode:o.mode,children:o.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Xo(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(a(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function vu(e,t,i,o,m){return la(t),i=Zl(e,t,i,o,void 0,m),o=Jl(),e!==null&&!mn?(eu(e,t,m),ei(e,t,m)):(Nt&&o&&Il(t),t.flags|=1,Rn(e,t,i,m),t.child)}function Lf(e,t,i,o,m,g){return la(t),t.updateQueue=null,i=zc(t,o,i,m),jc(e),o=Jl(),e!==null&&!mn?(eu(e,t,g),ei(e,t,g)):(Nt&&o&&Il(t),t.flags|=1,Rn(e,t,i,g),t.child)}function jf(e,t,i,o,m){if(la(t),t.stateNode===null){var g=ja,D=i.contextType;typeof D=="object"&&D!==null&&(g=An(D)),g=new i(o,g),t.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=pu,t.stateNode=g,g._reactInternals=t,g=t.stateNode,g.props=o,g.state=t.memoizedState,g.refs={},Hl(t),D=i.contextType,g.context=typeof D=="object"&&D!==null?An(D):ja,g.state=t.memoizedState,D=i.getDerivedStateFromProps,typeof D=="function"&&(mu(t,i,D,o),g.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(D=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),D!==g.state&&pu.enqueueReplaceState(g,g.state,null),Ls(t,o,g,m),qs(),g.state=t.memoizedState),typeof g.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){g=t.stateNode;var L=t.memoizedProps,$=ma(i,L);g.props=$;var Ee=g.context,Ne=i.contextType;D=ja,typeof Ne=="object"&&Ne!==null&&(D=An(Ne));var je=i.getDerivedStateFromProps;Ne=typeof je=="function"||typeof g.getSnapshotBeforeUpdate=="function",L=t.pendingProps!==L,Ne||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(L||Ee!==D)&&_f(t,g,o,D),Ri=!1;var Ae=t.memoizedState;g.state=Ae,Ls(t,o,g,m),qs(),Ee=t.memoizedState,L||Ae!==Ee||Ri?(typeof je=="function"&&(mu(t,i,je,o),Ee=t.memoizedState),($=Ri||wf(t,i,$,o,Ae,Ee,D))?(Ne||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=Ee),g.props=o,g.state=Ee,g.context=D,o=$):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{g=t.stateNode,Gl(e,t),D=t.memoizedProps,Ne=ma(i,D),g.props=Ne,je=t.pendingProps,Ae=g.context,Ee=i.contextType,$=ja,typeof Ee=="object"&&Ee!==null&&($=An(Ee)),L=i.getDerivedStateFromProps,(Ee=typeof L=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(D!==je||Ae!==$)&&_f(t,g,o,$),Ri=!1,Ae=t.memoizedState,g.state=Ae,Ls(t,o,g,m),qs();var Me=t.memoizedState;D!==je||Ae!==Me||Ri||e!==null&&e.dependencies!==null&&Ro(e.dependencies)?(typeof L=="function"&&(mu(t,i,L,o),Me=t.memoizedState),(Ne=Ri||wf(t,i,Ne,o,Ae,Me,$)||e!==null&&e.dependencies!==null&&Ro(e.dependencies))?(Ee||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,Me,$),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,Me,$)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||D===e.memoizedProps&&Ae===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||D===e.memoizedProps&&Ae===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=Me),g.props=o,g.state=Me,g.context=$,o=Ne):(typeof g.componentDidUpdate!="function"||D===e.memoizedProps&&Ae===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||D===e.memoizedProps&&Ae===e.memoizedState||(t.flags|=1024),o=!1)}return g=o,Xo(e,t),o=(t.flags&128)!==0,g||o?(g=t.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:g.render(),t.flags|=1,e!==null&&o?(t.child=da(t,e.child,null,m),t.child=da(t,null,i,m)):Rn(e,t,i,m),t.memoizedState=g.state,e=t.child):e=ei(e,t,m),e}function zf(e,t,i,o){return sa(),t.flags|=256,Rn(e,t,i,o),t.child}var bu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xu(e){return{baseLanes:e,cachePool:Cc()}}function Tu(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=Jn),e}function Uf(e,t,i){var o=t.pendingProps,m=!1,g=(t.flags&128)!==0,D;if((D=g)||(D=e!==null&&e.memoizedState===null?!1:(un.current&2)!==0),D&&(m=!0,t.flags&=-129),D=(t.flags&32)!==0,t.flags&=-33,e===null){if(Nt){if(m?Di(t):Mi(),(e=nn)?(e=$d(e,ur),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ei!==null?{id:Cr,overflow:kr}:null,retryLane:536870912,hydrationErrors:null},i=bc(e),i.return=t,t.child=i,_n=t,nn=null)):e=null,e===null)throw _i(t);return rc(e)?t.lanes=32:t.lanes=536870912,null}var L=o.children;return o=o.fallback,m?(Mi(),m=t.mode,L=Ko({mode:"hidden",children:L},m),o=aa(o,m,i,null),L.return=t,o.return=t,L.sibling=o,t.child=L,o=t.child,o.memoizedState=xu(i),o.childLanes=Tu(e,D,i),t.memoizedState=bu,Vs(null,o)):(Di(t),Su(t,L))}var $=e.memoizedState;if($!==null&&(L=$.dehydrated,L!==null)){if(g)t.flags&256?(Di(t),t.flags&=-257,t=Eu(e,t,i)):t.memoizedState!==null?(Mi(),t.child=e.child,t.flags|=128,t=null):(Mi(),L=o.fallback,m=t.mode,o=Ko({mode:"visible",children:o.children},m),L=aa(L,m,i,null),L.flags|=2,o.return=t,L.return=t,o.sibling=L,t.child=o,da(t,e.child,null,i),o=t.child,o.memoizedState=xu(i),o.childLanes=Tu(e,D,i),t.memoizedState=bu,t=Vs(null,o));else if(Di(t),rc(L)){if(D=L.nextSibling&&L.nextSibling.dataset,D)var Ee=D.dgst;D=Ee,o=Error(a(419)),o.stack="",o.digest=D,Ms({value:o,source:null,stack:null}),t=Eu(e,t,i)}else if(mn||Va(e,t,i,!1),D=(i&e.childLanes)!==0,mn||D){if(D=Zt,D!==null&&(o=qt(D,i),o!==0&&o!==$.retryLane))throw $.retryLane=o,Vt(e,o),Fn(D,e,o),yu;nc(L)||nl(),t=Eu(e,t,i)}else nc(L)?(t.flags|=192,t.child=e.child,t=null):(e=$.treeContext,nn=fr(L.nextSibling),_n=t,Nt=!0,wi=null,ur=!1,e!==null&&Sc(t,e),t=Su(t,o.children),t.flags|=4096);return t}return m?(Mi(),L=o.fallback,m=t.mode,$=e.child,Ee=$.sibling,o=Wr($,{mode:"hidden",children:o.children}),o.subtreeFlags=$.subtreeFlags&65011712,Ee!==null?L=Wr(Ee,L):(L=aa(L,m,i,null),L.flags|=2),L.return=t,o.return=t,o.sibling=L,t.child=o,Vs(null,o),o=t.child,L=e.child.memoizedState,L===null?L=xu(i):(m=L.cachePool,m!==null?($=dn._currentValue,m=m.parent!==$?{parent:$,pool:$}:m):m=Cc(),L={baseLanes:L.baseLanes|i,cachePool:m}),o.memoizedState=L,o.childLanes=Tu(e,D,i),t.memoizedState=bu,Vs(e.child,o)):(Di(t),i=e.child,e=i.sibling,i=Wr(i,{mode:"visible",children:o.children}),i.return=t,i.sibling=null,e!==null&&(D=t.deletions,D===null?(t.deletions=[e],t.flags|=16):D.push(e)),t.child=i,t.memoizedState=null,i)}function Su(e,t){return t=Ko({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ko(e,t){return e=Yn(22,e,null,t),e.lanes=0,e}function Eu(e,t,i){return da(t,e.child,null,i),e=Su(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ff(e,t,i){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Ll(e.return,t,i)}function wu(e,t,i,o,m,g){var D=e.memoizedState;D===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:m,treeForkCount:g}:(D.isBackwards=t,D.rendering=null,D.renderingStartTime=0,D.last=o,D.tail=i,D.tailMode=m,D.treeForkCount=g)}function Vf(e,t,i){var o=t.pendingProps,m=o.revealOrder,g=o.tail;o=o.children;var D=un.current,L=(D&2)!==0;if(L?(D=D&1|2,t.flags|=128):D&=1,ce(un,D),Rn(e,t,o,i),o=Nt?Ds:0,!L&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ff(e,i,t);else if(e.tag===19)Ff(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(m){case"forwards":for(i=t.child,m=null;i!==null;)e=i.alternate,e!==null&&Oo(e)===null&&(m=i),i=i.sibling;i=m,i===null?(m=t.child,t.child=null):(m=i.sibling,i.sibling=null),wu(t,!1,m,i,g,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,m=t.child,t.child=null;m!==null;){if(e=m.alternate,e!==null&&Oo(e)===null){t.child=m;break}e=m.sibling,m.sibling=i,i=m,m=e}wu(t,!0,i,null,g,o);break;case"together":wu(t,!1,null,null,void 0,o);break;default:t.memoizedState=null}return t.child}function ei(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Pi|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(Va(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(a(153));if(t.child!==null){for(e=t.child,i=Wr(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=Wr(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function _u(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Ro(e)))}function Uh(e,t,i){switch(t.tag){case 3:Ce(t,t.stateNode.containerInfo),Ai(t,dn,e.memoizedState.cache),sa();break;case 27:case 5:De(t);break;case 4:Ce(t,t.stateNode.containerInfo);break;case 10:Ai(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,$l(t),null;break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(Di(t),t.flags|=128,null):(i&t.child.childLanes)!==0?Uf(e,t,i):(Di(t),e=ei(e,t,i),e!==null?e.sibling:null);Di(t);break;case 19:var m=(e.flags&128)!==0;if(o=(i&t.childLanes)!==0,o||(Va(e,t,i,!1),o=(i&t.childLanes)!==0),m){if(o)return Vf(e,t,i);t.flags|=128}if(m=t.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ce(un,un.current),o)break;return null;case 22:return t.lanes=0,Of(e,t,i,t.pendingProps);case 24:Ai(t,dn,e.memoizedState.cache)}return ei(e,t,i)}function Hf(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)mn=!0;else{if(!_u(e,i)&&(t.flags&128)===0)return mn=!1,Uh(e,t,i);mn=(e.flags&131072)!==0}else mn=!1,Nt&&(t.flags&1048576)!==0&&Tc(t,Ds,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=ca(t.elementType),t.type=e,typeof e=="function")Dl(e)?(o=ma(e,o),t.tag=1,t=jf(null,t,e,o,i)):(t.tag=0,t=vu(null,t,e,o,i));else{if(e!=null){var m=e.$$typeof;if(m===F){t.tag=11,t=Bf(null,t,e,o,i);break e}else if(m===M){t.tag=14,t=If(null,t,e,o,i);break e}}throw t=He(e)||e,Error(a(306,t,""))}}return t;case 0:return vu(e,t,t.type,t.pendingProps,i);case 1:return o=t.type,m=ma(o,t.pendingProps),jf(e,t,o,m,i);case 3:e:{if(Ce(t,t.stateNode.containerInfo),e===null)throw Error(a(387));o=t.pendingProps;var g=t.memoizedState;m=g.element,Gl(e,t),Ls(t,o,null,i);var D=t.memoizedState;if(o=D.cache,Ai(t,dn,o),o!==g.cache&&jl(t,[dn],i,!0),qs(),o=D.element,g.isDehydrated)if(g={element:o,isDehydrated:!1,cache:D.cache},t.updateQueue.baseState=g,t.memoizedState=g,t.flags&256){t=zf(e,t,o,i);break e}else if(o!==m){m=sr(Error(a(424)),t),Ms(m),t=zf(e,t,o,i);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(nn=fr(e.firstChild),_n=t,Nt=!0,wi=null,ur=!0,i=Pc(t,null,o,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(sa(),o===m){t=ei(e,t,i);break e}Rn(e,t,o,i)}t=t.child}return t;case 26:return Xo(e,t),e===null?(i=nh(t.type,null,t.pendingProps,null))?t.memoizedState=i:Nt||(i=t.type,e=t.pendingProps,o=ul(at.current).createElement(i),o[Ht]=t,o[Jt]=e,Cn(o,i,e),ln(o),t.stateNode=o):t.memoizedState=nh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return De(t),e===null&&Nt&&(o=t.stateNode=Jd(t.type,t.pendingProps,at.current),_n=t,ur=!0,m=nn,ji(t.type)?(ic=m,nn=fr(o.firstChild)):nn=m),Rn(e,t,t.pendingProps.children,i),Xo(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Nt&&((m=o=nn)&&(o=ym(o,t.type,t.pendingProps,ur),o!==null?(t.stateNode=o,_n=t,nn=fr(o.firstChild),ur=!1,m=!0):m=!1),m||_i(t)),De(t),m=t.type,g=t.pendingProps,D=e!==null?e.memoizedProps:null,o=g.children,Ju(m,g)?o=null:D!==null&&Ju(m,D)&&(t.flags|=32),t.memoizedState!==null&&(m=Zl(e,t,Bh,null,null,i),io._currentValue=m),Xo(e,t),Rn(e,t,o,i),t.child;case 6:return e===null&&Nt&&((e=i=nn)&&(i=vm(i,t.pendingProps,ur),i!==null?(t.stateNode=i,_n=t,nn=null,e=!0):e=!1),e||_i(t)),null;case 13:return Uf(e,t,i);case 4:return Ce(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=da(t,null,o,i):Rn(e,t,o,i),t.child;case 11:return Bf(e,t,t.type,t.pendingProps,i);case 7:return Rn(e,t,t.pendingProps,i),t.child;case 8:return Rn(e,t,t.pendingProps.children,i),t.child;case 12:return Rn(e,t,t.pendingProps.children,i),t.child;case 10:return o=t.pendingProps,Ai(t,t.type,o.value),Rn(e,t,o.children,i),t.child;case 9:return m=t.type._context,o=t.pendingProps.children,la(t),m=An(m),o=o(m),t.flags|=1,Rn(e,t,o,i),t.child;case 14:return If(e,t,t.type,t.pendingProps,i);case 15:return Pf(e,t,t.type,t.pendingProps,i);case 19:return Vf(e,t,i);case 31:return zh(e,t,i);case 22:return Of(e,t,i,t.pendingProps);case 24:return la(t),o=An(dn),e===null?(m=Fl(),m===null&&(m=Zt,g=zl(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=i),m=g),t.memoizedState={parent:o,cache:m},Hl(t),Ai(t,dn,m)):((e.lanes&i)!==0&&(Gl(e,t),Ls(t,null,null,i),qs()),m=e.memoizedState,g=t.memoizedState,m.parent!==o?(m={parent:o,cache:o},t.memoizedState=m,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=m),Ai(t,dn,o)):(o=g.cache,Ai(t,dn,o),o!==m.cache&&jl(t,[dn],i,!0))),Rn(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function ti(e){e.flags|=4}function Au(e,t,i,o,m){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(m&335544128)===m)if(e.stateNode.complete)e.flags|=8192;else if(vd())e.flags|=8192;else throw fa=Mo,Vl}else e.flags&=-16777217}function Gf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!oh(t))if(vd())e.flags|=8192;else throw fa=Mo,Vl}function Wo(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?G():536870912,e.lanes|=t,ts|=t)}function Hs(e,t){if(!Nt)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function rn(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(t)for(var m=e.child;m!==null;)i|=m.lanes|m.childLanes,o|=m.subtreeFlags&65011712,o|=m.flags&65011712,m.return=e,m=m.sibling;else for(m=e.child;m!==null;)i|=m.lanes|m.childLanes,o|=m.subtreeFlags,o|=m.flags,m.return=e,m=m.sibling;return e.subtreeFlags|=o,e.childLanes=i,t}function Fh(e,t,i){var o=t.pendingProps;switch(Pl(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(t),null;case 1:return rn(t),null;case 3:return i=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),Qr(dn),ke(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Fa(t)?ti(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Nl())),rn(t),null;case 26:var m=t.type,g=t.memoizedState;return e===null?(ti(t),g!==null?(rn(t),Gf(t,g)):(rn(t),Au(t,m,null,o,i))):g?g!==e.memoizedState?(ti(t),rn(t),Gf(t,g)):(rn(t),t.flags&=-16777217):(e=e.memoizedProps,e!==o&&ti(t),rn(t),Au(t,m,e,o,i)),null;case 27:if(mt(t),i=at.current,m=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&ti(t);else{if(!o){if(t.stateNode===null)throw Error(a(166));return rn(t),null}e=Ie.current,Fa(t)?Ec(t):(e=Jd(m,o,i),t.stateNode=e,ti(t))}return rn(t),null;case 5:if(mt(t),m=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&ti(t);else{if(!o){if(t.stateNode===null)throw Error(a(166));return rn(t),null}if(g=Ie.current,Fa(t))Ec(t);else{var D=ul(at.current);switch(g){case 1:g=D.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:g=D.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":g=D.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":g=D.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":g=D.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof o.is=="string"?D.createElement("select",{is:o.is}):D.createElement("select"),o.multiple?g.multiple=!0:o.size&&(g.size=o.size);break;default:g=typeof o.is=="string"?D.createElement(m,{is:o.is}):D.createElement(m)}}g[Ht]=t,g[Jt]=o;e:for(D=t.child;D!==null;){if(D.tag===5||D.tag===6)g.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===t)break e;for(;D.sibling===null;){if(D.return===null||D.return===t)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}t.stateNode=g;e:switch(Cn(g,m,o),m){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&ti(t)}}return rn(t),Au(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&ti(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(a(166));if(e=at.current,Fa(t)){if(e=t.stateNode,i=t.memoizedProps,o=null,m=_n,m!==null)switch(m.tag){case 27:case 5:o=m.memoizedProps}e[Ht]=t,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||Fd(e.nodeValue,i)),e||_i(t,!0)}else e=ul(e).createTextNode(o),e[Ht]=t,t.stateNode=e}return rn(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(o=Fa(t),i!==null){if(e===null){if(!o)throw Error(a(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(557));e[Ht]=t}else sa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;rn(t),e=!1}else i=Nl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(Qn(t),t):(Qn(t),null);if((t.flags&128)!==0)throw Error(a(558))}return rn(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(m=Fa(t),o!==null&&o.dehydrated!==null){if(e===null){if(!m)throw Error(a(318));if(m=t.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(a(317));m[Ht]=t}else sa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;rn(t),m=!1}else m=Nl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=m),m=!0;if(!m)return t.flags&256?(Qn(t),t):(Qn(t),null)}return Qn(t),(t.flags&128)!==0?(t.lanes=i,t):(i=o!==null,e=e!==null&&e.memoizedState!==null,i&&(o=t.child,m=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(m=o.alternate.memoizedState.cachePool.pool),g=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),g!==m&&(o.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),Wo(t,t.updateQueue),rn(t),null);case 4:return ke(),e===null&&Wu(t.stateNode.containerInfo),rn(t),null;case 10:return Qr(t.type),rn(t),null;case 19:if(Z(un),o=t.memoizedState,o===null)return rn(t),null;if(m=(t.flags&128)!==0,g=o.rendering,g===null)if(m)Hs(o,!1);else{if(on!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=Oo(e),g!==null){for(t.flags|=128,Hs(o,!1),e=g.updateQueue,t.updateQueue=e,Wo(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)vc(i,e),i=i.sibling;return ce(un,un.current&1|2),Nt&&Yr(t,o.treeForkCount),t.child}e=e.sibling}o.tail!==null&&Dt()>Jo&&(t.flags|=128,m=!0,Hs(o,!1),t.lanes=4194304)}else{if(!m)if(e=Oo(g),e!==null){if(t.flags|=128,m=!0,e=e.updateQueue,t.updateQueue=e,Wo(t,e),Hs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!g.alternate&&!Nt)return rn(t),null}else 2*Dt()-o.renderingStartTime>Jo&&i!==536870912&&(t.flags|=128,m=!0,Hs(o,!1),t.lanes=4194304);o.isBackwards?(g.sibling=t.child,t.child=g):(e=o.last,e!==null?e.sibling=g:t.child=g,o.last=g)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Dt(),e.sibling=null,i=un.current,ce(un,m?i&1|2:i&1),Nt&&Yr(t,o.treeForkCount),e):(rn(t),null);case 22:case 23:return Qn(t),Yl(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(i&536870912)!==0&&(t.flags&128)===0&&(rn(t),t.subtreeFlags&6&&(t.flags|=8192)):rn(t),i=t.updateQueue,i!==null&&Wo(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==i&&(t.flags|=2048),e!==null&&Z(ua),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),Qr(dn),rn(t),null;case 25:return null;case 30:return null}throw Error(a(156,t.tag))}function Vh(e,t){switch(Pl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qr(dn),ke(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return mt(t),null;case 31:if(t.memoizedState!==null){if(Qn(t),t.alternate===null)throw Error(a(340));sa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Qn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(a(340));sa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Z(un),null;case 4:return ke(),null;case 10:return Qr(t.type),null;case 22:case 23:return Qn(t),Yl(),e!==null&&Z(ua),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Qr(dn),null;case 25:return null;default:return null}}function Xf(e,t){switch(Pl(t),t.tag){case 3:Qr(dn),ke();break;case 26:case 27:case 5:mt(t);break;case 4:ke();break;case 31:t.memoizedState!==null&&Qn(t);break;case 13:Qn(t);break;case 19:Z(un);break;case 10:Qr(t.type);break;case 22:case 23:Qn(t),Yl(),e!==null&&Z(ua);break;case 24:Qr(dn)}}function Gs(e,t){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var m=o.next;i=m;do{if((i.tag&e)===e){o=void 0;var g=i.create,D=i.inst;o=g(),D.destroy=o}i=i.next}while(i!==m)}}catch(L){Xt(t,t.return,L)}}function Bi(e,t,i){try{var o=t.updateQueue,m=o!==null?o.lastEffect:null;if(m!==null){var g=m.next;o=g;do{if((o.tag&e)===e){var D=o.inst,L=D.destroy;if(L!==void 0){D.destroy=void 0,m=t;var $=i,Ee=L;try{Ee()}catch(Ne){Xt(m,$,Ne)}}}o=o.next}while(o!==g)}}catch(Ne){Xt(t,t.return,Ne)}}function Kf(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{Nc(t,i)}catch(o){Xt(e,e.return,o)}}}function Wf(e,t,i){i.props=ma(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){Xt(e,t,o)}}function Xs(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(m){Xt(e,t,m)}}function Dr(e,t){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(m){Xt(e,t,m)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(m){Xt(e,t,m)}else i.current=null}function Yf(e){var t=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(m){Xt(e,e.return,m)}}function Ru(e,t,i){try{var o=e.stateNode;fm(o,e.type,i,t),o[Jt]=t}catch(m){Xt(e,e.return,m)}}function $f(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ji(e.type)||e.tag===4}function Cu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$f(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ji(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ku(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=qn));else if(o!==4&&(o===27&&ji(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(ku(e,t,i),e=e.sibling;e!==null;)ku(e,t,i),e=e.sibling}function Yo(e,t,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(o!==4&&(o===27&&ji(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Yo(e,t,i),e=e.sibling;e!==null;)Yo(e,t,i),e=e.sibling}function Qf(e){var t=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,m=t.attributes;m.length;)t.removeAttributeNode(m[0]);Cn(t,o,i),t[Ht]=e,t[Jt]=i}catch(g){Xt(e,e.return,g)}}var ni=!1,pn=!1,Du=!1,Zf=typeof WeakSet=="function"?WeakSet:Set,Sn=null;function Hh(e,t){if(e=e.containerInfo,Qu=gl,e=B(e),P(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var m=o.anchorOffset,g=o.focusNode;o=o.focusOffset;try{i.nodeType,g.nodeType}catch{i=null;break e}var D=0,L=-1,$=-1,Ee=0,Ne=0,je=e,Ae=null;t:for(;;){for(var Me;je!==i||m!==0&&je.nodeType!==3||(L=D+m),je!==g||o!==0&&je.nodeType!==3||($=D+o),je.nodeType===3&&(D+=je.nodeValue.length),(Me=je.firstChild)!==null;)Ae=je,je=Me;for(;;){if(je===e)break t;if(Ae===i&&++Ee===m&&(L=D),Ae===g&&++Ne===o&&($=D),(Me=je.nextSibling)!==null)break;je=Ae,Ae=je.parentNode}je=Me}i=L===-1||$===-1?null:{start:L,end:$}}else i=null}i=i||{start:0,end:0}}else i=null;for(Zu={focusedElem:e,selectionRange:i},gl=!1,Sn=t;Sn!==null;)if(t=Sn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Sn=e;else for(;Sn!==null;){switch(t=Sn,g=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)m=e[i],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,i=t,m=g.memoizedProps,g=g.memoizedState,o=i.stateNode;try{var dt=ma(i.type,m);e=o.getSnapshotBeforeUpdate(dt,g),o.__reactInternalSnapshotBeforeUpdate=e}catch(vt){Xt(i,i.return,vt)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)tc(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":tc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=t.sibling,e!==null){e.return=t.return,Sn=e;break}Sn=t.return}}function Jf(e,t,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:ii(e,i),o&4&&Gs(5,i);break;case 1:if(ii(e,i),o&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(D){Xt(i,i.return,D)}else{var m=ma(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(m,t,e.__reactInternalSnapshotBeforeUpdate)}catch(D){Xt(i,i.return,D)}}o&64&&Kf(i),o&512&&Xs(i,i.return);break;case 3:if(ii(e,i),o&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{Nc(e,t)}catch(D){Xt(i,i.return,D)}}break;case 27:t===null&&o&4&&Qf(i);case 26:case 5:ii(e,i),t===null&&o&4&&Yf(i),o&512&&Xs(i,i.return);break;case 12:ii(e,i);break;case 31:ii(e,i),o&4&&nd(e,i);break;case 13:ii(e,i),o&4&&rd(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=Jh.bind(null,i),bm(e,i))));break;case 22:if(o=i.memoizedState!==null||ni,!o){t=t!==null&&t.memoizedState!==null||pn,m=ni;var g=pn;ni=o,(pn=t)&&!g?ai(e,i,(i.subtreeFlags&8772)!==0):ii(e,i),ni=m,pn=g}break;case 30:break;default:ii(e,i)}}function ed(e){var t=e.alternate;t!==null&&(e.alternate=null,ed(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ba(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var an=null,Ln=!1;function ri(e,t,i){for(i=i.child;i!==null;)td(e,t,i),i=i.sibling}function td(e,t,i){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(Pe,i)}catch{}switch(i.tag){case 26:pn||Dr(i,t),ri(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:pn||Dr(i,t);var o=an,m=Ln;ji(i.type)&&(an=i.stateNode,Ln=!1),ri(e,t,i),to(i.stateNode),an=o,Ln=m;break;case 5:pn||Dr(i,t);case 6:if(o=an,m=Ln,an=null,ri(e,t,i),an=o,Ln=m,an!==null)if(Ln)try{(an.nodeType===9?an.body:an.nodeName==="HTML"?an.ownerDocument.body:an).removeChild(i.stateNode)}catch(g){Xt(i,t,g)}else try{an.removeChild(i.stateNode)}catch(g){Xt(i,t,g)}break;case 18:an!==null&&(Ln?(e=an,Wd(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),us(e)):Wd(an,i.stateNode));break;case 4:o=an,m=Ln,an=i.stateNode.containerInfo,Ln=!0,ri(e,t,i),an=o,Ln=m;break;case 0:case 11:case 14:case 15:Bi(2,i,t),pn||Bi(4,i,t),ri(e,t,i);break;case 1:pn||(Dr(i,t),o=i.stateNode,typeof o.componentWillUnmount=="function"&&Wf(i,t,o)),ri(e,t,i);break;case 21:ri(e,t,i);break;case 22:pn=(o=pn)||i.memoizedState!==null,ri(e,t,i),pn=o;break;default:ri(e,t,i)}}function nd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{us(e)}catch(i){Xt(t,t.return,i)}}}function rd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{us(e)}catch(i){Xt(t,t.return,i)}}function Gh(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Zf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Zf),t;default:throw Error(a(435,e.tag))}}function $o(e,t){var i=Gh(e);t.forEach(function(o){if(!i.has(o)){i.add(o);var m=em.bind(null,e,o);o.then(m,m)}})}function jn(e,t){var i=t.deletions;if(i!==null)for(var o=0;o<i.length;o++){var m=i[o],g=e,D=t,L=D;e:for(;L!==null;){switch(L.tag){case 27:if(ji(L.type)){an=L.stateNode,Ln=!1;break e}break;case 5:an=L.stateNode,Ln=!1;break e;case 3:case 4:an=L.stateNode.containerInfo,Ln=!0;break e}L=L.return}if(an===null)throw Error(a(160));td(g,D,m),an=null,Ln=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)ad(t,e),t=t.sibling}var vr=null;function ad(e,t){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:jn(t,e),zn(e),o&4&&(Bi(3,e,e.return),Gs(3,e),Bi(5,e,e.return));break;case 1:jn(t,e),zn(e),o&512&&(pn||i===null||Dr(i,i.return)),o&64&&ni&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var m=vr;if(jn(t,e),zn(e),o&512&&(pn||i===null||Dr(i,i.return)),o&4){var g=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,m=m.ownerDocument||m;t:switch(o){case"title":g=m.getElementsByTagName("title")[0],(!g||g[Xn]||g[Ht]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(o),m.head.insertBefore(g,m.querySelector("head > title"))),Cn(g,o,i),g[Ht]=e,ln(g),o=g;break e;case"link":var D=ah("link","href",m).get(o+(i.href||""));if(D){for(var L=0;L<D.length;L++)if(g=D[L],g.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&g.getAttribute("rel")===(i.rel==null?null:i.rel)&&g.getAttribute("title")===(i.title==null?null:i.title)&&g.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){D.splice(L,1);break t}}g=m.createElement(o),Cn(g,o,i),m.head.appendChild(g);break;case"meta":if(D=ah("meta","content",m).get(o+(i.content||""))){for(L=0;L<D.length;L++)if(g=D[L],g.getAttribute("content")===(i.content==null?null:""+i.content)&&g.getAttribute("name")===(i.name==null?null:i.name)&&g.getAttribute("property")===(i.property==null?null:i.property)&&g.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&g.getAttribute("charset")===(i.charSet==null?null:i.charSet)){D.splice(L,1);break t}}g=m.createElement(o),Cn(g,o,i),m.head.appendChild(g);break;default:throw Error(a(468,o))}g[Ht]=e,ln(g),o=g}e.stateNode=o}else sh(m,e.type,e.stateNode);else e.stateNode=ih(m,o,e.memoizedProps);else g!==o?(g===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):g.count--,o===null?sh(m,e.type,e.stateNode):ih(m,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Ru(e,e.memoizedProps,i.memoizedProps)}break;case 27:jn(t,e),zn(e),o&512&&(pn||i===null||Dr(i,i.return)),i!==null&&o&4&&Ru(e,e.memoizedProps,i.memoizedProps);break;case 5:if(jn(t,e),zn(e),o&512&&(pn||i===null||Dr(i,i.return)),e.flags&32){m=e.stateNode;try{Lr(m,"")}catch(dt){Xt(e,e.return,dt)}}o&4&&e.stateNode!=null&&(m=e.memoizedProps,Ru(e,m,i!==null?i.memoizedProps:m)),o&1024&&(Du=!0);break;case 6:if(jn(t,e),zn(e),o&4){if(e.stateNode===null)throw Error(a(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(dt){Xt(e,e.return,dt)}}break;case 3:if(dl=null,m=vr,vr=cl(t.containerInfo),jn(t,e),vr=m,zn(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{us(t.containerInfo)}catch(dt){Xt(e,e.return,dt)}Du&&(Du=!1,sd(e));break;case 4:o=vr,vr=cl(e.stateNode.containerInfo),jn(t,e),zn(e),vr=o;break;case 12:jn(t,e),zn(e);break;case 31:jn(t,e),zn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,$o(e,o)));break;case 13:jn(t,e),zn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Zo=Dt()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,$o(e,o)));break;case 22:m=e.memoizedState!==null;var $=i!==null&&i.memoizedState!==null,Ee=ni,Ne=pn;if(ni=Ee||m,pn=Ne||$,jn(t,e),pn=Ne,ni=Ee,zn(e),o&8192)e:for(t=e.stateNode,t._visibility=m?t._visibility&-2:t._visibility|1,m&&(i===null||$||ni||pn||pa(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){$=i=t;try{if(g=$.stateNode,m)D=g.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{L=$.stateNode;var je=$.memoizedProps.style,Ae=je!=null&&je.hasOwnProperty("display")?je.display:null;L.style.display=Ae==null||typeof Ae=="boolean"?"":(""+Ae).trim()}}catch(dt){Xt($,$.return,dt)}}}else if(t.tag===6){if(i===null){$=t;try{$.stateNode.nodeValue=m?"":$.memoizedProps}catch(dt){Xt($,$.return,dt)}}}else if(t.tag===18){if(i===null){$=t;try{var Me=$.stateNode;m?Yd(Me,!0):Yd($.stateNode,!1)}catch(dt){Xt($,$.return,dt)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,$o(e,i))));break;case 19:jn(t,e),zn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,$o(e,o)));break;case 30:break;case 21:break;default:jn(t,e),zn(e)}}function zn(e){var t=e.flags;if(t&2){try{for(var i,o=e.return;o!==null;){if($f(o)){i=o;break}o=o.return}if(i==null)throw Error(a(160));switch(i.tag){case 27:var m=i.stateNode,g=Cu(e);Yo(e,g,m);break;case 5:var D=i.stateNode;i.flags&32&&(Lr(D,""),i.flags&=-33);var L=Cu(e);Yo(e,L,D);break;case 3:case 4:var $=i.stateNode.containerInfo,Ee=Cu(e);ku(e,Ee,$);break;default:throw Error(a(161))}}catch(Ne){Xt(e,e.return,Ne)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function sd(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;sd(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ii(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Jf(e,t.alternate,t),t=t.sibling}function pa(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Bi(4,t,t.return),pa(t);break;case 1:Dr(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&Wf(t,t.return,i),pa(t);break;case 27:to(t.stateNode);case 26:case 5:Dr(t,t.return),pa(t);break;case 22:t.memoizedState===null&&pa(t);break;case 30:pa(t);break;default:pa(t)}e=e.sibling}}function ai(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,m=e,g=t,D=g.flags;switch(g.tag){case 0:case 11:case 15:ai(m,g,i),Gs(4,g);break;case 1:if(ai(m,g,i),o=g,m=o.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Ee){Xt(o,o.return,Ee)}if(o=g,m=o.updateQueue,m!==null){var L=o.stateNode;try{var $=m.shared.hiddenCallbacks;if($!==null)for(m.shared.hiddenCallbacks=null,m=0;m<$.length;m++)Oc($[m],L)}catch(Ee){Xt(o,o.return,Ee)}}i&&D&64&&Kf(g),Xs(g,g.return);break;case 27:Qf(g);case 26:case 5:ai(m,g,i),i&&o===null&&D&4&&Yf(g),Xs(g,g.return);break;case 12:ai(m,g,i);break;case 31:ai(m,g,i),i&&D&4&&nd(m,g);break;case 13:ai(m,g,i),i&&D&4&&rd(m,g);break;case 22:g.memoizedState===null&&ai(m,g,i),Xs(g,g.return);break;case 30:break;default:ai(m,g,i)}t=t.sibling}}function Mu(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Bs(i))}function Bu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Bs(e))}function br(e,t,i,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)od(e,t,i,o),t=t.sibling}function od(e,t,i,o){var m=t.flags;switch(t.tag){case 0:case 11:case 15:br(e,t,i,o),m&2048&&Gs(9,t);break;case 1:br(e,t,i,o);break;case 3:br(e,t,i,o),m&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Bs(e)));break;case 12:if(m&2048){br(e,t,i,o),e=t.stateNode;try{var g=t.memoizedProps,D=g.id,L=g.onPostCommit;typeof L=="function"&&L(D,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch($){Xt(t,t.return,$)}}else br(e,t,i,o);break;case 31:br(e,t,i,o);break;case 13:br(e,t,i,o);break;case 23:break;case 22:g=t.stateNode,D=t.alternate,t.memoizedState!==null?g._visibility&2?br(e,t,i,o):Ks(e,t):g._visibility&2?br(e,t,i,o):(g._visibility|=2,Za(e,t,i,o,(t.subtreeFlags&10256)!==0||!1)),m&2048&&Mu(D,t);break;case 24:br(e,t,i,o),m&2048&&Bu(t.alternate,t);break;default:br(e,t,i,o)}}function Za(e,t,i,o,m){for(m=m&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var g=e,D=t,L=i,$=o,Ee=D.flags;switch(D.tag){case 0:case 11:case 15:Za(g,D,L,$,m),Gs(8,D);break;case 23:break;case 22:var Ne=D.stateNode;D.memoizedState!==null?Ne._visibility&2?Za(g,D,L,$,m):Ks(g,D):(Ne._visibility|=2,Za(g,D,L,$,m)),m&&Ee&2048&&Mu(D.alternate,D);break;case 24:Za(g,D,L,$,m),m&&Ee&2048&&Bu(D.alternate,D);break;default:Za(g,D,L,$,m)}t=t.sibling}}function Ks(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,o=t,m=o.flags;switch(o.tag){case 22:Ks(i,o),m&2048&&Mu(o.alternate,o);break;case 24:Ks(i,o),m&2048&&Bu(o.alternate,o);break;default:Ks(i,o)}t=t.sibling}}var Ws=8192;function Ja(e,t,i){if(e.subtreeFlags&Ws)for(e=e.child;e!==null;)ld(e,t,i),e=e.sibling}function ld(e,t,i){switch(e.tag){case 26:Ja(e,t,i),e.flags&Ws&&e.memoizedState!==null&&Mm(i,vr,e.memoizedState,e.memoizedProps);break;case 5:Ja(e,t,i);break;case 3:case 4:var o=vr;vr=cl(e.stateNode.containerInfo),Ja(e,t,i),vr=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Ws,Ws=16777216,Ja(e,t,i),Ws=o):Ja(e,t,i));break;default:Ja(e,t,i)}}function ud(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ys(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];Sn=o,fd(o,e)}ud(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)cd(e),e=e.sibling}function cd(e){switch(e.tag){case 0:case 11:case 15:Ys(e),e.flags&2048&&Bi(9,e,e.return);break;case 3:Ys(e);break;case 12:Ys(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Qo(e)):Ys(e);break;default:Ys(e)}}function Qo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var o=t[i];Sn=o,fd(o,e)}ud(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Bi(8,t,t.return),Qo(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,Qo(t));break;default:Qo(t)}e=e.sibling}}function fd(e,t){for(;Sn!==null;){var i=Sn;switch(i.tag){case 0:case 11:case 15:Bi(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Bs(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,Sn=o;else e:for(i=e;Sn!==null;){o=Sn;var m=o.sibling,g=o.return;if(ed(o),o===i){Sn=null;break e}if(m!==null){m.return=g,Sn=m;break e}Sn=g}}}var Xh={getCacheForType:function(e){var t=An(dn),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return An(dn).controller.signal}},Kh=typeof WeakMap=="function"?WeakMap:Map,Ft=0,Zt=null,Mt=null,It=0,Gt=0,Zn=null,Ii=!1,es=!1,Iu=!1,si=0,on=0,Pi=0,ga=0,Pu=0,Jn=0,ts=0,$s=null,Un=null,Ou=!1,Zo=0,dd=0,Jo=1/0,el=null,Oi=null,yn=0,Ni=null,ns=null,oi=0,Nu=0,qu=null,hd=null,Qs=0,Lu=null;function er(){return(Ft&2)!==0&&It!==0?It&-It:de.T!==null?Hu():xr()}function md(){if(Jn===0)if((It&536870912)===0||Nt){var e=hr;hr<<=1,(hr&3932160)===0&&(hr=262144),Jn=e}else Jn=536870912;return e=$n.current,e!==null&&(e.flags|=32),Jn}function Fn(e,t,i){(e===Zt&&(Gt===2||Gt===9)||e.cancelPendingCommit!==null)&&(rs(e,0),qi(e,It,Jn,!1)),We(e,i),((Ft&2)===0||e!==Zt)&&(e===Zt&&((Ft&2)===0&&(ga|=i),on===4&&qi(e,It,Jn,!1)),Mr(e))}function pd(e,t,i){if((Ft&6)!==0)throw Error(a(327));var o=!i&&(t&127)===0&&(t&e.expiredLanes)===0||Hn(e,t),m=o?$h(e,t):zu(e,t,!0),g=o;do{if(m===0){es&&!o&&qi(e,t,0,!1);break}else{if(i=e.current.alternate,g&&!Wh(i)){m=zu(e,t,!1),g=!1;continue}if(m===2){if(g=t,e.errorRecoveryDisabledLanes&g)var D=0;else D=e.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){t=D;e:{var L=e;m=$s;var $=L.current.memoizedState.isDehydrated;if($&&(rs(L,D).flags|=256),D=zu(L,D,!1),D!==2){if(Iu&&!$){L.errorRecoveryDisabledLanes|=g,ga|=g,m=4;break e}g=Un,Un=m,g!==null&&(Un===null?Un=g:Un.push.apply(Un,g))}m=D}if(g=!1,m!==2)continue}}if(m===1){rs(e,0),qi(e,t,0,!0);break}e:{switch(o=e,g=m,g){case 0:case 1:throw Error(a(345));case 4:if((t&4194048)!==t)break;case 6:qi(o,t,Jn,!Ii);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(a(329))}if((t&62914560)===t&&(m=Zo+300-Dt(),10<m)){if(qi(o,t,Jn,!Ii),Ir(o,0,!0)!==0)break e;oi=t,o.timeoutHandle=Xd(gd.bind(null,o,i,Un,el,Ou,t,Jn,ga,ts,Ii,g,"Throttled",-0,0),m);break e}gd(o,i,Un,el,Ou,t,Jn,ga,ts,Ii,g,null,-0,0)}}break}while(!0);Mr(e)}function gd(e,t,i,o,m,g,D,L,$,Ee,Ne,je,Ae,Me){if(e.timeoutHandle=-1,je=t.subtreeFlags,je&8192||(je&16785408)===16785408){je={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qn},ld(t,g,je);var dt=(g&62914560)===g?Zo-Dt():(g&4194048)===g?dd-Dt():0;if(dt=Bm(je,dt),dt!==null){oi=g,e.cancelPendingCommit=dt(wd.bind(null,e,t,g,i,o,m,D,L,$,Ne,je,null,Ae,Me)),qi(e,g,D,!Ee);return}}wd(e,t,g,i,o,m,D,L,$)}function Wh(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var m=i[o],g=m.getSnapshot;m=m.value;try{if(!Bn(g(),m))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qi(e,t,i,o){t&=~Pu,t&=~ga,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var m=t;0<m;){var g=31-Ke(m),D=1<<g;o[g]=-1,m&=~D}i!==0&&ct(e,i,t)}function tl(){return(Ft&6)===0?(Zs(0),!1):!0}function ju(){if(Mt!==null){if(Gt===0)var e=Mt.return;else e=Mt,$r=oa=null,tu(e),Ka=null,Ps=0,e=Mt;for(;e!==null;)Xf(e.alternate,e),e=e.return;Mt=null}}function rs(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,mm(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),oi=0,ju(),Zt=e,Mt=i=Wr(e.current,null),It=t,Gt=0,Zn=null,Ii=!1,es=Hn(e,t),Iu=!1,ts=Jn=Pu=ga=Pi=on=0,Un=$s=null,Ou=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var m=31-Ke(o),g=1<<m;t|=e[m],o&=~g}return si=t,Tt(),i}function yd(e,t){Et=null,de.H=Fs,t===Xa||t===Do?(t=Mc(),Gt=3):t===Vl?(t=Mc(),Gt=4):Gt=t===yu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Zn=t,Mt===null&&(on=1,Ho(e,sr(t,e.current)))}function vd(){var e=$n.current;return e===null?!0:(It&4194048)===It?cr===null:(It&62914560)===It||(It&536870912)!==0?e===cr:!1}function bd(){var e=de.H;return de.H=Fs,e===null?Fs:e}function xd(){var e=de.A;return de.A=Xh,e}function nl(){on=4,Ii||(It&4194048)!==It&&$n.current!==null||(es=!0),(Pi&134217727)===0&&(ga&134217727)===0||Zt===null||qi(Zt,It,Jn,!1)}function zu(e,t,i){var o=Ft;Ft|=2;var m=bd(),g=xd();(Zt!==e||It!==t)&&(el=null,rs(e,t)),t=!1;var D=on;e:do try{if(Gt!==0&&Mt!==null){var L=Mt,$=Zn;switch(Gt){case 8:ju(),D=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(t=!0);var Ee=Gt;if(Gt=0,Zn=null,is(e,L,$,Ee),i&&es){D=0;break e}break;default:Ee=Gt,Gt=0,Zn=null,is(e,L,$,Ee)}}Yh(),D=on;break}catch(Ne){yd(e,Ne)}while(!0);return t&&e.shellSuspendCounter++,$r=oa=null,Ft=o,de.H=m,de.A=g,Mt===null&&(Zt=null,It=0,Tt()),D}function Yh(){for(;Mt!==null;)Td(Mt)}function $h(e,t){var i=Ft;Ft|=2;var o=bd(),m=xd();Zt!==e||It!==t?(el=null,Jo=Dt()+500,rs(e,t)):es=Hn(e,t);e:do try{if(Gt!==0&&Mt!==null){t=Mt;var g=Zn;t:switch(Gt){case 1:Gt=0,Zn=null,is(e,t,g,1);break;case 2:case 9:if(kc(g)){Gt=0,Zn=null,Sd(t);break}t=function(){Gt!==2&&Gt!==9||Zt!==e||(Gt=7),Mr(e)},g.then(t,t);break e;case 3:Gt=7;break e;case 4:Gt=5;break e;case 7:kc(g)?(Gt=0,Zn=null,Sd(t)):(Gt=0,Zn=null,is(e,t,g,7));break;case 5:var D=null;switch(Mt.tag){case 26:D=Mt.memoizedState;case 5:case 27:var L=Mt;if(D?oh(D):L.stateNode.complete){Gt=0,Zn=null;var $=L.sibling;if($!==null)Mt=$;else{var Ee=L.return;Ee!==null?(Mt=Ee,rl(Ee)):Mt=null}break t}}Gt=0,Zn=null,is(e,t,g,5);break;case 6:Gt=0,Zn=null,is(e,t,g,6);break;case 8:ju(),on=6;break e;default:throw Error(a(462))}}Qh();break}catch(Ne){yd(e,Ne)}while(!0);return $r=oa=null,de.H=o,de.A=m,Ft=i,Mt!==null?0:(Zt=null,It=0,Tt(),on)}function Qh(){for(;Mt!==null&&!ze();)Td(Mt)}function Td(e){var t=Hf(e.alternate,e,si);e.memoizedProps=e.pendingProps,t===null?rl(e):Mt=t}function Sd(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Lf(i,t,t.pendingProps,t.type,void 0,It);break;case 11:t=Lf(i,t,t.pendingProps,t.type.render,t.ref,It);break;case 5:tu(t);default:Xf(i,t),t=Mt=vc(t,si),t=Hf(i,t,si)}e.memoizedProps=e.pendingProps,t===null?rl(e):Mt=t}function is(e,t,i,o){$r=oa=null,tu(t),Ka=null,Ps=0;var m=t.return;try{if(jh(e,m,t,i,It)){on=1,Ho(e,sr(i,e.current)),Mt=null;return}}catch(g){if(m!==null)throw Mt=m,g;on=1,Ho(e,sr(i,e.current)),Mt=null;return}t.flags&32768?(Nt||o===1?e=!0:es||(It&536870912)!==0?e=!1:(Ii=e=!0,(o===2||o===9||o===3||o===6)&&(o=$n.current,o!==null&&o.tag===13&&(o.flags|=16384))),Ed(t,e)):rl(t)}function rl(e){var t=e;do{if((t.flags&32768)!==0){Ed(t,Ii);return}e=t.return;var i=Fh(t.alternate,t,si);if(i!==null){Mt=i;return}if(t=t.sibling,t!==null){Mt=t;return}Mt=t=e}while(t!==null);on===0&&(on=5)}function Ed(e,t){do{var i=Vh(e.alternate,e);if(i!==null){i.flags&=32767,Mt=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){Mt=e;return}Mt=e=i}while(e!==null);on=6,Mt=null}function wd(e,t,i,o,m,g,D,L,$){e.cancelPendingCommit=null;do il();while(yn!==0);if((Ft&6)!==0)throw Error(a(327));if(t!==null){if(t===e.current)throw Error(a(177));if(g=t.lanes|t.childLanes,g|=gt,et(e,i,g,D,L,$),e===Zt&&(Mt=Zt=null,It=0),ns=t,Ni=e,oi=i,Nu=g,qu=m,hd=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,tm(w,function(){return kd(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=de.T,de.T=null,m=Be.p,Be.p=2,D=Ft,Ft|=4;try{Hh(e,t,i)}finally{Ft=D,Be.p=m,de.T=o}}yn=1,_d(),Ad(),Rd()}}function _d(){if(yn===1){yn=0;var e=Ni,t=ns,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=de.T,de.T=null;var o=Be.p;Be.p=2;var m=Ft;Ft|=4;try{ad(t,e);var g=Zu,D=B(e.containerInfo),L=g.focusedElem,$=g.selectionRange;if(D!==L&&L&&L.ownerDocument&&A(L.ownerDocument.documentElement,L)){if($!==null&&P(L)){var Ee=$.start,Ne=$.end;if(Ne===void 0&&(Ne=Ee),"selectionStart"in L)L.selectionStart=Ee,L.selectionEnd=Math.min(Ne,L.value.length);else{var je=L.ownerDocument||document,Ae=je&&je.defaultView||window;if(Ae.getSelection){var Me=Ae.getSelection(),dt=L.textContent.length,vt=Math.min($.start,dt),Qt=$.end===void 0?vt:Math.min($.end,dt);!Me.extend&&vt>Qt&&(D=Qt,Qt=vt,vt=D);var ge=E(L,vt),se=E(L,Qt);if(ge&&se&&(Me.rangeCount!==1||Me.anchorNode!==ge.node||Me.anchorOffset!==ge.offset||Me.focusNode!==se.node||Me.focusOffset!==se.offset)){var Te=je.createRange();Te.setStart(ge.node,ge.offset),Me.removeAllRanges(),vt>Qt?(Me.addRange(Te),Me.extend(se.node,se.offset)):(Te.setEnd(se.node,se.offset),Me.addRange(Te))}}}}for(je=[],Me=L;Me=Me.parentNode;)Me.nodeType===1&&je.push({element:Me,left:Me.scrollLeft,top:Me.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<je.length;L++){var qe=je[L];qe.element.scrollLeft=qe.left,qe.element.scrollTop=qe.top}}gl=!!Qu,Zu=Qu=null}finally{Ft=m,Be.p=o,de.T=i}}e.current=t,yn=2}}function Ad(){if(yn===2){yn=0;var e=Ni,t=ns,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=de.T,de.T=null;var o=Be.p;Be.p=2;var m=Ft;Ft|=4;try{Jf(e,t.alternate,t)}finally{Ft=m,Be.p=o,de.T=i}}yn=3}}function Rd(){if(yn===4||yn===3){yn=0,ft();var e=Ni,t=ns,i=oi,o=hd;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?yn=5:(yn=0,ns=Ni=null,Cd(e,e.pendingLanes));var m=e.pendingLanes;if(m===0&&(Oi=null),kn(i),t=t.stateNode,pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(Pe,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=de.T,m=Be.p,Be.p=2,de.T=null;try{for(var g=e.onRecoverableError,D=0;D<o.length;D++){var L=o[D];g(L.value,{componentStack:L.stack})}}finally{de.T=t,Be.p=m}}(oi&3)!==0&&il(),Mr(e),m=e.pendingLanes,(i&261930)!==0&&(m&42)!==0?e===Lu?Qs++:(Qs=0,Lu=e):Qs=0,Zs(0)}}function Cd(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Bs(t)))}function il(){return _d(),Ad(),Rd(),kd()}function kd(){if(yn!==5)return!1;var e=Ni,t=Nu;Nu=0;var i=kn(oi),o=de.T,m=Be.p;try{Be.p=32>i?32:i,de.T=null,i=qu,qu=null;var g=Ni,D=oi;if(yn=0,ns=Ni=null,oi=0,(Ft&6)!==0)throw Error(a(331));var L=Ft;if(Ft|=4,cd(g.current),od(g,g.current,D,i),Ft=L,Zs(0,!1),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(Pe,g)}catch{}return!0}finally{Be.p=m,de.T=o,Cd(e,t)}}function Dd(e,t,i){t=sr(i,t),t=gu(e.stateNode,t,2),e=ki(e,t,2),e!==null&&(We(e,2),Mr(e))}function Xt(e,t,i){if(e.tag===3)Dd(e,e,i);else for(;t!==null;){if(t.tag===3){Dd(t,e,i);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Oi===null||!Oi.has(o))){e=sr(i,e),i=Df(2),o=ki(t,i,2),o!==null&&(Mf(i,o,t,e),We(o,2),Mr(o));break}}t=t.return}}function Uu(e,t,i){var o=e.pingCache;if(o===null){o=e.pingCache=new Kh;var m=new Set;o.set(t,m)}else m=o.get(t),m===void 0&&(m=new Set,o.set(t,m));m.has(i)||(Iu=!0,m.add(i),e=Zh.bind(null,e,t,i),t.then(e,e))}function Zh(e,t,i){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Zt===e&&(It&i)===i&&(on===4||on===3&&(It&62914560)===It&&300>Dt()-Zo?(Ft&2)===0&&rs(e,0):Pu|=i,ts===It&&(ts=0)),Mr(e)}function Md(e,t){t===0&&(t=G()),e=Vt(e,t),e!==null&&(We(e,t),Mr(e))}function Jh(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),Md(e,i)}function em(e,t){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,m=e.memoizedState;m!==null&&(i=m.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(a(314))}o!==null&&o.delete(t),Md(e,i)}function tm(e,t){return Le(e,t)}var al=null,as=null,Fu=!1,sl=!1,Vu=!1,Li=0;function Mr(e){e!==as&&e.next===null&&(as===null?al=as=e:as=as.next=e),sl=!0,Fu||(Fu=!0,rm())}function Zs(e,t){if(!Vu&&sl){Vu=!0;do for(var i=!1,o=al;o!==null;){if(e!==0){var m=o.pendingLanes;if(m===0)var g=0;else{var D=o.suspendedLanes,L=o.pingedLanes;g=(1<<31-Ke(42|e)+1)-1,g&=m&~(D&~L),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(i=!0,Od(o,g))}else g=It,g=Ir(o,o===Zt?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(g&3)===0||Hn(o,g)||(i=!0,Od(o,g));o=o.next}while(i);Vu=!1}}function nm(){Bd()}function Bd(){sl=Fu=!1;var e=0;Li!==0&&hm()&&(e=Li);for(var t=Dt(),i=null,o=al;o!==null;){var m=o.next,g=Id(o,t);g===0?(o.next=null,i===null?al=m:i.next=m,m===null&&(as=i)):(i=o,(e!==0||(g&3)!==0)&&(sl=!0)),o=m}yn!==0&&yn!==5||Zs(e),Li!==0&&(Li=0)}function Id(e,t){for(var i=e.suspendedLanes,o=e.pingedLanes,m=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var D=31-Ke(g),L=1<<D,$=m[D];$===-1?((L&i)===0||(L&o)!==0)&&(m[D]=va(L,t)):$<=t&&(e.expiredLanes|=L),g&=~L}if(t=Zt,i=It,i=Ir(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===t&&(Gt===2||Gt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&$e(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Hn(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(o!==null&&$e(o),kn(i)){case 2:case 8:i=O;break;case 32:i=w;break;case 268435456:i=K;break;default:i=w}return o=Pd.bind(null,e),i=Le(i,o),e.callbackPriority=t,e.callbackNode=i,t}return o!==null&&o!==null&&$e(o),e.callbackPriority=2,e.callbackNode=null,2}function Pd(e,t){if(yn!==0&&yn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(il()&&e.callbackNode!==i)return null;var o=It;return o=Ir(e,e===Zt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(pd(e,o,t),Id(e,Dt()),e.callbackNode!=null&&e.callbackNode===i?Pd.bind(null,e):null)}function Od(e,t){if(il())return null;pd(e,t,!0)}function rm(){pm(function(){(Ft&6)!==0?Le(kt,nm):Bd()})}function Hu(){if(Li===0){var e=Ha;e===0&&(e=st,st<<=1,(st&261888)===0&&(st=256)),Li=e}return Li}function Nd(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:yr(""+e)}function qd(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function im(e,t,i,o,m){if(t==="submit"&&i&&i.stateNode===m){var g=Nd((m[Jt]||null).action),D=o.submitter;D&&(t=(t=D[Jt]||null)?Nd(t.formAction):D.getAttribute("formAction"),t!==null&&(g=t,D=null));var L=new wa("action","action",null,o,m);e.push({event:L,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Li!==0){var $=D?qd(m,D):new FormData(m);cu(i,{pending:!0,data:$,method:m.method,action:g},null,$)}}else typeof g=="function"&&(L.preventDefault(),$=D?qd(m,D):new FormData(m),cu(i,{pending:!0,data:$,method:m.method,action:g},g,$))},currentTarget:m}]})}}for(var Gu=0;Gu<ot.length;Gu++){var Xu=ot[Gu],am=Xu.toLowerCase(),sm=Xu[0].toUpperCase()+Xu.slice(1);Xe(am,"on"+sm)}Xe(_e,"onAnimationEnd"),Xe(ve,"onAnimationIteration"),Xe(Oe,"onAnimationStart"),Xe("dblclick","onDoubleClick"),Xe("focusin","onFocus"),Xe("focusout","onBlur"),Xe(Ve,"onTransitionRun"),Xe(rt,"onTransitionStart"),Xe(it,"onTransitionCancel"),Xe(Ge,"onTransitionEnd"),Sr("onMouseEnter",["mouseout","mouseover"]),Sr("onMouseLeave",["mouseout","mouseover"]),Sr("onPointerEnter",["pointerout","pointerover"]),Sr("onPointerLeave",["pointerout","pointerover"]),pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pr("onBeforeInput",["compositionend","keypress","textInput","paste"]),pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Js="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),om=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Js));function Ld(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],m=o.event;o=o.listeners;e:{var g=void 0;if(t)for(var D=o.length-1;0<=D;D--){var L=o[D],$=L.instance,Ee=L.currentTarget;if(L=L.listener,$!==g&&m.isPropagationStopped())break e;g=L,m.currentTarget=Ee;try{g(m)}catch(Ne){ut(Ne)}m.currentTarget=null,g=$}else for(D=0;D<o.length;D++){if(L=o[D],$=L.instance,Ee=L.currentTarget,L=L.listener,$!==g&&m.isPropagationStopped())break e;g=L,m.currentTarget=Ee;try{g(m)}catch(Ne){ut(Ne)}m.currentTarget=null,g=$}}}}function Bt(e,t){var i=t[tr];i===void 0&&(i=t[tr]=new Set);var o=e+"__bubble";i.has(o)||(jd(t,e,2,!1),i.add(o))}function Ku(e,t,i){var o=0;t&&(o|=4),jd(i,e,o,t)}var ol="_reactListening"+Math.random().toString(36).slice(2);function Wu(e){if(!e[ol]){e[ol]=!0,Nr.forEach(function(i){i!=="selectionchange"&&(om.has(i)||Ku(i,!1,e),Ku(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ol]||(t[ol]=!0,Ku("selectionchange",!1,t))}}function jd(e,t,i,o){switch(mh(t)){case 2:var m=Om;break;case 8:m=Nm;break;default:m=uc}i=m.bind(null,t,i,e),m=void 0,!gs||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(m=!0),o?m!==void 0?e.addEventListener(t,i,{capture:!0,passive:m}):e.addEventListener(t,i,!0):m!==void 0?e.addEventListener(t,i,{passive:m}):e.addEventListener(t,i,!1)}function Yu(e,t,i,o,m){var g=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var D=o.tag;if(D===3||D===4){var L=o.stateNode.containerInfo;if(L===m)break;if(D===4)for(D=o.return;D!==null;){var $=D.tag;if(($===3||$===4)&&D.stateNode.containerInfo===m)return;D=D.return}for(;L!==null;){if(D=Tr(L),D===null)return;if($=D.tag,$===5||$===6||$===26||$===27){o=g=D;continue e}L=L.parentNode}}o=o.return}hi(function(){var Ee=g,Ne=Sa(i),je=[];e:{var Ae=lt.get(e);if(Ae!==void 0){var Me=wa,dt=e;switch(e){case"keypress":if(gi(i)===0)break e;case"keydown":case"keyup":Me=Ma;break;case"focusin":dt="focus",Me=yi;break;case"focusout":dt="blur",Me=yi;break;case"beforeblur":case"afterblur":Me=yi;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=Ra;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=mo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=Es;break;case _e:case ve:case Oe:Me=po;break;case Ge:Me=ws;break;case"scroll":case"scrollend":Me=_a;break;case"wheel":Me=Ia;break;case"copy":case"cut":case"paste":Me=vi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=Ss;break;case"toggle":case"beforetoggle":Me=vo}var vt=(t&4)!==0,Qt=!vt&&(e==="scroll"||e==="scrollend"),ge=vt?Ae!==null?Ae+"Capture":null:Ae;vt=[];for(var se=Ee,Te;se!==null;){var qe=se;if(Te=qe.stateNode,qe=qe.tag,qe!==5&&qe!==26&&qe!==27||Te===null||ge===null||(qe=Ur(se,ge),qe!=null&&vt.push(eo(se,qe,Te))),Qt)break;se=se.return}0<vt.length&&(Ae=new Me(Ae,dt,null,i,Ne),je.push({event:Ae,listeners:vt}))}}if((t&7)===0){e:{if(Ae=e==="mouseover"||e==="pointerover",Me=e==="mouseout"||e==="pointerout",Ae&&i!==rr&&(dt=i.relatedTarget||i.fromElement)&&(Tr(dt)||dt[gn]))break e;if((Me||Ae)&&(Ae=Ne.window===Ne?Ne:(Ae=Ne.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,Me?(dt=i.relatedTarget||i.toElement,Me=Ee,dt=dt?Tr(dt):null,dt!==null&&(Qt=d(dt),vt=dt.tag,dt!==Qt||vt!==5&&vt!==27&&vt!==6)&&(dt=null)):(Me=null,dt=Ee),Me!==dt)){if(vt=Ra,qe="onMouseLeave",ge="onMouseEnter",se="mouse",(e==="pointerout"||e==="pointerover")&&(vt=Ss,qe="onPointerLeave",ge="onPointerEnter",se="pointer"),Qt=Me==null?Ae:Kn(Me),Te=dt==null?Ae:Kn(dt),Ae=new vt(qe,se+"leave",Me,i,Ne),Ae.target=Qt,Ae.relatedTarget=Te,qe=null,Tr(Ne)===Ee&&(vt=new vt(ge,se+"enter",dt,i,Ne),vt.target=Te,vt.relatedTarget=Qt,qe=vt),Qt=qe,Me&&dt)t:{for(vt=lm,ge=Me,se=dt,Te=0,qe=ge;qe;qe=vt(qe))Te++;qe=0;for(var yt=se;yt;yt=vt(yt))qe++;for(;0<Te-qe;)ge=vt(ge),Te--;for(;0<qe-Te;)se=vt(se),qe--;for(;Te--;){if(ge===se||se!==null&&ge===se.alternate){vt=ge;break t}ge=vt(ge),se=vt(se)}vt=null}else vt=null;Me!==null&&zd(je,Ae,Me,vt,!1),dt!==null&&Qt!==null&&zd(je,Qt,dt,vt,!0)}}e:{if(Ae=Ee?Kn(Ee):window,Me=Ae.nodeName&&Ae.nodeName.toLowerCase(),Me==="select"||Me==="input"&&Ae.type==="file")var jt=ia;else if(Na(Ae))if(ar)jt=Ti;else{jt=Kr;var ht=wo}else Me=Ae.nodeName,!Me||Me.toLowerCase()!=="input"||Ae.type!=="checkbox"&&Ae.type!=="radio"?Ee&&ps(Ee.elementType)&&(jt=ia):jt=ks;if(jt&&(jt=jt(e,Ee))){Cs(je,jt,i,Ne);break e}ht&&ht(e,Ae,Ee),e==="focusout"&&Ee&&Ae.type==="number"&&Ee.memoizedProps.value!=null&&$i(Ae,"number",Ae.value)}switch(ht=Ee?Kn(Ee):window,e){case"focusin":(Na(ht)||ht.contentEditable==="true")&&(H=ht,te=Ee,ye=null);break;case"focusout":ye=te=H=null;break;case"mousedown":ne=!0;break;case"contextmenu":case"mouseup":case"dragend":ne=!1,J(je,i,Ne);break;case"selectionchange":if(U)break;case"keydown":case"keyup":J(je,i,Ne)}var wt;if(na)e:{switch(e){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else Gr?Rs(e,i)&&(Pt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Pt="onCompositionStart");Pt&&(Pa&&i.locale!=="ko"&&(Gr||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Gr&&(wt=pi()):(ir=Ne,Ea="value"in ir?ir.value:ir.textContent,Gr=!0)),ht=ll(Ee,Pt),0<ht.length&&(Pt=new Da(Pt,e,null,i,Ne),je.push({event:Pt,listeners:ht}),wt?Pt.data=wt:(wt=xo(i),wt!==null&&(Pt.data=wt)))),(wt=Rl?To(e,i):Cl(e,i))&&(Pt=ll(Ee,"onBeforeInput"),0<Pt.length&&(ht=new Da("onBeforeInput","beforeinput",null,i,Ne),je.push({event:ht,listeners:Pt}),ht.data=wt)),im(je,e,Ee,i,Ne)}Ld(je,t)})}function eo(e,t,i){return{instance:e,listener:t,currentTarget:i}}function ll(e,t){for(var i=t+"Capture",o=[];e!==null;){var m=e,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=Ur(e,i),m!=null&&o.unshift(eo(e,m,g)),m=Ur(e,t),m!=null&&o.push(eo(e,m,g))),e.tag===3)return o;e=e.return}return[]}function lm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function zd(e,t,i,o,m){for(var g=t._reactName,D=[];i!==null&&i!==o;){var L=i,$=L.alternate,Ee=L.stateNode;if(L=L.tag,$!==null&&$===o)break;L!==5&&L!==26&&L!==27||Ee===null||($=Ee,m?(Ee=Ur(i,g),Ee!=null&&D.unshift(eo(i,Ee,$))):m||(Ee=Ur(i,g),Ee!=null&&D.push(eo(i,Ee,$)))),i=i.return}D.length!==0&&e.push({event:t,listeners:D})}var um=/\r\n?/g,cm=/\u0000|\uFFFD/g;function Ud(e){return(typeof e=="string"?e:""+e).replace(um,`
`).replace(cm,"")}function Fd(e,t){return t=Ud(t),Ud(e)===t}function $t(e,t,i,o,m,g){switch(i){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||Lr(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&Lr(e,""+o);break;case"className":Wi(e,"class",o);break;case"tabIndex":Wi(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Wi(e,i,o);break;case"style":hs(e,o,g);break;case"data":if(t!=="object"){Wi(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=yr(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(i==="formAction"?(t!=="input"&&$t(e,t,"name",m.name,m,null),$t(e,t,"formEncType",m.formEncType,m,null),$t(e,t,"formMethod",m.formMethod,m,null),$t(e,t,"formTarget",m.formTarget,m,null)):($t(e,t,"encType",m.encType,m,null),$t(e,t,"method",m.method,m,null),$t(e,t,"target",m.target,m,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=yr(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=qn);break;case"onScroll":o!=null&&Bt("scroll",e);break;case"onScrollEnd":o!=null&&Bt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(i=o.__html,i!=null){if(m.children!=null)throw Error(a(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=yr(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":Bt("beforetoggle",e),Bt("toggle",e),At(e,"popover",o);break;case"xlinkActuate":nr(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":nr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":nr(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":nr(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":nr(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":nr(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":nr(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":nr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":nr(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":At(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=wl.get(i)||i,At(e,i,o))}}function $u(e,t,i,o,m,g){switch(i){case"style":hs(e,o,g);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(i=o.__html,i!=null){if(m.children!=null)throw Error(a(60));e.innerHTML=i}}break;case"children":typeof o=="string"?Lr(e,o):(typeof o=="number"||typeof o=="bigint")&&Lr(e,""+o);break;case"onScroll":o!=null&&Bt("scroll",e);break;case"onScrollEnd":o!=null&&Bt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=qn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xi.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(m=i.endsWith("Capture"),t=i.slice(2,m?i.length-7:void 0),g=e[Jt]||null,g=g!=null?g[i]:null,typeof g=="function"&&e.removeEventListener(t,g,m),typeof o=="function")){typeof g!="function"&&g!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,o,m);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):At(e,i,o)}}}function Cn(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Bt("error",e),Bt("load",e);var o=!1,m=!1,g;for(g in i)if(i.hasOwnProperty(g)){var D=i[g];if(D!=null)switch(g){case"src":o=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:$t(e,t,g,D,i,null)}}m&&$t(e,t,"srcSet",i.srcSet,i,null),o&&$t(e,t,"src",i.src,i,null);return;case"input":Bt("invalid",e);var L=g=D=m=null,$=null,Ee=null;for(o in i)if(i.hasOwnProperty(o)){var Ne=i[o];if(Ne!=null)switch(o){case"name":m=Ne;break;case"type":D=Ne;break;case"checked":$=Ne;break;case"defaultChecked":Ee=Ne;break;case"value":g=Ne;break;case"defaultValue":L=Ne;break;case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(a(137,t));break;default:$t(e,t,o,Ne,i,null)}}Ta(e,g,L,$,Ee,D,m,!1);return;case"select":Bt("invalid",e),o=D=g=null;for(m in i)if(i.hasOwnProperty(m)&&(L=i[m],L!=null))switch(m){case"value":g=L;break;case"defaultValue":D=L;break;case"multiple":o=L;default:$t(e,t,m,L,i,null)}t=g,i=D,e.multiple=!!o,t!=null?gr(e,!!o,t,!1):i!=null&&gr(e,!!o,i,!0);return;case"textarea":Bt("invalid",e),g=m=o=null;for(D in i)if(i.hasOwnProperty(D)&&(L=i[D],L!=null))switch(D){case"value":o=L;break;case"defaultValue":m=L;break;case"children":g=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(a(91));break;default:$t(e,t,D,L,i,null)}Qi(e,o,m,g);return;case"option":for($ in i)if(i.hasOwnProperty($)&&(o=i[$],o!=null))switch($){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:$t(e,t,$,o,i,null)}return;case"dialog":Bt("beforetoggle",e),Bt("toggle",e),Bt("cancel",e),Bt("close",e);break;case"iframe":case"object":Bt("load",e);break;case"video":case"audio":for(o=0;o<Js.length;o++)Bt(Js[o],e);break;case"image":Bt("error",e),Bt("load",e);break;case"details":Bt("toggle",e);break;case"embed":case"source":case"link":Bt("error",e),Bt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ee in i)if(i.hasOwnProperty(Ee)&&(o=i[Ee],o!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:$t(e,t,Ee,o,i,null)}return;default:if(ps(t)){for(Ne in i)i.hasOwnProperty(Ne)&&(o=i[Ne],o!==void 0&&$u(e,t,Ne,o,i,void 0));return}}for(L in i)i.hasOwnProperty(L)&&(o=i[L],o!=null&&$t(e,t,L,o,i,null))}function fm(e,t,i,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,D=null,L=null,$=null,Ee=null,Ne=null;for(Me in i){var je=i[Me];if(i.hasOwnProperty(Me)&&je!=null)switch(Me){case"checked":break;case"value":break;case"defaultValue":$=je;default:o.hasOwnProperty(Me)||$t(e,t,Me,null,o,je)}}for(var Ae in o){var Me=o[Ae];if(je=i[Ae],o.hasOwnProperty(Ae)&&(Me!=null||je!=null))switch(Ae){case"type":g=Me;break;case"name":m=Me;break;case"checked":Ee=Me;break;case"defaultChecked":Ne=Me;break;case"value":D=Me;break;case"defaultValue":L=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(a(137,t));break;default:Me!==je&&$t(e,t,Ae,Me,o,je)}}Er(e,D,L,$,Ee,Ne,g,m);return;case"select":Me=D=L=Ae=null;for(g in i)if($=i[g],i.hasOwnProperty(g)&&$!=null)switch(g){case"value":break;case"multiple":Me=$;default:o.hasOwnProperty(g)||$t(e,t,g,null,o,$)}for(m in o)if(g=o[m],$=i[m],o.hasOwnProperty(m)&&(g!=null||$!=null))switch(m){case"value":Ae=g;break;case"defaultValue":L=g;break;case"multiple":D=g;default:g!==$&&$t(e,t,m,g,o,$)}t=L,i=D,o=Me,Ae!=null?gr(e,!!i,Ae,!1):!!o!=!!i&&(t!=null?gr(e,!!i,t,!0):gr(e,!!i,i?[]:"",!1));return;case"textarea":Me=Ae=null;for(L in i)if(m=i[L],i.hasOwnProperty(L)&&m!=null&&!o.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:$t(e,t,L,null,o,m)}for(D in o)if(m=o[D],g=i[D],o.hasOwnProperty(D)&&(m!=null||g!=null))switch(D){case"value":Ae=m;break;case"defaultValue":Me=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(a(91));break;default:m!==g&&$t(e,t,D,m,o,g)}ds(e,Ae,Me);return;case"option":for(var dt in i)if(Ae=i[dt],i.hasOwnProperty(dt)&&Ae!=null&&!o.hasOwnProperty(dt))switch(dt){case"selected":e.selected=!1;break;default:$t(e,t,dt,null,o,Ae)}for($ in o)if(Ae=o[$],Me=i[$],o.hasOwnProperty($)&&Ae!==Me&&(Ae!=null||Me!=null))switch($){case"selected":e.selected=Ae&&typeof Ae!="function"&&typeof Ae!="symbol";break;default:$t(e,t,$,Ae,o,Me)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vt in i)Ae=i[vt],i.hasOwnProperty(vt)&&Ae!=null&&!o.hasOwnProperty(vt)&&$t(e,t,vt,null,o,Ae);for(Ee in o)if(Ae=o[Ee],Me=i[Ee],o.hasOwnProperty(Ee)&&Ae!==Me&&(Ae!=null||Me!=null))switch(Ee){case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(a(137,t));break;default:$t(e,t,Ee,Ae,o,Me)}return;default:if(ps(t)){for(var Qt in i)Ae=i[Qt],i.hasOwnProperty(Qt)&&Ae!==void 0&&!o.hasOwnProperty(Qt)&&$u(e,t,Qt,void 0,o,Ae);for(Ne in o)Ae=o[Ne],Me=i[Ne],!o.hasOwnProperty(Ne)||Ae===Me||Ae===void 0&&Me===void 0||$u(e,t,Ne,Ae,o,Me);return}}for(var ge in i)Ae=i[ge],i.hasOwnProperty(ge)&&Ae!=null&&!o.hasOwnProperty(ge)&&$t(e,t,ge,null,o,Ae);for(je in o)Ae=o[je],Me=i[je],!o.hasOwnProperty(je)||Ae===Me||Ae==null&&Me==null||$t(e,t,je,Ae,o,Me)}function Vd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function dm(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var m=i[o],g=m.transferSize,D=m.initiatorType,L=m.duration;if(g&&L&&Vd(D)){for(D=0,L=m.responseEnd,o+=1;o<i.length;o++){var $=i[o],Ee=$.startTime;if(Ee>L)break;var Ne=$.transferSize,je=$.initiatorType;Ne&&Vd(je)&&($=$.responseEnd,D+=Ne*($<L?1:(L-Ee)/($-Ee)))}if(--o,t+=8*(g+D)/(m.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Qu=null,Zu=null;function ul(e){return e.nodeType===9?e:e.ownerDocument}function Hd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gd(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Ju(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ec=null;function hm(){var e=window.event;return e&&e.type==="popstate"?e===ec?!1:(ec=e,!0):(ec=null,!1)}var Xd=typeof setTimeout=="function"?setTimeout:void 0,mm=typeof clearTimeout=="function"?clearTimeout:void 0,Kd=typeof Promise=="function"?Promise:void 0,pm=typeof queueMicrotask=="function"?queueMicrotask:typeof Kd<"u"?function(e){return Kd.resolve(null).then(e).catch(gm)}:Xd;function gm(e){setTimeout(function(){throw e})}function ji(e){return e==="head"}function Wd(e,t){var i=t,o=0;do{var m=i.nextSibling;if(e.removeChild(i),m&&m.nodeType===8)if(i=m.data,i==="/$"||i==="/&"){if(o===0){e.removeChild(m),us(t);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")to(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,to(i);for(var g=i.firstChild;g;){var D=g.nextSibling,L=g.nodeName;g[Xn]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&g.rel.toLowerCase()==="stylesheet"||i.removeChild(g),g=D}}else i==="body"&&to(e.ownerDocument.body);i=m}while(i);us(t)}function Yd(e,t){var i=e;e=0;do{var o=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=o}while(i)}function tc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":tc(i),ba(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function ym(e,t,i,o){for(;e.nodeType===1;){var m=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Xn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==m.rel||e.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||e.getAttribute("title")!==(m.title==null?null:m.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(m.src==null?null:m.src)||e.getAttribute("type")!==(m.type==null?null:m.type)||e.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=fr(e.nextSibling),e===null)break}return null}function vm(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=fr(e.nextSibling),e===null))return null;return e}function $d(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=fr(e.nextSibling),e===null))return null;return e}function nc(e){return e.data==="$?"||e.data==="$~"}function rc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function bm(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var o=function(){t(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function fr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var ic=null;function Qd(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return fr(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function Zd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function Jd(e,t,i){switch(t=ul(i),e){case"html":if(e=t.documentElement,!e)throw Error(a(452));return e;case"head":if(e=t.head,!e)throw Error(a(453));return e;case"body":if(e=t.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function to(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ba(e)}var dr=new Map,eh=new Set;function cl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var li=Be.d;Be.d={f:xm,r:Tm,D:Sm,C:Em,L:wm,m:_m,X:Rm,S:Am,M:Cm};function xm(){var e=li.f(),t=tl();return e||t}function Tm(e){var t=Kt(e);t!==null&&t.tag===5&&t.type==="form"?gf(t):li.r(e)}var ss=typeof document>"u"?null:document;function th(e,t,i){var o=ss;if(o&&typeof t=="string"&&t){var m=bn(t);m='link[rel="'+e+'"][href="'+m+'"]',typeof i=="string"&&(m+='[crossorigin="'+i+'"]'),eh.has(m)||(eh.add(m),e={rel:e,crossOrigin:i,href:t},o.querySelector(m)===null&&(t=o.createElement("link"),Cn(t,"link",e),ln(t),o.head.appendChild(t)))}}function Sm(e){li.D(e),th("dns-prefetch",e,null)}function Em(e,t){li.C(e,t),th("preconnect",e,t)}function wm(e,t,i){li.L(e,t,i);var o=ss;if(o&&e&&t){var m='link[rel="preload"][as="'+bn(t)+'"]';t==="image"&&i&&i.imageSrcSet?(m+='[imagesrcset="'+bn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(m+='[imagesizes="'+bn(i.imageSizes)+'"]')):m+='[href="'+bn(e)+'"]';var g=m;switch(t){case"style":g=os(e);break;case"script":g=ls(e)}dr.has(g)||(e=b({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),dr.set(g,e),o.querySelector(m)!==null||t==="style"&&o.querySelector(no(g))||t==="script"&&o.querySelector(ro(g))||(t=o.createElement("link"),Cn(t,"link",e),ln(t),o.head.appendChild(t)))}}function _m(e,t){li.m(e,t);var i=ss;if(i&&e){var o=t&&typeof t.as=="string"?t.as:"script",m='link[rel="modulepreload"][as="'+bn(o)+'"][href="'+bn(e)+'"]',g=m;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=ls(e)}if(!dr.has(g)&&(e=b({rel:"modulepreload",href:e},t),dr.set(g,e),i.querySelector(m)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(ro(g)))return}o=i.createElement("link"),Cn(o,"link",e),ln(o),i.head.appendChild(o)}}}function Am(e,t,i){li.S(e,t,i);var o=ss;if(o&&e){var m=Dn(o).hoistableStyles,g=os(e);t=t||"default";var D=m.get(g);if(!D){var L={loading:0,preload:null};if(D=o.querySelector(no(g)))L.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},i),(i=dr.get(g))&&ac(e,i);var $=D=o.createElement("link");ln($),Cn($,"link",e),$._p=new Promise(function(Ee,Ne){$.onload=Ee,$.onerror=Ne}),$.addEventListener("load",function(){L.loading|=1}),$.addEventListener("error",function(){L.loading|=2}),L.loading|=4,fl(D,t,o)}D={type:"stylesheet",instance:D,count:1,state:L},m.set(g,D)}}}function Rm(e,t){li.X(e,t);var i=ss;if(i&&e){var o=Dn(i).hoistableScripts,m=ls(e),g=o.get(m);g||(g=i.querySelector(ro(m)),g||(e=b({src:e,async:!0},t),(t=dr.get(m))&&sc(e,t),g=i.createElement("script"),ln(g),Cn(g,"link",e),i.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(m,g))}}function Cm(e,t){li.M(e,t);var i=ss;if(i&&e){var o=Dn(i).hoistableScripts,m=ls(e),g=o.get(m);g||(g=i.querySelector(ro(m)),g||(e=b({src:e,async:!0,type:"module"},t),(t=dr.get(m))&&sc(e,t),g=i.createElement("script"),ln(g),Cn(g,"link",e),i.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(m,g))}}function nh(e,t,i,o){var m=(m=at.current)?cl(m):null;if(!m)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=os(i.href),i=Dn(m).hoistableStyles,o=i.get(t),o||(o={type:"style",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=os(i.href);var g=Dn(m).hoistableStyles,D=g.get(e);if(D||(m=m.ownerDocument||m,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,D),(g=m.querySelector(no(e)))&&!g._p&&(D.instance=g,D.state.loading=5),dr.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},dr.set(e,i),g||km(m,e,i,D.state))),t&&o===null)throw Error(a(528,""));return D}if(t&&o!==null)throw Error(a(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ls(i),i=Dn(m).hoistableScripts,o=i.get(t),o||(o={type:"script",instance:null,count:0,state:null},i.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function os(e){return'href="'+bn(e)+'"'}function no(e){return'link[rel="stylesheet"]['+e+"]"}function rh(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function km(e,t,i,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),Cn(t,"link",i),ln(t),e.head.appendChild(t))}function ls(e){return'[src="'+bn(e)+'"]'}function ro(e){return"script[async]"+e}function ih(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+bn(i.href)+'"]');if(o)return t.instance=o,ln(o),o;var m=b({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),ln(o),Cn(o,"style",m),fl(o,i.precedence,e),t.instance=o;case"stylesheet":m=os(i.href);var g=e.querySelector(no(m));if(g)return t.state.loading|=4,t.instance=g,ln(g),g;o=rh(i),(m=dr.get(m))&&ac(o,m),g=(e.ownerDocument||e).createElement("link"),ln(g);var D=g;return D._p=new Promise(function(L,$){D.onload=L,D.onerror=$}),Cn(g,"link",o),t.state.loading|=4,fl(g,i.precedence,e),t.instance=g;case"script":return g=ls(i.src),(m=e.querySelector(ro(g)))?(t.instance=m,ln(m),m):(o=i,(m=dr.get(g))&&(o=b({},i),sc(o,m)),e=e.ownerDocument||e,m=e.createElement("script"),ln(m),Cn(m,"link",o),e.head.appendChild(m),t.instance=m);case"void":return null;default:throw Error(a(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,fl(o,i.precedence,e));return t.instance}function fl(e,t,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=o.length?o[o.length-1]:null,g=m,D=0;D<o.length;D++){var L=o[D];if(L.dataset.precedence===t)g=L;else if(g!==m)break}g?g.parentNode.insertBefore(e,g.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function ac(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function sc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var dl=null;function ah(e,t,i){if(dl===null){var o=new Map,m=dl=new Map;m.set(i,o)}else m=dl,o=m.get(i),o||(o=new Map,m.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),m=0;m<i.length;m++){var g=i[m];if(!(g[Xn]||g[Ht]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var D=g.getAttribute(t)||"";D=e+D;var L=o.get(D);L?L.push(g):o.set(D,[g])}}return o}function sh(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function Dm(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function oh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Mm(e,t,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var m=os(o.href),g=t.querySelector(no(m));if(g){t=g._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=hl.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=g,ln(g);return}g=t.ownerDocument||t,o=rh(o),(m=dr.get(m))&&ac(o,m),g=g.createElement("link"),ln(g);var D=g;D._p=new Promise(function(L,$){D.onload=L,D.onerror=$}),Cn(g,"link",o),i.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=hl.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var oc=0;function Bm(e,t){return e.stylesheets&&e.count===0&&pl(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&pl(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+t);0<e.imgBytes&&oc===0&&(oc=62500*dm());var m=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&pl(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>oc?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(m)}}:null}function hl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)pl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ml=null;function pl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ml=new Map,t.forEach(Im,e),ml=null,hl.call(e))}function Im(e,t){if(!(t.state.loading&4)){var i=ml.get(e);if(i)var o=i.get(null);else{i=new Map,ml.set(e,i);for(var m=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var D=m[g];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(i.set(D.dataset.precedence,D),o=D)}o&&i.set(null,o)}m=t.instance,D=m.getAttribute("data-precedence"),g=i.get(D)||o,g===o&&i.set(null,m),i.set(D,m),this.count++,o=hl.bind(this),m.addEventListener("load",o),m.addEventListener("error",o),g?g.parentNode.insertBefore(m,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(m,e.firstChild)),t.state.loading|=4}}var io={$$typeof:N,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function Pm(e,t,i,o,m,g,D,L,$){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Y(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Y(0),this.hiddenUpdates=Y(null),this.identifierPrefix=o,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function lh(e,t,i,o,m,g,D,L,$,Ee,Ne,je){return e=new Pm(e,t,i,D,$,Ee,Ne,je,L),t=1,g===!0&&(t|=24),g=Yn(3,null,null,t),e.current=g,g.stateNode=e,t=zl(),t.refCount++,e.pooledCache=t,t.refCount++,g.memoizedState={element:o,isDehydrated:i,cache:t},Hl(g),e}function uh(e){return e?(e=ja,e):ja}function ch(e,t,i,o,m,g){m=uh(m),o.context===null?o.context=m:o.pendingContext=m,o=Ci(t),o.payload={element:i},g=g===void 0?null:g,g!==null&&(o.callback=g),i=ki(e,o,t),i!==null&&(Fn(i,e,t),Ns(i,e,t))}function fh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function lc(e,t){fh(e,t),(e=e.alternate)&&fh(e,t)}function dh(e){if(e.tag===13||e.tag===31){var t=Vt(e,67108864);t!==null&&Fn(t,e,67108864),lc(e,67108864)}}function hh(e){if(e.tag===13||e.tag===31){var t=er();t=fi(t);var i=Vt(e,t);i!==null&&Fn(i,e,t),lc(e,t)}}var gl=!0;function Om(e,t,i,o){var m=de.T;de.T=null;var g=Be.p;try{Be.p=2,uc(e,t,i,o)}finally{Be.p=g,de.T=m}}function Nm(e,t,i,o){var m=de.T;de.T=null;var g=Be.p;try{Be.p=8,uc(e,t,i,o)}finally{Be.p=g,de.T=m}}function uc(e,t,i,o){if(gl){var m=cc(o);if(m===null)Yu(e,t,o,yl,i),ph(e,o);else if(Lm(m,e,t,i,o))o.stopPropagation();else if(ph(e,o),t&4&&-1<qm.indexOf(e)){for(;m!==null;){var g=Kt(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var D=Vn(g.pendingLanes);if(D!==0){var L=g;for(L.pendingLanes|=2,L.entangledLanes|=2;D;){var $=1<<31-Ke(D);L.entanglements[1]|=$,D&=~$}Mr(g),(Ft&6)===0&&(Jo=Dt()+500,Zs(0))}}break;case 31:case 13:L=Vt(g,2),L!==null&&Fn(L,g,2),tl(),lc(g,2)}if(g=cc(o),g===null&&Yu(e,t,o,yl,i),g===m)break;m=g}m!==null&&o.stopPropagation()}else Yu(e,t,o,null,i)}}function cc(e){return e=Sa(e),fc(e)}var yl=null;function fc(e){if(yl=null,e=Tr(e),e!==null){var t=d(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=u(t),e!==null)return e;e=null}else if(i===31){if(e=c(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return yl=e,null}function mh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rt()){case kt:return 2;case O:return 8;case w:case R:return 32;case K:return 268435456;default:return 32}default:return 32}}var dc=!1,zi=null,Ui=null,Fi=null,ao=new Map,so=new Map,Vi=[],qm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ph(e,t){switch(e){case"focusin":case"focusout":zi=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":Fi=null;break;case"pointerover":case"pointerout":ao.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":so.delete(t.pointerId)}}function oo(e,t,i,o,m,g){return e===null||e.nativeEvent!==g?(e={blockedOn:t,domEventName:i,eventSystemFlags:o,nativeEvent:g,targetContainers:[m]},t!==null&&(t=Kt(t),t!==null&&dh(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,m!==null&&t.indexOf(m)===-1&&t.push(m),e)}function Lm(e,t,i,o,m){switch(t){case"focusin":return zi=oo(zi,e,t,i,o,m),!0;case"dragenter":return Ui=oo(Ui,e,t,i,o,m),!0;case"mouseover":return Fi=oo(Fi,e,t,i,o,m),!0;case"pointerover":var g=m.pointerId;return ao.set(g,oo(ao.get(g)||null,e,t,i,o,m)),!0;case"gotpointercapture":return g=m.pointerId,so.set(g,oo(so.get(g)||null,e,t,i,o,m)),!0}return!1}function gh(e){var t=Tr(e.target);if(t!==null){var i=d(t);if(i!==null){if(t=i.tag,t===13){if(t=u(i),t!==null){e.blockedOn=t,Pr(e.priority,function(){hh(i)});return}}else if(t===31){if(t=c(i),t!==null){e.blockedOn=t,Pr(e.priority,function(){hh(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=cc(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);rr=o,i.target.dispatchEvent(o),rr=null}else return t=Kt(i),t!==null&&dh(t),e.blockedOn=i,!1;t.shift()}return!0}function yh(e,t,i){vl(e)&&i.delete(t)}function jm(){dc=!1,zi!==null&&vl(zi)&&(zi=null),Ui!==null&&vl(Ui)&&(Ui=null),Fi!==null&&vl(Fi)&&(Fi=null),ao.forEach(yh),so.forEach(yh)}function bl(e,t){e.blockedOn===t&&(e.blockedOn=null,dc||(dc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,jm)))}var xl=null;function bh(e){xl!==e&&(xl=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){xl===e&&(xl=null);for(var t=0;t<e.length;t+=3){var i=e[t],o=e[t+1],m=e[t+2];if(typeof o!="function"){if(fc(o||i)===null)continue;break}var g=Kt(i);g!==null&&(e.splice(t,3),t-=3,cu(g,{pending:!0,data:m,method:i.method,action:o},o,m))}}))}function us(e){function t($){return bl($,e)}zi!==null&&bl(zi,e),Ui!==null&&bl(Ui,e),Fi!==null&&bl(Fi,e),ao.forEach(t),so.forEach(t);for(var i=0;i<Vi.length;i++){var o=Vi[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Vi.length&&(i=Vi[0],i.blockedOn===null);)gh(i),i.blockedOn===null&&Vi.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var m=i[o],g=i[o+1],D=m[Jt]||null;if(typeof g=="function")D||bh(i);else if(D){var L=null;if(g&&g.hasAttribute("formAction")){if(m=g,D=g[Jt]||null)L=D.formAction;else if(fc(m)!==null)continue}else L=D.action;typeof L=="function"?i[o+1]=L:(i.splice(o,3),o-=3),bh(i)}}}function xh(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(D){return m=D})},focusReset:"manual",scroll:"manual"})}function t(){m!==null&&(m(),m=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,m=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),m!==null&&(m(),m=null)}}}function hc(e){this._internalRoot=e}Tl.prototype.render=hc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(a(409));var i=t.current,o=er();ch(i,o,e,t,null,null)},Tl.prototype.unmount=hc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ch(e.current,2,null,e,null,null),tl(),t[gn]=null}};function Tl(e){this._internalRoot=e}Tl.prototype.unstable_scheduleHydration=function(e){if(e){var t=xr();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Vi.length&&t!==0&&t<Vi[i].priority;i++);Vi.splice(i,0,e),i===0&&gh(e)}};var Th=r.version;if(Th!=="19.2.4")throw Error(a(527,Th,"19.2.4"));Be.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=h(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var zm={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:de,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sl.isDisabled&&Sl.supportsFiber)try{Pe=Sl.inject(zm),pt=Sl}catch{}}return reactDomClient_production.createRoot=function(e,t){if(!l(e))throw Error(a(299));var i=!1,o="",m=Af,g=Rf,D=Cf;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(m=t.onUncaughtError),t.onCaughtError!==void 0&&(g=t.onCaughtError),t.onRecoverableError!==void 0&&(D=t.onRecoverableError)),t=lh(e,1,!1,null,null,i,o,null,m,g,D,xh),e[gn]=t.current,Wu(e),new hc(t)},reactDomClient_production.hydrateRoot=function(e,t,i){if(!l(e))throw Error(a(299));var o=!1,m="",g=Af,D=Rf,L=Cf,$=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(D=i.onCaughtError),i.onRecoverableError!==void 0&&(L=i.onRecoverableError),i.formState!==void 0&&($=i.formState)),t=lh(e,1,!0,t,i??null,o,m,$,g,D,L,xh),t.context=uh(null),i=t.current,o=er(),o=fi(o),m=Ci(o),m.callback=null,ki(i,m,o),i=o,t.current.lanes=i,We(t,i),Mr(t),e[gn]=t.current,Wu(e),new Tl(t)},reactDomClient_production.version="19.2.4",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const LayoutGroupContext=reactExports.createContext({});function useConstant(n){const r=reactExports.useRef(null);return r.current===null&&(r.current=n()),r.current}const PresenceContext=reactExports.createContext(null),MotionConfigContext=reactExports.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(r){const s=this.props.childRef.current;if(s&&r.isPresent&&!this.props.isPresent){const a=this.props.sizeRef.current;a.height=s.offsetHeight||0,a.width=s.offsetWidth||0,a.top=s.offsetTop,a.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:n,isPresent:r}){const s=reactExports.useId(),a=reactExports.useRef(null),l=reactExports.useRef({width:0,height:0,top:0,left:0}),{nonce:d}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:u,height:c,top:p,left:h}=l.current;if(r||!a.current||!u||!c)return;a.current.dataset.motionPopId=s;const y=document.createElement("style");return d&&(y.nonce=d),document.head.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            top: ${p}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(y)}},[r]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:r,childRef:a,sizeRef:l,children:reactExports.cloneElement(n,{ref:a})})}const PresenceChild=({children:n,initial:r,isPresent:s,onExitComplete:a,custom:l,presenceAffectsLayout:d,mode:u})=>{const c=useConstant(newChildrenMap),p=reactExports.useId(),h=reactExports.useCallback(b=>{c.set(b,!0);for(const x of c.values())if(!x)return;a&&a()},[c,a]),y=reactExports.useMemo(()=>({id:p,initial:r,isPresent:s,custom:l,onExitComplete:h,register:b=>(c.set(b,!1),()=>c.delete(b))}),d?[Math.random(),h]:[s,h]);return reactExports.useMemo(()=>{c.forEach((b,x)=>c.set(x,!1))},[s]),reactExports.useEffect(()=>{!s&&!c.size&&a&&a()},[s]),u==="popLayout"&&(n=jsxRuntimeExports.jsx(PopChild,{isPresent:s,children:n})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:y,children:n})};function newChildrenMap(){return new Map}function usePresence(n=!0){const r=reactExports.useContext(PresenceContext);if(r===null)return[!0,null];const{isPresent:s,onExitComplete:a,register:l}=r,d=reactExports.useId();reactExports.useEffect(()=>{n&&l(d)},[n]);const u=reactExports.useCallback(()=>n&&a&&a(d),[d,a,n]);return!s&&a?[!1,u]:[!0]}const getChildKey=n=>n.key||"";function onlyElements(n){const r=[];return reactExports.Children.forEach(n,s=>{reactExports.isValidElement(s)&&r.push(s)}),r}const isBrowser=typeof window<"u",useIsomorphicLayoutEffect=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,AnimatePresence=({children:n,custom:r,initial:s=!0,onExitComplete:a,presenceAffectsLayout:l=!0,mode:d="sync",propagate:u=!1})=>{const[c,p]=usePresence(u),h=reactExports.useMemo(()=>onlyElements(n),[n]),y=u&&!c?[]:h.map(getChildKey),b=reactExports.useRef(!0),x=reactExports.useRef(h),T=useConstant(()=>new Map),[S,_]=reactExports.useState(h),[C,k]=reactExports.useState(h);useIsomorphicLayoutEffect(()=>{b.current=!1,x.current=h;for(let F=0;F<C.length;F++){const j=getChildKey(C[F]);y.includes(j)?T.delete(j):T.get(j)!==!0&&T.set(j,!1)}},[C,y.length,y.join("-")]);const I=[];if(h!==S){let F=[...h];for(let j=0;j<C.length;j++){const V=C[j],M=getChildKey(V);y.includes(M)||(F.splice(j,0,V),I.push(V))}d==="wait"&&I.length&&(F=I),k(onlyElements(F)),_(h);return}const{forceRender:N}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:C.map(F=>{const j=getChildKey(F),V=u&&!c?!1:h===C||y.includes(j),M=()=>{if(T.has(j))T.set(j,!0);else return;let q=!0;T.forEach(Se=>{Se||(q=!1)}),q&&(N==null||N(),k(x.current),u&&(p==null||p()),a&&a())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:V,initial:!b.current||s?void 0:!1,custom:V?void 0:r,presenceAffectsLayout:l,mode:d,onExitComplete:V?void 0:M,children:F},j)})})},noop=n=>n;let invariant=noop;function memo(n){let r;return()=>(r===void 0&&(r=n()),r)}const progress=(n,r,s)=>{const a=r-n;return a===0?1:(s-n)/a},secondsToMilliseconds=n=>n*1e3,millisecondsToSeconds=n=>n/1e3,MotionGlobalConfig={useManualTiming:!1};function createRenderStep(n){let r=new Set,s=new Set,a=!1,l=!1;const d=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function c(h){d.has(h)&&(p.schedule(h),n()),h(u)}const p={schedule:(h,y=!1,b=!1)=>{const T=b&&a?r:s;return y&&d.add(h),T.has(h)||T.add(h),h},cancel:h=>{s.delete(h),d.delete(h)},process:h=>{if(u=h,a){l=!0;return}a=!0,[r,s]=[s,r],r.forEach(c),r.clear(),a=!1,l&&(l=!1,p.process(h))}};return p}const stepsOrder=["read","resolveKeyframes","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(n,r){let s=!1,a=!0;const l={delta:0,timestamp:0,isProcessing:!1},d=()=>s=!0,u=stepsOrder.reduce((k,I)=>(k[I]=createRenderStep(d),k),{}),{read:c,resolveKeyframes:p,update:h,preRender:y,render:b,postRender:x}=u,T=()=>{const k=performance.now();s=!1,l.delta=a?1e3/60:Math.max(Math.min(k-l.timestamp,maxElapsed),1),l.timestamp=k,l.isProcessing=!0,c.process(l),p.process(l),h.process(l),y.process(l),b.process(l),x.process(l),l.isProcessing=!1,s&&r&&(a=!1,n(T))},S=()=>{s=!0,a=!0,l.isProcessing||n(T)};return{schedule:stepsOrder.reduce((k,I)=>{const N=u[I];return k[I]=(F,j=!1,V=!1)=>(s||S(),N.schedule(F,j,V)),k},{}),cancel:k=>{for(let I=0;I<stepsOrder.length;I++)u[stepsOrder[I]].cancel(k)},state:l,steps:u}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop,!0),LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const n in featureProps)featureDefinitions[n]={isEnabled:r=>featureProps[n].some(s=>!!r[s])};function loadFeatures(n){for(const r in n)featureDefinitions[r]={...featureDefinitions[r],...n[r]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||validMotionProps.has(n)}let shouldForward=n=>!isValidMotionProp(n);function loadExternalIsValidProp(n){n&&(shouldForward=r=>r.startsWith("on")?!isValidMotionProp(r):n(r))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(n,r,s){const a={};for(const l in n)l==="values"&&typeof n.values=="object"||(shouldForward(l)||s===!0&&isValidMotionProp(l)||!r&&!isValidMotionProp(l)||n.draggable&&l.startsWith("onDrag"))&&(a[l]=n[l]);return a}function createDOMMotionComponentProxy(n){if(typeof Proxy>"u")return n;const r=new Map,s=(...a)=>n(...a);return new Proxy(s,{get:(a,l)=>l==="create"?n:(r.has(l)||r.set(l,n(l)),r.get(l))})}const MotionContext=reactExports.createContext({});function isVariantLabel(n){return typeof n=="string"||Array.isArray(n)}function isAnimationControls(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(n){return isAnimationControls(n.animate)||variantProps.some(r=>isVariantLabel(n[r]))}function isVariantNode(n){return!!(isControllingVariants(n)||n.variants)}function getCurrentTreeVariants(n,r){if(isControllingVariants(n)){const{initial:s,animate:a}=n;return{initial:s===!1||isVariantLabel(s)?s:void 0,animate:isVariantLabel(a)?a:void 0}}return n.inherit!==!1?r:{}}function useCreateMotionContext(n){const{initial:r,animate:s}=getCurrentTreeVariants(n,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:r,animate:s}),[variantLabelsAsDependency(r),variantLabelsAsDependency(s)])}function variantLabelsAsDependency(n){return Array.isArray(n)?n.join(" "):n}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function useMotionRef(n,r,s){return reactExports.useCallback(a=>{a&&n.onMount&&n.onMount(a),r&&(a?r.mount(a):r.unmount()),s&&(typeof s=="function"?s(a):isRefObject(s)&&(s.current=a))},[r])}const camelToDash=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(n,r,s,a,l){var d,u;const{visualElement:c}=reactExports.useContext(MotionContext),p=reactExports.useContext(LazyContext),h=reactExports.useContext(PresenceContext),y=reactExports.useContext(MotionConfigContext).reducedMotion,b=reactExports.useRef(null);a=a||p.renderer,!b.current&&a&&(b.current=a(n,{visualState:r,parent:c,props:s,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:y}));const x=b.current,T=reactExports.useContext(SwitchLayoutGroupContext);x&&!x.projection&&l&&(x.type==="html"||x.type==="svg")&&createProjectionNode$1(b.current,s,l,T);const S=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{x&&S.current&&x.update(s,h)});const _=s[optimizedAppearDataAttribute],C=reactExports.useRef(!!_&&!(!((d=window.MotionHandoffIsComplete)===null||d===void 0)&&d.call(window,_))&&((u=window.MotionHasOptimisedAnimation)===null||u===void 0?void 0:u.call(window,_)));return useIsomorphicLayoutEffect(()=>{x&&(S.current=!0,window.MotionIsMounted=!0,x.updateFeatures(),microtask.render(x.render),C.current&&x.animationState&&x.animationState.animateChanges())}),reactExports.useEffect(()=>{x&&(!C.current&&x.animationState&&x.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{var k;(k=window.MotionHandoffMarkAsComplete)===null||k===void 0||k.call(window,_)}),C.current=!1))}),x}function createProjectionNode$1(n,r,s,a){const{layoutId:l,layout:d,drag:u,dragConstraints:c,layoutScroll:p,layoutRoot:h}=r;n.projection=new s(n.latestValues,r["data-framer-portal-id"]?void 0:getClosestProjectingNode(n.parent)),n.projection.setOptions({layoutId:l,layout:d,alwaysMeasureLayout:!!u||c&&isRefObject(c),visualElement:n,animationType:typeof d=="string"?d:"both",initialPromotionConfig:a,layoutScroll:p,layoutRoot:h})}function getClosestProjectingNode(n){if(n)return n.options.allowProjection!==!1?n.projection:getClosestProjectingNode(n.parent)}function createRendererMotionComponent({preloadedFeatures:n,createVisualElement:r,useRender:s,useVisualState:a,Component:l}){var d,u;n&&loadFeatures(n);function c(h,y){let b;const x={...reactExports.useContext(MotionConfigContext),...h,layoutId:useLayoutId(h)},{isStatic:T}=x,S=useCreateMotionContext(h),_=a(h,T);if(!T&&isBrowser){useStrictMode();const C=getProjectionFunctionality(x);b=C.MeasureLayout,S.visualElement=useVisualElement(l,_,x,r,C.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:S,children:[b&&S.visualElement?jsxRuntimeExports.jsx(b,{visualElement:S.visualElement,...x}):null,s(l,h,useMotionRef(_,S.visualElement,y),_,T,S.visualElement)]})}c.displayName=`motion.${typeof l=="string"?l:`create(${(u=(d=l.displayName)!==null&&d!==void 0?d:l.name)!==null&&u!==void 0?u:""})`}`;const p=reactExports.forwardRef(c);return p[motionComponentSymbol]=l,p}function useLayoutId({layoutId:n}){const r=reactExports.useContext(LayoutGroupContext).id;return r&&n!==void 0?r+"-"+n:n}function useStrictMode(n,r){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(n){const{drag:r,layout:s}=featureDefinitions;if(!r&&!s)return{};const a={...r,...s};return{MeasureLayout:r!=null&&r.isEnabled(n)||s!=null&&s.isEnabled(n)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(n){return typeof n!="string"||n.includes("-")?!1:!!(lowercaseSVGElements.indexOf(n)>-1||/[A-Z]/u.test(n))}function getValueState(n){const r=[{},{}];return n==null||n.values.forEach((s,a)=>{r[0][a]=s.get(),r[1][a]=s.getVelocity()}),r}function resolveVariantFromProps(n,r,s,a){if(typeof r=="function"){const[l,d]=getValueState(a);r=r(s!==void 0?s:n.custom,l,d)}if(typeof r=="string"&&(r=n.variants&&n.variants[r]),typeof r=="function"){const[l,d]=getValueState(a);r=r(s!==void 0?s:n.custom,l,d)}return r}const isKeyframesTarget=n=>Array.isArray(n),isCustomValue=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),resolveFinalValueInKeyframes=n=>isKeyframesTarget(n)?n[n.length-1]||0:n,isMotionValue=n=>!!(n&&n.getVelocity);function resolveMotionValue(n){const r=isMotionValue(n)?n.get():n;return isCustomValue(r)?r.toValue():r}function makeState({scrapeMotionValuesFromProps:n,createRenderState:r,onUpdate:s},a,l,d){const u={latestValues:makeLatestValues(a,l,d,n),renderState:r()};return s&&(u.onMount=c=>s({props:a,current:c,...u}),u.onUpdate=c=>s(c)),u}const makeUseVisualState=n=>(r,s)=>{const a=reactExports.useContext(MotionContext),l=reactExports.useContext(PresenceContext),d=()=>makeState(n,r,a,l);return s?d():useConstant(d)};function makeLatestValues(n,r,s,a){const l={},d=a(n,{});for(const x in d)l[x]=resolveMotionValue(d[x]);let{initial:u,animate:c}=n;const p=isControllingVariants(n),h=isVariantNode(n);r&&h&&!p&&n.inherit!==!1&&(u===void 0&&(u=r.initial),c===void 0&&(c=r.animate));let y=s?s.initial===!1:!1;y=y||u===!1;const b=y?c:u;if(b&&typeof b!="boolean"&&!isAnimationControls(b)){const x=Array.isArray(b)?b:[b];for(let T=0;T<x.length;T++){const S=resolveVariantFromProps(n,x[T]);if(S){const{transitionEnd:_,transition:C,...k}=S;for(const I in k){let N=k[I];if(Array.isArray(N)){const F=y?N.length-1:0;N=N[F]}N!==null&&(l[I]=N)}for(const I in _)l[I]=_[I]}}}return l}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),checkStringStartsWith=n=>r=>typeof r=="string"&&r.startsWith(n),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=n=>startsAsVariableToken(n)?singleCssVariableRegex.test(n.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,getValueAsType=(n,r)=>r&&typeof n=="number"?r.transform(n):n,clamp=(n,r,s)=>s>r?r:s<n?n:s,number={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},alpha={...number,transform:n=>clamp(0,1,n)},scale={...number,default:1},createUnitType=n=>({test:r=>typeof r=="string"&&r.endsWith(n)&&r.split(" ").length===1,parse:parseFloat,transform:r=>`${r}${n}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:n=>percent.parse(n)/100,transform:n=>percent.transform(n*100)},browserNumberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},int={...number,transform:Math.round},numberValueTypes={...browserNumberValueTypes,...transformValueTypes,zIndex:int,size:px,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(n,r,s){let a="",l=!0;for(let d=0;d<numTransforms;d++){const u=transformPropOrder[d],c=n[u];if(c===void 0)continue;let p=!0;if(typeof c=="number"?p=c===(u.startsWith("scale")?1:0):p=parseFloat(c)===0,!p||s){const h=getValueAsType(c,numberValueTypes[u]);if(!p){l=!1;const y=translateAlias[u]||u;a+=`${y}(${h}) `}s&&(r[u]=h)}}return a=a.trim(),s?a=s(r,l?"":a):l&&(a="none"),a}function buildHTMLStyles(n,r,s){const{style:a,vars:l,transformOrigin:d}=n;let u=!1,c=!1;for(const p in r){const h=r[p];if(transformProps.has(p)){u=!0;continue}else if(isCSSVariableName(p)){l[p]=h;continue}else{const y=getValueAsType(h,numberValueTypes[p]);p.startsWith("origin")?(c=!0,d[p]=y):a[p]=y}}if(r.transform||(u||s?a.transform=buildTransform(r,n.transform,s):a.transform&&(a.transform="none")),c){const{originX:p="50%",originY:h="50%",originZ:y=0}=d;a.transformOrigin=`${p} ${h} ${y}`}}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(n,r,s=1,a=0,l=!0){n.pathLength=1;const d=l?dashKeys:camelKeys;n[d.offset]=px.transform(-a);const u=px.transform(r),c=px.transform(s);n[d.array]=`${u} ${c}`}function calcOrigin$1(n,r,s){return typeof n=="string"?n:px.transform(r+s*n)}function calcSVGTransformOrigin(n,r,s){const a=calcOrigin$1(r,n.x,n.width),l=calcOrigin$1(s,n.y,n.height);return`${a} ${l}`}function buildSVGAttrs(n,{attrX:r,attrY:s,attrScale:a,originX:l,originY:d,pathLength:u,pathSpacing:c=1,pathOffset:p=0,...h},y,b){if(buildHTMLStyles(n,h,b),y){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:x,style:T,dimensions:S}=n;x.transform&&(S&&(T.transform=x.transform),delete x.transform),S&&(l!==void 0||d!==void 0||T.transform)&&(T.transformOrigin=calcSVGTransformOrigin(S,l!==void 0?l:.5,d!==void 0?d:.5)),r!==void 0&&(x.x=r),s!==void 0&&(x.y=s),a!==void 0&&(x.scale=a),u!==void 0&&buildSVGPath(x,u,c,p,!1)}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=n=>typeof n=="string"&&n.toLowerCase()==="svg";function renderHTML(n,{style:r,vars:s},a,l){Object.assign(n.style,r,l&&l.getProjectionStyles(a));for(const d in s)n.style.setProperty(d,s[d])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(n,r,s,a){renderHTML(n,r,void 0,a);for(const l in r.attrs)n.setAttribute(camelCaseAttributes.has(l)?l:camelToDash(l),r.attrs[l])}const scaleCorrectors={};function addScaleCorrector(n){Object.assign(scaleCorrectors,n)}function isForcedMotionValue(n,{layout:r,layoutId:s}){return transformProps.has(n)||n.startsWith("origin")||(r||s!==void 0)&&(!!scaleCorrectors[n]||n==="opacity")}function scrapeMotionValuesFromProps$1(n,r,s){var a;const{style:l}=n,d={};for(const u in l)(isMotionValue(l[u])||r.style&&isMotionValue(r.style[u])||isForcedMotionValue(u,n)||((a=s==null?void 0:s.getValue(u))===null||a===void 0?void 0:a.liveStyle)!==void 0)&&(d[u]=l[u]);return d}function scrapeMotionValuesFromProps(n,r,s){const a=scrapeMotionValuesFromProps$1(n,r,s);for(const l in n)if(isMotionValue(n[l])||isMotionValue(r[l])){const d=transformPropOrder.indexOf(l)!==-1?"attr"+l.charAt(0).toUpperCase()+l.substring(1):l;a[d]=n[l]}return a}function updateSVGDimensions(n,r){try{r.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}const layoutProps=["x","y","width","height","cx","cy","r"],svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onUpdate:({props:n,prevProps:r,current:s,renderState:a,latestValues:l})=>{if(!s)return;let d=!!n.drag;if(!d){for(const c in l)if(transformProps.has(c)){d=!0;break}}if(!d)return;let u=!r;if(r)for(let c=0;c<layoutProps.length;c++){const p=layoutProps[c];n[p]!==r[p]&&(u=!0)}u&&frame.read(()=>{updateSVGDimensions(s,a),frame.render(()=>{buildSVGAttrs(a,l,isSVGTag(s.tagName),n.transformTemplate),renderSVG(s,a)})})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function copyRawValuesOnly(n,r,s){for(const a in r)!isMotionValue(r[a])&&!isForcedMotionValue(a,s)&&(n[a]=r[a])}function useInitialMotionValues({transformTemplate:n},r){return reactExports.useMemo(()=>{const s=createHtmlRenderState();return buildHTMLStyles(s,r,n),Object.assign({},s.vars,s.style)},[r])}function useStyle(n,r){const s=n.style||{},a={};return copyRawValuesOnly(a,s,n),Object.assign(a,useInitialMotionValues(n,r)),a}function useHTMLProps(n,r){const s={},a=useStyle(n,r);return n.drag&&n.dragListener!==!1&&(s.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(s.tabIndex=0),s.style=a,s}function useSVGProps(n,r,s,a){const l=reactExports.useMemo(()=>{const d=createSvgRenderState();return buildSVGAttrs(d,r,isSVGTag(a),n.transformTemplate),{...d.attrs,style:{...d.style}}},[r]);if(n.style){const d={};copyRawValuesOnly(d,n.style,n),l.style={...d,...l.style}}return l}function createUseRender(n=!1){return(s,a,l,{latestValues:d},u)=>{const p=(isSVGComponent(s)?useSVGProps:useHTMLProps)(a,d,u,s),h=filterProps(a,typeof s=="string",n),y=s!==reactExports.Fragment?{...h,...p,ref:l}:{},{children:b}=a,x=reactExports.useMemo(()=>isMotionValue(b)?b.get():b,[b]);return reactExports.createElement(s,{...y,children:x})}}function createMotionComponentFactory(n,r){return function(a,{forwardMotionProps:l}={forwardMotionProps:!1}){const u={...isSVGComponent(a)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:n,useRender:createUseRender(l),createVisualElement:r,Component:a};return createRendererMotionComponent(u)}}function shallowCompare(n,r){if(!Array.isArray(r))return!1;const s=r.length;if(s!==n.length)return!1;for(let a=0;a<s;a++)if(r[a]!==n[a])return!1;return!0}function resolveVariant(n,r,s){const a=n.getProps();return resolveVariantFromProps(a,r,s!==void 0?s:a.custom,n)}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0);class BaseGroupPlaybackControls{constructor(r){this.stop=()=>this.runAll("stop"),this.animations=r.filter(Boolean)}get finished(){return Promise.all(this.animations.map(r=>"finished"in r?r.finished:r))}getAll(r){return this.animations[0][r]}setAll(r,s){for(let a=0;a<this.animations.length;a++)this.animations[a][r]=s}attachTimeline(r,s){const a=this.animations.map(l=>{if(supportsScrollTimeline()&&l.attachTimeline)return l.attachTimeline(r);if(typeof s=="function")return s(l)});return()=>{a.forEach((l,d)=>{l&&l(),this.animations[d].stop()})}}get time(){return this.getAll("time")}set time(r){this.setAll("time",r)}get speed(){return this.getAll("speed")}set speed(r){this.setAll("speed",r)}get startTime(){return this.getAll("startTime")}get duration(){let r=0;for(let s=0;s<this.animations.length;s++)r=Math.max(r,this.animations[s].duration);return r}runAll(r){this.animations.forEach(s=>s[r]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class GroupPlaybackControls extends BaseGroupPlaybackControls{then(r,s){return Promise.all(this.animations).then(r).catch(s)}}function getValueTransition(n,r){return n?n[r]||n.default||n:void 0}const maxGeneratorDuration=2e4;function calcGeneratorDuration(n){let r=0;const s=50;let a=n.next(r);for(;!a.done&&r<maxGeneratorDuration;)r+=s,a=n.next(r);return r>=maxGeneratorDuration?1/0:r}function isGenerator(n){return typeof n=="function"}function attachTimeline(n,r){n.timeline=r,n.onfinish=null}const isBezierDefinition=n=>Array.isArray(n)&&typeof n[0]=="number",supportsFlags={linearEasing:void 0};function memoSupports(n,r){const s=memo(n);return()=>{var a;return(a=supportsFlags[r])!==null&&a!==void 0?a:s()}}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),generateLinearEasing=(n,r,s=10)=>{let a="";const l=Math.max(Math.round(r/s),2);for(let d=0;d<l;d++)a+=n(progress(0,l-1,d))+", ";return`linear(${a.substring(0,a.length-2)})`};function isWaapiSupportedEasing(n){return!!(typeof n=="function"&&supportsLinearEasing()||!n||typeof n=="string"&&(n in supportedWaapiEasing||supportsLinearEasing())||isBezierDefinition(n)||Array.isArray(n)&&n.every(isWaapiSupportedEasing))}const cubicBezierAsString=([n,r,s,a])=>`cubic-bezier(${n}, ${r}, ${s}, ${a})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(n,r){if(n)return typeof n=="function"&&supportsLinearEasing()?generateLinearEasing(n,r):isBezierDefinition(n)?cubicBezierAsString(n):Array.isArray(n)?n.map(s=>mapEasingToNativeEasing(s,r)||supportedWaapiEasing.easeOut):supportedWaapiEasing[n]}const isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function resolveElements(n,r,s){var a;if(n instanceof Element)return[n];if(typeof n=="string"){let l=document;const d=(a=void 0)!==null&&a!==void 0?a:l.querySelectorAll(n);return d?Array.from(d):[]}return Array.from(n)}function setupGesture(n,r){const s=resolveElements(n),a=new AbortController,l={passive:!0,...r,signal:a.signal};return[s,l,()=>a.abort()]}function filterEvents$1(n){return r=>{r.pointerType==="touch"||isDragActive()||n(r)}}function hover(n,r,s={}){const[a,l,d]=setupGesture(n,s),u=filterEvents$1(c=>{const{target:p}=c,h=r(c);if(typeof h!="function"||!p)return;const y=filterEvents$1(b=>{h(b),p.removeEventListener("pointerleave",y)});p.addEventListener("pointerleave",y,l)});return a.forEach(c=>{c.addEventListener("pointerenter",u,l)}),d}const isNodeOrChild=(n,r)=>r?n===r?!0:isNodeOrChild(n,r.parentElement):!1,isPrimaryPointer=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(n){return focusableElements.has(n.tagName)||n.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(n){return r=>{r.key==="Enter"&&n(r)}}function firePointerEvent(n,r){n.dispatchEvent(new PointerEvent("pointer"+r,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(n,r)=>{const s=n.currentTarget;if(!s)return;const a=filterEvents(()=>{if(isPressing.has(s))return;firePointerEvent(s,"down");const l=filterEvents(()=>{firePointerEvent(s,"up")}),d=()=>firePointerEvent(s,"cancel");s.addEventListener("keyup",l,r),s.addEventListener("blur",d,r)});s.addEventListener("keydown",a,r),s.addEventListener("blur",()=>s.removeEventListener("keydown",a),r)};function isValidPressEvent(n){return isPrimaryPointer(n)&&!isDragActive()}function press(n,r,s={}){const[a,l,d]=setupGesture(n,s),u=c=>{const p=c.currentTarget;if(!isValidPressEvent(c)||isPressing.has(p))return;isPressing.add(p);const h=r(c),y=(T,S)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",x),!(!isValidPressEvent(T)||!isPressing.has(p))&&(isPressing.delete(p),typeof h=="function"&&h(T,{success:S}))},b=T=>{y(T,s.useGlobalTarget||isNodeOrChild(p,T.target))},x=T=>{y(T,!1)};window.addEventListener("pointerup",b,l),window.addEventListener("pointercancel",x,l)};return a.forEach(c=>{!isElementKeyboardAccessible(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(s.useGlobalTarget?window:c).addEventListener("pointerdown",u,l),c.addEventListener("focus",h=>enableKeyboardPress(h,l),l)}),d}function setDragLock(n){return n==="x"||n==="y"?isDragging[n]?null:(isDragging[n]=!0,()=>{isDragging[n]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:n=>{now=n,queueMicrotask(clearTime)}};function addUniqueItem(n,r){n.indexOf(r)===-1&&n.push(r)}function removeItem(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(r){return addUniqueItem(this.subscriptions,r),()=>removeItem(this.subscriptions,r)}notify(r,s,a){const l=this.subscriptions.length;if(l)if(l===1)this.subscriptions[0](r,s,a);else for(let d=0;d<l;d++){const u=this.subscriptions[d];u&&u(r,s,a)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function velocityPerSecond(n,r){return r?n*(1e3/r):0}const MAX_VELOCITY_DELTA=30,isFloat=n=>!isNaN(parseFloat(n));class MotionValue{constructor(r,s={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(a,l=!0)=>{const d=time.now();this.updatedAt!==d&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(a),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),l&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(r),this.owner=s.owner}setCurrent(r){this.current=r,this.updatedAt=time.now(),this.canTrackVelocity===null&&r!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(r=this.current){this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt}onChange(r){return this.on("change",r)}on(r,s){this.events[r]||(this.events[r]=new SubscriptionManager);const a=this.events[r].add(s);return r==="change"?()=>{a(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:a}clearListeners(){for(const r in this.events)this.events[r].clear()}attach(r,s){this.passiveEffect=r,this.stopPassiveEffect=s}set(r,s=!0){!s||!this.passiveEffect?this.updateAndNotify(r,s):this.passiveEffect(r,this.updateAndNotify)}setWithVelocity(r,s,a){this.set(s),this.prev=void 0,this.prevFrameValue=r,this.prevUpdatedAt=this.updatedAt-a}jump(r,s=!0){this.updateAndNotify(r),this.prev=r,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const r=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||r-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(r){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=r(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(n,r){return new MotionValue(n,r)}function setMotionValue(n,r,s){n.hasValue(r)?n.getValue(r).set(s):n.addValue(r,motionValue(s))}function setTarget(n,r){const s=resolveVariant(n,r);let{transitionEnd:a={},transition:l={},...d}=s||{};d={...d,...a};for(const u in d){const c=resolveFinalValueInKeyframes(d[u]);setMotionValue(n,u,c)}}function isWillChangeMotionValue(n){return!!(isMotionValue(n)&&n.add)}function addValueToWillChange(n,r){const s=n.getValue("willChange");if(isWillChangeMotionValue(s))return s.add(r)}function getOptimisedAppearId(n){return n.props[optimizedAppearDataAttribute]}const calcBezier=(n,r,s)=>(((1-3*s+3*r)*n+(3*s-6*r))*n+3*r)*n,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(n,r,s,a,l){let d,u,c=0;do u=r+(s-r)/2,d=calcBezier(u,a,l)-n,d>0?s=u:r=u;while(Math.abs(d)>subdivisionPrecision&&++c<subdivisionMaxIterations);return u}function cubicBezier(n,r,s,a){if(n===r&&s===a)return noop;const l=d=>binarySubdivide(d,0,1,n,s);return d=>d===0||d===1?d:calcBezier(l(d),r,a)}const mirrorEasing=n=>r=>r<=.5?n(2*r)/2:(2-n(2*(1-r)))/2,reverseEasing=n=>r=>1-n(1-r),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=n=>(n*=2)<1?.5*backIn(n):.5*(2-Math.pow(2,-10*(n-1))),circIn=n=>1-Math.sin(Math.acos(n)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),isZeroValueString=n=>/^0[^.\s]+$/u.test(n);function isNone(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||isZeroValueString(n):!0}const sanitize=n=>Math.round(n*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(n){return n==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(n,r)=>s=>!!(typeof s=="string"&&singleColorRegex.test(s)&&s.startsWith(n)||r&&!isNullish(s)&&Object.prototype.hasOwnProperty.call(s,r)),splitColor=(n,r,s)=>a=>{if(typeof a!="string")return a;const[l,d,u,c]=a.match(floatRegex);return{[n]:parseFloat(l),[r]:parseFloat(d),[s]:parseFloat(u),alpha:c!==void 0?parseFloat(c):1}},clampRgbUnit=n=>clamp(0,255,n),rgbUnit={...number,transform:n=>Math.round(clampRgbUnit(n))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:n,green:r,blue:s,alpha:a=1})=>"rgba("+rgbUnit.transform(n)+", "+rgbUnit.transform(r)+", "+rgbUnit.transform(s)+", "+sanitize(alpha.transform(a))+")"};function parseHex(n){let r="",s="",a="",l="";return n.length>5?(r=n.substring(1,3),s=n.substring(3,5),a=n.substring(5,7),l=n.substring(7,9)):(r=n.substring(1,2),s=n.substring(2,3),a=n.substring(3,4),l=n.substring(4,5),r+=r,s+=s,a+=a,l+=l),{red:parseInt(r,16),green:parseInt(s,16),blue:parseInt(a,16),alpha:l?parseInt(l,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:n,saturation:r,lightness:s,alpha:a=1})=>"hsla("+Math.round(n)+", "+percent.transform(sanitize(r))+", "+percent.transform(sanitize(s))+", "+sanitize(alpha.transform(a))+")"},color={test:n=>rgba.test(n)||hex.test(n)||hsla.test(n),parse:n=>rgba.test(n)?rgba.parse(n):hsla.test(n)?hsla.parse(n):hex.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?rgba.transform(n):hsla.transform(n)},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(n){var r,s;return isNaN(n)&&typeof n=="string"&&(((r=n.match(floatRegex))===null||r===void 0?void 0:r.length)||0)+(((s=n.match(colorRegex))===null||s===void 0?void 0:s.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(n){const r=n.toString(),s=[],a={color:[],number:[],var:[]},l=[];let d=0;const c=r.replace(complexRegex,p=>(color.test(p)?(a.color.push(d),l.push(COLOR_TOKEN),s.push(color.parse(p))):p.startsWith(VAR_FUNCTION_TOKEN)?(a.var.push(d),l.push(VAR_TOKEN),s.push(p)):(a.number.push(d),l.push(NUMBER_TOKEN),s.push(parseFloat(p))),++d,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:s,split:c,indexes:a,types:l}}function parseComplexValue(n){return analyseComplexValue(n).values}function createTransformer(n){const{split:r,types:s}=analyseComplexValue(n),a=r.length;return l=>{let d="";for(let u=0;u<a;u++)if(d+=r[u],l[u]!==void 0){const c=s[u];c===NUMBER_TOKEN?d+=sanitize(l[u]):c===COLOR_TOKEN?d+=color.transform(l[u]):d+=l[u]}return d}}const convertNumbersToZero=n=>typeof n=="number"?0:n;function getAnimatableNone$1(n){const r=parseComplexValue(n);return createTransformer(n)(r.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(n){const[r,s]=n.slice(0,-1).split("(");if(r==="drop-shadow")return n;const[a]=s.match(floatRegex)||[];if(!a)return n;const l=s.replace(a,"");let d=maxDefaults.has(r)?1:0;return a!==s&&(d*=100),r+"("+d+l+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:n=>{const r=n.match(functionRegex);return r?r.map(applyDefaultFilter).join(" "):n}},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=n=>defaultValueTypes[n];function getAnimatableNone(n,r){let s=getDefaultValueType(n);return s!==filter&&(s=complex),s.getAnimatableNone?s.getAnimatableNone(r):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(n,r,s){let a=0,l;for(;a<n.length&&!l;){const d=n[a];typeof d=="string"&&!invalidTemplates.has(d)&&analyseComplexValue(d).values.length&&(l=n[a]),a++}if(l&&s)for(const d of r)n[d]=getAnimatableNone(s,l)}const isNumOrPxType=n=>n===number||n===px,getPosFromMatrix=(n,r)=>parseFloat(n.split(", ")[r]),getTranslateFromMatrix=(n,r)=>(s,{transform:a})=>{if(a==="none"||!a)return 0;const l=a.match(/^matrix3d\((.+)\)$/u);if(l)return getPosFromMatrix(l[1],r);{const d=a.match(/^matrix\((.+)\)$/u);return d?getPosFromMatrix(d[1],n):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(n=>!transformKeys.has(n));function removeNonTranslationalTransform(n){const r=[];return nonTranslationalTransformKeys.forEach(s=>{const a=n.getValue(s);a!==void 0&&(r.push([s,a.get()]),a.set(s.startsWith("scale")?1:0))}),r}const positionalValues={width:({x:n},{paddingLeft:r="0",paddingRight:s="0"})=>n.max-n.min-parseFloat(r)-parseFloat(s),height:({y:n},{paddingTop:r="0",paddingBottom:s="0"})=>n.max-n.min-parseFloat(r)-parseFloat(s),top:(n,{top:r})=>parseFloat(r),left:(n,{left:r})=>parseFloat(r),bottom:({y:n},{top:r})=>parseFloat(r)+(n.max-n.min),right:({x:n},{left:r})=>parseFloat(r)+(n.max-n.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const n=Array.from(toResolve).filter(a=>a.needsMeasurement),r=new Set(n.map(a=>a.element)),s=new Map;r.forEach(a=>{const l=removeNonTranslationalTransform(a);l.length&&(s.set(a,l),a.render())}),n.forEach(a=>a.measureInitialState()),r.forEach(a=>{a.render();const l=s.get(a);l&&l.forEach(([d,u])=>{var c;(c=a.getValue(d))===null||c===void 0||c.set(u)})}),n.forEach(a=>a.measureEndState()),n.forEach(a=>{a.suspendedScrollY!==void 0&&window.scrollTo(0,a.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(n=>n.complete()),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){readAllKeyframes(),measureAllKeyframes()}class KeyframeResolver{constructor(r,s,a,l,d,u=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...r],this.onComplete=s,this.name=a,this.motionValue=l,this.element=d,this.isAsync=u}scheduleResolve(){this.isScheduled=!0,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:r,name:s,element:a,motionValue:l}=this;for(let d=0;d<r.length;d++)if(r[d]===null)if(d===0){const u=l==null?void 0:l.get(),c=r[r.length-1];if(u!==void 0)r[0]=u;else if(a&&s){const p=a.readValue(s,c);p!=null&&(r[0]=p)}r[0]===void 0&&(r[0]=c),l&&u===void 0&&l.set(r[0])}else r[d]=r[d-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),toResolve.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,toResolve.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const isNumericalString=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(n){const r=splitCSSVariableRegex.exec(n);if(!r)return[,];const[,s,a,l]=r;return[`--${s??a}`,l]}function getVariableValue(n,r,s=1){const[a,l]=parseCSSVariable(n);if(!a)return;const d=window.getComputedStyle(r).getPropertyValue(a);if(d){const u=d.trim();return isNumericalString(u)?parseFloat(u):u}return isCSSVariableToken(l)?getVariableValue(l,r,s+1):l}const testValueType=n=>r=>r.test(n),auto={test:n=>n==="auto",parse:n=>n},dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=n=>dimensionValueTypes.find(testValueType(n));class DOMKeyframesResolver extends KeyframeResolver{constructor(r,s,a,l,d){super(r,s,a,l,d,!0)}readKeyframes(){const{unresolvedKeyframes:r,element:s,name:a}=this;if(!s||!s.current)return;super.readKeyframes();for(let p=0;p<r.length;p++){let h=r[p];if(typeof h=="string"&&(h=h.trim(),isCSSVariableToken(h))){const y=getVariableValue(h,s.current);y!==void 0&&(r[p]=y),p===r.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(a)||r.length!==2)return;const[l,d]=r,u=findDimensionValueType(l),c=findDimensionValueType(d);if(u!==c)if(isNumOrPxType(u)&&isNumOrPxType(c))for(let p=0;p<r.length;p++){const h=r[p];typeof h=="string"&&(r[p]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:r,name:s}=this,a=[];for(let l=0;l<r.length;l++)isNone(r[l])&&a.push(l);a.length&&makeNoneKeyframesAnimatable(r,a,s)}measureInitialState(){const{element:r,unresolvedKeyframes:s,name:a}=this;if(!r||!r.current)return;a==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[a](r.measureViewportBox(),window.getComputedStyle(r.current)),s[0]=this.measuredOrigin;const l=s[s.length-1];l!==void 0&&r.getValue(a,l).jump(l,!1)}measureEndState(){var r;const{element:s,name:a,unresolvedKeyframes:l}=this;if(!s||!s.current)return;const d=s.getValue(a);d&&d.jump(this.measuredOrigin,!1);const u=l.length-1,c=l[u];l[u]=positionalValues[a](s.measureViewportBox(),window.getComputedStyle(s.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((r=this.removedTransforms)===null||r===void 0)&&r.length&&this.removedTransforms.forEach(([p,h])=>{s.getValue(p).set(h)}),this.resolveNoneKeyframes()}}const isAnimatable=(n,r)=>r==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(complex.test(n)||n==="0")&&!n.startsWith("url("));function hasKeyframesChanged(n){const r=n[0];if(n.length===1)return!0;for(let s=0;s<n.length;s++)if(n[s]!==r)return!0}function canAnimate(n,r,s,a){const l=n[0];if(l===null)return!1;if(r==="display"||r==="visibility")return!0;const d=n[n.length-1],u=isAnimatable(l,r),c=isAnimatable(d,r);return!u||!c?!1:hasKeyframesChanged(n)||(s==="spring"||isGenerator(s))&&a}const isNotNull=n=>n!==null;function getFinalKeyframe(n,{repeat:r,repeatType:s="loop"},a){const l=n.filter(isNotNull),d=r&&s!=="loop"&&r%2===1?0:l.length-1;return!d||a===void 0?l[d]:a}const MAX_RESOLVE_DELAY=40;class BaseAnimation{constructor({autoplay:r=!0,delay:s=0,type:a="keyframes",repeat:l=0,repeatDelay:d=0,repeatType:u="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=time.now(),this.options={autoplay:r,delay:s,type:a,repeat:l,repeatDelay:d,repeatType:u,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&flushKeyframeResolvers(),this._resolved}onKeyframesResolved(r,s){this.resolvedAt=time.now(),this.hasAttemptedResolve=!0;const{name:a,type:l,velocity:d,delay:u,onComplete:c,onUpdate:p,isGenerator:h}=this.options;if(!h&&!canAnimate(r,a,l,d))if(u)this.options.duration=0;else{p&&p(getFinalKeyframe(r,this.options,s)),c&&c(),this.resolveFinishedPromise();return}const y=this.initPlayback(r,s);y!==!1&&(this._resolved={keyframes:r,finalKeyframe:s,...y},this.onPostResolved())}onPostResolved(){}then(r,s){return this.currentFinishedPromise.then(r,s)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(r=>{this.resolveFinishedPromise=r})}}const mixNumber$1=(n,r,s)=>n+(r-n)*s;function hueToRgb(n,r,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?n+(r-n)*6*s:s<1/2?r:s<2/3?n+(r-n)*(2/3-s)*6:n}function hslaToRgba({hue:n,saturation:r,lightness:s,alpha:a}){n/=360,r/=100,s/=100;let l=0,d=0,u=0;if(!r)l=d=u=s;else{const c=s<.5?s*(1+r):s+r-s*r,p=2*s-c;l=hueToRgb(p,c,n+1/3),d=hueToRgb(p,c,n),u=hueToRgb(p,c,n-1/3)}return{red:Math.round(l*255),green:Math.round(d*255),blue:Math.round(u*255),alpha:a}}function mixImmediate(n,r){return s=>s>0?r:n}const mixLinearColor=(n,r,s)=>{const a=n*n,l=s*(r*r-a)+a;return l<0?0:Math.sqrt(l)},colorTypes=[hex,rgba,hsla],getColorType=n=>colorTypes.find(r=>r.test(n));function asRGBA(n){const r=getColorType(n);if(!r)return!1;let s=r.parse(n);return r===hsla&&(s=hslaToRgba(s)),s}const mixColor=(n,r)=>{const s=asRGBA(n),a=asRGBA(r);if(!s||!a)return mixImmediate(n,r);const l={...s};return d=>(l.red=mixLinearColor(s.red,a.red,d),l.green=mixLinearColor(s.green,a.green,d),l.blue=mixLinearColor(s.blue,a.blue,d),l.alpha=mixNumber$1(s.alpha,a.alpha,d),rgba.transform(l))},combineFunctions=(n,r)=>s=>r(n(s)),pipe=(...n)=>n.reduce(combineFunctions),invisibleValues=new Set(["none","hidden"]);function mixVisibility(n,r){return invisibleValues.has(n)?s=>s<=0?n:r:s=>s>=1?r:n}function mixNumber(n,r){return s=>mixNumber$1(n,r,s)}function getMixer(n){return typeof n=="number"?mixNumber:typeof n=="string"?isCSSVariableToken(n)?mixImmediate:color.test(n)?mixColor:mixComplex:Array.isArray(n)?mixArray:typeof n=="object"?color.test(n)?mixColor:mixObject:mixImmediate}function mixArray(n,r){const s=[...n],a=s.length,l=n.map((d,u)=>getMixer(d)(d,r[u]));return d=>{for(let u=0;u<a;u++)s[u]=l[u](d);return s}}function mixObject(n,r){const s={...n,...r},a={};for(const l in s)n[l]!==void 0&&r[l]!==void 0&&(a[l]=getMixer(n[l])(n[l],r[l]));return l=>{for(const d in a)s[d]=a[d](l);return s}}function matchOrder(n,r){var s;const a=[],l={color:0,var:0,number:0};for(let d=0;d<r.values.length;d++){const u=r.types[d],c=n.indexes[u][l[u]],p=(s=n.values[c])!==null&&s!==void 0?s:0;a[d]=p,l[u]++}return a}const mixComplex=(n,r)=>{const s=complex.createTransformer(r),a=analyseComplexValue(n),l=analyseComplexValue(r);return a.indexes.var.length===l.indexes.var.length&&a.indexes.color.length===l.indexes.color.length&&a.indexes.number.length>=l.indexes.number.length?invisibleValues.has(n)&&!l.values.length||invisibleValues.has(r)&&!a.values.length?mixVisibility(n,r):pipe(mixArray(matchOrder(a,l),l.values),s):mixImmediate(n,r)};function mix(n,r,s){return typeof n=="number"&&typeof r=="number"&&typeof s=="number"?mixNumber$1(n,r,s):getMixer(n)(n,r)}const velocitySampleDuration=5;function calcGeneratorVelocity(n,r,s){const a=Math.max(r-velocitySampleDuration,0);return velocityPerSecond(s-n(a),r-a)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:n=springDefaults.duration,bounce:r=springDefaults.bounce,velocity:s=springDefaults.velocity,mass:a=springDefaults.mass}){let l,d,u=1-r;u=clamp(springDefaults.minDamping,springDefaults.maxDamping,u),n=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(n)),u<1?(l=h=>{const y=h*u,b=y*n,x=y-s,T=calcAngularFreq(h,u),S=Math.exp(-b);return safeMin-x/T*S},d=h=>{const b=h*u*n,x=b*s+s,T=Math.pow(u,2)*Math.pow(h,2)*n,S=Math.exp(-b),_=calcAngularFreq(Math.pow(h,2),u);return(-l(h)+safeMin>0?-1:1)*((x-T)*S)/_}):(l=h=>{const y=Math.exp(-h*n),b=(h-s)*n+1;return-safeMin+y*b},d=h=>{const y=Math.exp(-h*n),b=(s-h)*(n*n);return y*b});const c=5/n,p=approximateRoot(l,d,c);if(n=secondsToMilliseconds(n),isNaN(p))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:n};{const h=Math.pow(p,2)*a;return{stiffness:h,damping:u*2*Math.sqrt(a*h),duration:n}}}const rootIterations=12;function approximateRoot(n,r,s){let a=s;for(let l=1;l<rootIterations;l++)a=a-n(a)/r(a);return a}function calcAngularFreq(n,r){return n*Math.sqrt(1-r*r)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(n,r){return r.some(s=>n[s]!==void 0)}function getSpringOptions(n){let r={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...n};if(!isSpringType(n,physicsKeys)&&isSpringType(n,durationKeys))if(n.visualDuration){const s=n.visualDuration,a=2*Math.PI/(s*1.2),l=a*a,d=2*clamp(.05,1,1-(n.bounce||0))*Math.sqrt(l);r={...r,mass:springDefaults.mass,stiffness:l,damping:d}}else{const s=findSpring(n);r={...r,...s,mass:springDefaults.mass},r.isResolvedFromDuration=!0}return r}function spring(n=springDefaults.visualDuration,r=springDefaults.bounce){const s=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:r}:n;let{restSpeed:a,restDelta:l}=s;const d=s.keyframes[0],u=s.keyframes[s.keyframes.length-1],c={done:!1,value:d},{stiffness:p,damping:h,mass:y,duration:b,velocity:x,isResolvedFromDuration:T}=getSpringOptions({...s,velocity:-millisecondsToSeconds(s.velocity||0)}),S=x||0,_=h/(2*Math.sqrt(p*y)),C=u-d,k=millisecondsToSeconds(Math.sqrt(p/y)),I=Math.abs(C)<5;a||(a=I?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),l||(l=I?springDefaults.restDelta.granular:springDefaults.restDelta.default);let N;if(_<1){const j=calcAngularFreq(k,_);N=V=>{const M=Math.exp(-_*k*V);return u-M*((S+_*k*C)/j*Math.sin(j*V)+C*Math.cos(j*V))}}else if(_===1)N=j=>u-Math.exp(-k*j)*(C+(S+k*C)*j);else{const j=k*Math.sqrt(_*_-1);N=V=>{const M=Math.exp(-_*k*V),q=Math.min(j*V,300);return u-M*((S+_*k*C)*Math.sinh(q)+j*C*Math.cosh(q))/j}}const F={calculatedDuration:T&&b||null,next:j=>{const V=N(j);if(T)c.done=j>=b;else{let M=0;_<1&&(M=j===0?secondsToMilliseconds(S):calcGeneratorVelocity(N,j,V));const q=Math.abs(M)<=a,Se=Math.abs(u-V)<=l;c.done=q&&Se}return c.value=c.done?u:V,c},toString:()=>{const j=Math.min(calcGeneratorDuration(F),maxGeneratorDuration),V=generateLinearEasing(M=>F.next(j*M).value,j,30);return j+"ms "+V}};return F}function inertia({keyframes:n,velocity:r=0,power:s=.8,timeConstant:a=325,bounceDamping:l=10,bounceStiffness:d=500,modifyTarget:u,min:c,max:p,restDelta:h=.5,restSpeed:y}){const b=n[0],x={done:!1,value:b},T=q=>c!==void 0&&q<c||p!==void 0&&q>p,S=q=>c===void 0?p:p===void 0||Math.abs(c-q)<Math.abs(p-q)?c:p;let _=s*r;const C=b+_,k=u===void 0?C:u(C);k!==C&&(_=k-b);const I=q=>-_*Math.exp(-q/a),N=q=>k+I(q),F=q=>{const Se=I(q),Q=N(q);x.done=Math.abs(Se)<=h,x.value=x.done?k:Q};let j,V;const M=q=>{T(x.value)&&(j=q,V=spring({keyframes:[x.value,S(x.value)],velocity:calcGeneratorVelocity(N,q,x.value),damping:l,stiffness:d,restDelta:h,restSpeed:y}))};return M(0),{calculatedDuration:null,next:q=>{let Se=!1;return!V&&j===void 0&&(Se=!0,F(q),M(q)),j!==void 0&&q>=j?V.next(q-j):(!Se&&F(q),x)}}}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=n=>Array.isArray(n)&&typeof n[0]!="number",easingLookup={linear:noop,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=n=>{if(isBezierDefinition(n)){invariant(n.length===4);const[r,s,a,l]=n;return cubicBezier(r,s,a,l)}else if(typeof n=="string")return easingLookup[n];return n};function createMixers(n,r,s){const a=[],l=s||mix,d=n.length-1;for(let u=0;u<d;u++){let c=l(n[u],n[u+1]);if(r){const p=Array.isArray(r)?r[u]||noop:r;c=pipe(p,c)}a.push(c)}return a}function interpolate(n,r,{clamp:s=!0,ease:a,mixer:l}={}){const d=n.length;if(invariant(d===r.length),d===1)return()=>r[0];if(d===2&&r[0]===r[1])return()=>r[1];const u=n[0]===n[1];n[0]>n[d-1]&&(n=[...n].reverse(),r=[...r].reverse());const c=createMixers(r,a,l),p=c.length,h=y=>{if(u&&y<n[0])return r[0];let b=0;if(p>1)for(;b<n.length-2&&!(y<n[b+1]);b++);const x=progress(n[b],n[b+1],y);return c[b](x)};return s?y=>h(clamp(n[0],n[d-1],y)):h}function fillOffset(n,r){const s=n[n.length-1];for(let a=1;a<=r;a++){const l=progress(0,r,a);n.push(mixNumber$1(s,1,l))}}function defaultOffset(n){const r=[0];return fillOffset(r,n.length-1),r}function convertOffsetToTimes(n,r){return n.map(s=>s*r)}function defaultEasing(n,r){return n.map(()=>r||easeInOut).splice(0,n.length-1)}function keyframes({duration:n=300,keyframes:r,times:s,ease:a="easeInOut"}){const l=isEasingArray(a)?a.map(easingDefinitionToFunction):easingDefinitionToFunction(a),d={done:!1,value:r[0]},u=convertOffsetToTimes(s&&s.length===r.length?s:defaultOffset(r),n),c=interpolate(u,r,{ease:Array.isArray(l)?l:defaultEasing(r,l)});return{calculatedDuration:n,next:p=>(d.value=c(p),d.done=p>=n,d)}}const frameloopDriver=n=>{const r=({timestamp:s})=>n(s);return{start:()=>frame.update(r,!0),stop:()=>cancelFrame(r),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generators={decay:inertia,inertia,tween:keyframes,keyframes,spring},percentToProgress=n=>n/100;class MainThreadAnimation extends BaseAnimation{constructor(r){super(r),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:p}=this.options;p&&p()};const{name:s,motionValue:a,element:l,keyframes:d}=this.options,u=(l==null?void 0:l.KeyframeResolver)||KeyframeResolver,c=(p,h)=>this.onKeyframesResolved(p,h);this.resolver=new u(d,c,s,a,l),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(r){const{type:s="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:d,velocity:u=0}=this.options,c=isGenerator(s)?s:generators[s]||keyframes;let p,h;c!==keyframes&&typeof r[0]!="number"&&(p=pipe(percentToProgress,mix(r[0],r[1])),r=[0,100]);const y=c({...this.options,keyframes:r});d==="mirror"&&(h=c({...this.options,keyframes:[...r].reverse(),velocity:-u})),y.calculatedDuration===null&&(y.calculatedDuration=calcGeneratorDuration(y));const{calculatedDuration:b}=y,x=b+l,T=x*(a+1)-l;return{generator:y,mirroredGenerator:h,mapPercentToKeyframes:p,calculatedDuration:b,resolvedDuration:x,totalDuration:T}}onPostResolved(){const{autoplay:r=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!r?this.pause():this.state=this.pendingPlayState}tick(r,s=!1){const{resolved:a}=this;if(!a){const{keyframes:q}=this.options;return{done:!0,value:q[q.length-1]}}const{finalKeyframe:l,generator:d,mirroredGenerator:u,mapPercentToKeyframes:c,keyframes:p,calculatedDuration:h,totalDuration:y,resolvedDuration:b}=a;if(this.startTime===null)return d.next(0);const{delay:x,repeat:T,repeatType:S,repeatDelay:_,onUpdate:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,r):this.speed<0&&(this.startTime=Math.min(r-y/this.speed,this.startTime)),s?this.currentTime=r:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(r-this.startTime)*this.speed;const k=this.currentTime-x*(this.speed>=0?1:-1),I=this.speed>=0?k<0:k>y;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=y);let N=this.currentTime,F=d;if(T){const q=Math.min(this.currentTime,y)/b;let Se=Math.floor(q),Q=q%1;!Q&&q>=1&&(Q=1),Q===1&&Se--,Se=Math.min(Se,T+1),!!(Se%2)&&(S==="reverse"?(Q=1-Q,_&&(Q-=_/b)):S==="mirror"&&(F=u)),N=clamp(0,1,Q)*b}const j=I?{done:!1,value:p[0]}:F.next(N);c&&(j.value=c(j.value));let{done:V}=j;!I&&h!==null&&(V=this.speed>=0?this.currentTime>=y:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return M&&l!==void 0&&(j.value=getFinalKeyframe(p,this.options,l)),C&&C(j.value),M&&this.finish(),j}get duration(){const{resolved:r}=this;return r?millisecondsToSeconds(r.calculatedDuration):0}get time(){return millisecondsToSeconds(this.currentTime)}set time(r){r=secondsToMilliseconds(r),this.currentTime=r,this.holdTime!==null||this.speed===0?this.holdTime=r:this.driver&&(this.startTime=this.driver.now()-r/this.speed)}get speed(){return this.playbackSpeed}set speed(r){const s=this.playbackSpeed!==r;this.playbackSpeed=r,s&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:r=frameloopDriver,onPlay:s,startTime:a}=this.options;this.driver||(this.driver=r(d=>this.tick(d))),s&&s();const l=this.driver.now();this.holdTime!==null?this.startTime=l-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=l):this.startTime=a??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var r;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(r=this.currentTime)!==null&&r!==void 0?r:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:r}=this.options;r&&r()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(r){return this.startTime=0,this.tick(r,!0)}}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]);function startWaapiAnimation(n,r,s,{delay:a=0,duration:l=300,repeat:d=0,repeatType:u="loop",ease:c="easeInOut",times:p}={}){const h={[r]:s};p&&(h.offset=p);const y=mapEasingToNativeEasing(c,l);return Array.isArray(y)&&(h.easing=y),n.animate(h,{delay:a,duration:l,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:d+1,direction:u==="reverse"?"alternate":"normal"})}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sampleDelta=10,maxDuration=2e4;function requiresPregeneratedKeyframes(n){return isGenerator(n.type)||n.type==="spring"||!isWaapiSupportedEasing(n.ease)}function pregenerateKeyframes(n,r){const s=new MainThreadAnimation({...r,keyframes:n,repeat:0,delay:0,isGenerator:!0});let a={done:!1,value:n[0]};const l=[];let d=0;for(;!a.done&&d<maxDuration;)a=s.sample(d),l.push(a.value),d+=sampleDelta;return{times:void 0,keyframes:l,duration:d-sampleDelta,ease:"linear"}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(n){return n in unsupportedEasingFunctions}class AcceleratedAnimation extends BaseAnimation{constructor(r){super(r);const{name:s,motionValue:a,element:l,keyframes:d}=this.options;this.resolver=new DOMKeyframesResolver(d,(u,c)=>this.onKeyframesResolved(u,c),s,a,l),this.resolver.scheduleResolve()}initPlayback(r,s){let{duration:a=300,times:l,ease:d,type:u,motionValue:c,name:p,startTime:h}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof d=="string"&&supportsLinearEasing()&&isUnsupportedEase(d)&&(d=unsupportedEasingFunctions[d]),requiresPregeneratedKeyframes(this.options)){const{onComplete:b,onUpdate:x,motionValue:T,element:S,..._}=this.options,C=pregenerateKeyframes(r,_);r=C.keyframes,r.length===1&&(r[1]=r[0]),a=C.duration,l=C.times,d=C.ease,u="keyframes"}const y=startWaapiAnimation(c.owner.current,p,r,{...this.options,duration:a,times:l,ease:d});return y.startTime=h??this.calcStartTime(),this.pendingTimeline?(attachTimeline(y,this.pendingTimeline),this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:b}=this.options;c.set(getFinalKeyframe(r,this.options,s)),b&&b(),this.cancel(),this.resolveFinishedPromise()},{animation:y,duration:a,times:l,type:u,ease:d,keyframes:r}}get duration(){const{resolved:r}=this;if(!r)return 0;const{duration:s}=r;return millisecondsToSeconds(s)}get time(){const{resolved:r}=this;if(!r)return 0;const{animation:s}=r;return millisecondsToSeconds(s.currentTime||0)}set time(r){const{resolved:s}=this;if(!s)return;const{animation:a}=s;a.currentTime=secondsToMilliseconds(r)}get speed(){const{resolved:r}=this;if(!r)return 1;const{animation:s}=r;return s.playbackRate}set speed(r){const{resolved:s}=this;if(!s)return;const{animation:a}=s;a.playbackRate=r}get state(){const{resolved:r}=this;if(!r)return"idle";const{animation:s}=r;return s.playState}get startTime(){const{resolved:r}=this;if(!r)return null;const{animation:s}=r;return s.startTime}attachTimeline(r){if(!this._resolved)this.pendingTimeline=r;else{const{resolved:s}=this;if(!s)return noop;const{animation:a}=s;attachTimeline(a,r)}return noop}play(){if(this.isStopped)return;const{resolved:r}=this;if(!r)return;const{animation:s}=r;s.playState==="finished"&&this.updateFinishedPromise(),s.play()}pause(){const{resolved:r}=this;if(!r)return;const{animation:s}=r;s.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:r}=this;if(!r)return;const{animation:s,keyframes:a,duration:l,type:d,ease:u,times:c}=r;if(s.playState==="idle"||s.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:y,onComplete:b,element:x,...T}=this.options,S=new MainThreadAnimation({...T,keyframes:a,duration:l,type:d,ease:u,times:c,isGenerator:!0}),_=secondsToMilliseconds(this.time);h.setWithVelocity(S.sample(_-sampleDelta).value,S.sample(_).value,sampleDelta)}const{onStop:p}=this.options;p&&p(),this.cancel()}complete(){const{resolved:r}=this;r&&r.animation.finish()}cancel(){const{resolved:r}=this;r&&r.animation.cancel()}static supports(r){const{motionValue:s,name:a,repeatDelay:l,repeatType:d,damping:u,type:c}=r;if(!s||!s.owner||!(s.owner.current instanceof HTMLElement))return!1;const{onUpdate:p,transformTemplate:h}=s.owner.getProps();return supportsWaapi()&&a&&acceleratedValues.has(a)&&!p&&!h&&!l&&d!=="mirror"&&u!==0&&c!=="inertia"}}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(n,{keyframes:r})=>r.length>2?keyframesTransition:transformProps.has(n)?n.startsWith("scale")?criticallyDampedSpring(r[1]):underDampedSpring:ease;function isTransitionDefined({when:n,delay:r,delayChildren:s,staggerChildren:a,staggerDirection:l,repeat:d,repeatType:u,repeatDelay:c,from:p,elapsed:h,...y}){return!!Object.keys(y).length}const animateMotionValue=(n,r,s,a={},l,d)=>u=>{const c=getValueTransition(a,n)||{},p=c.delay||a.delay||0;let{elapsed:h=0}=a;h=h-secondsToMilliseconds(p);let y={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:r.getVelocity(),...c,delay:-h,onUpdate:x=>{r.set(x),c.onUpdate&&c.onUpdate(x)},onComplete:()=>{u(),c.onComplete&&c.onComplete()},name:n,motionValue:r,element:d?void 0:l};isTransitionDefined(c)||(y={...y,...getDefaultTransition(n,y)}),y.duration&&(y.duration=secondsToMilliseconds(y.duration)),y.repeatDelay&&(y.repeatDelay=secondsToMilliseconds(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let b=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(b=!0)),b&&!d&&r.get()!==void 0){const x=getFinalKeyframe(y.keyframes,c);if(x!==void 0)return frame.update(()=>{y.onUpdate(x),y.onComplete()}),new GroupPlaybackControls([])}return!d&&AcceleratedAnimation.supports(y)?new AcceleratedAnimation(y):new MainThreadAnimation(y)};function shouldBlockAnimation({protectedKeys:n,needsAnimating:r},s){const a=n.hasOwnProperty(s)&&r[s]!==!0;return r[s]=!1,a}function animateTarget(n,r,{delay:s=0,transitionOverride:a,type:l}={}){var d;let{transition:u=n.getDefaultTransition(),transitionEnd:c,...p}=r;a&&(u=a);const h=[],y=l&&n.animationState&&n.animationState.getState()[l];for(const b in p){const x=n.getValue(b,(d=n.latestValues[b])!==null&&d!==void 0?d:null),T=p[b];if(T===void 0||y&&shouldBlockAnimation(y,b))continue;const S={delay:s,...getValueTransition(u||{},b)};let _=!1;if(window.MotionHandoffAnimation){const k=getOptimisedAppearId(n);if(k){const I=window.MotionHandoffAnimation(k,b,frame);I!==null&&(S.startTime=I,_=!0)}}addValueToWillChange(n,b),x.start(animateMotionValue(b,x,T,n.shouldReduceMotion&&positionalKeys.has(b)?{type:!1}:S,n,_));const C=x.animation;C&&h.push(C)}return c&&Promise.all(h).then(()=>{frame.update(()=>{c&&setTarget(n,c)})}),h}function animateVariant(n,r,s={}){var a;const l=resolveVariant(n,r,s.type==="exit"?(a=n.presenceContext)===null||a===void 0?void 0:a.custom:void 0);let{transition:d=n.getDefaultTransition()||{}}=l||{};s.transitionOverride&&(d=s.transitionOverride);const u=l?()=>Promise.all(animateTarget(n,l,s)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(h=0)=>{const{delayChildren:y=0,staggerChildren:b,staggerDirection:x}=d;return animateChildren(n,r,y+h,b,x,s)}:()=>Promise.resolve(),{when:p}=d;if(p){const[h,y]=p==="beforeChildren"?[u,c]:[c,u];return h().then(()=>y())}else return Promise.all([u(),c(s.delay)])}function animateChildren(n,r,s=0,a=0,l=1,d){const u=[],c=(n.variantChildren.size-1)*a,p=l===1?(h=0)=>h*a:(h=0)=>c-h*a;return Array.from(n.variantChildren).sort(sortByTreeOrder).forEach((h,y)=>{h.notify("AnimationStart",r),u.push(animateVariant(h,r,{...d,delay:s+p(y)}).then(()=>h.notify("AnimationComplete",r)))}),Promise.all(u)}function sortByTreeOrder(n,r){return n.sortNodePosition(r)}function animateVisualElement(n,r,s={}){n.notify("AnimationStart",r);let a;if(Array.isArray(r)){const l=r.map(d=>animateVariant(n,d,s));a=Promise.all(l)}else if(typeof r=="string")a=animateVariant(n,r,s);else{const l=typeof r=="function"?resolveVariant(n,r,s.custom):r;a=Promise.all(animateTarget(n,l,s))}return a.then(()=>{n.notify("AnimationComplete",r)})}const numVariantProps=variantProps.length;function getVariantContext(n){if(!n)return;if(!n.isControllingVariants){const s=n.parent?getVariantContext(n.parent)||{}:{};return n.props.initial!==void 0&&(s.initial=n.props.initial),s}const r={};for(let s=0;s<numVariantProps;s++){const a=variantProps[s],l=n.props[a];(isVariantLabel(l)||l===!1)&&(r[a]=l)}return r}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(n){return r=>Promise.all(r.map(({animation:s,options:a})=>animateVisualElement(n,s,a)))}function createAnimationState(n){let r=animateList(n),s=createState(),a=!0;const l=p=>(h,y)=>{var b;const x=resolveVariant(n,y,p==="exit"?(b=n.presenceContext)===null||b===void 0?void 0:b.custom:void 0);if(x){const{transition:T,transitionEnd:S,..._}=x;h={...h,..._,...S}}return h};function d(p){r=p(n)}function u(p){const{props:h}=n,y=getVariantContext(n.parent)||{},b=[],x=new Set;let T={},S=1/0;for(let C=0;C<numAnimationTypes;C++){const k=reversePriorityOrder[C],I=s[k],N=h[k]!==void 0?h[k]:y[k],F=isVariantLabel(N),j=k===p?I.isActive:null;j===!1&&(S=C);let V=N===y[k]&&N!==h[k]&&F;if(V&&a&&n.manuallyAnimateOnMount&&(V=!1),I.protectedKeys={...T},!I.isActive&&j===null||!N&&!I.prevProp||isAnimationControls(N)||typeof N=="boolean")continue;const M=checkVariantsDidChange(I.prevProp,N);let q=M||k===p&&I.isActive&&!V&&F||C>S&&F,Se=!1;const Q=Array.isArray(N)?N:[N];let ee=Q.reduce(l(k),{});j===!1&&(ee={});const{prevResolvedValues:we={}}=I,he={...we,...ee},He=Be=>{q=!0,x.has(Be)&&(Se=!0,x.delete(Be)),I.needsAnimating[Be]=!0;const me=n.getValue(Be);me&&(me.liveStyle=!1)};for(const Be in he){const me=ee[Be],Ue=we[Be];if(T.hasOwnProperty(Be))continue;let W=!1;isKeyframesTarget(me)&&isKeyframesTarget(Ue)?W=!shallowCompare(me,Ue):W=me!==Ue,W?me!=null?He(Be):x.add(Be):me!==void 0&&x.has(Be)?He(Be):I.protectedKeys[Be]=!0}I.prevProp=N,I.prevResolvedValues=ee,I.isActive&&(T={...T,...ee}),a&&n.blockInitialAnimation&&(q=!1),q&&(!(V&&M)||Se)&&b.push(...Q.map(Be=>({animation:Be,options:{type:k}})))}if(x.size){const C={};x.forEach(k=>{const I=n.getBaseTarget(k),N=n.getValue(k);N&&(N.liveStyle=!0),C[k]=I??null}),b.push({animation:C})}let _=!!b.length;return a&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(_=!1),a=!1,_?r(b):Promise.resolve()}function c(p,h){var y;if(s[p].isActive===h)return Promise.resolve();(y=n.variantChildren)===null||y===void 0||y.forEach(x=>{var T;return(T=x.animationState)===null||T===void 0?void 0:T.setActive(p,h)}),s[p].isActive=h;const b=u(p);for(const x in s)s[x].protectedKeys={};return b}return{animateChanges:u,setActive:c,setAnimateFunction:d,getState:()=>s,reset:()=>{s=createState(),a=!0}}}function checkVariantsDidChange(n,r){return typeof r=="string"?r!==n:Array.isArray(r)?!shallowCompare(r,n):!1}function createTypeState(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(r){this.isMounted=!1,this.node=r}update(){}}class AnimationFeature extends Feature{constructor(r){super(r),r.animationState||(r.animationState=createAnimationState(r))}updateAnimationControlsSubscription(){const{animate:r}=this.node.getProps();isAnimationControls(r)&&(this.unmountControls=r.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:r}=this.node.getProps(),{animate:s}=this.node.prevProps||{};r!==s&&this.updateAnimationControlsSubscription()}unmount(){var r;this.node.animationState.reset(),(r=this.unmountControls)===null||r===void 0||r.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:r,onExitComplete:s}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||r===a)return;const l=this.node.animationState.setActive("exit",!r);s&&!r&&l.then(()=>s(this.id))}mount(){const{register:r}=this.node.presenceContext||{};r&&(this.unmount=r(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(n,r,s,a={passive:!0}){return n.addEventListener(r,s,a),()=>n.removeEventListener(r,s)}function extractEventInfo(n){return{point:{x:n.pageX,y:n.pageY}}}const addPointerInfo=n=>r=>isPrimaryPointer(r)&&n(r,extractEventInfo(r));function addPointerEvent(n,r,s,a){return addDomEvent(n,r,addPointerInfo(s),a)}const distance=(n,r)=>Math.abs(n-r);function distance2D(n,r){const s=distance(n.x,r.x),a=distance(n.y,r.y);return Math.sqrt(s**2+a**2)}class PanSession{constructor(r,s,{transformPagePoint:a,contextWindow:l,dragSnapToOrigin:d=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=getPanInfo(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,T=distance2D(b.offset,{x:0,y:0})>=3;if(!x&&!T)return;const{point:S}=b,{timestamp:_}=frameData;this.history.push({...S,timestamp:_});const{onStart:C,onMove:k}=this.handlers;x||(C&&C(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,b)},this.handlePointerMove=(b,x)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=transformPoint(x,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(b,x)=>{this.end();const{onEnd:T,onSessionEnd:S,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=getPanInfo(b.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(x,this.transformPagePoint),this.history);this.startEvent&&T&&T(b,C),S&&S(b,C)},!isPrimaryPointer(r))return;this.dragSnapToOrigin=d,this.handlers=s,this.transformPagePoint=a,this.contextWindow=l||window;const u=extractEventInfo(r),c=transformPoint(u,this.transformPagePoint),{point:p}=c,{timestamp:h}=frameData;this.history=[{...p,timestamp:h}];const{onSessionStart:y}=s;y&&y(r,getPanInfo(c,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(r){this.handlers=r}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(n,r){return r?{point:r(n.point)}:n}function subtractPoint(n,r){return{x:n.x-r.x,y:n.y-r.y}}function getPanInfo({point:n},r){return{point:n,delta:subtractPoint(n,lastDevicePoint(r)),offset:subtractPoint(n,startDevicePoint(r)),velocity:getVelocity(r,.1)}}function startDevicePoint(n){return n[0]}function lastDevicePoint(n){return n[n.length-1]}function getVelocity(n,r){if(n.length<2)return{x:0,y:0};let s=n.length-1,a=null;const l=lastDevicePoint(n);for(;s>=0&&(a=n[s],!(l.timestamp-a.timestamp>secondsToMilliseconds(r)));)s--;if(!a)return{x:0,y:0};const d=millisecondsToSeconds(l.timestamp-a.timestamp);if(d===0)return{x:0,y:0};const u={x:(l.x-a.x)/d,y:(l.y-a.y)/d};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(n){return n.max-n.min}function isNear(n,r,s){return Math.abs(n-r)<=s}function calcAxisDelta(n,r,s,a=.5){n.origin=a,n.originPoint=mixNumber$1(r.min,r.max,n.origin),n.scale=calcLength(s)/calcLength(r),n.translate=mixNumber$1(s.min,s.max,n.origin)-n.originPoint,(n.scale>=SCALE_MIN&&n.scale<=SCALE_MAX||isNaN(n.scale))&&(n.scale=1),(n.translate>=TRANSLATE_MIN&&n.translate<=TRANSLATE_MAX||isNaN(n.translate))&&(n.translate=0)}function calcBoxDelta(n,r,s,a){calcAxisDelta(n.x,r.x,s.x,a?a.originX:void 0),calcAxisDelta(n.y,r.y,s.y,a?a.originY:void 0)}function calcRelativeAxis(n,r,s){n.min=s.min+r.min,n.max=n.min+calcLength(r)}function calcRelativeBox(n,r,s){calcRelativeAxis(n.x,r.x,s.x),calcRelativeAxis(n.y,r.y,s.y)}function calcRelativeAxisPosition(n,r,s){n.min=r.min-s.min,n.max=n.min+calcLength(r)}function calcRelativePosition(n,r,s){calcRelativeAxisPosition(n.x,r.x,s.x),calcRelativeAxisPosition(n.y,r.y,s.y)}function applyConstraints(n,{min:r,max:s},a){return r!==void 0&&n<r?n=a?mixNumber$1(r,n,a.min):Math.max(n,r):s!==void 0&&n>s&&(n=a?mixNumber$1(s,n,a.max):Math.min(n,s)),n}function calcRelativeAxisConstraints(n,r,s){return{min:r!==void 0?n.min+r:void 0,max:s!==void 0?n.max+s-(n.max-n.min):void 0}}function calcRelativeConstraints(n,{top:r,left:s,bottom:a,right:l}){return{x:calcRelativeAxisConstraints(n.x,s,l),y:calcRelativeAxisConstraints(n.y,r,a)}}function calcViewportAxisConstraints(n,r){let s=r.min-n.min,a=r.max-n.max;return r.max-r.min<n.max-n.min&&([s,a]=[a,s]),{min:s,max:a}}function calcViewportConstraints(n,r){return{x:calcViewportAxisConstraints(n.x,r.x),y:calcViewportAxisConstraints(n.y,r.y)}}function calcOrigin(n,r){let s=.5;const a=calcLength(n),l=calcLength(r);return l>a?s=progress(r.min,r.max-a,n.min):a>l&&(s=progress(n.min,n.max-l,r.min)),clamp(0,1,s)}function rebaseAxisConstraints(n,r){const s={};return r.min!==void 0&&(s.min=r.min-n.min),r.max!==void 0&&(s.max=r.max-n.min),s}const defaultElastic=.35;function resolveDragElastic(n=defaultElastic){return n===!1?n=0:n===!0&&(n=defaultElastic),{x:resolveAxisElastic(n,"left","right"),y:resolveAxisElastic(n,"top","bottom")}}function resolveAxisElastic(n,r,s){return{min:resolvePointElastic(n,r),max:resolvePointElastic(n,s)}}function resolvePointElastic(n,r){return typeof n=="number"?n:n[r]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(n){return[n("x"),n("y")]}function convertBoundingBoxToBox({top:n,left:r,right:s,bottom:a}){return{x:{min:r,max:s},y:{min:n,max:a}}}function convertBoxToBoundingBox({x:n,y:r}){return{top:r.min,right:n.max,bottom:r.max,left:n.min}}function transformBoxPoints(n,r){if(!r)return n;const s=r({x:n.left,y:n.top}),a=r({x:n.right,y:n.bottom});return{top:s.y,left:s.x,bottom:a.y,right:a.x}}function isIdentityScale(n){return n===void 0||n===1}function hasScale({scale:n,scaleX:r,scaleY:s}){return!isIdentityScale(n)||!isIdentityScale(r)||!isIdentityScale(s)}function hasTransform(n){return hasScale(n)||has2DTranslate(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function has2DTranslate(n){return is2DTranslate(n.x)||is2DTranslate(n.y)}function is2DTranslate(n){return n&&n!=="0%"}function scalePoint(n,r,s){const a=n-s,l=r*a;return s+l}function applyPointDelta(n,r,s,a,l){return l!==void 0&&(n=scalePoint(n,l,a)),scalePoint(n,s,a)+r}function applyAxisDelta(n,r=0,s=1,a,l){n.min=applyPointDelta(n.min,r,s,a,l),n.max=applyPointDelta(n.max,r,s,a,l)}function applyBoxDelta(n,{x:r,y:s}){applyAxisDelta(n.x,r.translate,r.scale,r.originPoint),applyAxisDelta(n.y,s.translate,s.scale,s.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(n,r,s,a=!1){const l=s.length;if(!l)return;r.x=r.y=1;let d,u;for(let c=0;c<l;c++){d=s[c],u=d.projectionDelta;const{visualElement:p}=d.options;p&&p.props.style&&p.props.style.display==="contents"||(a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&transformBox(n,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),u&&(r.x*=u.x.scale,r.y*=u.y.scale,applyBoxDelta(n,u)),a&&hasTransform(d.latestValues)&&transformBox(n,d.latestValues))}r.x<TREE_SCALE_SNAP_MAX&&r.x>TREE_SCALE_SNAP_MIN&&(r.x=1),r.y<TREE_SCALE_SNAP_MAX&&r.y>TREE_SCALE_SNAP_MIN&&(r.y=1)}function translateAxis(n,r){n.min=n.min+r,n.max=n.max+r}function transformAxis(n,r,s,a,l=.5){const d=mixNumber$1(n.min,n.max,l);applyAxisDelta(n,r,s,d,a)}function transformBox(n,r){transformAxis(n.x,r.x,r.scaleX,r.scale,r.originX),transformAxis(n.y,r.y,r.scaleY,r.scale,r.originY)}function measureViewportBox(n,r){return convertBoundingBoxToBox(transformBoxPoints(n.getBoundingClientRect(),r))}function measurePageBox(n,r,s){const a=measureViewportBox(n,s),{scroll:l}=r;return l&&(translateAxis(a.x,l.offset.x),translateAxis(a.y,l.offset.y)),a}const getContextWindow=({current:n})=>n?n.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(r){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=r}start(r,{snapToCursor:s=!1}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const l=y=>{const{dragSnapToOrigin:b}=this.getProps();b?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(extractEventInfo(y).point)},d=(y,b)=>{const{drag:x,dragPropagation:T,onDragStart:S}=this.getProps();if(x&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(C=>{let k=this.getAxisMotionValue(C).get()||0;if(percent.test(k)){const{projection:I}=this.visualElement;if(I&&I.layout){const N=I.layout.layoutBox[C];N&&(k=calcLength(N)*(parseFloat(k)/100))}}this.originPoint[C]=k}),S&&frame.postRender(()=>S(y,b)),addValueToWillChange(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},u=(y,b)=>{const{dragPropagation:x,dragDirectionLock:T,onDirectionLock:S,onDrag:_}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:C}=b;if(T&&this.currentDirection===null){this.currentDirection=getCurrentDirection(C),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",b.point,C),this.updateAxis("y",b.point,C),this.visualElement.render(),_&&_(y,b)},c=(y,b)=>this.stop(y,b),p=()=>eachAxis(y=>{var b;return this.getAnimationState(y)==="paused"&&((b=this.getAxisMotionValue(y).animation)===null||b===void 0?void 0:b.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new PanSession(r,{onSessionStart:l,onStart:d,onMove:u,onSessionEnd:c,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:getContextWindow(this.visualElement)})}stop(r,s){const a=this.isDragging;if(this.cancel(),!a)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:d}=this.getProps();d&&frame.postRender(()=>d(r,s))}cancel(){this.isDragging=!1;const{projection:r,animationState:s}=this.visualElement;r&&(r.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:a}=this.getProps();!a&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(r,s,a){const{drag:l}=this.getProps();if(!a||!shouldDrag(r,l,this.currentDirection))return;const d=this.getAxisMotionValue(r);let u=this.originPoint[r]+a[r];this.constraints&&this.constraints[r]&&(u=applyConstraints(u,this.constraints[r],this.elastic[r])),d.set(u)}resolveConstraints(){var r;const{dragConstraints:s,dragElastic:a}=this.getProps(),l=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)===null||r===void 0?void 0:r.layout,d=this.constraints;s&&isRefObject(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&l?this.constraints=calcRelativeConstraints(l.layoutBox,s):this.constraints=!1,this.elastic=resolveDragElastic(a),d!==this.constraints&&l&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=rebaseAxisConstraints(l.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:r,onMeasureDragConstraints:s}=this.getProps();if(!r||!isRefObject(r))return!1;const a=r.current,{projection:l}=this.visualElement;if(!l||!l.layout)return!1;const d=measurePageBox(a,l.root,this.visualElement.getTransformPagePoint());let u=calcViewportConstraints(l.layout.layoutBox,d);if(s){const c=s(convertBoxToBoundingBox(u));this.hasMutatedConstraints=!!c,c&&(u=convertBoundingBoxToBox(c))}return u}startAnimation(r){const{drag:s,dragMomentum:a,dragElastic:l,dragTransition:d,dragSnapToOrigin:u,onDragTransitionEnd:c}=this.getProps(),p=this.constraints||{},h=eachAxis(y=>{if(!shouldDrag(y,s,this.currentDirection))return;let b=p&&p[y]||{};u&&(b={min:0,max:0});const x=l?200:1e6,T=l?40:1e7,S={type:"inertia",velocity:a?r[y]:0,bounceStiffness:x,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...d,...b};return this.startAxisValueAnimation(y,S)});return Promise.all(h).then(c)}startAxisValueAnimation(r,s){const a=this.getAxisMotionValue(r);return addValueToWillChange(this.visualElement,r),a.start(animateMotionValue(r,a,0,s,this.visualElement,!1))}stopAnimation(){eachAxis(r=>this.getAxisMotionValue(r).stop())}pauseAnimation(){eachAxis(r=>{var s;return(s=this.getAxisMotionValue(r).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(r){var s;return(s=this.getAxisMotionValue(r).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(r){const s=`_drag${r.toUpperCase()}`,a=this.visualElement.getProps(),l=a[s];return l||this.visualElement.getValue(r,(a.initial?a.initial[r]:void 0)||0)}snapToCursor(r){eachAxis(s=>{const{drag:a}=this.getProps();if(!shouldDrag(s,a,this.currentDirection))return;const{projection:l}=this.visualElement,d=this.getAxisMotionValue(s);if(l&&l.layout){const{min:u,max:c}=l.layout.layoutBox[s];d.set(r[s]-mixNumber$1(u,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:r,dragConstraints:s}=this.getProps(),{projection:a}=this.visualElement;if(!isRefObject(s)||!a||!this.constraints)return;this.stopAnimation();const l={x:0,y:0};eachAxis(u=>{const c=this.getAxisMotionValue(u);if(c&&this.constraints!==!1){const p=c.get();l[u]=calcOrigin({min:p,max:p},this.constraints[u])}});const{transformTemplate:d}=this.visualElement.getProps();this.visualElement.current.style.transform=d?d({},""):"none",a.root&&a.root.updateScroll(),a.updateLayout(),this.resolveConstraints(),eachAxis(u=>{if(!shouldDrag(u,r,null))return;const c=this.getAxisMotionValue(u),{min:p,max:h}=this.constraints[u];c.set(mixNumber$1(p,h,l[u]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const r=this.visualElement.current,s=addPointerEvent(r,"pointerdown",p=>{const{drag:h,dragListener:y=!0}=this.getProps();h&&y&&this.start(p)}),a=()=>{const{dragConstraints:p}=this.getProps();isRefObject(p)&&p.current&&(this.constraints=this.resolveRefConstraints())},{projection:l}=this.visualElement,d=l.addEventListener("measure",a);l&&!l.layout&&(l.root&&l.root.updateScroll(),l.updateLayout()),frame.read(a);const u=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),c=l.addEventListener("didUpdate",(({delta:p,hasLayoutChanged:h})=>{this.isDragging&&h&&(eachAxis(y=>{const b=this.getAxisMotionValue(y);b&&(this.originPoint[y]+=p[y].translate,b.set(b.get()+p[y].translate))}),this.visualElement.render())}));return()=>{u(),s(),d(),c&&c()}}getProps(){const r=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:a=!1,dragPropagation:l=!1,dragConstraints:d=!1,dragElastic:u=defaultElastic,dragMomentum:c=!0}=r;return{...r,drag:s,dragDirectionLock:a,dragPropagation:l,dragConstraints:d,dragElastic:u,dragMomentum:c}}}function shouldDrag(n,r,s){return(r===!0||r===n)&&(s===null||s===n)}function getCurrentDirection(n,r=10){let s=null;return Math.abs(n.y)>r?s="y":Math.abs(n.x)>r&&(s="x"),s}class DragGesture extends Feature{constructor(r){super(r),this.removeGroupControls=noop,this.removeListeners=noop,this.controls=new VisualElementDragControls(r)}mount(){const{dragControls:r}=this.node.getProps();r&&(this.removeGroupControls=r.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=n=>(r,s)=>{n&&frame.postRender(()=>n(r,s))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop}onPointerDown(r){this.session=new PanSession(r,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:r,onPanStart:s,onPan:a,onPanEnd:l}=this.node.getProps();return{onSessionStart:asyncHandler(r),onStart:asyncHandler(s),onMove:a,onEnd:(d,u)=>{delete this.session,l&&frame.postRender(()=>l(d,u))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",r=>this.onPointerDown(r))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(n,r){return r.max===r.min?0:n/(r.max-r.min)*100}const correctBorderRadius={correct:(n,r)=>{if(!r.target)return n;if(typeof n=="string")if(px.test(n))n=parseFloat(n);else return n;const s=pixelsToPercent(n,r.target.x),a=pixelsToPercent(n,r.target.y);return`${s}% ${a}%`}},correctBoxShadow={correct:(n,{treeScale:r,projectionDelta:s})=>{const a=n,l=complex.parse(n);if(l.length>5)return a;const d=complex.createTransformer(n),u=typeof l[0]!="number"?1:0,c=s.x.scale*r.x,p=s.y.scale*r.y;l[0+u]/=c,l[1+u]/=p;const h=mixNumber$1(c,p,.5);return typeof l[2+u]=="number"&&(l[2+u]/=h),typeof l[3+u]=="number"&&(l[3+u]/=h),d(l)}};class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:r,layoutGroup:s,switchLayoutGroup:a,layoutId:l}=this.props,{projection:d}=r;addScaleCorrector(defaultScaleCorrectors),d&&(s.group&&s.group.add(d),a&&a.register&&l&&a.register(d),d.root.didUpdate(),d.addEventListener("animationComplete",()=>{this.safeToRemove()}),d.setOptions({...d.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(r){const{layoutDependency:s,visualElement:a,drag:l,isPresent:d}=this.props,u=a.projection;return u&&(u.isPresent=d,l||r.layoutDependency!==s||s===void 0?u.willUpdate():this.safeToRemove(),r.isPresent!==d&&(d?u.promote():u.relegate()||frame.postRender(()=>{const c=u.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:r}=this.props.visualElement;r&&(r.root.didUpdate(),microtask.postRender(()=>{!r.currentAnimation&&r.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:r,layoutGroup:s,switchLayoutGroup:a}=this.props,{projection:l}=r;l&&(l.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(l),a&&a.deregister&&a.deregister(l))}safeToRemove(){const{safeToRemove:r}=this.props;r&&r()}render(){return null}}function MeasureLayout(n){const[r,s]=usePresence(),a=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...n,layoutGroup:a,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:r,safeToRemove:s})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(n,r,s){const a=isMotionValue(n)?n:motionValue(n);return a.start(animateMotionValue("",a,r,s)),a.animation}function isSVGElement(n){return n instanceof SVGElement&&n.tagName!=="svg"}const compareByDepth=(n,r)=>n.depth-r.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(r){addUniqueItem(this.children,r),this.isDirty=!0}remove(r){removeItem(this.children,r),this.isDirty=!0}forEach(r){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(r)}}function delay(n,r){const s=time.now(),a=({timestamp:l})=>{const d=l-s;d>=r&&(cancelFrame(a),n(d-r))};return frame.read(a,!0),()=>cancelFrame(a)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=n=>typeof n=="string"?parseFloat(n):n,isPx=n=>typeof n=="number"||px.test(n);function mixValues(n,r,s,a,l,d){l?(n.opacity=mixNumber$1(0,s.opacity!==void 0?s.opacity:1,easeCrossfadeIn(a)),n.opacityExit=mixNumber$1(r.opacity!==void 0?r.opacity:1,0,easeCrossfadeOut(a))):d&&(n.opacity=mixNumber$1(r.opacity!==void 0?r.opacity:1,s.opacity!==void 0?s.opacity:1,a));for(let u=0;u<numBorders;u++){const c=`border${borders[u]}Radius`;let p=getRadius(r,c),h=getRadius(s,c);if(p===void 0&&h===void 0)continue;p||(p=0),h||(h=0),p===0||h===0||isPx(p)===isPx(h)?(n[c]=Math.max(mixNumber$1(asNumber(p),asNumber(h),a),0),(percent.test(h)||percent.test(p))&&(n[c]+="%")):n[c]=h}(r.rotate||s.rotate)&&(n.rotate=mixNumber$1(r.rotate||0,s.rotate||0,a))}function getRadius(n,r){return n[r]!==void 0?n[r]:n.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop);function compress(n,r,s){return a=>a<n?0:a>r?1:s(progress(n,r,a))}function copyAxisInto(n,r){n.min=r.min,n.max=r.max}function copyBoxInto(n,r){copyAxisInto(n.x,r.x),copyAxisInto(n.y,r.y)}function copyAxisDeltaInto(n,r){n.translate=r.translate,n.scale=r.scale,n.originPoint=r.originPoint,n.origin=r.origin}function removePointDelta(n,r,s,a,l){return n-=r,n=scalePoint(n,1/s,a),l!==void 0&&(n=scalePoint(n,1/l,a)),n}function removeAxisDelta(n,r=0,s=1,a=.5,l,d=n,u=n){if(percent.test(r)&&(r=parseFloat(r),r=mixNumber$1(u.min,u.max,r/100)-u.min),typeof r!="number")return;let c=mixNumber$1(d.min,d.max,a);n===d&&(c-=r),n.min=removePointDelta(n.min,r,s,c,l),n.max=removePointDelta(n.max,r,s,c,l)}function removeAxisTransforms(n,r,[s,a,l],d,u){removeAxisDelta(n,r[s],r[a],r[l],r.scale,d,u)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(n,r,s,a){removeAxisTransforms(n.x,r,xKeys,s?s.x:void 0,a?a.x:void 0),removeAxisTransforms(n.y,r,yKeys,s?s.y:void 0,a?a.y:void 0)}function isAxisDeltaZero(n){return n.translate===0&&n.scale===1}function isDeltaZero(n){return isAxisDeltaZero(n.x)&&isAxisDeltaZero(n.y)}function axisEquals(n,r){return n.min===r.min&&n.max===r.max}function boxEquals(n,r){return axisEquals(n.x,r.x)&&axisEquals(n.y,r.y)}function axisEqualsRounded(n,r){return Math.round(n.min)===Math.round(r.min)&&Math.round(n.max)===Math.round(r.max)}function boxEqualsRounded(n,r){return axisEqualsRounded(n.x,r.x)&&axisEqualsRounded(n.y,r.y)}function aspectRatio(n){return calcLength(n.x)/calcLength(n.y)}function axisDeltaEquals(n,r){return n.translate===r.translate&&n.scale===r.scale&&n.originPoint===r.originPoint}class NodeStack{constructor(){this.members=[]}add(r){addUniqueItem(this.members,r),r.scheduleRender()}remove(r){if(removeItem(this.members,r),r===this.prevLead&&(this.prevLead=void 0),r===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(r){const s=this.members.findIndex(l=>r===l);if(s===0)return!1;let a;for(let l=s;l>=0;l--){const d=this.members[l];if(d.isPresent!==!1){a=d;break}}return a?(this.promote(a),!0):!1}promote(r,s){const a=this.lead;if(r!==a&&(this.prevLead=a,this.lead=r,r.show(),a)){a.instance&&a.scheduleRender(),r.scheduleRender(),r.resumeFrom=a,s&&(r.resumeFrom.preserveOpacity=!0),a.snapshot&&(r.snapshot=a.snapshot,r.snapshot.latestValues=a.animationValues||a.latestValues),r.root&&r.root.isUpdating&&(r.isLayoutDirty=!0);const{crossfade:l}=r.options;l===!1&&a.hide()}}exitAnimationComplete(){this.members.forEach(r=>{const{options:s,resumingFrom:a}=r;s.onExitComplete&&s.onExitComplete(),a&&a.options.onExitComplete&&a.options.onExitComplete()})}scheduleRender(){this.members.forEach(r=>{r.instance&&r.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(n,r,s){let a="";const l=n.x.translate/r.x,d=n.y.translate/r.y,u=(s==null?void 0:s.z)||0;if((l||d||u)&&(a=`translate3d(${l}px, ${d}px, ${u}px) `),(r.x!==1||r.y!==1)&&(a+=`scale(${1/r.x}, ${1/r.y}) `),s){const{transformPerspective:h,rotate:y,rotateX:b,rotateY:x,skewX:T,skewY:S}=s;h&&(a=`perspective(${h}px) ${a}`),y&&(a+=`rotate(${y}deg) `),b&&(a+=`rotateX(${b}deg) `),x&&(a+=`rotateY(${x}deg) `),T&&(a+=`skewX(${T}deg) `),S&&(a+=`skewY(${S}deg) `)}const c=n.x.scale*r.x,p=n.y.scale*r.y;return(c!==1||p!==1)&&(a+=`scale(${c}, ${p})`),a||"none"}const metrics={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},isDebug=typeof window<"u"&&window.MotionDebug!==void 0,transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(n,r,s,a){const{latestValues:l}=r;l[n]&&(s[n]=l[n],r.setStaticValue(n,0),a&&(a[n]=0))}function cancelTreeOptimisedTransformAnimations(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:r}=n.options;if(!r)return;const s=getOptimisedAppearId(r);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:l,layoutId:d}=n.options;window.MotionCancelOptimisedAnimation(s,"transform",frame,!(l||d))}const{parent:a}=n;a&&!a.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(a)}function createProjectionNode({attachResizeListener:n,defaultParent:r,measureScroll:s,checkIsScrollRoot:a,resetTransform:l}){return class{constructor(u={},c=r==null?void 0:r()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,isDebug&&(metrics.totalNodes=metrics.resolvedTargetDeltas=metrics.recalculatedProjection=0),this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),isDebug&&window.MotionDebug.record(metrics)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let p=0;p<this.path.length;p++)this.path[p].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(u,c){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new SubscriptionManager),this.eventHandlers.get(u).add(c)}notifyListeners(u,...c){const p=this.eventHandlers.get(u);p&&p.notify(...c)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(u),this.instance=u;const{layoutId:p,layout:h,visualElement:y}=this.options;if(y&&!y.current&&y.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(h||p)&&(this.isLayoutDirty=!0),n){let b;const x=()=>this.root.updateBlockedByResize=!1;n(u,()=>{this.root.updateBlockedByResize=!0,b&&b(),b=delay(x,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}p&&this.root.registerSharedNode(p,this),this.options.animate!==!1&&y&&(p||h)&&this.addEventListener("didUpdate",({delta:b,hasLayoutChanged:x,hasRelativeTargetChanged:T,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||y.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:C,onLayoutAnimationComplete:k}=y.getProps(),I=!this.targetLayout||!boxEqualsRounded(this.targetLayout,S)||T,N=!x&&T;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||N||x&&(I||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(b,N);const F={...getValueTransition(_,"layout"),onPlay:C,onComplete:k};(y.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F)}else x||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const b=this.path[y];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:c,layout:p}=this.options;if(c===void 0&&!p)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const c=time.now();frameData.delta=clamp(0,1e3/60,c-frameData.timestamp),frameData.timestamp=c,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let p=0;p<this.path.length;p++)this.path[p].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(c=!1),c){const p=a(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:p,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:p}}}resetTransform(){if(!l)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!isDeltaZero(this.projectionDelta),p=this.getTransformTemplate(),h=p?p(this.latestValues,""):void 0,y=h!==this.prevTransformTemplateValue;u&&(c||hasTransform(this.latestValues)||y)&&(l(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const c=this.measurePageBox();let p=this.removeElementScroll(c);return u&&(p=this.removeTransform(p)),roundBox(p),{animationId:this.root.animationId,measuredBox:c,layoutBox:p,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:c}=this.options;if(!c)return createBox();const p=c.measureViewportBox();if(!(((u=this.scroll)===null||u===void 0?void 0:u.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:y}=this.root;y&&(translateAxis(p.x,y.offset.x),translateAxis(p.y,y.offset.y))}return p}removeElementScroll(u){var c;const p=createBox();if(copyBoxInto(p,u),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return p;for(let h=0;h<this.path.length;h++){const y=this.path[h],{scroll:b,options:x}=y;y!==this.root&&b&&x.layoutScroll&&(b.wasRoot&&copyBoxInto(p,u),translateAxis(p.x,b.offset.x),translateAxis(p.y,b.offset.y))}return p}applyTransform(u,c=!1){const p=createBox();copyBoxInto(p,u);for(let h=0;h<this.path.length;h++){const y=this.path[h];!c&&y.options.layoutScroll&&y.scroll&&y!==y.root&&transformBox(p,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),hasTransform(y.latestValues)&&transformBox(p,y.latestValues)}return hasTransform(this.latestValues)&&transformBox(p,this.latestValues),p}removeTransform(u){const c=createBox();copyBoxInto(c,u);for(let p=0;p<this.path.length;p++){const h=this.path[p];if(!h.instance||!hasTransform(h.latestValues))continue;hasScale(h.latestValues)&&h.updateSnapshot();const y=createBox(),b=h.measurePageBox();copyBoxInto(y,b),removeBoxTransforms(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,y)}return hasTransform(this.latestValues)&&removeBoxTransforms(c,this.latestValues),c}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var c;const p=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=p.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=p.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=p.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==p;if(!(u||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:b,layoutId:x}=this.options;if(!(!this.layout||!(b||x))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,T.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}isDebug&&metrics.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const c=this.getLead(),p=!!this.resumingFrom||this!==c;let h=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(h=!1),p&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(h=!1),h)return;const{layout:y,layoutId:b}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||b))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,T=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,p),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=createBox());const{target:S}=c;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==x||this.treeScale.y!==T||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S)),isDebug&&metrics.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),u){const p=this.getStack();p&&p.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(u,c=!1){const p=this.snapshot,h=p?p.latestValues:{},y={...this.latestValues},b=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const x=createBox(),T=p?p.source:void 0,S=this.layout?this.layout.source:void 0,_=T!==S,C=this.getStack(),k=!C||C.members.length<=1,I=!!(_&&!k&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let N;this.mixTargetDelta=F=>{const j=F/1e3;mixAxisDelta(b.x,u.x,j),mixAxisDelta(b.y,u.y,j),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,x,j),N&&boxEquals(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=createBox()),copyBoxInto(N,this.relativeTarget)),_&&(this.animationValues=y,mixValues(y,h,this.latestValues,j,I,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...u,onUpdate:c=>{this.mixTargetDelta(c),u.onUpdate&&u.onUpdate(c)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:c,target:p,layout:h,latestValues:y}=u;if(!(!c||!p||!h)){if(this!==u&&this.layout&&h&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,h.layoutBox)){p=this.target||createBox();const b=calcLength(this.layout.layoutBox.x);p.x.min=u.target.x.min,p.x.max=p.x.min+b;const x=calcLength(this.layout.layoutBox.y);p.y.min=u.target.y.min,p.y.max=p.y.min+x}copyBoxInto(c,p),transformBox(c,y),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,c,y)}}registerSharedNode(u,c){this.sharedNodes.has(u)||this.sharedNodes.set(u,new NodeStack),this.sharedNodes.get(u).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:c}=this.options;return c?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:c}=this.options;return c?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:c,preserveFollowOpacity:p}={}){const h=this.getStack();h&&h.promote(this,p),u&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let c=!1;const{latestValues:p}=u;if((p.z||p.rotate||p.rotateX||p.rotateY||p.rotateZ||p.skewX||p.skewY)&&(c=!0),!c)return;const h={};p.z&&resetDistortingTransform("z",u,h,this.animationValues);for(let y=0;y<transformAxes.length;y++)resetDistortingTransform(`rotate${transformAxes[y]}`,u,h,this.animationValues),resetDistortingTransform(`skew${transformAxes[y]}`,u,h,this.animationValues);u.render();for(const y in h)u.setStaticValue(y,h[y]),this.animationValues&&(this.animationValues[y]=h[y]);u.scheduleRender()}getProjectionStyles(u){var c,p;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const h={visibility:""},y=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=resolveMotionValue(u==null?void 0:u.pointerEvents)||"",h.transform=y?y(this.latestValues,""):"none",h;const b=this.getLead();if(!this.projectionDelta||!this.layout||!b.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=resolveMotionValue(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(_.transform=y?y({},""):"none",this.hasProjected=!1),_}const x=b.animationValues||b.latestValues;this.applyTransformsToTarget(),h.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,x),y&&(h.transform=y(x,h.transform));const{x:T,y:S}=this.projectionDelta;h.transformOrigin=`${T.origin*100}% ${S.origin*100}% 0`,b.animationValues?h.opacity=b===this?(p=(c=x.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&p!==void 0?p:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:h.opacity=b===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const _ in scaleCorrectors){if(x[_]===void 0)continue;const{correct:C,applyTo:k}=scaleCorrectors[_],I=h.transform==="none"?x[_]:C(x[_],b);if(k){const N=k.length;for(let F=0;F<N;F++)h[k[F]]=I}else h[_]=I}return this.options.layoutId&&(h.pointerEvents=b===this?resolveMotionValue(u==null?void 0:u.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var c;return(c=u.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(n){n.updateLayout()}function notifyLayoutUpdate(n){var r;const s=((r=n.resumeFrom)===null||r===void 0?void 0:r.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&s&&n.hasListeners("didUpdate")){const{layoutBox:a,measuredBox:l}=n.layout,{animationType:d}=n.options,u=s.source!==n.layout.source;d==="size"?eachAxis(b=>{const x=u?s.measuredBox[b]:s.layoutBox[b],T=calcLength(x);x.min=a[b].min,x.max=x.min+T}):shouldAnimatePositionOnly(d,s.layoutBox,a)&&eachAxis(b=>{const x=u?s.measuredBox[b]:s.layoutBox[b],T=calcLength(a[b]);x.max=x.min+T,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[b].max=n.relativeTarget[b].min+T)});const c=createDelta();calcBoxDelta(c,a,s.layoutBox);const p=createDelta();u?calcBoxDelta(p,n.applyTransform(l,!0),s.measuredBox):calcBoxDelta(p,a,s.layoutBox);const h=!isDeltaZero(c);let y=!1;if(!n.resumeFrom){const b=n.getClosestProjectingParent();if(b&&!b.resumeFrom){const{snapshot:x,layout:T}=b;if(x&&T){const S=createBox();calcRelativePosition(S,s.layoutBox,x.layoutBox);const _=createBox();calcRelativePosition(_,a,T.layoutBox),boxEqualsRounded(S,_)||(y=!0),b.options.layoutRoot&&(n.relativeTarget=_,n.relativeTargetOrigin=S,n.relativeParent=b)}}}n.notifyListeners("didUpdate",{layout:a,snapshot:s,delta:p,layoutDelta:c,hasLayoutChanged:h,hasRelativeTargetChanged:y})}else if(n.isLead()){const{onExitComplete:a}=n.options;a&&a()}n.options.transition=void 0}function propagateDirtyNodes(n){isDebug&&metrics.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function cleanDirtyNodes(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function clearSnapshot(n){n.clearSnapshot()}function clearMeasurements(n){n.clearMeasurements()}function clearIsLayoutDirty(n){n.isLayoutDirty=!1}function resetTransformStyle(n){const{visualElement:r}=n.options;r&&r.getProps().onBeforeLayoutMeasure&&r.notify("BeforeLayoutMeasure"),n.resetTransform()}function finishAnimation(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function resolveTargetDelta(n){n.resolveTargetDelta()}function calcProjection(n){n.calcProjection()}function resetSkewAndRotation(n){n.resetSkewAndRotation()}function removeLeadSnapshots(n){n.removeLeadSnapshot()}function mixAxisDelta(n,r,s){n.translate=mixNumber$1(r.translate,0,s),n.scale=mixNumber$1(r.scale,1,s),n.origin=r.origin,n.originPoint=r.originPoint}function mixAxis(n,r,s,a){n.min=mixNumber$1(r.min,s.min,a),n.max=mixNumber$1(r.max,s.max,a)}function mixBox(n,r,s,a){mixAxis(n.x,r.x,s.x,a),mixAxis(n.y,r.y,s.y,a)}function hasOpacityCrossfade(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop;function roundAxis(n){n.min=roundPoint(n.min),n.max=roundPoint(n.max)}function roundBox(n){roundAxis(n.x),roundAxis(n.y)}function shouldAnimatePositionOnly(n,r,s){return n==="position"||n==="preserve-aspect"&&!isNear(aspectRatio(r),aspectRatio(s),.2)}function checkNodeWasScrollRoot(n){var r;return n!==n.root&&((r=n.scroll)===null||r===void 0?void 0:r.wasRoot)}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(n,r)=>addDomEvent(n,"resize",r),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const n=new DocumentProjectionNode({});n.mount(window),n.setOptions({layoutScroll:!0}),rootProjectionNode.current=n}return rootProjectionNode.current},resetTransform:(n,r)=>{n.style.transform=r!==void 0?r:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(n,r,s){const{props:a}=n;n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",s==="Start");const l="onHover"+s,d=a[l];d&&frame.postRender(()=>d(r,extractEventInfo(r)))}class HoverGesture extends Feature{mount(){const{current:r}=this.node;r&&(this.unmount=hover(r,s=>(handleHoverEvent(this.node,s,"Start"),a=>handleHoverEvent(this.node,a,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let r=!1;try{r=this.node.current.matches(":focus-visible")}catch{r=!0}!r||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(n,r,s){const{props:a}=n;n.animationState&&a.whileTap&&n.animationState.setActive("whileTap",s==="Start");const l="onTap"+(s==="End"?"":s),d=a[l];d&&frame.postRender(()=>d(r,extractEventInfo(r)))}class PressGesture extends Feature{mount(){const{current:r}=this.node;r&&(this.unmount=press(r,s=>(handlePressEvent(this.node,s,"Start"),(a,{success:l})=>handlePressEvent(this.node,a,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=n=>{const r=observerCallbacks.get(n.target);r&&r(n)},fireAllObserverCallbacks=n=>{n.forEach(fireObserverCallback)};function initIntersectionObserver({root:n,...r}){const s=n||document;observers.has(s)||observers.set(s,{});const a=observers.get(s),l=JSON.stringify(r);return a[l]||(a[l]=new IntersectionObserver(fireAllObserverCallbacks,{root:n,...r})),a[l]}function observeIntersection(n,r,s){const a=initIntersectionObserver(r);return observerCallbacks.set(n,s),a.observe(n),()=>{observerCallbacks.delete(n),a.unobserve(n)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:r={}}=this.node.getProps(),{root:s,margin:a,amount:l="some",once:d}=r,u={root:s?s.current:void 0,rootMargin:a,threshold:typeof l=="number"?l:thresholdNames[l]},c=p=>{const{isIntersecting:h}=p;if(this.isInView===h||(this.isInView=h,d&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:y,onViewportLeave:b}=this.node.getProps(),x=h?y:b;x&&x(p)};return observeIntersection(this.node.current,u,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:r,prevProps:s}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(r,s))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:n={}},{viewport:r={}}={}){return s=>n[s]!==r[s]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),r=()=>prefersReducedMotion.current=n.matches;n.addListener(r),r()}else prefersReducedMotion.current=!1}const valueTypes=[...dimensionValueTypes,color,complex],findValueType=n=>valueTypes.find(testValueType(n)),visualElementStore=new WeakMap;function updateMotionValuesFromProps(n,r,s){for(const a in r){const l=r[a],d=s[a];if(isMotionValue(l))n.addValue(a,l);else if(isMotionValue(d))n.addValue(a,motionValue(l,{owner:n}));else if(d!==l)if(n.hasValue(a)){const u=n.getValue(a);u.liveStyle===!0?u.jump(l):u.hasAnimated||u.set(l)}else{const u=n.getStaticValue(a);n.addValue(a,motionValue(u!==void 0?u:l,{owner:n}))}}for(const a in s)r[a]===void 0&&n.removeValue(a);return r}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(r,s,a){return{}}constructor({parent:r,props:s,presenceContext:a,reducedMotionConfig:l,blockInitialAnimation:d,visualState:u},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=time.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,frame.render(this.render,!1,!0))};const{latestValues:p,renderState:h,onUpdate:y}=u;this.onUpdate=y,this.latestValues=p,this.baseTarget={...p},this.initialValues=s.initial?{...p}:{},this.renderState=h,this.parent=r,this.props=s,this.presenceContext=a,this.depth=r?r.depth+1:0,this.reducedMotionConfig=l,this.options=c,this.blockInitialAnimation=!!d,this.isControllingVariants=isControllingVariants(s),this.isVariantNode=isVariantNode(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(r&&r.current);const{willChange:b,...x}=this.scrapeMotionValuesFromProps(s,{},this);for(const T in x){const S=x[T];p[T]!==void 0&&isMotionValue(S)&&S.set(p[T],!1)}}mount(r){this.current=r,visualElementStore.set(r,this),this.projection&&!this.projection.instance&&this.projection.mount(r),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,a)=>this.bindToMotionValue(a,s)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const s=this.features[r];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(r,s){this.valueSubscriptions.has(r)&&this.valueSubscriptions.get(r)();const a=transformProps.has(r),l=s.on("change",c=>{this.latestValues[r]=c,this.props.onUpdate&&frame.preRender(this.notifyUpdate),a&&this.projection&&(this.projection.isTransformDirty=!0)}),d=s.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,r,s)),this.valueSubscriptions.set(r,()=>{l(),d(),u&&u(),s.owner&&s.stop()})}sortNodePosition(r){return!this.current||!this.sortInstanceNodePosition||this.type!==r.type?0:this.sortInstanceNodePosition(this.current,r.current)}updateFeatures(){let r="animation";for(r in featureDefinitions){const s=featureDefinitions[r];if(!s)continue;const{isEnabled:a,Feature:l}=s;if(!this.features[r]&&l&&a(this.props)&&(this.features[r]=new l(this)),this.features[r]){const d=this.features[r];d.isMounted?d.update():(d.mount(),d.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(r){return this.latestValues[r]}setStaticValue(r,s){this.latestValues[r]=s}update(r,s){(r.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=r,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let a=0;a<propEventHandlers.length;a++){const l=propEventHandlers[a];this.propEventSubscriptions[l]&&(this.propEventSubscriptions[l](),delete this.propEventSubscriptions[l]);const d="on"+l,u=r[d];u&&(this.propEventSubscriptions[l]=this.on(l,u))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(r,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(r){return this.props.variants?this.props.variants[r]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(r){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(r),()=>s.variantChildren.delete(r)}addValue(r,s){const a=this.values.get(r);s!==a&&(a&&this.removeValue(r),this.bindToMotionValue(r,s),this.values.set(r,s),this.latestValues[r]=s.get())}removeValue(r){this.values.delete(r);const s=this.valueSubscriptions.get(r);s&&(s(),this.valueSubscriptions.delete(r)),delete this.latestValues[r],this.removeValueFromRenderState(r,this.renderState)}hasValue(r){return this.values.has(r)}getValue(r,s){if(this.props.values&&this.props.values[r])return this.props.values[r];let a=this.values.get(r);return a===void 0&&s!==void 0&&(a=motionValue(s===null?void 0:s,{owner:this}),this.addValue(r,a)),a}readValue(r,s){var a;let l=this.latestValues[r]!==void 0||!this.current?this.latestValues[r]:(a=this.getBaseTargetFromProps(this.props,r))!==null&&a!==void 0?a:this.readValueFromInstance(this.current,r,this.options);return l!=null&&(typeof l=="string"&&(isNumericalString(l)||isZeroValueString(l))?l=parseFloat(l):!findValueType(l)&&complex.test(s)&&(l=getAnimatableNone(r,s)),this.setBaseTarget(r,isMotionValue(l)?l.get():l)),isMotionValue(l)?l.get():l}setBaseTarget(r,s){this.baseTarget[r]=s}getBaseTarget(r){var s;const{initial:a}=this.props;let l;if(typeof a=="string"||typeof a=="object"){const u=resolveVariantFromProps(this.props,a,(s=this.presenceContext)===null||s===void 0?void 0:s.custom);u&&(l=u[r])}if(a&&l!==void 0)return l;const d=this.getBaseTargetFromProps(this.props,r);return d!==void 0&&!isMotionValue(d)?d:this.initialValues[r]!==void 0&&l===void 0?void 0:this.baseTarget[r]}on(r,s){return this.events[r]||(this.events[r]=new SubscriptionManager),this.events[r].add(s)}notify(r,...s){this.events[r]&&this.events[r].notify(...s)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(r,s){return r.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(r,s){return r.style?r.style[s]:void 0}removeValueFromRenderState(r,{vars:s,style:a}){delete s[r],delete a[r]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:r}=this.props;isMotionValue(r)&&(this.childSubscription=r.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function getComputedStyle(n){return window.getComputedStyle(n)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(r,s){if(transformProps.has(s)){const a=getDefaultValueType(s);return a&&a.default||0}else{const a=getComputedStyle(r),l=(isCSSVariableName(s)?a.getPropertyValue(s):a[s])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(r,{transformPagePoint:s}){return measureViewportBox(r,s)}build(r,s,a){buildHTMLStyles(r,s,a.transformTemplate)}scrapeMotionValuesFromProps(r,s,a){return scrapeMotionValuesFromProps$1(r,s,a)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(r,s){return r[s]}readValueFromInstance(r,s){if(transformProps.has(s)){const a=getDefaultValueType(s);return a&&a.default||0}return s=camelCaseAttributes.has(s)?s:camelToDash(s),r.getAttribute(s)}scrapeMotionValuesFromProps(r,s,a){return scrapeMotionValuesFromProps(r,s,a)}build(r,s,a){buildSVGAttrs(r,s,this.isSVGTag,a.transformTemplate)}renderInstance(r,s,a,l){renderSVG(r,s,a,l)}mount(r){this.isSVGTag=isSVGTag(r.tagName),super.mount(r)}}const createDomVisualElement=(n,r)=>isSVGComponent(n)?new SVGVisualElement(r):new HTMLVisualElement(r,{allowProjection:n!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(...n)=>n.filter((r,s,a)=>!!r&&r.trim()!==""&&a.indexOf(r)===s).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:l="",children:d,iconNode:u,...c},p)=>reactExports.createElement("svg",{ref:p,...defaultAttributes,width:r,height:r,stroke:n,strokeWidth:a?Number(s)*24/Number(r):s,className:mergeClasses("lucide",l),...c},[...u.map(([h,y])=>reactExports.createElement(h,y)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(n,r)=>{const s=reactExports.forwardRef(({className:a,...l},d)=>reactExports.createElement(Icon,{ref:d,iconNode:r,className:mergeClasses(`lucide-${toKebabCase(n)}`,a),...l}));return s.displayName=`${n}`,s};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EllipsisVertical=createLucideIcon("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FolderOpen=createLucideIcon("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Heart=createLucideIcon("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const House=createLucideIcon("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Library=createLucideIcon("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ListMusic=createLucideIcon("ListMusic",[["path",{d:"M21 15V6",key:"h1cx4g"}],["path",{d:"M18.5 18a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",key:"8saifv"}],["path",{d:"M12 12H3",key:"18klou"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M12 18H3",key:"11ftsu"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LoaderCircle=createLucideIcon("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LogIn=createLucideIcon("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LogOut=createLucideIcon("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MicVocal=createLucideIcon("MicVocal",[["path",{d:"m11 7.601-5.994 8.19a1 1 0 0 0 .1 1.298l.817.818a1 1 0 0 0 1.314.087L15.09 12",key:"80a601"}],["path",{d:"M16.5 21.174C15.5 20.5 14.372 20 13 20c-2.058 0-3.928 2.356-6 2-2.072-.356-2.775-3.369-1.5-4.5",key:"j0ngtp"}],["circle",{cx:"16",cy:"7",r:"5",key:"d08jfb"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Music=createLucideIcon("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pause=createLucideIcon("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Play=createLucideIcon("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Radio=createLucideIcon("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RefreshCw=createLucideIcon("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Repeat1=createLucideIcon("Repeat1",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Repeat=createLucideIcon("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RotateCcw=createLucideIcon("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Search=createLucideIcon("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Settings=createLucideIcon("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Shuffle=createLucideIcon("Shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SkipBack=createLucideIcon("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SkipForward=createLucideIcon("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SlidersVertical=createLucideIcon("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sparkles=createLucideIcon("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Volume2=createLucideIcon("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VolumeX=createLucideIcon("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),createStoreImpl=n=>{let r;const s=new Set,a=(h,y)=>{const b=typeof h=="function"?h(r):h;if(!Object.is(b,r)){const x=r;r=y??(typeof b!="object"||b===null)?b:Object.assign({},r,b),s.forEach(T=>T(r,x))}},l=()=>r,c={setState:a,getState:l,getInitialState:()=>p,subscribe:h=>(s.add(h),()=>s.delete(h))},p=r=n(a,l,c);return c},createStore=(n=>n?createStoreImpl(n):createStoreImpl),identity=n=>n;function useStore(n,r=identity){const s=React.useSyncExternalStore(n.subscribe,React.useCallback(()=>r(n.getState()),[n,r]),React.useCallback(()=>r(n.getInitialState()),[n,r]));return React.useDebugValue(s),s}const createImpl=n=>{const r=createStore(n),s=a=>useStore(r,a);return Object.assign(s,r),s},create=(n=>createImpl);function createJSONStorage(n,r){let s;try{s=n()}catch{return}return{getItem:l=>{var d;const u=p=>p===null?null:JSON.parse(p,void 0),c=(d=s.getItem(l))!=null?d:null;return c instanceof Promise?c.then(u):u(c)},setItem:(l,d)=>s.setItem(l,JSON.stringify(d,void 0)),removeItem:l=>s.removeItem(l)}}const toThenable=n=>r=>{try{const s=n(r);return s instanceof Promise?s:{then(a){return toThenable(a)(s)},catch(a){return this}}}catch(s){return{then(a){return this},catch(a){return toThenable(a)(s)}}}},persistImpl=(n,r)=>(s,a,l)=>{let d={storage:createJSONStorage(()=>window.localStorage),partialize:C=>C,version:0,merge:(C,k)=>({...k,...C}),...r},u=!1,c=0;const p=new Set,h=new Set;let y=d.storage;if(!y)return n((...C)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),s(...C)},a,l);const b=()=>{const C=d.partialize({...a()});return y.setItem(d.name,{state:C,version:d.version})},x=l.setState;l.setState=(C,k)=>(x(C,k),b());const T=n((...C)=>(s(...C),b()),a,l);l.getInitialState=()=>T;let S;const _=()=>{var C,k;if(!y)return;const I=++c;u=!1,p.forEach(F=>{var j;return F((j=a())!=null?j:T)});const N=((k=d.onRehydrateStorage)==null?void 0:k.call(d,(C=a())!=null?C:T))||void 0;return toThenable(y.getItem.bind(y))(d.name).then(F=>{if(F)if(typeof F.version=="number"&&F.version!==d.version){if(d.migrate){const j=d.migrate(F.state,F.version);return j instanceof Promise?j.then(V=>[!0,V]):[!0,j]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,F.state];return[!1,void 0]}).then(F=>{var j;if(I!==c)return;const[V,M]=F;if(S=d.merge(M,(j=a())!=null?j:T),s(S,!0),V)return b()}).then(()=>{I===c&&(N==null||N(S,void 0),S=a(),u=!0,h.forEach(F=>F(S)))}).catch(F=>{I===c&&(N==null||N(void 0,F))})};return l.persist={setOptions:C=>{d={...d,...C},C.storage&&(y=C.storage)},clearStorage:()=>{y==null||y.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>_(),hasHydrated:()=>u,onHydrate:C=>(p.add(C),()=>{p.delete(C)}),onFinishHydration:C=>(h.add(C),()=>{h.delete(C)})},d.skipHydration||_(),S||T},persist=persistImpl,EQ_FREQUENCIES=[32,64,125,250,500,1e3,2e3,4e3,8e3,16e3],EQ_PRESETS=[{name:"Flat",bands:[0,0,0,0,0,0,0,0,0,0]},{name:"Bass Boost",bands:[6,5,4,2,0,0,0,0,0,0]},{name:"Treble Boost",bands:[0,0,0,0,0,1,2,4,5,6]},{name:"Vocal",bands:[-2,-1,0,2,4,4,3,1,0,-1]},{name:"Electronic",bands:[4,3,0,-2,-1,1,0,3,4,4]},{name:"Rock",bands:[4,3,1,0,-1,0,1,3,4,4]},{name:"Pop",bands:[-1,1,3,4,3,1,0,1,2,2]},{name:"Jazz",bands:[2,1,0,1,2,3,3,2,2,2]},{name:"Classical",bands:[3,2,1,1,0,0,0,1,2,3]},{name:"Hip Hop",bands:[5,4,2,1,0,0,1,0,2,2]}],ya=class ya{constructor(){En(this,"audioContext",null);En(this,"sourceNode",null);En(this,"audioElement",null);En(this,"eqNodes",[]);En(this,"analyserNode",null);En(this,"gainNode",null);En(this,"currentTrack",null);En(this,"isInitialized",!1);En(this,"eventListeners",new Map)}static getInstance(){return ya.instance||(ya.instance=new ya),ya.instance}async initialize(){if(!this.isInitialized)try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.audioElement=new Audio,this.audioElement.crossOrigin="anonymous",this.audioElement.preload="auto",this.sourceNode=this.audioContext.createMediaElementSource(this.audioElement),this.gainNode=this.audioContext.createGain(),this.analyserNode=this.audioContext.createAnalyser(),this.analyserNode.fftSize=256,this.analyserNode.smoothingTimeConstant=.8,this.eqNodes=EQ_FREQUENCIES.map((s,a)=>{const l=this.audioContext.createBiquadFilter();return a===0?l.type="lowshelf":a===EQ_FREQUENCIES.length-1?l.type="highshelf":(l.type="peaking",l.Q.value=1.4),l.frequency.value=s,l.gain.value=0,l});let r=this.sourceNode;for(const s of this.eqNodes)r.connect(s),r=s;r.connect(this.analyserNode),this.analyserNode.connect(this.gainNode),this.gainNode.connect(this.audioContext.destination),this.setupEventListeners(),this.isInitialized=!0,console.log("[AudioEngine] Initialized successfully")}catch(r){throw console.error("[AudioEngine] Failed to initialize:",r),this.emit("error",r),r}}setupEventListeners(){this.audioElement&&(this.audioElement.addEventListener("timeupdate",()=>{this.emit("timeupdate",{currentTime:this.audioElement.currentTime,duration:this.audioElement.duration||0})}),this.audioElement.addEventListener("ended",()=>{this.emit("ended")}),this.audioElement.addEventListener("loadstart",()=>{this.emit("loading")}),this.audioElement.addEventListener("canplay",()=>{this.emit("loaded")}),this.audioElement.addEventListener("error",r=>{this.emit("error",r)}))}async loadFile(r){await this.ensureInitialized();const s=URL.createObjectURL(r);await this.loadSource(s)}async loadStream(r){await this.ensureInitialized(),await this.loadSource(r)}async loadSource(r){if(!this.audioElement)throw new Error("Audio engine not initialized");this.audioElement.src.startsWith("blob:")&&URL.revokeObjectURL(this.audioElement.src),this.audioElement.src=r,await this.audioElement.load()}async ensureInitialized(){var r;this.isInitialized||await this.initialize(),((r=this.audioContext)==null?void 0:r.state)==="suspended"&&await this.audioContext.resume()}async play(){await this.ensureInitialized(),this.audioElement&&(await this.audioElement.play(),this.updateMediaSession())}pause(){var r;(r=this.audioElement)==null||r.pause()}async togglePlayPause(){var r;(r=this.audioElement)!=null&&r.paused?await this.play():this.pause()}seek(r){this.audioElement&&this.audioElement.duration&&(this.audioElement.currentTime=r*this.audioElement.duration)}seekTo(r){this.audioElement&&(this.audioElement.currentTime=Math.max(0,Math.min(r,this.audioElement.duration||0)))}setVolume(r){this.gainNode&&(this.gainNode.gain.value=Math.max(0,Math.min(1,r)))}setEQBand(r,s){if(r>=0&&r<this.eqNodes.length){const a=Math.max(-12,Math.min(12,s));this.eqNodes[r].gain.value=a}}setEQBands(r){r.forEach((s,a)=>{this.setEQBand(a,s)})}applyPreset(r){this.setEQBands(r.bands)}setEQEnabled(r){this.eqNodes.forEach(s=>{r||(s.gain.value=0)})}getFrequencyData(){if(!this.analyserNode)return new Uint8Array(128);const r=new Uint8Array(this.analyserNode.frequencyBinCount);return this.analyserNode.getByteFrequencyData(r),r}getTimeDomainData(){if(!this.analyserNode)return new Uint8Array(128);const r=new Uint8Array(this.analyserNode.frequencyBinCount);return this.analyserNode.getByteTimeDomainData(r),r}getPlaybackInfo(){var r,s,a;return{currentTime:((r=this.audioElement)==null?void 0:r.currentTime)||0,duration:((s=this.audioElement)==null?void 0:s.duration)||0,isPlaying:!((a=this.audioElement)!=null&&a.paused)}}setCurrentTrack(r){this.currentTrack=r,this.updateMediaSession()}updateMediaSession(){!("mediaSession"in navigator)||!this.currentTrack||(navigator.mediaSession.metadata=new MediaMetadata({title:this.currentTrack.title,artist:this.currentTrack.artist,album:this.currentTrack.album,artwork:this.currentTrack.coverArt?[{src:this.currentTrack.coverArt,sizes:"512x512",type:"image/png"}]:[]}),navigator.mediaSession.setActionHandler("play",()=>this.play()),navigator.mediaSession.setActionHandler("pause",()=>this.pause()),navigator.mediaSession.setActionHandler("seekbackward",()=>{var r;this.seekTo((((r=this.audioElement)==null?void 0:r.currentTime)||0)-10)}),navigator.mediaSession.setActionHandler("seekforward",()=>{var r;this.seekTo((((r=this.audioElement)==null?void 0:r.currentTime)||0)+10)}))}on(r,s){this.eventListeners.has(r)||this.eventListeners.set(r,new Set),this.eventListeners.get(r).add(s)}off(r,s){var a;(a=this.eventListeners.get(r))==null||a.delete(s)}emit(r,s){var a;(a=this.eventListeners.get(r))==null||a.forEach(l=>l(s))}destroy(){var r,s,a;(r=this.audioElement)==null||r.pause(),(s=this.audioElement)!=null&&s.src.startsWith("blob:")&&URL.revokeObjectURL(this.audioElement.src),(a=this.audioContext)==null||a.close(),this.audioElement=null,this.audioContext=null,this.sourceNode=null,this.eqNodes=[],this.analyserNode=null,this.gainNode=null,this.isInitialized=!1,this.eventListeners.clear()}};En(ya,"instance");let AudioEngine=ya;const audioEngine=AudioEngine.getInstance(),usePlayerStore=create()(persist((n,r)=>({currentTrack:null,isPlaying:!1,progress:0,duration:0,volume:.8,muted:!1,queue:[],queueIndex:-1,shuffle:!1,repeat:"off",eqEnabled:!0,eqBands:[0,0,0,0,0,0,0,0,0,0],eqPresetName:"Flat",currentView:"home",libraryTab:"local",showNowPlaying:!1,showLyrics:!1,setTrack:async s=>{if(n({currentTrack:s}),audioEngine.setCurrentTrack(s),s.source==="local"&&s.fileHandle){const a=await s.fileHandle.getFile();await audioEngine.loadFile(a)}else s.streamUrl&&await audioEngine.loadStream(s.streamUrl)},playTrack:async(s,a)=>{const l=r();if(a){const d=a.findIndex(u=>u.id===s.id);n({queue:a,queueIndex:d>=0?d:0})}await l.setTrack(s),await audioEngine.play(),n({isPlaying:!0})},togglePlayPause:async()=>{r().isPlaying?(audioEngine.pause(),n({isPlaying:!1})):(await audioEngine.play(),n({isPlaying:!0}))},play:async()=>{await audioEngine.play(),n({isPlaying:!0})},pause:()=>{audioEngine.pause(),n({isPlaying:!1})},next:async()=>{const s=r(),{queue:a,queueIndex:l,repeat:d,shuffle:u}=s;if(a.length===0)return;let c;if(u)c=Math.floor(Math.random()*a.length);else if(c=l+1,c>=a.length)if(d==="all")c=0;else return;const p=a[c];p&&(n({queueIndex:c}),await s.playTrack(p))},previous:async()=>{const s=r(),{queue:a,queueIndex:l,progress:d}=s;if(d>3){audioEngine.seekTo(0);return}if(a.length===0)return;const u=l>0?l-1:a.length-1,c=a[u];c&&(n({queueIndex:u}),await s.playTrack(c))},seek:s=>{audioEngine.seek(s)},setVolume:s=>{audioEngine.setVolume(s),n({volume:s,muted:!1})},toggleMute:()=>{const s=r();s.muted?(audioEngine.setVolume(s.volume),n({muted:!1})):(audioEngine.setVolume(0),n({muted:!0}))},toggleShuffle:()=>{n(s=>({shuffle:!s.shuffle}))},cycleRepeat:()=>{n(s=>{const a=["off","all","one"],d=(a.indexOf(s.repeat)+1)%a.length;return{repeat:a[d]}})},setEQBand:(s,a)=>{audioEngine.setEQBand(s,a),n(l=>{const d=[...l.eqBands];return d[s]=a,{eqBands:d,eqPresetName:"Custom"}})},setEQBands:s=>{audioEngine.setEQBands(s),n({eqBands:s})},applyEQPreset:s=>{const a=EQ_PRESETS.find(l=>l.name===s);a&&(audioEngine.applyPreset(a),n({eqBands:[...a.bands],eqPresetName:s}))},toggleEQ:()=>{const s=!r().eqEnabled;audioEngine.setEQEnabled(s),n({eqEnabled:s}),s&&audioEngine.setEQBands(r().eqBands)},addToQueue:s=>{n(a=>({queue:[...a.queue,s]}))},removeFromQueue:s=>{n(a=>{const l=a.queue.filter((u,c)=>c!==s);let d=a.queueIndex;return s<a.queueIndex?d--:s===a.queueIndex&&d>=l.length&&(d=l.length-1),{queue:l,queueIndex:d}})},clearQueue:()=>{n({queue:[],queueIndex:-1})},reorderQueue:(s,a)=>{n(l=>{const d=[...l.queue],[u]=d.splice(s,1);d.splice(a,0,u);let c=l.queueIndex;return l.queueIndex===s?c=a:s<l.queueIndex&&a>=l.queueIndex?c--:s>l.queueIndex&&a<=l.queueIndex&&c++,{queue:d,queueIndex:c}})},setView:s=>{n({currentView:s})},setLibraryTab:s=>{n({libraryTab:s})},toggleNowPlaying:()=>{n(s=>({showNowPlaying:!s.showNowPlaying}))},toggleLyrics:()=>{n(s=>({showLyrics:!s.showLyrics}))},updateProgress:(s,a)=>{n({progress:s,duration:a})},setIsPlaying:s=>{n({isPlaying:s})}}),{name:"streamix-player",partialize:n=>({volume:n.volume,shuffle:n.shuffle,repeat:n.repeat,eqEnabled:n.eqEnabled,eqBands:n.eqBands,eqPresetName:n.eqPresetName})}));audioEngine.on("timeupdate",n=>{const{currentTime:r,duration:s}=n;usePlayerStore.getState().updateProgress(r,s)});audioEngine.on("ended",()=>{const n=usePlayerStore.getState();n.repeat==="one"?(audioEngine.seekTo(0),audioEngine.play()):n.next()});function Visualizer({mini:n=!1}){const r=reactExports.useRef(null),s=reactExports.useRef(void 0),{isPlaying:a}=usePlayerStore(),l=reactExports.useCallback(()=>{const d=r.current;if(!d)return;const u=d.getContext("2d");if(!u)return;const c=audioEngine.getFrequencyData(),{width:p,height:h}=d;if(u.clearRect(0,0,p,h),n){const b=p/4-2,x=2;for(let T=0;T<4;T++){const S=Math.floor(T/4*c.length*.5),_=c[S]/255,C=Math.max(4,_*h*.8),k=T*(b+x),I=h-C,N=u.createLinearGradient(k,I,k,h);N.addColorStop(0,"#1db954"),N.addColorStop(1,"#1ed760"),u.fillStyle=N,u.beginPath(),u.roundRect(k,I,b,C,2),u.fill()}}else{const b=p/64,x=1;for(let T=0;T<64;T++){const S=Math.floor(T/64*c.length),_=c[S]/255,C=Math.max(2,_*h*.9),k=T*b,I=h-C,N=120+T/64*60,F=70+_*30,j=40+_*20,V=u.createLinearGradient(k,I,k,h);V.addColorStop(0,`hsl(${N}, ${F}%, ${j}%)`),V.addColorStop(1,`hsl(${N}, ${F}%, ${j-15}%)`),u.fillStyle=V,u.beginPath(),u.roundRect(k+x/2,I,b-x,C,2),u.fill()}}s.current=requestAnimationFrame(l)},[n]);return reactExports.useEffect(()=>{const d=r.current;if(!d)return;const u=()=>{const c=d.getBoundingClientRect(),p=window.devicePixelRatio||1;d.width=c.width*p,d.height=c.height*p;const h=d.getContext("2d");h&&h.scale(p,p)};return u(),window.addEventListener("resize",u),()=>{window.removeEventListener("resize",u)}},[]),reactExports.useEffect(()=>(a?s.current=requestAnimationFrame(l):s.current&&cancelAnimationFrame(s.current),()=>{s.current&&cancelAnimationFrame(s.current)}),[a,l]),jsxRuntimeExports.jsx("canvas",{ref:r,className:n?"w-full h-full":"w-full h-32",style:{display:"block"}})}function formatTime$1(n){if(!n||!isFinite(n))return"0:00";const r=Math.floor(n/60),s=Math.floor(n%60);return`${r}:${s.toString().padStart(2,"0")}`}function PlayerBar(){const{currentTrack:n,isPlaying:r,progress:s,duration:a,volume:l,muted:d,togglePlayPause:u,next:c,previous:p,seek:h,setVolume:y,toggleMute:b,toggleNowPlaying:x}=usePlayerStore();if(!n)return null;const T=a>0?s/a*100:0;return jsxRuntimeExports.jsx(motion.div,{initial:{y:100},animate:{y:0},className:"fixed bottom-16 md:bottom-0 left-0 right-0 z-30",children:jsxRuntimeExports.jsxs("div",{className:"glass border-t border-white/5",children:[jsxRuntimeExports.jsxs("div",{className:"relative h-1 bg-white/10 cursor-pointer group",onClick:S=>{const _=S.currentTarget.getBoundingClientRect(),C=(S.clientX-_.left)/_.width;h(C)},children:[jsxRuntimeExports.jsx(motion.div,{className:"absolute h-full bg-primary",style:{width:`${T}%`}}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity",children:jsxRuntimeExports.jsx("div",{className:"absolute h-3 w-3 bg-primary rounded-full -top-1 shadow-glow",style:{left:`${T}%`,transform:"translateX(-50%)"}})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[jsxRuntimeExports.jsxs("button",{onClick:x,className:"flex items-center gap-3 flex-1 min-w-0 text-left",children:[jsxRuntimeExports.jsxs("div",{className:"relative w-12 h-12 rounded-lg overflow-hidden bg-surface-container flex-shrink-0",children:[n.coverArt?jsxRuntimeExports.jsx("img",{src:n.coverArt,alt:n.album,className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center",children:jsxRuntimeExports.jsx(Visualizer,{mini:!0})}),r&&n.coverArt&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:jsxRuntimeExports.jsx(Visualizer,{mini:!0})})]}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"font-medium truncate",children:n.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-secondary truncate",children:n.artist})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:p,className:"p-2 text-secondary hover:text-white transition-colors",children:jsxRuntimeExports.jsx(SkipBack,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:u,className:"p-3 bg-primary rounded-full hover:bg-primary-dim transition-colors glow-primary",children:r?jsxRuntimeExports.jsx(Pause,{size:20,className:"text-black"}):jsxRuntimeExports.jsx(Play,{size:20,className:"text-black ml-0.5"})}),jsxRuntimeExports.jsx("button",{onClick:c,className:"p-2 text-secondary hover:text-white transition-colors",children:jsxRuntimeExports.jsx(SkipForward,{size:20})})]}),jsxRuntimeExports.jsxs("div",{className:"hidden md:flex items-center gap-4 flex-1 justify-end",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm text-secondary min-w-[80px] text-right",children:[formatTime$1(s)," / ",formatTime$1(a)]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:b,className:"p-2 text-secondary hover:text-white transition-colors",children:d||l===0?jsxRuntimeExports.jsx(VolumeX,{size:18}):jsxRuntimeExports.jsx(Volume2,{size:18})}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:d?0:l,onChange:S=>y(parseFloat(S.target.value)),className:"w-24"})]})]})]})]})})}var dexie_min$1={exports:{}},dexie_min=dexie_min$1.exports,hasRequiredDexie_min;function requireDexie_min(){return hasRequiredDexie_min||(hasRequiredDexie_min=1,(function(n,r){((s,a)=>{n.exports=a()})(dexie_min,function(){var s=function(f,v){return(s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(E,A){E.__proto__=A}:function(E,A){for(var B in A)Object.prototype.hasOwnProperty.call(A,B)&&(E[B]=A[B])}))(f,v)},a=function(){return(a=Object.assign||function(f){for(var v,E=1,A=arguments.length;E<A;E++)for(var B in v=arguments[E])Object.prototype.hasOwnProperty.call(v,B)&&(f[B]=v[B]);return f}).apply(this,arguments)};function l(f,v,E){for(var A,B=0,P=v.length;B<P;B++)!A&&B in v||((A=A||Array.prototype.slice.call(v,0,B))[B]=v[B]);return f.concat(A||Array.prototype.slice.call(v))}var d=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal,u=Object.keys,c=Array.isArray;function p(f,v){return typeof v=="object"&&u(v).forEach(function(E){f[E]=v[E]}),f}typeof Promise>"u"||d.Promise||(d.Promise=Promise);var h=Object.getPrototypeOf,y={}.hasOwnProperty;function b(f,v){return y.call(f,v)}function x(f,v){typeof v=="function"&&(v=v(h(f))),(typeof Reflect>"u"?u:Reflect.ownKeys)(v).forEach(function(E){S(f,E,v[E])})}var T=Object.defineProperty;function S(f,v,E,A){T(f,v,p(E&&b(E,"get")&&typeof E.get=="function"?{get:E.get,set:E.set,configurable:!0}:{value:E,configurable:!0,writable:!0},A))}function _(f){return{from:function(v){return f.prototype=Object.create(v.prototype),S(f.prototype,"constructor",f),{extend:x.bind(null,f.prototype)}}}}var C=Object.getOwnPropertyDescriptor,k=[].slice;function I(f,v,E){return k.call(f,v,E)}function N(f,v){return v(f)}function F(f){if(!f)throw new Error("Assertion Failed")}function j(f){d.setImmediate?setImmediate(f):setTimeout(f,0)}function V(f,v){if(typeof v=="string"&&b(f,v))return f[v];if(!v)return f;if(typeof v!="string"){for(var E=[],A=0,B=v.length;A<B;++A){var P=V(f,v[A]);E.push(P)}return E}var U,H=v.indexOf(".");return H===-1||(U=f[v.substr(0,H)])==null?void 0:V(U,v.substr(H+1))}function M(f,v,E){if(f&&v!==void 0&&!("isFrozen"in Object&&Object.isFrozen(f)))if(typeof v!="string"&&"length"in v){F(typeof E!="string"&&"length"in E);for(var A=0,B=v.length;A<B;++A)M(f,v[A],E[A])}else{var P,U,H=v.indexOf(".");H!==-1?(P=v.substr(0,H),(H=v.substr(H+1))===""?E===void 0?c(f)&&!isNaN(parseInt(P))?f.splice(P,1):delete f[P]:f[P]=E:M(U=(U=f[P])&&b(f,P)?U:f[P]={},H,E)):E===void 0?c(f)&&!isNaN(parseInt(v))?f.splice(v,1):delete f[v]:f[v]=E}}function q(f){var v,E={};for(v in f)b(f,v)&&(E[v]=f[v]);return E}var Se=[].concat;function Q(f){return Se.apply([],f)}var Z="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Q([8,16,32,64].map(function(f){return["Int","Uint","Float"].map(function(v){return v+f+"Array"})}))).filter(function(f){return d[f]}),ee=new Set(Z.map(function(f){return d[f]})),we=null;function he(f){return we=new WeakMap,f=(function v(E){if(!E||typeof E!="object")return E;var A=we.get(E);if(A)return A;if(c(E)){A=[],we.set(E,A);for(var B=0,P=E.length;B<P;++B)A.push(v(E[B]))}else if(ee.has(E.constructor))A=E;else{var U,H=h(E);for(U in A=H===Object.prototype?{}:Object.create(H),we.set(E,A),E)b(E,U)&&(A[U]=v(E[U]))}return A})(f),we=null,f}var He={}.toString;function Je(f){return He.call(f).slice(8,-1)}var de=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Be=typeof de=="symbol"?function(f){var v;return f!=null&&(v=f[de])&&v.apply(f)}:function(){return null};function me(f,v){v=f.indexOf(v),0<=v&&f.splice(v,1)}var Ue={};function W(f){var v,E,A,B;if(arguments.length===1){if(c(f))return f.slice();if(this===Ue&&typeof f=="string")return[f];if(B=Be(f))for(E=[];!(A=B.next()).done;)E.push(A.value);else{if(f==null)return[f];if(typeof(v=f.length)!="number")return[f];for(E=new Array(v);v--;)E[v]=f[v]}}else for(v=arguments.length,E=new Array(v);v--;)E[v]=arguments[v];return E}var z=typeof Symbol<"u"?function(f){return f[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Z=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],kt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Z),ce={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ie(f,v){this.name=f,this.message=v}function Fe(f,v){return f+". Errors: "+Object.keys(v).map(function(E){return v[E].toString()}).filter(function(E,A,B){return B.indexOf(E)===A}).join(`
`)}function at(f,v,E,A){this.failures=v,this.failedKeys=A,this.successCount=E,this.message=Fe(f,v)}function nt(f,v){this.name="BulkError",this.failures=Object.keys(v).map(function(E){return v[E]}),this.failuresByPos=v,this.message=Fe(f,this.failures)}_(Ie).from(Error).extend({toString:function(){return this.name+": "+this.message}}),_(at).from(Ie),_(nt).from(Ie);var Ce=kt.reduce(function(f,v){return f[v]=v+"Error",f},{}),ke=Ie,De=kt.reduce(function(f,v){var E=v+"Error";function A(B,P){this.name=E,B?typeof B=="string"?(this.message="".concat(B).concat(P?`
 `+P:""),this.inner=P||null):typeof B=="object"&&(this.message="".concat(B.name," ").concat(B.message),this.inner=B):(this.message=ce[v]||E,this.inner=null)}return _(A).from(ke),f[v]=A,f},{}),mt=(De.Syntax=SyntaxError,De.Type=TypeError,De.Range=RangeError,Z.reduce(function(f,v){return f[v+"Error"]=De[v],f},{}));Z=kt.reduce(function(f,v){return["Syntax","Type","Range"].indexOf(v)===-1&&(f[v+"Error"]=De[v]),f},{});function tt(){}function oe(f){return f}function pe(f,v){return f==null||f===oe?v:function(E){return v(f(E))}}function Re(f,v){return function(){f.apply(this,arguments),v.apply(this,arguments)}}function Ze(f,v){return f===tt?v:function(){var E=f.apply(this,arguments),A=(E!==void 0&&(arguments[0]=E),this.onsuccess),B=this.onerror,P=(this.onsuccess=null,this.onerror=null,v.apply(this,arguments));return A&&(this.onsuccess=this.onsuccess?Re(A,this.onsuccess):A),B&&(this.onerror=this.onerror?Re(B,this.onerror):B),P!==void 0?P:E}}function Qe(f,v){return f===tt?v:function(){f.apply(this,arguments);var E=this.onsuccess,A=this.onerror;this.onsuccess=this.onerror=null,v.apply(this,arguments),E&&(this.onsuccess=this.onsuccess?Re(E,this.onsuccess):E),A&&(this.onerror=this.onerror?Re(A,this.onerror):A)}}function Ye(f,v){return f===tt?v:function(B){var A=f.apply(this,arguments),B=(p(B,A),this.onsuccess),P=this.onerror,U=(this.onsuccess=null,this.onerror=null,v.apply(this,arguments));return B&&(this.onsuccess=this.onsuccess?Re(B,this.onsuccess):B),P&&(this.onerror=this.onerror?Re(P,this.onerror):P),A===void 0?U===void 0?void 0:U:p(A,U)}}function fe(f,v){return f===tt?v:function(){return v.apply(this,arguments)!==!1&&f.apply(this,arguments)}}function Le(f,v){return f===tt?v:function(){var E=f.apply(this,arguments);if(E&&typeof E.then=="function"){for(var A=this,B=arguments.length,P=new Array(B);B--;)P[B]=arguments[B];return E.then(function(){return v.apply(A,P)})}return v.apply(this,arguments)}}Z.ModifyError=at,Z.DexieError=Ie,Z.BulkError=nt;var $e=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ze(f){$e=f}var ft={},Dt=100,Rt=typeof Promise>"u"?[]:(kt=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[Rt=crypto.subtle.digest("SHA-512",new Uint8Array([0])),h(Rt),kt]:[kt,h(kt),kt]),kt=Rt[0],Xr=Rt[1],Xr=Xr&&Xr.then,O=kt&&kt.constructor,w=!!Rt[2],R=function(f,v){Lt.push([f,v]),ue&&(queueMicrotask(G),ue=!1)},K=!0,ue=!0,xe=[],Pe=[],pt=oe,St={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:tt,pgp:!1,env:{},finalize:tt},Ke=St,Lt=[],_t=0,Br=[];function st(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var v=this._PSD=Ke;if(typeof f!="function"){if(f!==ft)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Vn(this,this._value)}else this._state=null,this._value=null,++v.ref,(function E(A,B){try{B(function(P){if(A._state===null){if(P===A)throw new TypeError("A promise cannot be resolved with itself.");var U=A._lib&&Y();P&&typeof P.then=="function"?E(A,function(H,te){P instanceof st?P._then(H,te):P.then(H,te)}):(A._state=!0,A._value=P,Ir(A)),U&&We()}},Vn.bind(null,A))}catch(P){Vn(A,P)}})(this,f)}var hr={get:function(){var f=Ke,v=Pr;function E(A,B){var P=this,U=!f.global&&(f!==Ke||v!==Pr),H=U&&!gn(),te=new st(function(ye,ne){Hn(P,new mr(ba(A,f,U,H),ba(B,f,U,H),ye,ne,f))});return this._consoleTask&&(te._consoleTask=this._consoleTask),te}return E.prototype=ft,E},set:function(f){S(this,"then",f&&f.prototype===ft?hr:{get:function(){return f},set:hr.set})}};function mr(f,v,E,A,B){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof v=="function"?v:null,this.resolve=E,this.reject=A,this.psd=B}function Vn(f,v){var E,A;Pe.push(v),f._state===null&&(E=f._lib&&Y(),v=pt(v),f._state=!1,f._value=v,A=f,xe.some(function(B){return B._value===A._value})||xe.push(A),Ir(f),E)&&We()}function Ir(f){var v=f._listeners;f._listeners=[];for(var E=0,A=v.length;E<A;++E)Hn(f,v[E]);var B=f._PSD;--B.ref||B.finalize(),_t===0&&(++_t,R(function(){--_t==0&&et()},[]))}function Hn(f,v){if(f._state===null)f._listeners.push(v);else{var E=f._state?v.onFulfilled:v.onRejected;if(E===null)return(f._state?v.resolve:v.reject)(f._value);++v.psd.ref,++_t,R(va,[E,f,v])}}function va(f,v,E){try{var A,B=v._value;!v._state&&Pe.length&&(Pe=[]),A=$e&&v._consoleTask?v._consoleTask.run(function(){return f(B)}):f(B),v._state||Pe.indexOf(B)!==-1||(P=>{for(var U=xe.length;U;)if(xe[--U]._value===P._value)return xe.splice(U,1)})(v),E.resolve(A)}catch(P){E.reject(P)}finally{--_t==0&&et(),--E.psd.ref||E.psd.finalize()}}function G(){Xn(St,function(){Y()&&We()})}function Y(){var f=K;return ue=K=!1,f}function We(){var f,v,E;do for(;0<Lt.length;)for(f=Lt,Lt=[],E=f.length,v=0;v<E;++v){var A=f[v];A[0].apply(null,A[1])}while(0<Lt.length);ue=K=!0}function et(){for(var f=xe,v=(xe=[],f.forEach(function(A){A._PSD.onunhandled.call(null,A._value,A)}),Br.slice(0)),E=v.length;E;)v[--E]()}function ct(f){return new st(ft,!1,f)}function xt(f,v){var E=Ke;return function(){var A=Y(),B=Ke;try{return vn(E,!0),f.apply(this,arguments)}catch(P){v&&v(P)}finally{vn(B,!1),A&&We()}}}x(st.prototype,{then:hr,_then:function(f,v){Hn(this,new mr(null,null,f,v,Ke))},catch:function(f){var v,E;return arguments.length===1?this.then(null,f):(v=f,E=arguments[1],typeof v=="function"?this.then(null,function(A){return(A instanceof v?E:ct)(A)}):this.then(null,function(A){return(A&&A.name===v?E:ct)(A)}))},finally:function(f){return this.then(function(v){return st.resolve(f()).then(function(){return v})},function(v){return st.resolve(f()).then(function(){return ct(v)})})},timeout:function(f,v){var E=this;return f<1/0?new st(function(A,B){var P=setTimeout(function(){return B(new De.Timeout(v))},f);E.then(A,B).finally(clearTimeout.bind(null,P))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&S(st.prototype,Symbol.toStringTag,"Dexie.Promise"),St.env=Pn(),x(st,{all:function(){var f=W.apply(null,arguments).map(tr);return new st(function(v,E){f.length===0&&v([]);var A=f.length;f.forEach(function(B,P){return st.resolve(B).then(function(U){f[P]=U,--A||v(f)},E)})})},resolve:function(f){return f instanceof st?f:f&&typeof f.then=="function"?new st(function(v,E){f.then(v,E)}):new st(ft,!0,f)},reject:ct,race:function(){var f=W.apply(null,arguments).map(tr);return new st(function(v,E){f.map(function(A){return st.resolve(A).then(v,E)})})},PSD:{get:function(){return Ke},set:function(f){return Ke=f}},totalEchoes:{get:function(){return Pr}},newPSD:Ht,usePSD:Xn,scheduler:{get:function(){return R},set:function(f){R=f}},rejectionMapper:{get:function(){return pt},set:function(f){pt=f}},follow:function(f,v){return new st(function(E,A){return Ht(function(B,P){var U=Ke;U.unhandleds=[],U.onunhandled=P,U.finalize=Re(function(){var H,te=this;H=function(){te.unhandleds.length===0?B():P(te.unhandleds[0])},Br.push(function ye(){H(),Br.splice(Br.indexOf(ye),1)}),++_t,R(function(){--_t==0&&et()},[])},U.finalize),f()},v,E,A)})}}),O&&(O.allSettled&&S(st,"allSettled",function(){var f=W.apply(null,arguments).map(tr);return new st(function(v){f.length===0&&v([]);var E=f.length,A=new Array(E);f.forEach(function(B,P){return st.resolve(B).then(function(U){return A[P]={status:"fulfilled",value:U}},function(U){return A[P]={status:"rejected",reason:U}}).then(function(){return--E||v(A)})})})}),O.any&&typeof AggregateError<"u"&&S(st,"any",function(){var f=W.apply(null,arguments).map(tr);return new st(function(v,E){f.length===0&&E(new AggregateError([]));var A=f.length,B=new Array(A);f.forEach(function(P,U){return st.resolve(P).then(function(H){return v(H)},function(H){B[U]=H,--A||E(new AggregateError(B))})})})}),O.withResolvers)&&(st.withResolvers=O.withResolvers);var qt={awaits:0,echoes:0,id:0},fi=0,kn=[],xr=0,Pr=0,Gn=0;function Ht(f,U,E,A){var B=Ke,P=Object.create(B),U=(P.parent=B,P.ref=0,P.global=!1,P.id=++Gn,St.env,P.env=w?{Promise:st,PromiseProp:{value:st,configurable:!0,writable:!0},all:st.all,race:st.race,allSettled:st.allSettled,any:st.any,resolve:st.resolve,reject:st.reject}:{},U&&p(P,U),++B.ref,P.finalize=function(){--this.parent.ref||this.parent.finalize()},Xn(P,f,E,A));return P.ref===0&&P.finalize(),U}function Jt(){return qt.id||(qt.id=++fi),++qt.awaits,qt.echoes+=Dt,qt.id}function gn(){return!!qt.awaits&&(--qt.awaits==0&&(qt.id=0),qt.echoes=qt.awaits*Dt,!0)}function tr(f){return qt.echoes&&f&&f.constructor===O?(Jt(),f.then(function(v){return gn(),v},function(v){return gn(),Kt(v)})):f}function Or(){var f=kn[kn.length-1];kn.pop(),vn(f,!1)}function vn(f,v){var E,A,B=Ke;(v?!qt.echoes||xr++&&f===Ke:!xr||--xr&&f===Ke)||queueMicrotask(v?(function(P){++Pr,qt.echoes&&--qt.echoes!=0||(qt.echoes=qt.awaits=qt.id=0),kn.push(Ke),vn(P,!0)}).bind(null,f):Or),f!==Ke&&(Ke=f,B===St&&(St.env=Pn()),w)&&(E=St.env.Promise,A=f.env,B.global||f.global)&&(Object.defineProperty(d,"Promise",A.PromiseProp),E.all=A.all,E.race=A.race,E.resolve=A.resolve,E.reject=A.reject,A.allSettled&&(E.allSettled=A.allSettled),A.any)&&(E.any=A.any)}function Pn(){var f=d.Promise;return w?{Promise:f,PromiseProp:Object.getOwnPropertyDescriptor(d,"Promise"),all:f.all,race:f.race,allSettled:f.allSettled,any:f.any,resolve:f.resolve,reject:f.reject}:{}}function Xn(f,v,E,A,B){var P=Ke;try{return vn(f,!0),v(E,A,B)}finally{vn(P,!1)}}function ba(f,v,E,A){return typeof f!="function"?f:function(){var B=Ke;E&&Jt(),vn(v,!0);try{return f.apply(this,arguments)}finally{vn(B,!1),A&&queueMicrotask(gn)}}}function Tr(f){Promise===O&&qt.echoes===0?xr===0?f():enqueueNativeMicroTask(f):setTimeout(f,0)}(""+Xr).indexOf("[native code]")===-1&&(Jt=gn=tt);var Kt=st.reject,Kn="",Dn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ln="String expected.",Nr=[],Xi="__dbnames",pr="readonly",Sr="readwrite";function qr(f,v){return f?v?function(){return f.apply(this,arguments)&&v.apply(this,arguments)}:f:v}var cs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ki(f){return typeof f!="string"||/\./.test(f)?function(v){return v}:function(v){return v[f]===void 0&&f in v&&delete(v=he(v))[f],v}}function co(){throw De.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function At(f,v){try{var E=Wi(f),A=Wi(v);if(E!==A)return E==="Array"?1:A==="Array"?-1:E==="binary"?1:A==="binary"?-1:E==="string"?1:A==="string"?-1:E==="Date"?1:A!=="Date"?NaN:-1;switch(E){case"number":case"Date":case"string":return v<f?1:f<v?-1:0;case"binary":for(var B=nr(f),P=nr(v),U=B.length,H=P.length,te=U<H?U:H,ye=0;ye<te;++ye)if(B[ye]!==P[ye])return B[ye]<P[ye]?-1:1;return U===H?0:U<H?-1:1;case"Array":for(var ne=f,J=v,ae=ne.length,le=J.length,re=ae<le?ae:le,ie=0;ie<re;++ie){var be=At(ne[ie],J[ie]);if(be!==0)return be}return ae===le?0:ae<le?-1:1}}catch{}return NaN}function Wi(f){var v=typeof f;return v=="object"&&(ArrayBuffer.isView(f)||(v=Je(f))==="ArrayBuffer")?"binary":v}function nr(f){return f instanceof Uint8Array?f:ArrayBuffer.isView(f)?new Uint8Array(f.buffer,f.byteOffset,f.byteLength):new Uint8Array(f)}function wn(f,v,E){var A=f.schema.yProps;return A?(v&&0<E.numFailures&&(v=v.filter(function(B,P){return!E.failures[P]})),Promise.all(A.map(function(B){return B=B.updatesTable,v?f.db.table(B).where("k").anyOf(v).delete():f.db.table(B).clear()})).then(function(){return E})):E}fo.prototype.execute=function(f){var v=this["@@propmod"];if(v.add!==void 0){var E=v.add;if(c(E))return l(l([],c(f)?f:[],!0),E).sort();if(typeof E=="number")return(Number(f)||0)+E;if(typeof E=="bigint")try{return BigInt(f)+E}catch{return BigInt(0)+E}throw new TypeError("Invalid term ".concat(E))}if(v.remove!==void 0){var A=v.remove;if(c(A))return c(f)?f.filter(function(B){return!A.includes(B)}).sort():[];if(typeof A=="number")return Number(f)-A;if(typeof A=="bigint")try{return BigInt(f)-A}catch{return BigInt(0)-A}throw new TypeError("Invalid subtrahend ".concat(A))}return E=(E=v.replacePrefix)==null?void 0:E[0],E&&typeof f=="string"&&f.startsWith(E)?v.replacePrefix[1]+f.substring(E.length):f};var di=fo;function fo(f){this["@@propmod"]=f}function xa(f,v){for(var E=u(v),A=E.length,B=!1,P=0;P<A;++P){var U=E[P],H=v[U],te=V(f,U);H instanceof di?(M(f,U,H.execute(te)),B=!0):te!==H&&(M(f,U,H),B=!0)}return B}Ut.prototype._trans=function(f,v,E){var A=this._tx||Ke.trans,B=this.name,P=$e&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(f==="readonly"?"read":"write"," ").concat(this.name));function U(ye,ne,J){if(J.schema[B])return v(J.idbtrans,J);throw new De.NotFound("Table "+B+" not part of transaction")}var H=Y();try{var te=A&&A.db._novip===this.db._novip?A===Ke.trans?A._promise(f,U,E):Ht(function(){return A._promise(f,U,E)},{trans:A,transless:Ke.transless||Ke}):(function ye(ne,J,ae,le){if(ne.idbdb&&(ne._state.openComplete||Ke.letThrough||ne._vip)){var re=ne._createTransaction(J,ae,ne._dbSchema);try{re.create(),ne._state.PR1398_maxLoop=3}catch(ie){return ie.name===Ce.InvalidState&&ne.isOpen()&&0<--ne._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ne.close({disableAutoOpen:!1}),ne.open().then(function(){return ye(ne,J,ae,le)})):Kt(ie)}return re._promise(J,function(ie,be){return Ht(function(){return Ke.trans=re,le(ie,be,re)})}).then(function(ie){if(J==="readwrite")try{re.idbtrans.commit()}catch{}return J==="readonly"?ie:re._completion.then(function(){return ie})})}if(ne._state.openComplete)return Kt(new De.DatabaseClosed(ne._state.dbOpenError));if(!ne._state.isBeingOpened){if(!ne._state.autoOpen)return Kt(new De.DatabaseClosed);ne.open().catch(tt)}return ne._state.dbReadyPromise.then(function(){return ye(ne,J,ae,le)})})(this.db,f,[this.name],U);return P&&(te._consoleTask=P,te=te.catch(function(ye){return console.trace(ye),Kt(ye)})),te}finally{H&&We()}},Ut.prototype.get=function(f,v){var E=this;return f&&f.constructor===Object?this.where(f).first(v):f==null?Kt(new De.Type("Invalid argument to Table.get()")):this._trans("readonly",function(A){return E.core.get({trans:A,key:f}).then(function(B){return E.hook.reading.fire(B)})}).then(v)},Ut.prototype.where=function(f){if(typeof f=="string")return new this.db.WhereClause(this,f);if(c(f))return new this.db.WhereClause(this,"[".concat(f.join("+"),"]"));var v=u(f);if(v.length===1)return this.where(v[0]).equals(f[v[0]]);var E=this.schema.indexes.concat(this.schema.primKey).filter(function(H){if(H.compound&&v.every(function(ye){return 0<=H.keyPath.indexOf(ye)})){for(var te=0;te<v.length;++te)if(v.indexOf(H.keyPath[te])===-1)return!1;return!0}return!1}).sort(function(H,te){return H.keyPath.length-te.keyPath.length})[0];if(E&&this.db._maxKey!==Kn)return U=E.keyPath.slice(0,v.length),this.where(U).equals(U.map(function(H){return f[H]}));!E&&$e&&console.warn("The query ".concat(JSON.stringify(f)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(v.join("+"),"]"));var A=this.schema.idxByName;function B(H,te){return At(H,te)===0}var U=v.reduce(function(ne,te){var ye=ne[0],ne=ne[1],J=A[te],ae=f[te];return[ye||J,ye||!J?qr(ne,J&&J.multi?function(le){return le=V(le,te),c(le)&&le.some(function(re){return B(ae,re)})}:function(le){return B(ae,V(le,te))}):ne]},[null,null]),P=U[0],U=U[1];return P?this.where(P.name).equals(f[P.keyPath]).filter(U):E?this.filter(U):this.where(v).equals("")},Ut.prototype.filter=function(f){return this.toCollection().and(f)},Ut.prototype.count=function(f){return this.toCollection().count(f)},Ut.prototype.offset=function(f){return this.toCollection().offset(f)},Ut.prototype.limit=function(f){return this.toCollection().limit(f)},Ut.prototype.each=function(f){return this.toCollection().each(f)},Ut.prototype.toArray=function(f){return this.toCollection().toArray(f)},Ut.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ut.prototype.orderBy=function(f){return new this.db.Collection(new this.db.WhereClause(this,c(f)?"[".concat(f.join("+"),"]"):f))},Ut.prototype.reverse=function(){return this.toCollection().reverse()},Ut.prototype.mapToClass=function(f){for(var v=this.db,E=this.name,A=((this.schema.mappedClass=f).prototype instanceof co&&(f=(U=>{var H=ne,te=U;if(typeof te!="function"&&te!==null)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");function ye(){this.constructor=H}function ne(){return U!==null&&U.apply(this,arguments)||this}return s(H,te),H.prototype=te===null?Object.create(te):(ye.prototype=te.prototype,new ye),Object.defineProperty(ne.prototype,"db",{get:function(){return v},enumerable:!1,configurable:!0}),ne.prototype.table=function(){return E},ne})(f)),new Set),B=f.prototype;B;B=h(B))Object.getOwnPropertyNames(B).forEach(function(U){return A.add(U)});function P(U){if(!U)return U;var H,te=Object.create(f.prototype);for(H in U)if(!A.has(H))try{te[H]=U[H]}catch{}return te}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=P,this.hook("reading",P),f},Ut.prototype.defineClass=function(){return this.mapToClass(function(f){p(this,f)})},Ut.prototype.add=function(f,v){var E=this,A=this.schema.primKey,B=A.auto,P=A.keyPath,U=f;return P&&B&&(U=Ki(P)(f)),this._trans("readwrite",function(H){return E.core.mutate({trans:H,type:"add",keys:v!=null?[v]:null,values:[U]})}).then(function(H){return H.numFailures?st.reject(H.failures[0]):H.lastResult}).then(function(H){if(P)try{M(f,P,H)}catch{}return H})},Ut.prototype.upsert=function(f,v){var E=this,A=this.schema.primKey.keyPath;return this._trans("readwrite",function(B){return E.core.get({trans:B,key:f}).then(function(P){var U=P??{};return xa(U,v),A&&M(U,A,f),E.core.mutate({trans:B,type:"put",values:[U],keys:[f],upsert:!0,updates:{keys:[f],changeSpecs:[v]}}).then(function(H){return H.numFailures?st.reject(H.failures[0]):!!P})})})},Ut.prototype.update=function(f,v){return typeof f!="object"||c(f)?this.where(":id").equals(f).modify(v):(f=V(f,this.schema.primKey.keyPath))===void 0?Kt(new De.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(f).modify(v)},Ut.prototype.put=function(f,v){var E=this,A=this.schema.primKey,B=A.auto,P=A.keyPath,U=f;return P&&B&&(U=Ki(P)(f)),this._trans("readwrite",function(H){return E.core.mutate({trans:H,type:"put",values:[U],keys:v!=null?[v]:null})}).then(function(H){return H.numFailures?st.reject(H.failures[0]):H.lastResult}).then(function(H){if(P)try{M(f,P,H)}catch{}return H})},Ut.prototype.delete=function(f){var v=this;return this._trans("readwrite",function(E){return v.core.mutate({trans:E,type:"delete",keys:[f]}).then(function(A){return wn(v,[f],A)}).then(function(A){return A.numFailures?st.reject(A.failures[0]):void 0})})},Ut.prototype.clear=function(){var f=this;return this._trans("readwrite",function(v){return f.core.mutate({trans:v,type:"deleteRange",range:cs}).then(function(E){return wn(f,null,E)})}).then(function(v){return v.numFailures?st.reject(v.failures[0]):void 0})},Ut.prototype.bulkGet=function(f){var v=this;return this._trans("readonly",function(E){return v.core.getMany({keys:f,trans:E}).then(function(A){return A.map(function(B){return v.hook.reading.fire(B)})})})},Ut.prototype.bulkAdd=function(f,v,E){var A=this,B=Array.isArray(v)?v:void 0,P=(E=E||(B?void 0:v))?E.allKeys:void 0;return this._trans("readwrite",function(U){var H=A.schema.primKey,ye=H.auto,H=H.keyPath;if(H&&B)throw new De.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(B&&B.length!==f.length)throw new De.InvalidArgument("Arguments objects and keys must have the same length");var te=f.length,ye=H&&ye?f.map(Ki(H)):f;return A.core.mutate({trans:U,type:"add",keys:B,values:ye,wantResults:P}).then(function(ne){var J=ne.numFailures,ae=ne.failures;if(J===0)return P?ne.results:ne.lastResult;throw new nt("".concat(A.name,".bulkAdd(): ").concat(J," of ").concat(te," operations failed"),ae)})})},Ut.prototype.bulkPut=function(f,v,E){var A=this,B=Array.isArray(v)?v:void 0,P=(E=E||(B?void 0:v))?E.allKeys:void 0;return this._trans("readwrite",function(U){var H=A.schema.primKey,ye=H.auto,H=H.keyPath;if(H&&B)throw new De.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(B&&B.length!==f.length)throw new De.InvalidArgument("Arguments objects and keys must have the same length");var te=f.length,ye=H&&ye?f.map(Ki(H)):f;return A.core.mutate({trans:U,type:"put",keys:B,values:ye,wantResults:P}).then(function(ne){var J=ne.numFailures,ae=ne.failures;if(J===0)return P?ne.results:ne.lastResult;throw new nt("".concat(A.name,".bulkPut(): ").concat(J," of ").concat(te," operations failed"),ae)})})},Ut.prototype.bulkUpdate=function(f){var v=this,E=this.core,A=f.map(function(U){return U.key}),B=f.map(function(U){return U.changes}),P=[];return this._trans("readwrite",function(U){return E.getMany({trans:U,keys:A,cache:"clone"}).then(function(H){var te=[],ye=[],ne=(f.forEach(function(J,ae){var le=J.key,re=J.changes,ie=H[ae];if(ie){for(var be=0,_e=Object.keys(re);be<_e.length;be++){var ve=_e[be],Oe=re[ve];if(ve===v.schema.primKey.keyPath){if(At(Oe,le)!==0)throw new De.Constraint("Cannot update primary key in bulkUpdate()")}else M(ie,ve,Oe)}P.push(ae),te.push(le),ye.push(ie)}}),te.length);return E.mutate({trans:U,type:"put",keys:te,values:ye,updates:{keys:A,changeSpecs:B}}).then(function(J){var ae=J.numFailures,le=J.failures;if(ae===0)return ne;for(var re=0,ie=Object.keys(le);re<ie.length;re++){var be,_e=ie[re],ve=P[Number(_e)];ve!=null&&(be=le[_e],delete le[_e],le[ve]=be)}throw new nt("".concat(v.name,".bulkUpdate(): ").concat(ae," of ").concat(ne," operations failed"),le)})})})},Ut.prototype.bulkDelete=function(f){var v=this,E=f.length;return this._trans("readwrite",function(A){return v.core.mutate({trans:A,type:"delete",keys:f}).then(function(B){return wn(v,f,B)})}).then(function(A){var B=A.numFailures,P=A.failures;if(B===0)return A.lastResult;throw new nt("".concat(v.name,".bulkDelete(): ").concat(B," of ").concat(E," operations failed"),P)})};var fs=Ut;function Ut(){}function Yi(f){function v(U,H){if(H){for(var te=arguments.length,ye=new Array(te-1);--te;)ye[te-1]=arguments[te];return E[U].subscribe.apply(null,ye),f}if(typeof U=="string")return E[U]}var E={};v.addEventType=P;for(var A=1,B=arguments.length;A<B;++A)P(arguments[A]);return v;function P(U,H,te){var ye,ne;if(typeof U!="object")return H=H||fe,ne={subscribers:[],fire:te=te||tt,subscribe:function(J){ne.subscribers.indexOf(J)===-1&&(ne.subscribers.push(J),ne.fire=H(ne.fire,J))},unsubscribe:function(J){ne.subscribers=ne.subscribers.filter(function(ae){return ae!==J}),ne.fire=ne.subscribers.reduce(H,te)}},E[U]=v[U]=ne;u(ye=U).forEach(function(J){var ae=ye[J];if(c(ae))P(J,ye[J][0],ye[J][1]);else{if(ae!=="asap")throw new De.InvalidArgument("Invalid event config");var le=P(J,oe,function(){for(var re=arguments.length,ie=new Array(re);re--;)ie[re]=arguments[re];le.subscribers.forEach(function(be){j(function(){be.apply(null,ie)})})})}})}}function bn(f,v){return _(v).from({prototype:f}),v}function Er(f,v){return!(f.filter||f.algorithm||f.or)&&(v?f.justLimit:!f.replayFilter)}function Ta(f,v){f.filter=qr(f.filter,v)}function $i(f,v,E){var A=f.replayFilter;f.replayFilter=A?function(){return qr(A(),v())}:v,f.justLimit=E&&!A}function gr(f,v){if(f.isPrimKey)return v.primaryKey;var E=v.getIndexByKeyPath(f.index);if(E)return E;throw new De.Schema("KeyPath "+f.index+" on object store "+v.name+" is not indexed")}function ds(f,v,E){var A=gr(f,v.schema);return v.openCursor({trans:E,values:!f.keysOnly,reverse:f.dir==="prev",unique:!!f.unique,query:{index:A,range:f.range}})}function Qi(f,v,E,A){var B,P,U=f.replayFilter?qr(f.filter,f.replayFilter()):f.filter;return f.or?(B={},P=function(H,te,ye){var ne,J;U&&!U(te,ye,function(ae){return te.stop(ae)},function(ae){return te.fail(ae)})||((J=""+(ne=te.primaryKey))=="[object ArrayBuffer]"&&(J=""+new Uint8Array(ne)),b(B,J))||(B[J]=!0,v(H,te,ye))},Promise.all([f.or._iterate(P,E),Lr(ds(f,A,E),f.algorithm,P,!f.keysOnly&&f.valueMapper)])):Lr(ds(f,A,E),qr(f.algorithm,U),v,!f.keysOnly&&f.valueMapper)}function Lr(f,v,E,A){var B=xt(A?function(P,U,H){return E(A(P),U,H)}:E);return f.then(function(P){if(P)return P.start(function(){var U=function(){return P.continue()};v&&!v(P,function(H){return U=H},function(H){P.stop(H),U=tt},function(H){P.fail(H),U=tt})||B(P.value,P,function(H){return U=H}),U()})})}Ot.prototype._read=function(f,v){var E=this._ctx;return E.error?E.table._trans(null,Kt.bind(null,E.error)):E.table._trans("readonly",f).then(v)},Ot.prototype._write=function(f){var v=this._ctx;return v.error?v.table._trans(null,Kt.bind(null,v.error)):v.table._trans("readwrite",f,"locked")},Ot.prototype._addAlgorithm=function(f){var v=this._ctx;v.algorithm=qr(v.algorithm,f)},Ot.prototype._iterate=function(f,v){return Qi(this._ctx,f,v,this._ctx.table.core)},Ot.prototype.clone=function(f){var v=Object.create(this.constructor.prototype),E=Object.create(this._ctx);return f&&p(E,f),v._ctx=E,v},Ot.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ot.prototype.each=function(f){var v=this._ctx;return this._read(function(E){return Qi(v,f,E,v.table.core)})},Ot.prototype.count=function(f){var v=this;return this._read(function(E){var A,B=v._ctx,P=B.table.core;return Er(B,!0)?P.count({trans:E,query:{index:gr(B,P.schema),range:B.range}}).then(function(U){return Math.min(U,B.limit)}):(A=0,Qi(B,function(){return++A,!1},E,P).then(function(){return A}))}).then(f)},Ot.prototype.sortBy=function(f,v){var E=f.split(".").reverse(),A=E[0],B=E.length-1;function P(te,ye){return ye?P(te[E[ye]],ye-1):te[A]}var U=this._ctx.dir==="next"?1:-1;function H(te,ye){return At(P(te,B),P(ye,B))*U}return this.toArray(function(te){return te.sort(H)}).then(v)},Ot.prototype.toArray=function(f){var v=this;return this._read(function(E){var A,B,P,U=v._ctx;return U.dir==="next"&&Er(U,!0)&&0<U.limit?(A=U.valueMapper,B=gr(U,U.table.core.schema),U.table.core.query({trans:E,limit:U.limit,values:!0,query:{index:B,range:U.range}}).then(function(H){return H=H.result,A?H.map(A):H})):(P=[],Qi(U,function(H){return P.push(H)},E,U.table.core).then(function(){return P}))},f)},Ot.prototype.offset=function(f){var v=this._ctx;return f<=0||(v.offset+=f,Er(v)?$i(v,function(){var E=f;return function(A,B){return E===0||(E===1?--E:B(function(){A.advance(E),E=0}),!1)}}):$i(v,function(){var E=f;return function(){return--E<0}})),this},Ot.prototype.limit=function(f){return this._ctx.limit=Math.min(this._ctx.limit,f),$i(this._ctx,function(){var v=f;return function(E,A,B){return--v<=0&&A(B),0<=v}},!0),this},Ot.prototype.until=function(f,v){return Ta(this._ctx,function(E,A,B){return!f(E.value)||(A(B),v)}),this},Ot.prototype.first=function(f){return this.limit(1).toArray(function(v){return v[0]}).then(f)},Ot.prototype.last=function(f){return this.reverse().first(f)},Ot.prototype.filter=function(f){var v;return Ta(this._ctx,function(E){return f(E.value)}),(v=this._ctx).isMatch=qr(v.isMatch,f),this},Ot.prototype.and=function(f){return this.filter(f)},Ot.prototype.or=function(f){return new this.db.WhereClause(this._ctx.table,f,this)},Ot.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ot.prototype.desc=function(){return this.reverse()},Ot.prototype.eachKey=function(f){var v=this._ctx;return v.keysOnly=!v.isMatch,this.each(function(E,A){f(A.key,A)})},Ot.prototype.eachUniqueKey=function(f){return this._ctx.unique="unique",this.eachKey(f)},Ot.prototype.eachPrimaryKey=function(f){var v=this._ctx;return v.keysOnly=!v.isMatch,this.each(function(E,A){f(A.primaryKey,A)})},Ot.prototype.keys=function(f){var v=this._ctx,E=(v.keysOnly=!v.isMatch,[]);return this.each(function(A,B){E.push(B.key)}).then(function(){return E}).then(f)},Ot.prototype.primaryKeys=function(f){var v=this._ctx;if(v.dir==="next"&&Er(v,!0)&&0<v.limit)return this._read(function(A){var B=gr(v,v.table.core.schema);return v.table.core.query({trans:A,values:!1,limit:v.limit,query:{index:B,range:v.range}})}).then(function(A){return A.result}).then(f);v.keysOnly=!v.isMatch;var E=[];return this.each(function(A,B){E.push(B.primaryKey)}).then(function(){return E}).then(f)},Ot.prototype.uniqueKeys=function(f){return this._ctx.unique="unique",this.keys(f)},Ot.prototype.firstKey=function(f){return this.limit(1).keys(function(v){return v[0]}).then(f)},Ot.prototype.lastKey=function(f){return this.reverse().firstKey(f)},Ot.prototype.distinct=function(){var f,v=this._ctx,v=v.index&&v.table.schema.idxByName[v.index];return v&&v.multi&&(f={},Ta(this._ctx,function(A){var A=A.primaryKey.toString(),B=b(f,A);return f[A]=!0,!B})),this},Ot.prototype.modify=function(f){var v=this,E=this._ctx;return this._write(function(A){function B(ie,be){var _e=be.failures;ae+=ie-be.numFailures;for(var ve=0,Oe=u(_e);ve<Oe.length;ve++){var Ve=Oe[ve];J.push(_e[Ve])}}var P=typeof f=="function"?f:function(ie){return xa(ie,f)},U=E.table.core,ne=U.schema.primaryKey,H=ne.outbound,te=ne.extractKey,ye=200,ne=v.db._options.modifyChunkSize,J=(ne&&(ye=typeof ne=="object"?ne[U.name]||ne["*"]||200:ne),[]),ae=0,le=[],re=f===hs;return v.clone().primaryKeys().then(function(ie){function be(ve){var Oe=Math.min(ye,ie.length-ve),Ve=ie.slice(ve,ve+Oe);return(re?Promise.resolve([]):U.getMany({trans:A,keys:Ve,cache:"immutable"})).then(function(rt){var it=[],Ge=[],lt=H?[]:null,ot=re?Ve:[];if(!re)for(var Xe=0;Xe<Oe;++Xe){var ut=rt[Xe],bt={value:he(ut),primKey:ie[ve+Xe]};P.call(bt,bt.value,bt)!==!1&&(bt.value==null?ot.push(ie[ve+Xe]):H||At(te(ut),te(bt.value))===0?(Ge.push(bt.value),H&&lt.push(ie[ve+Xe])):(ot.push(ie[ve+Xe]),it.push(bt.value)))}return Promise.resolve(0<it.length&&U.mutate({trans:A,type:"add",values:it}).then(function(Ct){for(var gt in Ct.failures)ot.splice(parseInt(gt),1);B(it.length,Ct)})).then(function(){return(0<Ge.length||_e&&typeof f=="object")&&U.mutate({trans:A,type:"put",keys:lt,values:Ge,criteria:_e,changeSpec:typeof f!="function"&&f,isAdditionalChunk:0<ve}).then(function(Ct){return B(Ge.length,Ct)})}).then(function(){return(0<ot.length||_e&&re)&&U.mutate({trans:A,type:"delete",keys:ot,criteria:_e,isAdditionalChunk:0<ve}).then(function(Ct){return wn(E.table,ot,Ct)}).then(function(Ct){return B(ot.length,Ct)})}).then(function(){return ie.length>ve+Oe&&be(ve+ye)})})}var _e=Er(E)&&E.limit===1/0&&(typeof f!="function"||re)&&{index:E.index,range:E.range};return be(0).then(function(){if(0<J.length)throw new at("Error modifying one or more objects",J,ae,le);return ie.length})})})},Ot.prototype.delete=function(){var f=this._ctx,v=f.range;return!Er(f)||f.table.schema.yProps||!f.isPrimKey&&v.type!==3?this.modify(hs):this._write(function(E){var A=f.table.core.schema.primaryKey,B=v;return f.table.core.count({trans:E,query:{index:A,range:B}}).then(function(P){return f.table.core.mutate({trans:E,type:"deleteRange",range:B}).then(function(te){var H=te.failures,te=te.numFailures;if(te)throw new at("Could not delete some values",Object.keys(H).map(function(ye){return H[ye]}),P-te);return P-te})})})};var El=Ot;function Ot(){}var hs=function(f,v){return v.value=null};function ps(f,v){return f<v?-1:f===v?0:1}function wl(f,v){return v<f?-1:f===v?0:1}function On(f,v,E){return f=f instanceof jr?new f.Collection(f):f,f._ctx.error=new(E||TypeError)(v),f}function yr(f){return new f.Collection(f,function(){return Sa("")}).limit(0)}function qn(le,v,E,A){var B,P,U,H,te,ye,ne,J=E.length;if(!E.every(function(ie){return typeof ie=="string"}))return On(le,ln);function ae(ie){B=ie==="next"?function(_e){return _e.toUpperCase()}:function(_e){return _e.toLowerCase()},P=ie==="next"?function(_e){return _e.toLowerCase()}:function(_e){return _e.toUpperCase()},U=ie==="next"?ps:wl;var be=E.map(function(_e){return{lower:P(_e),upper:B(_e)}}).sort(function(_e,ve){return U(_e.lower,ve.lower)});H=be.map(function(_e){return _e.upper}),te=be.map(function(_e){return _e.lower}),ne=(ye=ie)==="next"?"":A}ae("next");var le=new le.Collection(le,function(){return rr(H[0],te[J-1]+A)}),re=(le._ondirectionchange=function(ie){ae(ie)},0);return le._addAlgorithm(function(ie,be,_e){var ve=ie.key;if(typeof ve=="string"){var Oe=P(ve);if(v(Oe,te,re))return!0;for(var Ve=null,rt=re;rt<J;++rt){var it=((Ge,lt,ot,Xe,ut,bt)=>{for(var Ct=Math.min(Ge.length,Xe.length),gt=-1,Tt=0;Tt<Ct;++Tt){var Wt=lt[Tt];if(Wt!==Xe[Tt])return ut(Ge[Tt],ot[Tt])<0?Ge.substr(0,Tt)+ot[Tt]+ot.substr(Tt+1):ut(Ge[Tt],Xe[Tt])<0?Ge.substr(0,Tt)+Xe[Tt]+ot.substr(Tt+1):0<=gt?Ge.substr(0,gt)+lt[gt]+ot.substr(gt+1):null;ut(Ge[Tt],Wt)<0&&(gt=Tt)}return Ct<Xe.length&&bt==="next"?Ge+ot.substr(Ge.length):Ct<Ge.length&&bt==="prev"?Ge.substr(0,ot.length):gt<0?null:Ge.substr(0,gt)+Xe[gt]+ot.substr(gt+1)})(ve,Oe,H[rt],te[rt],U,ye);it===null&&Ve===null?re=rt+1:(Ve===null||0<U(Ve,it))&&(Ve=it)}be(Ve!==null?function(){ie.continue(Ve+ne)}:_e)}return!1}),le}function rr(f,v,E,A){return{type:2,lower:f,upper:v,lowerOpen:E,upperOpen:A}}function Sa(f){return{type:1,lower:f,upper:f}}Object.defineProperty(en.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),en.prototype.between=function(f,v,E,A){E=E!==!1,A=A===!0;try{return 0<this._cmp(f,v)||this._cmp(f,v)===0&&(E||A)&&(!E||!A)?yr(this):new this.Collection(this,function(){return rr(f,v,!E,!A)})}catch{return On(this,Dn)}},en.prototype.equals=function(f){return f==null?On(this,Dn):new this.Collection(this,function(){return Sa(f)})},en.prototype.above=function(f){return f==null?On(this,Dn):new this.Collection(this,function(){return rr(f,void 0,!0)})},en.prototype.aboveOrEqual=function(f){return f==null?On(this,Dn):new this.Collection(this,function(){return rr(f,void 0,!1)})},en.prototype.below=function(f){return f==null?On(this,Dn):new this.Collection(this,function(){return rr(void 0,f,!1,!0)})},en.prototype.belowOrEqual=function(f){return f==null?On(this,Dn):new this.Collection(this,function(){return rr(void 0,f)})},en.prototype.startsWith=function(f){return typeof f!="string"?On(this,ln):this.between(f,f+Kn,!0,!0)},en.prototype.startsWithIgnoreCase=function(f){return f===""?this.startsWith(f):qn(this,function(v,E){return v.indexOf(E[0])===0},[f],Kn)},en.prototype.equalsIgnoreCase=function(f){return qn(this,function(v,E){return v===E[0]},[f],"")},en.prototype.anyOfIgnoreCase=function(){var f=W.apply(Ue,arguments);return f.length===0?yr(this):qn(this,function(v,E){return E.indexOf(v)!==-1},f,"")},en.prototype.startsWithAnyOfIgnoreCase=function(){var f=W.apply(Ue,arguments);return f.length===0?yr(this):qn(this,function(v,E){return E.some(function(A){return v.indexOf(A)===0})},f,Kn)},en.prototype.anyOf=function(){var f,v,E=this,A=W.apply(Ue,arguments),B=this._cmp;try{A.sort(B)}catch{return On(this,Dn)}return A.length===0?yr(this):((f=new this.Collection(this,function(){return rr(A[0],A[A.length-1])}))._ondirectionchange=function(P){B=P==="next"?E._ascending:E._descending,A.sort(B)},v=0,f._addAlgorithm(function(P,U,H){for(var te=P.key;0<B(te,A[v]);)if(++v===A.length)return U(H),!1;return B(te,A[v])===0||(U(function(){P.continue(A[v])}),!1)}),f)},en.prototype.notEqual=function(f){return this.inAnyRange([[-1/0,f],[f,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},en.prototype.noneOf=function(){var f=W.apply(Ue,arguments);if(f.length===0)return new this.Collection(this);try{f.sort(this._ascending)}catch{return On(this,Dn)}var v=f.reduce(function(E,A){return E?E.concat([[E[E.length-1][1],A]]):[[-1/0,A]]},null);return v.push([f[f.length-1],this.db._maxKey]),this.inAnyRange(v,{includeLowers:!1,includeUppers:!1})},en.prototype.inAnyRange=function(f,_e){var E=this,A=this._cmp,B=this._ascending,P=this._descending,U=this._min,H=this._max;if(f.length===0)return yr(this);if(!f.every(function(ve){return ve[0]!==void 0&&ve[1]!==void 0&&B(ve[0],ve[1])<=0}))return On(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",De.InvalidArgument);var te=!_e||_e.includeLowers!==!1,ye=_e&&_e.includeUppers===!0,ne,J=B;function ae(ve,Oe){return J(ve[0],Oe[0])}try{(ne=f.reduce(function(ve,Oe){for(var Ve=0,rt=ve.length;Ve<rt;++Ve){var it=ve[Ve];if(A(Oe[0],it[1])<0&&0<A(Oe[1],it[0])){it[0]=U(it[0],Oe[0]),it[1]=H(it[1],Oe[1]);break}}return Ve===rt&&ve.push(Oe),ve},[])).sort(ae)}catch{return On(this,Dn)}var le=0,re=ye?function(ve){return 0<B(ve,ne[le][1])}:function(ve){return 0<=B(ve,ne[le][1])},ie=te?function(ve){return 0<P(ve,ne[le][0])}:function(ve){return 0<=P(ve,ne[le][0])},be=re,_e=new this.Collection(this,function(){return rr(ne[0][0],ne[ne.length-1][1],!te,!ye)});return _e._ondirectionchange=function(ve){J=ve==="next"?(be=re,B):(be=ie,P),ne.sort(ae)},_e._addAlgorithm(function(ve,Oe,Ve){for(var rt,it=ve.key;be(it);)if(++le===ne.length)return Oe(Ve),!1;return!re(rt=it)&&!ie(rt)||(E._cmp(it,ne[le][1])===0||E._cmp(it,ne[le][0])===0||Oe(function(){J===B?ve.continue(ne[le][0]):ve.continue(ne[le][1])}),!1)}),_e},en.prototype.startsWithAnyOf=function(){var f=W.apply(Ue,arguments);return f.every(function(v){return typeof v=="string"})?f.length===0?yr(this):this.inAnyRange(f.map(function(v){return[v,v+Kn]})):On(this,"startsWithAnyOf() only works with strings")};var jr=en;function en(){}function Wn(f){return xt(function(v){return zr(v),f(v.target.error),!1})}function zr(f){f.stopPropagation&&f.stopPropagation(),f.preventDefault&&f.preventDefault()}var hi="storagemutated",Ur="x-storagemutated-1",xn=Yi(null,hi),gs=(Mn.prototype._lock=function(){return F(!Ke.global),++this._reculock,this._reculock!==1||Ke.global||(Ke.lockOwnerFor=this),this},Mn.prototype._unlock=function(){if(F(!Ke.global),--this._reculock==0)for(Ke.global||(Ke.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var f=this._blockedFuncs.shift();try{Xn(f[1],f[0])}catch{}}return this},Mn.prototype._locked=function(){return this._reculock&&Ke.lockOwnerFor!==this},Mn.prototype.create=function(f){var v=this;if(this.mode){var E=this.db.idbdb,A=this.db._state.dbOpenError;if(F(!this.idbtrans),!f&&!E)switch(A&&A.name){case"DatabaseClosedError":throw new De.DatabaseClosed(A);case"MissingAPIError":throw new De.MissingAPI(A.message,A);default:throw new De.OpenFailed(A)}if(!this.active)throw new De.TransactionInactive;F(this._completion._state===null),(f=this.idbtrans=f||(this.db.core||E).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=xt(function(B){zr(B),v._reject(f.error)}),f.onabort=xt(function(B){zr(B),v.active&&v._reject(new De.Abort(f.error)),v.active=!1,v.on("abort").fire(B)}),f.oncomplete=xt(function(){v.active=!1,v._resolve(),"mutatedParts"in f&&xn.storagemutated.fire(f.mutatedParts)})}return this},Mn.prototype._promise=function(f,v,E){var A,B=this;return f==="readwrite"&&this.mode!=="readwrite"?Kt(new De.ReadOnly("Transaction is readonly")):this.active?this._locked()?new st(function(P,U){B._blockedFuncs.push([function(){B._promise(f,v,E).then(P,U)},Ke])}):E?Ht(function(){var P=new st(function(U,H){B._lock();var te=v(U,H,B);te&&te.then&&te.then(U,H)});return P.finally(function(){return B._unlock()}),P._lib=!0,P}):((A=new st(function(P,U){var H=v(P,U,B);H&&H.then&&H.then(P,U)}))._lib=!0,A):Kt(new De.TransactionInactive)},Mn.prototype._root=function(){return this.parent?this.parent._root():this},Mn.prototype.waitFor=function(f){var v,E=this._root(),A=st.resolve(f),B=(E._waitingFor?E._waitingFor=E._waitingFor.then(function(){return A}):(E._waitingFor=A,E._waitingQueue=[],v=E.idbtrans.objectStore(E.storeNames[0]),(function P(){for(++E._spinCount;E._waitingQueue.length;)E._waitingQueue.shift()();E._waitingFor&&(v.get(-1/0).onsuccess=P)})()),E._waitingFor);return new st(function(P,U){A.then(function(H){return E._waitingQueue.push(xt(P.bind(null,H)))},function(H){return E._waitingQueue.push(xt(U.bind(null,H)))}).finally(function(){E._waitingFor===B&&(E._waitingFor=null)})})},Mn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new De.Abort))},Mn.prototype.table=function(f){var v=this._memoizedTables||(this._memoizedTables={});if(b(v,f))return v[f];var E=this.schema[f];if(E)return(E=new this.db.Table(f,E,this)).core=this.db.core.table(f),v[f]=E;throw new De.NotFound("Table "+f+" not part of transaction")},Mn);function Mn(){}function ir(f,v,E,A,B,P,U,H){return{name:f,keyPath:v,unique:E,multi:A,auto:B,compound:P,src:(E&&!U?"&":"")+(A?"*":"")+(B?"++":"")+Ea(v),type:H}}function Ea(f){return typeof f=="string"?f:f?"["+[].join.call(f,"+")+"]":""}function mi(f,v,E){return{name:f,primKey:v,indexes:E,mappedClass:null,idxByName:(A=function(B){return[B.name,B]},E.reduce(function(B,P,U){return P=A(P,U),P&&(B[P[0]]=P[1]),B},{}))};var A}var pi=function(f){try{return f.only([[]]),pi=function(){return[[]]},[[]]}catch{return pi=function(){return Kn},Kn}};function gi(f){return f==null?function(){}:typeof f=="string"?(v=f).split(".").length===1?function(E){return E[v]}:function(E){return V(E,v)}:function(E){return V(E,f)};var v}function Zi(f){return[].slice.call(f)}var ho=0;function fn(f){return f==null?":id":typeof f=="string"?f:"[".concat(f.join("+"),"]")}function Fr(f,v,te){function A(re){if(re.type===3)return null;if(re.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var J=re.lower,ae=re.upper,le=re.lowerOpen,re=re.upperOpen;return J===void 0?ae===void 0?null:v.upperBound(ae,!!re):ae===void 0?v.lowerBound(J,!!le):v.bound(J,ae,!!le,!!re)}function B(ne){var J,ae=ne.name;return{name:ae,schema:ne,mutate:function(le){var re=le.trans,ie=le.type,be=le.keys,_e=le.values,ve=le.range;return new Promise(function(Oe,Ve){Oe=xt(Oe);var rt=re.objectStore(ae),it=rt.keyPath==null,Ge=ie==="put"||ie==="add";if(!Ge&&ie!=="delete"&&ie!=="deleteRange")throw new Error("Invalid operation type: "+ie);var lt,ot=(be||_e||{length:1}).length;if(be&&_e&&be.length!==_e.length)throw new Error("Given keys array must have same length as given values array.");if(ot===0)return Oe({numFailures:0,failures:{},results:[],lastResult:void 0});function Xe(Vt){++Ct,zr(Vt)}var ut=[],bt=[],Ct=0;if(ie==="deleteRange"){if(ve.type===4)return Oe({numFailures:Ct,failures:bt,results:[],lastResult:void 0});ve.type===3?ut.push(lt=rt.clear()):ut.push(lt=rt.delete(A(ve)))}else{var it=Ge?it?[_e,be]:[_e,null]:[be,null],gt=it[0],Tt=it[1];if(Ge)for(var Wt=0;Wt<ot;++Wt)ut.push(lt=Tt&&Tt[Wt]!==void 0?rt[ie](gt[Wt],Tt[Wt]):rt[ie](gt[Wt])),lt.onerror=Xe;else for(Wt=0;Wt<ot;++Wt)ut.push(lt=rt[ie](gt[Wt])),lt.onerror=Xe}function In(Vt){Vt=Vt.target.result,ut.forEach(function(Rr,Si){return Rr.error!=null&&(bt[Si]=Rr.error)}),Oe({numFailures:Ct,failures:bt,results:ie==="delete"?be:ut.map(function(Rr){return Rr.result}),lastResult:Vt})}lt.onerror=function(Vt){Xe(Vt),In(Vt)},lt.onsuccess=In})},getMany:function(le){var re=le.trans,ie=le.keys;return new Promise(function(be,_e){be=xt(be);for(var ve,Oe=re.objectStore(ae),Ve=ie.length,rt=new Array(Ve),it=0,Ge=0,lt=function(ut){ut=ut.target,rt[ut._pos]=ut.result,++Ge===it&&be(rt)},ot=Wn(_e),Xe=0;Xe<Ve;++Xe)ie[Xe]!=null&&((ve=Oe.get(ie[Xe]))._pos=Xe,ve.onsuccess=lt,ve.onerror=ot,++it);it===0&&be(rt)})},get:function(le){var re=le.trans,ie=le.key;return new Promise(function(be,_e){be=xt(be);var ve=re.objectStore(ae).get(ie);ve.onsuccess=function(Oe){return be(Oe.target.result)},ve.onerror=Wn(_e)})},query:(J=H,function(le){return new Promise(function(re,ie){re=xt(re);var be,_e,ve,Ge=le.trans,Oe=le.values,Ve=le.limit,it=le.query,rt=Ve===1/0?void 0:Ve,lt=it.index,it=it.range,Ge=Ge.objectStore(ae),Ge=lt.isPrimaryKey?Ge:Ge.index(lt.name),lt=A(it);if(Ve===0)return re({result:[]});J?((it=Oe?Ge.getAll(lt,rt):Ge.getAllKeys(lt,rt)).onsuccess=function(ot){return re({result:ot.target.result})},it.onerror=Wn(ie)):(be=0,_e=!Oe&&"openKeyCursor"in Ge?Ge.openKeyCursor(lt):Ge.openCursor(lt),ve=[],_e.onsuccess=function(ot){var Xe=_e.result;return!Xe||(ve.push(Oe?Xe.value:Xe.primaryKey),++be===Ve)?re({result:ve}):void Xe.continue()},_e.onerror=Wn(ie))})}),openCursor:function(le){var re=le.trans,ie=le.values,be=le.query,_e=le.reverse,ve=le.unique;return new Promise(function(Oe,Ve){Oe=xt(Oe);var Ge=be.index,rt=be.range,it=re.objectStore(ae),it=Ge.isPrimaryKey?it:it.index(Ge.name),Ge=_e?ve?"prevunique":"prev":ve?"nextunique":"next",lt=!ie&&"openKeyCursor"in it?it.openKeyCursor(A(rt),Ge):it.openCursor(A(rt),Ge);lt.onerror=Wn(Ve),lt.onsuccess=xt(function(ot){var Xe,ut,bt,Ct,gt=lt.result;gt?(gt.___id=++ho,gt.done=!1,Xe=gt.continue.bind(gt),ut=(ut=gt.continuePrimaryKey)&&ut.bind(gt),bt=gt.advance.bind(gt),Ct=function(){throw new Error("Cursor not stopped")},gt.trans=re,gt.stop=gt.continue=gt.continuePrimaryKey=gt.advance=function(){throw new Error("Cursor not started")},gt.fail=xt(Ve),gt.next=function(){var Tt=this,Wt=1;return this.start(function(){return Wt--?Tt.continue():Tt.stop()}).then(function(){return Tt})},gt.start=function(Tt){function Wt(){if(lt.result)try{Tt()}catch(Vt){gt.fail(Vt)}else gt.done=!0,gt.start=function(){throw new Error("Cursor behind last entry")},gt.stop()}var In=new Promise(function(Vt,Rr){Vt=xt(Vt),lt.onerror=Wn(Rr),gt.fail=Rr,gt.stop=function(Si){gt.stop=gt.continue=gt.continuePrimaryKey=gt.advance=Ct,Vt(Si)}});return lt.onsuccess=xt(function(Vt){lt.onsuccess=Wt,Wt()}),gt.continue=Xe,gt.continuePrimaryKey=ut,gt.advance=bt,Wt(),In},Oe(gt)):Oe(null)},Ve)})},count:function(le){var re=le.query,ie=le.trans,be=re.index,_e=re.range;return new Promise(function(ve,Oe){var Ve=ie.objectStore(ae),Ve=be.isPrimaryKey?Ve:Ve.index(be.name),rt=A(_e),rt=rt?Ve.count(rt):Ve.count();rt.onsuccess=xt(function(it){return ve(it.target.result)}),rt.onerror=Wn(Oe)})}}}P=te,U=Zi((te=f).objectStoreNames);var P,te={schema:{name:te.name,tables:U.map(function(ne){return P.objectStore(ne)}).map(function(ne){var J=ne.keyPath,ae=ne.autoIncrement,re=c(J),le={},re={name:ne.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:J==null,compound:re,keyPath:J,autoIncrement:ae,unique:!0,extractKey:gi(J)},indexes:Zi(ne.indexNames).map(function(ie){return ne.index(ie)}).map(function(ve){var Oe=ve.name,be=ve.unique,_e=ve.multiEntry,ve=ve.keyPath,Oe={name:Oe,compound:c(ve),keyPath:ve,unique:be,multiEntry:_e,extractKey:gi(ve)};return le[fn(ve)]=Oe}),getIndexByKeyPath:function(ie){return le[fn(ie)]}};return le[":id"]=re.primaryKey,J!=null&&(le[fn(J)]=re.primaryKey),re})},hasGetAll:0<U.length&&"getAll"in P.objectStore(U[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},U=te.schema,H=te.hasGetAll,te=U.tables.map(B),ye={};return te.forEach(function(ne){return ye[ne.name]=ne}),{stack:"dbcore",transaction:f.transaction.bind(f),table:function(ne){if(ye[ne])return ye[ne];throw new Error("Table '".concat(ne,"' not found"))},MIN_KEY:-1/0,MAX_KEY:pi(v),schema:U}}function wa(f,v,E,A){return E=E.IDBKeyRange,v=Fr(v,E,A),{dbcore:f.dbcore.reduce(function(B,P){return P=P.create,a(a({},B),P(B))},v)}}function wr(f,v){var E=v.db,E=wa(f._middlewares,E,f._deps,v);f.core=E.dbcore,f.tables.forEach(function(A){var B=A.name;f.core.schema.tables.some(function(P){return P.name===B})&&(A.core=f.core.table(B),f[B]instanceof f.Table)&&(f[B].core=A.core)})}function _a(f,v,E,A){E.forEach(function(B){var P=A[B];v.forEach(function(U){var H=(function te(ye,ne){return C(ye,ne)||(ye=h(ye))&&te(ye,ne)})(U,B);(!H||"value"in H&&H.value===void 0)&&(U===f.Transaction.prototype||U instanceof f.Transaction?S(U,B,{get:function(){return this.table(B)},set:function(te){T(this,B,{value:te,writable:!0,configurable:!0,enumerable:!0})}}):U[B]=new f.Table(B,P))})})}function Ji(f,v){v.forEach(function(E){for(var A in E)E[A]instanceof f.Table&&delete E[A]})}function ys(f,v){return f._cfg.version-v._cfg.version}function ea(f,v,E,A){var B=f._dbSchema,P=(E.objectStoreNames.contains("$meta")&&!B.$meta&&(B.$meta=mi("$meta",po("")[0],[]),f._storeNames.push("$meta")),f._createTransaction("readwrite",f._storeNames,B)),U=(P.create(E),P._completion.catch(A),P._reject.bind(P)),H=Ke.transless||Ke;Ht(function(){if(Ke.trans=P,Ke.transless=H,v!==0)return wr(f,E),ye=v,((te=P).storeNames.includes("$meta")?te.table("$meta").get("version").then(function(ne){return ne??ye}):st.resolve(ye)).then(function(be){var J=f,ae=be,le=P,re=E,ie=[],be=J._versions,_e=J._dbSchema=yi(0,J.idbdb,re);return(be=be.filter(function(ve){return ve._cfg.version>=ae})).length===0?st.resolve():(be.forEach(function(ve){ie.push(function(){var Oe,Ve,rt,it=_e,Ge=ve._cfg.dbschema,lt=(ka(J,it,re),ka(J,Ge,re),_e=J._dbSchema=Ge,Ra(it,Ge)),ot=(lt.add.forEach(function(Xe){vs(re,Xe[0],Xe[1].primKey,Xe[1].indexes)}),lt.change.forEach(function(Xe){if(Xe.recreate)throw new De.Upgrade("Not yet support for changing primary key");var ut=re.objectStore(Xe.name);Xe.add.forEach(function(bt){return Ca(ut,bt)}),Xe.change.forEach(function(bt){ut.deleteIndex(bt.name),Ca(ut,bt)}),Xe.del.forEach(function(bt){return ut.deleteIndex(bt)})}),ve._cfg.contentUpgrade);if(ot&&ve._cfg.version>ae)return wr(J,re),le._memoizedTables={},Oe=q(Ge),lt.del.forEach(function(Xe){Oe[Xe]=it[Xe]}),Ji(J,[J.Transaction.prototype]),_a(J,[J.Transaction.prototype],u(Oe),Oe),le.schema=Oe,(Ve=z(ot))&&Jt(),Ge=st.follow(function(){var Xe;(rt=ot(le))&&Ve&&(Xe=gn.bind(null,null),rt.then(Xe,Xe))}),rt&&typeof rt.then=="function"?st.resolve(rt):Ge.then(function(){return rt})}),ie.push(function(Oe){var Ve,rt,it=ve._cfg.dbschema;Ve=it,rt=Oe,[].slice.call(rt.db.objectStoreNames).forEach(function(Ge){return Ve[Ge]==null&&rt.db.deleteObjectStore(Ge)}),Ji(J,[J.Transaction.prototype]),_a(J,[J.Transaction.prototype],J._storeNames,J._dbSchema),le.schema=J._dbSchema}),ie.push(function(Oe){J.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(J.idbdb.version/10)===ve._cfg.version?(J.idbdb.deleteObjectStore("$meta"),delete J._dbSchema.$meta,J._storeNames=J._storeNames.filter(function(Ve){return Ve!=="$meta"})):Oe.objectStore("$meta").put(ve._cfg.version,"version"))})}),(function ve(){return ie.length?st.resolve(ie.shift()(le.idbtrans)).then(ve):st.resolve()})().then(function(){mo(_e,re)}))}).catch(U);var te,ye;u(B).forEach(function(ne){vs(E,ne,B[ne].primKey,B[ne].indexes)}),wr(f,E),st.follow(function(){return f.on.populate.fire(P)}).catch(U)})}function Aa(f,v){mo(f._dbSchema,v),v.db.version%10!=0||v.objectStoreNames.contains("$meta")||v.db.createObjectStore("$meta").add(Math.ceil(v.db.version/10-1),"version");var E=yi(0,f.idbdb,v);ka(f,f._dbSchema,v);for(var A=0,B=Ra(E,f._dbSchema).change;A<B.length;A++){var P=(U=>{if(U.change.length||U.recreate)return console.warn("Unable to patch indexes of table ".concat(U.name," because it has changes on the type of index or primary key.")),{value:void 0};var H=v.objectStore(U.name);U.add.forEach(function(te){$e&&console.debug("Dexie upgrade patch: Creating missing index ".concat(U.name,".").concat(te.src)),Ca(H,te)})})(B[A]);if(typeof P=="object")return P.value}}function Ra(f,v){var E,A={del:[],add:[],change:[]};for(E in f)v[E]||A.del.push(E);for(E in v){var B=f[E],P=v[E];if(B){var U={name:E,def:P,recreate:!1,del:[],add:[],change:[]};if(""+(B.primKey.keyPath||"")!=""+(P.primKey.keyPath||"")||B.primKey.auto!==P.primKey.auto)U.recreate=!0,A.change.push(U);else{var H=B.idxByName,te=P.idxByName,ye=void 0;for(ye in H)te[ye]||U.del.push(ye);for(ye in te){var ne=H[ye],J=te[ye];ne?ne.src!==J.src&&U.change.push(J):U.add.push(J)}(0<U.del.length||0<U.add.length||0<U.change.length)&&A.change.push(U)}}else A.add.push([E,P])}return A}function vs(f,v,E,A){var B=f.db.createObjectStore(v,E.keyPath?{keyPath:E.keyPath,autoIncrement:E.auto}:{autoIncrement:E.auto});A.forEach(function(P){return Ca(B,P)})}function mo(f,v){u(f).forEach(function(E){v.db.objectStoreNames.contains(E)||($e&&console.debug("Dexie: Creating missing table",E),vs(v,E,f[E].primKey,f[E].indexes))})}function Ca(f,v){f.createIndex(v.name,v.keyPath,{unique:v.unique,multiEntry:v.multi})}function yi(f,v,E){var A={};return I(v.objectStoreNames,0).forEach(function(B){for(var P=E.objectStore(B),U=ir(Ea(ye=P.keyPath),ye||"",!0,!1,!!P.autoIncrement,ye&&typeof ye!="string",!0),H=[],te=0;te<P.indexNames.length;++te){var ne=P.index(P.indexNames[te]),ye=ne.keyPath,ne=ir(ne.name,ye,!!ne.unique,!!ne.multiEntry,!1,ye&&typeof ye!="string",!1);H.push(ne)}A[B]=mi(B,U,H)}),A}function ka(f,v,E){for(var A=E.db.objectStoreNames,B=0;B<A.length;++B){var P=A[B],U=E.objectStore(P);f._hasGetAll="getAll"in U;for(var H=0;H<U.indexNames.length;++H){var te,ye=U.indexNames[H],ne=U.index(ye).keyPath,ne=typeof ne=="string"?ne:"["+I(ne).join("+")+"]";v[P]&&(te=v[P].idxByName[ne])&&(te.name=ye,delete v[P].idxByName[ne],v[P].idxByName[ye]=te)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&d.WorkerGlobalScope&&d instanceof d.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(f._hasGetAll=!1)}function po(f){return f.split(",").map(function(v,E){var B=v.split(":"),A=(A=B[1])==null?void 0:A.trim(),B=(v=B[0].trim()).replace(/([&*]|\+\+)/g,""),P=/^\[/.test(B)?B.match(/^\[(.*)\]$/)[1].split("+"):B;return ir(B,P||null,/\&/.test(v),/\*/.test(v),/\+\+/.test(v),c(P),E===0,A)})}vi.prototype._createTableSchema=mi,vi.prototype._parseIndexSyntax=po,vi.prototype._parseStoresSpec=function(f,v){var E=this;u(f).forEach(function(A){if(f[A]!==null){var B=E._parseIndexSyntax(f[A]),P=B.shift();if(!P)throw new De.Schema("Invalid schema for table "+A+": "+f[A]);if(P.unique=!0,P.multi)throw new De.Schema("Primary key cannot be multiEntry*");B.forEach(function(U){if(U.auto)throw new De.Schema("Only primary key can be marked as autoIncrement (++)");if(!U.keyPath)throw new De.Schema("Index must have a name and cannot be an empty string")}),P=E._createTableSchema(A,P,B),v[A]=P}})},vi.prototype.stores=function(E){var v=this.db,E=(this._cfg.storesSource=this._cfg.storesSource?p(this._cfg.storesSource,E):E,v._versions),A={},B={};return E.forEach(function(P){p(A,P._cfg.storesSource),B=P._cfg.dbschema={},P._parseStoresSpec(A,B)}),v._dbSchema=B,Ji(v,[v._allTables,v,v.Transaction.prototype]),_a(v,[v._allTables,v,v.Transaction.prototype,this._cfg.tables],u(B),B),v._storeNames=u(B),this},vi.prototype.upgrade=function(f){return this._cfg.contentUpgrade=Le(this._cfg.contentUpgrade||tt,f),this};var _l=vi;function vi(){}function bs(f,v){var E=f._dbNamesDB;return E||(E=f._dbNamesDB=new ar(Xi,{addons:[],indexedDB:f,IDBKeyRange:v})).version(1).stores({dbnames:"name"}),E.table("dbnames")}function Da(f){return f&&typeof f.databases=="function"}function xs(f){return Ht(function(){return Ke.letThrough=!0,f()})}function Ts(f){return!("from"in f)}var Tn=function(f,v){var E;if(!this)return E=new Tn,f&&"d"in f&&p(E,f),E;p(this,arguments.length?{d:1,from:f,to:1<arguments.length?v:f}:{d:0})};function ta(f,v,E){var A=At(v,E);if(!isNaN(A)){if(0<A)throw RangeError();if(Ts(f))return p(f,{from:v,to:E,d:1});var A=f.l,B=f.r;if(At(E,f.from)<0)return A?ta(A,v,E):f.l={from:v,to:E,d:1,l:null,r:null},yo(f);if(0<At(v,f.to))return B?ta(B,v,E):f.r={from:v,to:E,d:1,l:null,r:null},yo(f);At(v,f.from)<0&&(f.from=v,f.l=null,f.d=B?B.d+1:1),0<At(E,f.to)&&(f.to=E,f.r=null,f.d=f.l?f.l.d+1:1),v=!f.r,A&&!f.l&&Vr(f,A),B&&v&&Vr(f,B)}}function Vr(f,v){Ts(v)||(function E(A,B){var P=B.from,U=B.l,H=B.r;ta(A,P,B.to),U&&E(A,U),H&&E(A,H)})(f,v)}function go(f,v){var E=Ma(v),A=E.next();if(!A.done)for(var B=A.value,P=Ma(f),U=P.next(B.from),H=U.value;!A.done&&!U.done;){if(At(H.from,B.to)<=0&&0<=At(H.to,B.from))return!0;At(B.from,H.from)<0?B=(A=E.next(H.from)).value:H=(U=P.next(B.from)).value}return!1}function Ma(f){var v=Ts(f)?null:{s:0,n:f};return{next:function(E){for(var A=0<arguments.length;v;)switch(v.s){case 0:if(v.s=1,A)for(;v.n.l&&At(E,v.n.from)<0;)v={up:v,n:v.n.l,s:1};else for(;v.n.l;)v={up:v,n:v.n.l,s:1};case 1:if(v.s=2,!A||At(E,v.n.to)<=0)return{value:v.n,done:!1};case 2:if(v.n.r){v.s=3,v={up:v,n:v.n.r,s:0};continue}case 3:v=v.up}return{done:!0}}}}function yo(f){var v,E,A,B=(((B=f.r)==null?void 0:B.d)||0)-(((B=f.l)==null?void 0:B.d)||0),B=1<B?"r":B<-1?"l":"";B&&(v=B=="r"?"l":"r",E=a({},f),A=f[B],f.from=A.from,f.to=A.to,f[B]=A[B],E[B]=A[v],(f[v]=E).d=Ss(E)),f.d=Ss(f)}function Ss(E){var v=E.r,E=E.l;return(v?E?Math.max(v.d,E.d):v.d:E?E.d:0)+1}function Ba(f,v){return u(v).forEach(function(E){f[E]?Vr(f[E],v[E]):f[E]=(function A(B){var P,U,H={};for(P in B)b(B,P)&&(U=B[P],H[P]=!U||typeof U!="object"||ee.has(U.constructor)?U:A(U));return H})(v[E])}),f}function Es(f,v){return f.all||v.all||Object.keys(f).some(function(E){return v[E]&&go(v[E],f[E])})}x(Tn.prototype,((kt={add:function(f){return Vr(this,f),this},addKey:function(f){return ta(this,f,f),this},addKeys:function(f){var v=this;return f.forEach(function(E){return ta(v,E,E)}),this},hasKey:function(f){var v=Ma(this).next(f).value;return v&&At(v.from,f)<=0&&0<=At(v.to,f)}})[de]=function(){return Ma(this)},kt));var Hr={},ws={},_s=!1;function Ia(f){Ba(ws,f),_s||(_s=!0,setTimeout(function(){_s=!1,As(ws,!(ws={}))},0))}function As(f,v){v===void 0&&(v=!1);var E=new Set;if(f.all)for(var A=0,B=Object.values(Hr);A<B.length;A++)vo(H=B[A],f,E,v);else for(var P in f){var U,H,P=/^idb\:\/\/(.*)\/(.*)\//.exec(P);P&&(U=P[1],P=P[2],H=Hr["idb://".concat(U,"/").concat(P)])&&vo(H,f,E,v)}E.forEach(function(te){return te()})}function vo(f,v,E,A){for(var B=[],P=0,U=Object.entries(f.queries.query);P<U.length;P++){for(var H=U[P],te=H[0],ye=[],ne=0,J=H[1];ne<J.length;ne++){var ae=J[ne];Es(v,ae.obsSet)?ae.subscribers.forEach(function(be){return E.add(be)}):A&&ye.push(ae)}A&&B.push([te,ye])}if(A)for(var le=0,re=B;le<re.length;le++){var ie=re[le],te=ie[0],ye=ie[1];f.queries.query[te]=ye}}function Al(f){var v=f._state,E=f._deps.indexedDB;if(v.isBeingOpened||f.idbdb)return v.dbReadyPromise.then(function(){return v.dbOpenError?Kt(v.dbOpenError):f});v.isBeingOpened=!0,v.dbOpenError=null,v.openComplete=!1;var A=v.openCanceller,B=Math.round(10*f.verno),P=!1;function U(){if(v.openCanceller!==A)throw new De.DatabaseClosed("db.open() was cancelled")}function H(){return new st(function(ae,le){if(U(),!E)throw new De.MissingAPI;var re=f.name,ie=v.autoSchema||!B?E.open(re):E.open(re,B);if(!ie)throw new De.MissingAPI;ie.onerror=Wn(le),ie.onblocked=xt(f._fireOnBlocked),ie.onupgradeneeded=xt(function(be){var _e;ne=ie.transaction,v.autoSchema&&!f._options.allowEmptyDB?(ie.onerror=zr,ne.abort(),ie.result.close(),(_e=E.deleteDatabase(re)).onsuccess=_e.onerror=xt(function(){le(new De.NoSuchDatabase("Database ".concat(re," doesnt exist")))})):(ne.onerror=Wn(le),_e=be.oldVersion>Math.pow(2,62)?0:be.oldVersion,J=_e<1,f.idbdb=ie.result,P&&Aa(f,ne),ea(f,_e/10,ne,le))},le),ie.onsuccess=xt(function(){ne=null;var be,_e,ve,Oe,Ve,rt,it=f.idbdb=ie.result,Ge=I(it.objectStoreNames);if(0<Ge.length)try{var lt=it.transaction((Ve=Ge).length===1?Ve[0]:Ve,"readonly");if(v.autoSchema)rt=it,Oe=lt,(ve=f).verno=rt.version/10,Oe=ve._dbSchema=yi(0,rt,Oe),ve._storeNames=I(rt.objectStoreNames,0),_a(ve,[ve._allTables],u(Oe),Oe);else if(ka(f,f._dbSchema,lt),_e=lt,((_e=Ra(yi(0,(be=f).idbdb,_e),be._dbSchema)).add.length||_e.change.some(function(ot){return ot.add.length||ot.change.length}))&&!P)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),it.close(),B=it.version+1,P=!0,ae(H());wr(f,lt)}catch{}Nr.push(f),it.onversionchange=xt(function(ot){v.vcFired=!0,f.on("versionchange").fire(ot)}),it.onclose=xt(function(){f.close({disableAutoOpen:!1})}),J&&(Ge=f._deps,Ve=re,Da(rt=Ge.indexedDB)||Ve===Xi||bs(rt,Ge.IDBKeyRange).put({name:Ve}).catch(tt)),ae()},le)}).catch(function(ae){switch(ae==null?void 0:ae.name){case"UnknownError":if(0<v.PR1398_maxLoop)return v.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),H();break;case"VersionError":if(0<B)return B=0,H()}return st.reject(ae)})}var te,ye=v.dbReadyResolve,ne=null,J=!1;return st.race([A,(typeof navigator>"u"?st.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ae){function le(){return indexedDB.databases().finally(ae)}te=setInterval(le,100),le()}).finally(function(){return clearInterval(te)}):Promise.resolve()).then(H)]).then(function(){return U(),v.onReadyBeingFired=[],st.resolve(xs(function(){return f.on.ready.fire(f.vip)})).then(function ae(){var le;if(0<v.onReadyBeingFired.length)return le=v.onReadyBeingFired.reduce(Le,tt),v.onReadyBeingFired=[],st.resolve(xs(function(){return le(f.vip)})).then(ae)})}).finally(function(){v.openCanceller===A&&(v.onReadyBeingFired=null,v.isBeingOpened=!1)}).catch(function(ae){v.dbOpenError=ae;try{ne&&ne.abort()}catch{}return A===v.openCanceller&&f._close(),Kt(ae)}).finally(function(){v.openComplete=!0,ye()}).then(function(){var ae;return J&&(ae={},f.tables.forEach(function(le){le.schema.indexes.forEach(function(re){re.name&&(ae["idb://".concat(f.name,"/").concat(le.name,"/").concat(re.name)]=new Tn(-1/0,[[[]]]))}),ae["idb://".concat(f.name,"/").concat(le.name,"/")]=ae["idb://".concat(f.name,"/").concat(le.name,"/:dels")]=new Tn(-1/0,[[[]]])}),xn(hi).fire(ae),As(ae,!0)),f})}function na(f){function v(P){return f.next(P)}var E=B(v),A=B(function(P){return f.throw(P)});function B(P){return function(H){var H=P(H),te=H.value;return H.done?te:te&&typeof te.then=="function"?te.then(E,A):c(te)?Promise.all(te).then(E,A):E(te)}}return B(v)()}function _r(f,v,E){for(var A=c(f)?f.slice():[f],B=0;B<E;++B)A.push(v);return A}var Rl={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(f){return a(a({},f),{table:function(A){var E=f.table(A),A=E.schema,B={},P=[];function U(ae,le,re){var ve=fn(ae),ie=B[ve]=B[ve]||[],be=ae==null?0:typeof ae=="string"?1:ae.length,_e=0<le,ve=a(a({},re),{name:_e?"".concat(ve,"(virtual-from:").concat(re.name,")"):re.name,lowLevelIndex:re,isVirtual:_e,keyTail:le,keyLength:be,extractKey:gi(ae),unique:!_e&&re.unique});return ie.push(ve),ve.isPrimaryKey||P.push(ve),1<be&&U(be===2?ae[0]:ae.slice(0,be-1),le+1,re),ie.sort(function(Oe,Ve){return Oe.keyTail-Ve.keyTail}),ve}var H=U(A.primaryKey.keyPath,0,A.primaryKey);B[":id"]=[H];for(var te=0,ye=A.indexes;te<ye.length;te++){var ne=ye[te];U(ne.keyPath,0,ne)}function J(ae){var le,re=ae.query.index;return re.isVirtual?a(a({},ae),{query:{index:re.lowLevelIndex,range:(le=ae.query.range,re=re.keyTail,{type:le.type===1?2:le.type,lower:_r(le.lower,le.lowerOpen?f.MAX_KEY:f.MIN_KEY,re),lowerOpen:!0,upper:_r(le.upper,le.upperOpen?f.MIN_KEY:f.MAX_KEY,re),upperOpen:!0})}}):ae}return a(a({},E),{schema:a(a({},A),{primaryKey:H,indexes:P,getIndexByKeyPath:function(ae){return(ae=B[fn(ae)])&&ae[0]}}),count:function(ae){return E.count(J(ae))},query:function(ae){return E.query(J(ae))},openCursor:function(ae){var le=ae.query.index,re=le.keyTail,ie=le.keyLength;return le.isVirtual?E.openCursor(J(ae)).then(function(_e){return _e&&be(_e)}):E.openCursor(ae);function be(_e){return Object.create(_e,{continue:{value:function(ve){ve!=null?_e.continue(_r(ve,ae.reverse?f.MAX_KEY:f.MIN_KEY,re)):ae.unique?_e.continue(_e.key.slice(0,ie).concat(ae.reverse?f.MIN_KEY:f.MAX_KEY,re)):_e.continue()}},continuePrimaryKey:{value:function(ve,Oe){_e.continuePrimaryKey(_r(ve,f.MAX_KEY,re),Oe)}},primaryKey:{get:function(){return _e.primaryKey}},key:{get:function(){var ve=_e.key;return ie===1?ve[0]:ve.slice(0,ie)}},value:{get:function(){return _e.value}}})}}})}})}};function Pa(f,v,E,A){return E=E||{},A=A||"",u(f).forEach(function(B){var P,U,H;b(v,B)?(P=f[B],U=v[B],typeof P=="object"&&typeof U=="object"&&P&&U?(H=Je(P))!==Je(U)?E[A+B]=v[B]:H==="Object"?Pa(P,U,E,A+B+"."):P!==U&&(E[A+B]=v[B]):P!==U&&(E[A+B]=v[B])):E[A+B]=void 0}),u(v).forEach(function(B){b(f,B)||(E[A+B]=v[B])}),E}function Oa(f,v){return v.type==="delete"?v.keys:v.keys||v.values.map(f.extractKey)}var bo={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(f){return a(a({},f),{table:function(v){var E=f.table(v),A=E.schema.primaryKey;return a(a({},E),{mutate:function(B){var P=Ke.trans,U=P.table(v).hook,H=U.deleting,te=U.creating,ye=U.updating;switch(B.type){case"add":if(te.fire===tt)break;return P._promise("readwrite",function(){return ne(B)},!0);case"put":if(te.fire===tt&&ye.fire===tt)break;return P._promise("readwrite",function(){return ne(B)},!0);case"delete":if(H.fire===tt)break;return P._promise("readwrite",function(){return ne(B)},!0);case"deleteRange":if(H.fire===tt)break;return P._promise("readwrite",function(){return(function J(ae,le,re){return E.query({trans:ae,values:!1,query:{index:A,range:le},limit:re}).then(function(ie){var be=ie.result;return ne({type:"delete",keys:be,trans:ae}).then(function(_e){return 0<_e.numFailures?Promise.reject(_e.failures[0]):be.length<re?{failures:[],numFailures:0,lastResult:void 0}:J(ae,a(a({},le),{lower:be[be.length-1],lowerOpen:!0}),re)})})})(B.trans,B.range,1e4)},!0)}return E.mutate(B);function ne(J){var ae,le,re,ie=Ke.trans,be=J.keys||Oa(A,J);if(be)return(J=J.type==="add"||J.type==="put"?a(a({},J),{keys:be}):a({},J)).type!=="delete"&&(J.values=l([],J.values)),J.keys&&(J.keys=l([],J.keys)),ae=E,re=be,((le=J).type==="add"?Promise.resolve([]):ae.getMany({trans:le.trans,keys:re,cache:"immutable"})).then(function(_e){var ve=be.map(function(Oe,Ve){var rt,it,Ge,lt=_e[Ve],ot={onerror:null,onsuccess:null};return J.type==="delete"?H.fire.call(ot,Oe,lt,ie):J.type==="add"||lt===void 0?(rt=te.fire.call(ot,Oe,J.values[Ve],ie),Oe==null&&rt!=null&&(J.keys[Ve]=Oe=rt,A.outbound||M(J.values[Ve],A.keyPath,Oe))):(rt=Pa(lt,J.values[Ve]),(it=ye.fire.call(ot,rt,Oe,lt,ie))&&(Ge=J.values[Ve],Object.keys(it).forEach(function(Xe){b(Ge,Xe)?Ge[Xe]=it[Xe]:M(Ge,Xe,it[Xe])}))),ot});return E.mutate(J).then(function(Oe){for(var Ve=Oe.failures,rt=Oe.results,it=Oe.numFailures,Oe=Oe.lastResult,Ge=0;Ge<be.length;++Ge){var lt=(rt||be)[Ge],ot=ve[Ge];lt==null?ot.onerror&&ot.onerror(Ve[Ge]):ot.onsuccess&&ot.onsuccess(J.type==="put"&&_e[Ge]?J.values[Ge]:lt)}return{failures:Ve,results:rt,numFailures:it,lastResult:Oe}}).catch(function(Oe){return ve.forEach(function(Ve){return Ve.onerror&&Ve.onerror(Oe)}),Promise.reject(Oe)})});throw new Error("Keys missing")}}})}})}};function Rs(f,v,E){try{if(!v||v.keys.length<f.length)return null;for(var A=[],B=0,P=0;B<v.keys.length&&P<f.length;++B)At(v.keys[B],f[P])===0&&(A.push(E?he(v.values[B]):v.values[B]),++P);return A.length===f.length?A:null}catch{return null}}var xo={stack:"dbcore",level:-1,create:function(f){return{table:function(v){var E=f.table(v);return a(a({},E),{getMany:function(A){var B;return A.cache?(B=Rs(A.keys,A.trans._cache,A.cache==="clone"))?st.resolve(B):E.getMany(A).then(function(P){return A.trans._cache={keys:A.keys,values:A.cache==="clone"?he(P):P},P}):E.getMany(A)},mutate:function(A){return A.type!=="add"&&(A.trans._cache=null),E.mutate(A)}})}}}};function Gr(f,v){return f.trans.mode==="readonly"&&!!f.subscr&&!f.trans.explicit&&f.trans.db._options.cache!=="disabled"&&!v.schema.primaryKey.outbound}function To(f,v){switch(f){case"query":return v.values&&!v.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Cl={stack:"dbcore",level:0,name:"Observability",create:function(f){var v=f.schema.name,E=new Tn(f.MIN_KEY,f.MAX_KEY);return a(a({},f),{transaction:function(A,B,P){if(Ke.subscr&&B!=="readonly")throw new De.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ke.querier));return f.transaction(A,B,P)},table:function(A){function B(be){var ie,be=be.query;return[ie=be.index,new Tn((ie=(be=be.range).lower)!=null?ie:f.MIN_KEY,(ie=be.upper)!=null?ie:f.MAX_KEY)]}var P=f.table(A),U=P.schema,H=U.primaryKey,te=U.indexes,ye=H.extractKey,ne=H.outbound,J=H.autoIncrement&&te.filter(function(re){return re.compound&&re.keyPath.includes(H.keyPath)}),ae=a(a({},P),{mutate:function(re){function ie(ut){return ut="idb://".concat(v,"/").concat(A,"/").concat(ut),Ve[ut]||(Ve[ut]=new Tn)}var be,_e,ve,Oe=re.trans,Ve=re.mutatedParts||(re.mutatedParts={}),rt=ie(""),it=ie(":dels"),Ge=re.type,ot=re.type==="deleteRange"?[re.range]:re.type==="delete"?[re.keys]:re.values.length<50?[Oa(H,re).filter(function(ut){return ut}),re.values]:[],lt=ot[0],ot=ot[1],Xe=re.trans._cache;return c(lt)?(rt.addKeys(lt),(Ge=Ge==="delete"||lt.length===ot.length?Rs(lt,Xe):null)||it.addKeys(lt),(Ge||ot)&&(be=ie,_e=Ge,ve=ot,U.indexes.forEach(function(ut){var bt=be(ut.name||"");function Ct(Tt){return Tt!=null?ut.extractKey(Tt):null}function gt(Tt){ut.multiEntry&&c(Tt)?Tt.forEach(function(Wt){return bt.addKey(Wt)}):bt.addKey(Tt)}(_e||ve).forEach(function(Tt,Vt){var In=_e&&Ct(_e[Vt]),Vt=ve&&Ct(ve[Vt]);At(In,Vt)!==0&&(In!=null&&gt(In),Vt!=null)&&gt(Vt)})}))):lt?(ot={from:(Xe=lt.lower)!=null?Xe:f.MIN_KEY,to:(Ge=lt.upper)!=null?Ge:f.MAX_KEY},it.add(ot),rt.add(ot)):(rt.add(E),it.add(E),U.indexes.forEach(function(ut){return ie(ut.name).add(E)})),P.mutate(re).then(function(ut){return!lt||re.type!=="add"&&re.type!=="put"||(rt.addKeys(ut.results),J&&J.forEach(function(bt){for(var Ct=re.values.map(function(In){return bt.extractKey(In)}),gt=bt.keyPath.findIndex(function(In){return In===H.keyPath}),Tt=0,Wt=ut.results.length;Tt<Wt;++Tt)Ct[Tt][gt]=ut.results[Tt];ie(bt.name).addKeys(Ct)})),Oe.mutatedParts=Ba(Oe.mutatedParts||{},Ve),ut})}}),le={get:function(re){return[H,new Tn(re.key)]},getMany:function(re){return[H,new Tn().addKeys(re.keys)]},count:B,query:B,openCursor:B};return u(le).forEach(function(re){ae[re]=function(ie){var be=Ke.subscr,_e=!!be,ve=Gr(Ke,P)&&To(re,ie)?ie.obsSet={}:be;if(_e){var Oe,be=function(ot){return ot="idb://".concat(v,"/").concat(A,"/").concat(ot),ve[ot]||(ve[ot]=new Tn)},Ve=be(""),rt=be(":dels"),_e=le[re](ie),it=_e[0],_e=_e[1];if((re==="query"&&it.isPrimaryKey&&!ie.values?rt:be(it.name||"")).add(_e),!it.isPrimaryKey){if(re!=="count")return Oe=re==="query"&&ne&&ie.values&&P.query(a(a({},ie),{values:!1})),P[re].apply(this,arguments).then(function(ot){if(re==="query"){if(ne&&ie.values)return Oe.then(function(Ct){return Ct=Ct.result,Ve.addKeys(Ct),ot});var Xe=ie.values?ot.result.map(ye):ot.result;(ie.values?Ve:rt).addKeys(Xe)}else{var ut,bt;if(re==="openCursor")return bt=ie.values,(ut=ot)&&Object.create(ut,{key:{get:function(){return rt.addKey(ut.primaryKey),ut.key}},primaryKey:{get:function(){var Ct=ut.primaryKey;return rt.addKey(Ct),Ct}},value:{get:function(){return bt&&Ve.addKey(ut.primaryKey),ut.value}}})}return ot});rt.add(E)}}return P[re].apply(this,arguments)}}),ae}})}};function So(f,v,E){var A;return E.numFailures===0?v:v.type==="deleteRange"||(A=v.keys?v.keys.length:"values"in v&&v.values?v.values.length:1,E.numFailures===A)?null:(A=a({},v),c(A.keys)&&(A.keys=A.keys.filter(function(B,P){return!(P in E.failures)})),"values"in A&&c(A.values)&&(A.values=A.values.filter(function(B,P){return!(P in E.failures)})),A)}function Na(f,v){return E=f,((A=v).lower===void 0||(A.lowerOpen?0<At(E,A.lower):0<=At(E,A.lower)))&&(E=f,(A=v).upper===void 0||(A.upperOpen?At(E,A.upper)<0:At(E,A.upper)<=0));var E,A}function Cs(f,v,E,A,B,P){var U,H,te,ye,ne,J;return!E||E.length===0||(U=v.query.index,H=U.multiEntry,te=v.query.range,ye=A.schema.primaryKey.extractKey,ne=U.extractKey,J=(U.lowLevelIndex||U).extractKey,(A=E.reduce(function(ae,le){var re=ae,ie=[];if(le.type==="add"||le.type==="put")for(var be=new Tn,_e=le.values.length-1;0<=_e;--_e){var ve,Oe=le.values[_e],Ve=ye(Oe);!be.hasKey(Ve)&&(ve=ne(Oe),H&&c(ve)?ve.some(function(ot){return Na(ot,te)}):Na(ve,te))&&(be.addKey(Ve),ie.push(Oe))}switch(le.type){case"add":var rt=new Tn().addKeys(v.values?ae.map(function(Xe){return ye(Xe)}):ae),re=ae.concat(v.values?ie.filter(function(Xe){return Xe=ye(Xe),!rt.hasKey(Xe)&&(rt.addKey(Xe),!0)}):ie.map(function(Xe){return ye(Xe)}).filter(function(Xe){return!rt.hasKey(Xe)&&(rt.addKey(Xe),!0)}));break;case"put":var it=new Tn().addKeys(le.values.map(function(Xe){return ye(Xe)}));re=ae.filter(function(Xe){return!it.hasKey(v.values?ye(Xe):Xe)}).concat(v.values?ie:ie.map(function(Xe){return ye(Xe)}));break;case"delete":var Ge=new Tn().addKeys(le.keys);re=ae.filter(function(Xe){return!Ge.hasKey(v.values?ye(Xe):Xe)});break;case"deleteRange":var lt=le.range;re=ae.filter(function(Xe){return!Na(ye(Xe),lt)})}return re},f))===f)?f:(A.sort(function(ae,le){return At(J(ae),J(le))||At(ye(ae),ye(le))}),v.limit&&v.limit<1/0&&(A.length>v.limit?A.length=v.limit:f.length===v.limit&&A.length<v.limit&&(B.dirty=!0)),P?Object.freeze(A):A)}function bi(f,v){return At(f.lower,v.lower)===0&&At(f.upper,v.upper)===0&&!!f.lowerOpen==!!v.lowerOpen&&!!f.upperOpen==!!v.upperOpen}function ra(f,v){return((E,A,B,P)=>{if(E===void 0)return A!==void 0?-1:0;if(A===void 0)return 1;if((E=At(E,A))===0){if(B&&P)return 0;if(B)return 1;if(P)return-1}return E})(f.lower,v.lower,f.lowerOpen,v.lowerOpen)<=0&&0<=((E,A,B,P)=>{if(E===void 0)return A!==void 0?1:0;if(A===void 0)return-1;if((E=At(E,A))===0){if(B&&P)return 0;if(B)return-1;if(P)return 1}return E})(f.upper,v.upper,f.upperOpen,v.upperOpen)}function kl(f,v,E,A){f.subscribers.add(E),A.addEventListener("abort",function(){var B,P;f.subscribers.delete(E),f.subscribers.size===0&&(B=f,P=v,setTimeout(function(){B.subscribers.size===0&&me(P,B)},3e3))})}var qa={stack:"dbcore",level:0,name:"Cache",create:function(f){var v=f.schema.name;return a(a({},f),{transaction:function(E,A,B){var P,U,H=f.transaction(E,A,B);return A==="readwrite"&&(B=(P=new AbortController).signal,H.addEventListener("abort",(U=function(te){return function(){if(P.abort(),A==="readwrite"){for(var ye=new Set,ne=0,J=E;ne<J.length;ne++){var ae=J[ne],le=Hr["idb://".concat(v,"/").concat(ae)];if(le){var re=f.table(ae),ie=le.optimisticOps.filter(function(ut){return ut.trans===H});if(H._explicit&&te&&H.mutatedParts)for(var be=0,_e=Object.values(le.queries.query);be<_e.length;be++)for(var ve=0,Oe=(it=_e[be]).slice();ve<Oe.length;ve++)Es((Ge=Oe[ve]).obsSet,H.mutatedParts)&&(me(it,Ge),Ge.subscribers.forEach(function(ut){return ye.add(ut)}));else if(0<ie.length){le.optimisticOps=le.optimisticOps.filter(function(ut){return ut.trans!==H});for(var Ve=0,rt=Object.values(le.queries.query);Ve<rt.length;Ve++)for(var it,Ge,lt,ot=0,Xe=(it=rt[Ve]).slice();ot<Xe.length;ot++)(Ge=Xe[ot]).res!=null&&H.mutatedParts&&(te&&!Ge.dirty?(lt=Object.isFrozen(Ge.res),lt=Cs(Ge.res,Ge.req,ie,re,Ge,lt),Ge.dirty?(me(it,Ge),Ge.subscribers.forEach(function(ut){return ye.add(ut)})):lt!==Ge.res&&(Ge.res=lt,Ge.promise=st.resolve({result:lt}))):(Ge.dirty&&me(it,Ge),Ge.subscribers.forEach(function(ut){return ye.add(ut)})))}}}ye.forEach(function(ut){return ut()})}}})(!1),{signal:B}),H.addEventListener("error",U(!1),{signal:B}),H.addEventListener("complete",U(!0),{signal:B})),H},table:function(E){var A=f.table(E),B=A.schema.primaryKey;return a(a({},A),{mutate:function(P){var U,H=Ke.trans;return!B.outbound&&H.db._options.cache!=="disabled"&&!H.explicit&&H.idbtrans.mode==="readwrite"&&(U=Hr["idb://".concat(v,"/").concat(E)])?(H=A.mutate(P),P.type!=="add"&&P.type!=="put"||!(50<=P.values.length||Oa(B,P).some(function(te){return te==null}))?(U.optimisticOps.push(P),P.mutatedParts&&Ia(P.mutatedParts),H.then(function(te){0<te.numFailures&&(me(U.optimisticOps,P),(te=So(0,P,te))&&U.optimisticOps.push(te),P.mutatedParts)&&Ia(P.mutatedParts)}),H.catch(function(){me(U.optimisticOps,P),P.mutatedParts&&Ia(P.mutatedParts)})):H.then(function(te){var ye=So(0,a(a({},P),{values:P.values.map(function(ne,J){var ae;return te.failures[J]?ne:(M(ae=(ae=B.keyPath)!=null&&ae.includes(".")?he(ne):a({},ne),B.keyPath,te.results[J]),ae)})}),te);U.optimisticOps.push(ye),queueMicrotask(function(){return P.mutatedParts&&Ia(P.mutatedParts)})}),H):A.mutate(P)},query:function(P){var U,H,te,ye,ne,J,ae;return Gr(Ke,A)&&To("query",P)?(U=((te=Ke.trans)==null?void 0:te.db._options.cache)==="immutable",H=(te=Ke).requery,te=te.signal,J=((le,re,ie,be)=>{var _e=Hr["idb://".concat(le,"/").concat(re)];if(!_e)return[];if(!(le=_e.queries[ie]))return[null,!1,_e,null];var ve=le[(be.query?be.query.index.name:null)||""];if(!ve)return[null,!1,_e,null];switch(ie){case"query":var Oe=ve.find(function(Ve){return Ve.req.limit===be.limit&&Ve.req.values===be.values&&bi(Ve.req.query.range,be.query.range)});return Oe?[Oe,!0,_e,ve]:[ve.find(function(Ve){return("limit"in Ve.req?Ve.req.limit:1/0)>=be.limit&&(!be.values||Ve.req.values)&&ra(Ve.req.query.range,be.query.range)}),!1,_e,ve];case"count":return Oe=ve.find(function(Ve){return bi(Ve.req.query.range,be.query.range)}),[Oe,!!Oe,_e,ve]}})(v,E,"query",P),ae=J[0],ye=J[2],ne=J[3],ae&&J[1]?ae.obsSet=P.obsSet:(J=A.query(P).then(function(le){var re=le.result;if(ae&&(ae.res=re),U){for(var ie=0,be=re.length;ie<be;++ie)Object.freeze(re[ie]);Object.freeze(re)}else le.result=he(re);return le}).catch(function(le){return ne&&ae&&me(ne,ae),Promise.reject(le)}),ae={obsSet:P.obsSet,promise:J,subscribers:new Set,type:"query",req:P,dirty:!1},ne?ne.push(ae):(ne=[ae],(ye=ye||(Hr["idb://".concat(v,"/").concat(E)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[P.query.index.name||""]=ne)),kl(ae,ne,H,te),ae.promise.then(function(le){return{result:Cs(le.result,P,ye==null?void 0:ye.optimisticOps,A,ae,U)}})):A.query(P)}})}})}};function ia(f,v){return new Proxy(f,{get:function(E,A,B){return A==="db"?v:Reflect.get(E,A,B)}})}tn.prototype.version=function(f){if(isNaN(f)||f<.1)throw new De.Type("Given version is not a positive number");if(f=Math.round(10*f)/10,this.idbdb||this._state.isBeingOpened)throw new De.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,f);var v=this._versions,E=v.filter(function(A){return A._cfg.version===f})[0];return E||(E=new this.Version(f),v.push(E),v.sort(ys),E.stores({}),this._state.autoSchema=!1),E},tn.prototype._whenReady=function(f){var v=this;return this.idbdb&&(this._state.openComplete||Ke.letThrough||this._vip)?f():new st(function(E,A){if(v._state.openComplete)return A(new De.DatabaseClosed(v._state.dbOpenError));if(!v._state.isBeingOpened){if(!v._state.autoOpen)return void A(new De.DatabaseClosed);v.open().catch(tt)}v._state.dbReadyPromise.then(E,A)}).then(f)},tn.prototype.use=function(B){var v=B.stack,E=B.create,A=B.level,B=B.name,P=(B&&this.unuse({stack:v,name:B}),this._middlewares[v]||(this._middlewares[v]=[]));return P.push({stack:v,create:E,level:A??10,name:B}),P.sort(function(U,H){return U.level-H.level}),this},tn.prototype.unuse=function(f){var v=f.stack,E=f.name,A=f.create;return v&&this._middlewares[v]&&(this._middlewares[v]=this._middlewares[v].filter(function(B){return A?B.create!==A:!!E&&B.name!==E})),this},tn.prototype.open=function(){var f=this;return Xn(St,function(){return Al(f)})},tn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var f=this._state,v=Nr.indexOf(this);if(0<=v&&Nr.splice(v,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}f.isBeingOpened||(f.dbReadyPromise=new st(function(E){f.dbReadyResolve=E}),f.openCanceller=new st(function(E,A){f.cancelOpen=A}))},tn.prototype.close=function(v){var v=(v===void 0?{disableAutoOpen:!0}:v).disableAutoOpen,E=this._state;v?(E.isBeingOpened&&E.cancelOpen(new De.DatabaseClosed),this._close(),E.autoOpen=!1,E.dbOpenError=new De.DatabaseClosed):(this._close(),E.autoOpen=this._options.autoOpen||E.isBeingOpened,E.openComplete=!1,E.dbOpenError=null)},tn.prototype.delete=function(f){var v=this,E=(f===void 0&&(f={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),A=this._state;return new st(function(B,P){function U(){v.close(f);var H=v._deps.indexedDB.deleteDatabase(v.name);H.onsuccess=xt(function(){var te,ye,ne;te=v._deps,ye=v.name,Da(ne=te.indexedDB)||ye===Xi||bs(ne,te.IDBKeyRange).delete(ye).catch(tt),B()}),H.onerror=Wn(P),H.onblocked=v._fireOnBlocked}if(E)throw new De.InvalidArgument("Invalid closeOptions argument to db.delete()");A.isBeingOpened?A.dbReadyPromise.then(U):U()})},tn.prototype.backendDB=function(){return this.idbdb},tn.prototype.isOpen=function(){return this.idbdb!==null},tn.prototype.hasBeenClosed=function(){var f=this._state.dbOpenError;return f&&f.name==="DatabaseClosed"},tn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},tn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(tn.prototype,"tables",{get:function(){var f=this;return u(this._allTables).map(function(v){return f._allTables[v]})},enumerable:!1,configurable:!0}),tn.prototype.transaction=function(){var f=(function(v,E,A){var B=arguments.length;if(B<2)throw new De.InvalidArgument("Too few arguments");for(var P=new Array(B-1);--B;)P[B-1]=arguments[B];return A=P.pop(),[v,Q(P),A]}).apply(this,arguments);return this._transaction.apply(this,f)},tn.prototype._transaction=function(f,v,E){var A,B,P=this,U=Ke.trans,H=(U&&U.db===this&&f.indexOf("!")===-1||(U=null),f.indexOf("?")!==-1);f=f.replace("!","").replace("?","");try{if(B=v.map(function(ye){if(ye=ye instanceof P.Table?ye.name:ye,typeof ye!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return ye}),f=="r"||f===pr)A=pr;else{if(f!="rw"&&f!=Sr)throw new De.InvalidArgument("Invalid transaction mode: "+f);A=Sr}if(U){if(U.mode===pr&&A===Sr){if(!H)throw new De.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");U=null}U&&B.forEach(function(ye){if(U&&U.storeNames.indexOf(ye)===-1){if(!H)throw new De.SubTransaction("Table "+ye+" not included in parent transaction.");U=null}}),H&&U&&!U.active&&(U=null)}}catch(ye){return U?U._promise(null,function(ne,J){J(ye)}):Kt(ye)}var te=(function ye(ne,J,ae,le,re){return st.resolve().then(function(){var ve=Ke.transless||Ke,ie=ne._createTransaction(J,ae,ne._dbSchema,le),ve=(ie.explicit=!0,{trans:ie,transless:ve});if(le)ie.idbtrans=le.idbtrans;else try{ie.create(),ie.idbtrans._explicit=!0,ne._state.PR1398_maxLoop=3}catch(Oe){return Oe.name===Ce.InvalidState&&ne.isOpen()&&0<--ne._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ne.close({disableAutoOpen:!1}),ne.open().then(function(){return ye(ne,J,ae,null,re)})):Kt(Oe)}var be,_e=z(re),ve=(_e&&Jt(),st.follow(function(){var Oe;(be=re.call(ie,ie))&&(_e?(Oe=gn.bind(null,null),be.then(Oe,Oe)):typeof be.next=="function"&&typeof be.throw=="function"&&(be=na(be)))},ve));return(be&&typeof be.then=="function"?st.resolve(be).then(function(Oe){return ie.active?Oe:Kt(new De.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ve.then(function(){return be})).then(function(Oe){return le&&ie._resolve(),ie._completion.then(function(){return Oe})}).catch(function(Oe){return ie._reject(Oe),Kt(Oe)})})}).bind(null,this,A,B,U,E);return U?U._promise(A,te,"lock"):Ke.trans?Xn(Ke.transless,function(){return P._whenReady(te)}):this._whenReady(te)},tn.prototype.table=function(f){if(b(this._allTables,f))return this._allTables[f];throw new De.InvalidTable("Table ".concat(f," does not exist"))};var ar=tn;function tn(f,v){var E,A,B,P,U,H=this,te=(this._middlewares={},this.verno=0,tn.dependencies),te=(this._options=v=a({addons:tn.addons,autoOpen:!0,indexedDB:te.indexedDB,IDBKeyRange:te.IDBKeyRange,cache:"cloned"},v),this._deps={indexedDB:v.indexedDB,IDBKeyRange:v.IDBKeyRange},v.addons),ye=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:tt,dbReadyPromise:null,cancelOpen:tt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:v.autoOpen}),ne=(ye.dbReadyPromise=new st(function(J){ye.dbReadyResolve=J}),ye.openCanceller=new st(function(J,ae){ye.cancelOpen=ae}),this._state=ye,this.name=f,this.on=Yi(this,"populate","blocked","versionchange","close",{ready:[Le,tt]}),this.once=function(J,ae){var le=function(){for(var re=[],ie=0;ie<arguments.length;ie++)re[ie]=arguments[ie];H.on(J).unsubscribe(le),ae.apply(H,re)};return H.on(J,le)},this.on.ready.subscribe=N(this.on.ready.subscribe,function(J){return function(ae,le){tn.vip(function(){var re,ie=H._state;ie.openComplete?(ie.dbOpenError||st.resolve().then(ae),le&&J(ae)):ie.onReadyBeingFired?(ie.onReadyBeingFired.push(ae),le&&J(ae)):(J(ae),re=H,le||J(function be(){re.on.ready.unsubscribe(ae),re.on.ready.unsubscribe(be)}))})}}),this.Collection=(E=this,bn(El.prototype,function(be,ie){this.db=E;var le=cs,re=null;if(ie)try{le=ie()}catch(ve){re=ve}var ie=be._ctx,be=ie.table,_e=be.hook.reading.fire;this._ctx={table:be,index:ie.index,isPrimKey:!ie.index||be.schema.primKey.keyPath&&ie.index===be.schema.primKey.name,range:le,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:re,or:ie.or,valueMapper:_e!==oe?_e:null}})),this.Table=(A=this,bn(fs.prototype,function(J,ae,le){this.db=A,this._tx=le,this.name=J,this.schema=ae,this.hook=A._allTables[J]?A._allTables[J].hook:Yi(null,{creating:[Ze,tt],reading:[pe,oe],updating:[Ye,tt],deleting:[Qe,tt]})})),this.Transaction=(B=this,bn(gs.prototype,function(J,ae,le,re,ie){var be=this;J!=="readonly"&&ae.forEach(function(_e){_e=(_e=le[_e])==null?void 0:_e.yProps,_e&&(ae=ae.concat(_e.map(function(ve){return ve.updatesTable})))}),this.db=B,this.mode=J,this.storeNames=ae,this.schema=le,this.chromeTransactionDurability=re,this.idbtrans=null,this.on=Yi(this,"complete","error","abort"),this.parent=ie||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new st(function(_e,ve){be._resolve=_e,be._reject=ve}),this._completion.then(function(){be.active=!1,be.on.complete.fire()},function(_e){var ve=be.active;return be.active=!1,be.on.error.fire(_e),be.parent?be.parent._reject(_e):ve&&be.idbtrans&&be.idbtrans.abort(),Kt(_e)})})),this.Version=(P=this,bn(_l.prototype,function(J){this.db=P,this._cfg={version:J,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(U=this,bn(jr.prototype,function(J,ae,le){if(this.db=U,this._ctx={table:J,index:ae===":id"?null:ae,or:le},this._cmp=this._ascending=At,this._descending=function(re,ie){return At(ie,re)},this._max=function(re,ie){return 0<At(re,ie)?re:ie},this._min=function(re,ie){return At(re,ie)<0?re:ie},this._IDBKeyRange=U._deps.IDBKeyRange,!this._IDBKeyRange)throw new De.MissingAPI})),this.on("versionchange",function(J){0<J.newVersion?console.warn("Another connection wants to upgrade database '".concat(H.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(H.name,"'. Closing db now to resume the delete request.")),H.close({disableAutoOpen:!1})}),this.on("blocked",function(J){!J.newVersion||J.newVersion<J.oldVersion?console.warn("Dexie.delete('".concat(H.name,"') was blocked")):console.warn("Upgrade '".concat(H.name,"' blocked by other connection holding version ").concat(J.oldVersion/10))}),this._maxKey=pi(v.IDBKeyRange),this._createTransaction=function(J,ae,le,re){return new H.Transaction(J,ae,le,H._options.chromeTransactionDurability,re)},this._fireOnBlocked=function(J){H.on("blocked").fire(J),Nr.filter(function(ae){return ae.name===H.name&&ae!==H&&!ae._state.vcFired}).map(function(ae){return ae.on("versionchange").fire(J)})},this.use(xo),this.use(qa),this.use(Cl),this.use(Rl),this.use(bo),new Proxy(this,{get:function(J,ae,le){var re;return ae==="_vip"||(ae==="table"?function(ie){return ia(H.table(ie),ne)}:(re=Reflect.get(J,ae,le))instanceof fs?ia(re,ne):ae==="tables"?re.map(function(ie){return ia(ie,ne)}):ae==="_createTransaction"?function(){return ia(re.apply(this,arguments),ne)}:re)}}));this.vip=ne,te.forEach(function(J){return J(H)})}var xi,Xr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Eo=(La.prototype.subscribe=function(f,v,E){return this._subscribe(f&&typeof f!="function"?f:{next:f,error:v,complete:E})},La.prototype[Xr]=function(){return this},La);function La(f){this._subscribe=f}try{xi={indexedDB:d.indexedDB||d.mozIndexedDB||d.webkitIndexedDB||d.msIndexedDB,IDBKeyRange:d.IDBKeyRange||d.webkitIDBKeyRange}}catch{xi={indexedDB:null,IDBKeyRange:null}}function wo(f){var v,E=!1,A=new Eo(function(B){var P=z(f),U,H=!1,te={},ye={},ne={get closed(){return H},unsubscribe:function(){H||(H=!0,U&&U.abort(),J&&xn.storagemutated.unsubscribe(le))}},J=(B.start&&B.start(ne),!1),ae=function(){return Tr(re)},le=function(ie){Ba(te,ie),Es(ye,te)&&ae()},re=function(){var ie,be,_e;!H&&xi.indexedDB&&(te={},ie={},U&&U.abort(),U=new AbortController,_e=(ve=>{var Oe=Y();try{P&&Jt();var Ve=Ht(f,ve);return Ve=P?Ve.finally(gn):Ve}finally{Oe&&We()}})(be={subscr:ie,signal:U.signal,requery:ae,querier:f,trans:null}),Promise.resolve(_e).then(function(ve){E=!0,v=ve,H||be.signal.aborted||(te={},(Oe=>{for(var Ve in Oe)if(b(Oe,Ve))return;return 1})(ye=ie)||J||(xn(hi,le),J=!0),Tr(function(){return!H&&B.next&&B.next(ve)}))},function(ve){E=!1,["DatabaseClosedError","AbortError"].includes(ve==null?void 0:ve.name)||H||Tr(function(){H||B.error&&B.error(ve)})}))};return setTimeout(ae,0),ne});return A.hasValue=function(){return E},A.getValue=function(){return v},A}var Kr=ar;function ks(f){var v=Ar;try{Ar=!0,xn.storagemutated.fire(f),As(f,!0)}finally{Ar=v}}x(Kr,a(a({},Z),{delete:function(f){return new Kr(f,{addons:[]}).delete()},exists:function(f){return new Kr(f,{addons:[]}).open().then(function(v){return v.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(f){try{return v=Kr.dependencies,E=v.indexedDB,v=v.IDBKeyRange,(Da(E)?Promise.resolve(E.databases()).then(function(A){return A.map(function(B){return B.name}).filter(function(B){return B!==Xi})}):bs(E,v).toCollection().primaryKeys()).then(f)}catch{return Kt(new De.MissingAPI)}var v,E},defineClass:function(){return function(f){p(this,f)}},ignoreTransaction:function(f){return Ke.trans?Xn(Ke.transless,f):f()},vip:xs,async:function(f){return function(){try{var v=na(f.apply(this,arguments));return v&&typeof v.then=="function"?v:st.resolve(v)}catch(E){return Kt(E)}}},spawn:function(f,v,E){try{var A=na(f.apply(E,v||[]));return A&&typeof A.then=="function"?A:st.resolve(A)}catch(B){return Kt(B)}},currentTransaction:{get:function(){return Ke.trans||null}},waitFor:function(f,v){return f=st.resolve(typeof f=="function"?Kr.ignoreTransaction(f):f).timeout(v||6e4),Ke.trans?Ke.trans.waitFor(f):f},Promise:st,debug:{get:function(){return $e},set:function(f){ze(f)}},derive:_,extend:p,props:x,override:N,Events:Yi,on:xn,liveQuery:wo,extendObservabilitySet:Ba,getByKeyPath:V,setByKeyPath:M,delByKeyPath:function(f,v){typeof v=="string"?M(f,v,void 0):"length"in v&&[].map.call(v,function(E){M(f,E,void 0)})},shallowClone:q,deepClone:he,getObjectDiff:Pa,cmp:At,asap:j,minKey:-1/0,addons:[],connections:Nr,errnames:Ce,dependencies:xi,cache:Hr,semVer:"4.3.0",version:"4.3.0".split(".").map(function(f){return parseInt(f)}).reduce(function(f,v,E){return f+v/Math.pow(10,2*E)})})),Kr.maxKey=pi(Kr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(xn(hi,function(f){Ar||(f=new CustomEvent(Ur,{detail:f}),Ar=!0,dispatchEvent(f),Ar=!1)}),addEventListener(Ur,function(f){f=f.detail,Ar||ks(f)}));var Ti,Ar=!1,Bn=function(){};return typeof BroadcastChannel<"u"&&((Bn=function(){(Ti=new BroadcastChannel(Ur)).onmessage=function(f){return f.data&&ks(f.data)}})(),typeof Ti.unref=="function"&&Ti.unref(),xn(hi,function(f){Ar||Ti.postMessage(f)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(f){if(!ar.disableBfCache&&f.persisted){$e&&console.debug("Dexie: handling persisted pagehide"),Ti!=null&&Ti.close();for(var v=0,E=Nr;v<E.length;v++)E[v].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(f){!ar.disableBfCache&&f.persisted&&($e&&console.debug("Dexie: handling persisted pageshow"),Bn(),ks({all:new Tn(-1/0,[[]])}))})),st.rejectionMapper=function(f,v){return!f||f instanceof Ie||f instanceof TypeError||f instanceof SyntaxError||!f.name||!mt[f.name]?f:(v=new mt[f.name](v||f.message,f),"stack"in f&&S(v,"stack",{get:function(){return this.inner.stack}}),v)},ze($e),a(ar,Object.freeze({__proto__:null,Dexie:ar,Entity:co,PropModification:di,RangeSet:Tn,add:function(f){return new di({add:f})},cmp:At,default:ar,liveQuery:wo,mergeRanges:Vr,rangesOverlap:go,remove:function(f){return new di({remove:f})},replacePrefix:function(f,v){return new di({replacePrefix:[f,v]})}}),{default:ar}),ar})})(dexie_min$1)),dexie_min$1.exports}var dexie_minExports=requireDexie_min();const _Dexie=getDefaultExportFromCjs(dexie_minExports),DexieSymbol=Symbol.for("Dexie"),Dexie=globalThis[DexieSymbol]||(globalThis[DexieSymbol]=_Dexie);if(_Dexie.semVer!==Dexie.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${_Dexie.semVer} and ${Dexie.semVer}`);const{liveQuery,mergeRanges,rangesOverlap,RangeSet,cmp,Entity,PropModification,replacePrefix,add,remove,DexieYProvider}=Dexie;class StreamixDatabase extends Dexie{constructor(){super("StreamixDB");En(this,"tracks");En(this,"albums");En(this,"playlists");En(this,"cache");this.version(1).stores({tracks:"++id, title, artist, album, duration, source, dateAdded",albums:"++id, name, artist",playlists:"++id, name, createdAt",cache:"key, expiry"})}}const db=new StreamixDatabase;async function addTrack(n){const r=await db.tracks.add({...n,id:crypto.randomUUID(),dateAdded:Date.now()});return String(r)}async function getTracksBySource(n){return db.tracks.where("source").equals(n).toArray()}async function searchTracks(n){const r=n.toLowerCase();return db.tracks.filter(s=>s.title.toLowerCase().includes(r)||s.artist.toLowerCase().includes(r)||s.album.toLowerCase().includes(r)).toArray()}async function clearLocalTracks(){await db.tracks.where("source").equals("local").delete()}async function setCache(n,r,s){await db.cache.put({key:n,value:r,expiry:Date.now()+s*1e3})}async function getCache(n){const r=await db.cache.get(n);return r?Date.now()>r.expiry?(await db.cache.delete(n),null):r.value:null}const LRCLIB_API="https://lrclib.net/api";class LyricsService{async getLyrics(r,s,a,l){const d=`lyrics_${s}_${r}`.toLowerCase().replace(/\s+/g,"_"),u=await getCache(d);if(u)return u;try{const c=new URLSearchParams({track_name:r,artist_name:s});a&&c.set("album_name",a),l&&c.set("duration",String(l));const p=await fetch(`${LRCLIB_API}/get?${c}`);if(p.ok){const h=await p.json(),y=this.parseLRCLibResponse(h,`${s}_${r}`);return y&&await setCache(d,y,1440*60),y}return p.status===404?this.searchLyrics(r,s,d):null}catch(c){return console.error("[LyricsService] Error fetching lyrics:",c),null}}async searchLyrics(r,s,a){try{const l=`${s} ${r}`,d=await fetch(`${LRCLIB_API}/search?q=${encodeURIComponent(l)}`);if(!d.ok)return null;const u=await d.json();if(!Array.isArray(u)||u.length===0)return null;const c=u.find(h=>h.syncedLyrics)||u[0],p=this.parseLRCLibResponse(c,`${s}_${r}`);return p&&await setCache(a,p,1440*60),p}catch(l){return console.error("[LyricsService] Search error:",l),null}}parseLRCLibResponse(r,s){if(!r)return null;if(r.syncedLyrics){const a=this.parseLRC(r.syncedLyrics);return{trackId:s,synced:!0,lines:a,source:"lrclib"}}if(r.plainLyrics){const a=r.plainLyrics.split(`
`).filter(l=>l.trim()).map((l,d)=>({time:d*3,text:l.trim()}));return{trackId:s,synced:!1,lines:a,source:"lrclib"}}return null}parseLRC(r){const s=[],a=/\[(\d{2}):(\d{2})(?:\.(\d{2,3}))?\](.*)/g;let l;for(;(l=a.exec(r))!==null;){const d=parseInt(l[1],10),u=parseInt(l[2],10),c=l[3]?parseInt(l[3].padEnd(3,"0"),10):0,p=l[4].trim();p&&s.push({time:d*60+u+c/1e3,text:p})}return s.sort((d,u)=>d.time-u.time)}getCurrentLine(r,s){if(!r.synced||r.lines.length===0)return-1;for(let a=r.lines.length-1;a>=0;a--)if(s>=r.lines[a].time)return a;return-1}}const lyricsService=new LyricsService;function LyricsPanel(){const{currentTrack:n,progress:r}=usePlayerStore(),[s,a]=reactExports.useState(null),[l,d]=reactExports.useState(!1),[u,c]=reactExports.useState(-1),p=reactExports.useRef(null);return reactExports.useEffect(()=>{if(!n){a(null);return}d(!0),a(null),lyricsService.getLyrics(n.title,n.artist,n.album,n.duration).then(h=>{a(h)}).finally(()=>{d(!1)})},[n==null?void 0:n.id]),reactExports.useEffect(()=>{if(!(s!=null&&s.synced))return;const h=lyricsService.getCurrentLine(s,r);c(h)},[s,r]),reactExports.useEffect(()=>{if(!p.current||u<0)return;const y=p.current.querySelector(`[data-line="${u}"]`);y&&y.scrollIntoView({behavior:"smooth",block:"center"})},[u]),l?jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):s?jsxRuntimeExports.jsx("div",{ref:p,className:"flex-1 w-full max-w-lg overflow-y-auto scrollbar-hide px-4",children:jsxRuntimeExports.jsx("div",{className:"py-16 space-y-4",children:s.lines.map((h,y)=>jsxRuntimeExports.jsx(motion.p,{"data-line":y,initial:{opacity:.4},animate:{opacity:u===y?1:.4,scale:u===y?1.05:1},transition:{duration:.3},className:`
              text-center text-xl font-medium transition-colors duration-300
              ${u===y?"text-primary":"text-white"}
            `,children:h.text},y))})}):jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-center",children:jsxRuntimeExports.jsx("p",{className:"text-secondary text-center",children:"No lyrics available for this track"})})}function formatTime(n){if(!n||!isFinite(n))return"0:00";const r=Math.floor(n/60),s=Math.floor(n%60);return`${r}:${s.toString().padStart(2,"0")}`}function NowPlaying(){const{currentTrack:n,isPlaying:r,progress:s,duration:a,shuffle:l,repeat:d,showLyrics:u,togglePlayPause:c,next:p,previous:h,seek:y,toggleNowPlaying:b,toggleShuffle:x,cycleRepeat:T,toggleLyrics:S}=usePlayerStore(),[_,C]=reactExports.useState(!1);if(!n)return null;const k=a>0?s/a*100:0;return jsxRuntimeExports.jsxs(motion.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed inset-0 z-50 bg-surface flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4",children:[jsxRuntimeExports.jsx("button",{onClick:b,className:"p-2 text-secondary hover:text-white transition-colors",children:jsxRuntimeExports.jsx(X,{size:24})}),jsxRuntimeExports.jsx("span",{className:"text-sm text-secondary uppercase tracking-wider",children:"Now Playing"}),jsxRuntimeExports.jsx("button",{onClick:()=>C(!_),className:`p-2 transition-colors ${_?"text-primary":"text-secondary hover:text-white"}`,children:jsxRuntimeExports.jsx(ListMusic,{size:24})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center px-8 pb-8 overflow-hidden",children:[u?jsxRuntimeExports.jsx(LyricsPanel,{}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1},className:"relative w-full max-w-sm aspect-square rounded-2xl overflow-hidden shadow-2xl mb-8",children:[n.coverArt?jsxRuntimeExports.jsx("img",{src:n.coverArt,alt:n.album,className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full bg-surface-container flex items-center justify-center",children:jsxRuntimeExports.jsx(Visualizer,{})}),r&&n.coverArt&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-black/80 to-transparent flex items-end p-4",children:jsxRuntimeExports.jsx(Visualizer,{})})]}),jsxRuntimeExports.jsxs("div",{className:"text-center mb-8 w-full max-w-sm",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-2 truncate",children:n.title}),jsxRuntimeExports.jsx("p",{className:"text-secondary truncate",children:n.artist})]})]}),jsxRuntimeExports.jsxs("div",{className:"w-full max-w-sm mb-6",children:[jsxRuntimeExports.jsx("div",{className:"relative h-1 bg-white/10 rounded-full cursor-pointer",onClick:I=>{const N=I.currentTarget.getBoundingClientRect(),F=(I.clientX-N.left)/N.width;y(F)},children:jsxRuntimeExports.jsx(motion.div,{className:"absolute h-full bg-primary rounded-full",style:{width:`${k}%`}})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mt-2 text-sm text-secondary",children:[jsxRuntimeExports.jsx("span",{children:formatTime(s)}),jsxRuntimeExports.jsx("span",{children:formatTime(a)})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-6 mb-8",children:[jsxRuntimeExports.jsx("button",{onClick:x,className:`p-2 transition-colors ${l?"text-primary":"text-secondary hover:text-white"}`,children:jsxRuntimeExports.jsx(Shuffle,{size:22})}),jsxRuntimeExports.jsx("button",{onClick:h,className:"p-3 text-white hover:text-primary transition-colors",children:jsxRuntimeExports.jsx(SkipBack,{size:28,fill:"currentColor"})}),jsxRuntimeExports.jsx("button",{onClick:c,className:"p-5 bg-primary rounded-full hover:bg-primary-dim transition-colors glow-primary",children:r?jsxRuntimeExports.jsx(Pause,{size:32,className:"text-black"}):jsxRuntimeExports.jsx(Play,{size:32,className:"text-black ml-1"})}),jsxRuntimeExports.jsx("button",{onClick:p,className:"p-3 text-white hover:text-primary transition-colors",children:jsxRuntimeExports.jsx(SkipForward,{size:28,fill:"currentColor"})}),jsxRuntimeExports.jsx("button",{onClick:T,className:`p-2 transition-colors ${d!=="off"?"text-primary":"text-secondary hover:text-white"}`,children:d==="one"?jsxRuntimeExports.jsx(Repeat1,{size:22}):jsxRuntimeExports.jsx(Repeat,{size:22})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-8",children:[jsxRuntimeExports.jsx("button",{className:"p-2 text-secondary hover:text-white transition-colors",children:jsxRuntimeExports.jsx(Heart,{size:22})}),jsxRuntimeExports.jsx("button",{onClick:S,className:`p-2 transition-colors ${u?"text-primary":"text-secondary hover:text-white"}`,children:jsxRuntimeExports.jsx(MicVocal,{size:22})}),jsxRuntimeExports.jsx("button",{className:"p-2 text-secondary hover:text-white transition-colors",children:jsxRuntimeExports.jsx(Volume2,{size:22})})]})]})]})}function HomeView(){const{setView:n}=usePlayerStore(),r=[{id:"local",icon:Music,title:"Local Library",subtitle:"Your offline collection",color:"from-purple-500 to-pink-500",action:()=>n("library")},{id:"spotify",icon:Sparkles,title:"Stream Music",subtitle:"Search & play instantly",color:"from-green-500 to-emerald-500",action:()=>n("search")},{id:"discover",icon:Radio,title:"Discover",subtitle:"Find new music",color:"from-blue-500 to-cyan-500",action:()=>n("search")}];return jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsxs(motion.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-3xl font-bold mb-2",children:["Good ",getTimeOfDay()]}),jsxRuntimeExports.jsx("p",{className:"text-secondary",children:"What would you like to listen to?"})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:r.map((s,a)=>{const l=s.icon;return jsxRuntimeExports.jsxs(motion.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1},onClick:s.action,className:`
                relative overflow-hidden rounded-2xl p-6 text-left
                bg-gradient-to-br ${s.color}
                hover:scale-[1.02] active:scale-[0.98]
                transition-transform duration-200
              `,children:[jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsx(l,{size:32,className:"mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:s.title}),jsxRuntimeExports.jsx("p",{className:"text-white/80 text-sm",children:s.subtitle})]}),jsxRuntimeExports.jsx("div",{className:"absolute -right-8 -bottom-8 w-32 h-32 rounded-full bg-white/10"}),jsxRuntimeExports.jsx("div",{className:"absolute -right-4 -bottom-4 w-20 h-20 rounded-full bg-white/10"})]},s.id)})}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"glass rounded-2xl p-6 cursor-pointer hover:bg-white/5 transition-colors",onClick:()=>n("search"),children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-primary/20 rounded-full text-primary",children:jsxRuntimeExports.jsx(Sparkles,{size:24})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Start Listening"}),jsxRuntimeExports.jsx("p",{className:"text-secondary",children:"Search for any song to stream instantly. No login required."})]})]})})]})}function getTimeOfDay(){const n=new Date().getHours();return n<12?"morning":n<17?"afternoon":"evening"}var lib$3={},browser$3={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var n=1e3,r=n*60,s=r*60,a=s*24,l=a*7,d=a*365.25;ms=function(y,b){b=b||{};var x=typeof y;if(x==="string"&&y.length>0)return u(y);if(x==="number"&&isFinite(y))return b.long?p(y):c(y);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(y))};function u(y){if(y=String(y),!(y.length>100)){var b=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(y);if(b){var x=parseFloat(b[1]),T=(b[2]||"ms").toLowerCase();switch(T){case"years":case"year":case"yrs":case"yr":case"y":return x*d;case"weeks":case"week":case"w":return x*l;case"days":case"day":case"d":return x*a;case"hours":case"hour":case"hrs":case"hr":case"h":return x*s;case"minutes":case"minute":case"mins":case"min":case"m":return x*r;case"seconds":case"second":case"secs":case"sec":case"s":return x*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return x;default:return}}}}function c(y){var b=Math.abs(y);return b>=a?Math.round(y/a)+"d":b>=s?Math.round(y/s)+"h":b>=r?Math.round(y/r)+"m":b>=n?Math.round(y/n)+"s":y+"ms"}function p(y){var b=Math.abs(y);return b>=a?h(y,b,a,"day"):b>=s?h(y,b,s,"hour"):b>=r?h(y,b,r,"minute"):b>=n?h(y,b,n,"second"):y+" ms"}function h(y,b,x,T){var S=b>=x*1.5;return Math.round(y/x)+" "+T+(S?"s":"")}return ms}var common,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;function n(r){a.debug=a,a.default=a,a.coerce=h,a.disable=c,a.enable=d,a.enabled=p,a.humanize=requireMs(),a.destroy=y,Object.keys(r).forEach(b=>{a[b]=r[b]}),a.names=[],a.skips=[],a.formatters={};function s(b){let x=0;for(let T=0;T<b.length;T++)x=(x<<5)-x+b.charCodeAt(T),x|=0;return a.colors[Math.abs(x)%a.colors.length]}a.selectColor=s;function a(b){let x,T=null,S,_;function C(...k){if(!C.enabled)return;const I=C,N=Number(new Date),F=N-(x||N);I.diff=F,I.prev=x,I.curr=N,x=N,k[0]=a.coerce(k[0]),typeof k[0]!="string"&&k.unshift("%O");let j=0;k[0]=k[0].replace(/%([a-zA-Z%])/g,(M,q)=>{if(M==="%%")return"%";j++;const Se=a.formatters[q];if(typeof Se=="function"){const Q=k[j];M=Se.call(I,Q),k.splice(j,1),j--}return M}),a.formatArgs.call(I,k),(I.log||a.log).apply(I,k)}return C.namespace=b,C.useColors=a.useColors(),C.color=a.selectColor(b),C.extend=l,C.destroy=a.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:()=>T!==null?T:(S!==a.namespaces&&(S=a.namespaces,_=a.enabled(b)),_),set:k=>{T=k}}),typeof a.init=="function"&&a.init(C),C}function l(b,x){const T=a(this.namespace+(typeof x>"u"?":":x)+b);return T.log=this.log,T}function d(b){a.save(b),a.namespaces=b,a.names=[],a.skips=[];const x=(typeof b=="string"?b:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const T of x)T[0]==="-"?a.skips.push(T.slice(1)):a.names.push(T)}function u(b,x){let T=0,S=0,_=-1,C=0;for(;T<b.length;)if(S<x.length&&(x[S]===b[T]||x[S]==="*"))x[S]==="*"?(_=S,C=T,S++):(T++,S++);else if(_!==-1)S=_+1,C++,T=C;else return!1;for(;S<x.length&&x[S]==="*";)S++;return S===x.length}function c(){const b=[...a.names,...a.skips.map(x=>"-"+x)].join(",");return a.enable(""),b}function p(b){for(const x of a.skips)if(u(b,x))return!1;for(const x of a.names)if(u(b,x))return!0;return!1}function h(b){return b instanceof Error?b.stack||b.message:b}function y(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return a.enable(a.load()),a}return common=n,common}var hasRequiredBrowser$3;function requireBrowser$3(){return hasRequiredBrowser$3||(hasRequiredBrowser$3=1,(function(n,r){var s={};r.formatArgs=l,r.save=d,r.load=u,r.useColors=a,r.storage=c(),r.destroy=(()=>{let h=!1;return()=>{h||(h=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function a(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let h;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(h=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(h[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function l(h){if(h[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+h[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const y="color: "+this.color;h.splice(1,0,y,"color: inherit");let b=0,x=0;h[0].replace(/%[a-zA-Z%]/g,T=>{T!=="%%"&&(b++,T==="%c"&&(x=b))}),h.splice(x,0,y)}r.log=console.debug||console.log||(()=>{});function d(h){try{h?r.storage.setItem("debug",h):r.storage.removeItem("debug")}catch{}}function u(){let h;try{h=r.storage.getItem("debug")||r.storage.getItem("DEBUG")}catch{}return!h&&typeof process<"u"&&"env"in process&&(h=s.DEBUG),h}function c(){try{return localStorage}catch{}}n.exports=requireCommon()(r);const{formatters:p}=n.exports;p.j=function(h){try{return JSON.stringify(h)}catch(y){return"[UnexpectedJSONParseError]: "+y.message}}})(browser$3,browser$3.exports)),browser$3.exports}var core$2={},core$1={},ReadStreamTokenizer={},AbstractTokenizer={},lib$2={},EndOfFileStream={},hasRequiredEndOfFileStream;function requireEndOfFileStream(){return hasRequiredEndOfFileStream||(hasRequiredEndOfFileStream=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.EndOfStreamError=n.defaultMessages=void 0,n.defaultMessages="End-Of-Stream";class r extends Error{constructor(){super(n.defaultMessages)}}n.EndOfStreamError=r})(EndOfFileStream)),EndOfFileStream}var StreamReader={},Deferred={},hasRequiredDeferred;function requireDeferred(){if(hasRequiredDeferred)return Deferred;hasRequiredDeferred=1,Object.defineProperty(Deferred,"__esModule",{value:!0}),Deferred.Deferred=void 0;let n=class{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((s,a)=>{this.reject=a,this.resolve=s})}};return Deferred.Deferred=n,Deferred}var hasRequiredStreamReader;function requireStreamReader(){return hasRequiredStreamReader||(hasRequiredStreamReader=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.StreamReader=n.EndOfStreamError=void 0;const r=requireEndOfFileStream(),s=requireDeferred();var a=requireEndOfFileStream();Object.defineProperty(n,"EndOfStreamError",{enumerable:!0,get:function(){return a.EndOfStreamError}});const l=1*1024*1024;class d{constructor(c){if(this.s=c,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!c.read||!c.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new r.EndOfStreamError)),this.s.once("error",p=>this.reject(p)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(c,p,h){const y=await this.read(c,p,h);return this.peekQueue.push(c.subarray(p,p+y)),y}async read(c,p,h){if(h===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new r.EndOfStreamError;let y=h,b=0;for(;this.peekQueue.length>0&&y>0;){const x=this.peekQueue.pop();if(!x)throw new Error("peekData should be defined");const T=Math.min(x.length,y);c.set(x.subarray(0,T),p+b),b+=T,y-=T,T<x.length&&this.peekQueue.push(x.subarray(T))}for(;y>0&&!this.endOfStream;){const x=Math.min(y,l),T=await this.readFromStream(c,p+b,x);if(b+=T,T<x)break;y-=T}return b}async readFromStream(c,p,h){const y=this.s.read(h);if(y)return c.set(y,p),y.length;{const b={buffer:c,offset:p,length:h,deferred:new s.Deferred};return this.deferred=b.deferred,this.s.once("readable",()=>{this.readDeferred(b)}),b.deferred.promise}}readDeferred(c){const p=this.s.read(c.length);p?(c.buffer.set(p,c.offset),c.deferred.resolve(p.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(c)})}reject(c){this.endOfStream=!0,this.deferred&&(this.deferred.reject(c),this.deferred=null)}}n.StreamReader=d})(StreamReader)),StreamReader}var hasRequiredLib$3;function requireLib$3(){return hasRequiredLib$3||(hasRequiredLib$3=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.StreamReader=n.EndOfStreamError=void 0;var r=requireEndOfFileStream();Object.defineProperty(n,"EndOfStreamError",{enumerable:!0,get:function(){return r.EndOfStreamError}});var s=requireStreamReader();Object.defineProperty(n,"StreamReader",{enumerable:!0,get:function(){return s.StreamReader}})})(lib$2)),lib$2}var hasRequiredAbstractTokenizer;function requireAbstractTokenizer(){if(hasRequiredAbstractTokenizer)return AbstractTokenizer;hasRequiredAbstractTokenizer=1,Object.defineProperty(AbstractTokenizer,"__esModule",{value:!0}),AbstractTokenizer.AbstractTokenizer=void 0;const n=requireLib$3();let r=class{constructor(a){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=a||{}}async readToken(a,l=this.position){const d=Buffer.alloc(a.len);if(await this.readBuffer(d,{position:l})<a.len)throw new n.EndOfStreamError;return a.get(d,0)}async peekToken(a,l=this.position){const d=Buffer.alloc(a.len);if(await this.peekBuffer(d,{position:l})<a.len)throw new n.EndOfStreamError;return a.get(d,0)}async readNumber(a){if(await this.readBuffer(this.numBuffer,{length:a.len})<a.len)throw new n.EndOfStreamError;return a.get(this.numBuffer,0)}async peekNumber(a){if(await this.peekBuffer(this.numBuffer,{length:a.len})<a.len)throw new n.EndOfStreamError;return a.get(this.numBuffer,0)}async ignore(a){if(this.fileInfo.size!==void 0){const l=this.fileInfo.size-this.position;if(a>l)return this.position+=l,l}return this.position+=a,a}async close(){}normalizeOptions(a,l){if(l&&l.position!==void 0&&l.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return l?{mayBeLess:l.mayBeLess===!0,offset:l.offset?l.offset:0,length:l.length?l.length:a.length-(l.offset?l.offset:0),position:l.position?l.position:this.position}:{mayBeLess:!1,offset:0,length:a.length,position:this.position}}};return AbstractTokenizer.AbstractTokenizer=r,AbstractTokenizer}var hasRequiredReadStreamTokenizer;function requireReadStreamTokenizer(){if(hasRequiredReadStreamTokenizer)return ReadStreamTokenizer;hasRequiredReadStreamTokenizer=1,Object.defineProperty(ReadStreamTokenizer,"__esModule",{value:!0}),ReadStreamTokenizer.ReadStreamTokenizer=void 0;const n=requireAbstractTokenizer(),r=requireLib$3(),s=256e3;let a=class extends n.AbstractTokenizer{constructor(d,u){super(u),this.streamReader=new r.StreamReader(d)}async getFileInfo(){return this.fileInfo}async readBuffer(d,u){const c=this.normalizeOptions(d,u),p=c.position-this.position;if(p>0)return await this.ignore(p),this.readBuffer(d,u);if(p<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(c.length===0)return 0;const h=await this.streamReader.read(d,c.offset,c.length);if(this.position+=h,(!u||!u.mayBeLess)&&h<c.length)throw new r.EndOfStreamError;return h}async peekBuffer(d,u){const c=this.normalizeOptions(d,u);let p=0;if(c.position){const h=c.position-this.position;if(h>0){const y=new Uint8Array(c.length+h);return p=await this.peekBuffer(y,{mayBeLess:c.mayBeLess}),d.set(y.subarray(h),c.offset),p-h}else if(h<0)throw new Error("Cannot peek from a negative offset in a stream")}if(c.length>0){try{p=await this.streamReader.peek(d,c.offset,c.length)}catch(h){if(u&&u.mayBeLess&&h instanceof r.EndOfStreamError)return 0;throw h}if(!c.mayBeLess&&p<c.length)throw new r.EndOfStreamError}return p}async ignore(d){const u=Math.min(s,d),c=new Uint8Array(u);let p=0;for(;p<d;){const h=d-p,y=await this.readBuffer(c,{length:Math.min(u,h)});if(y<0)return y;p+=y}return p}};return ReadStreamTokenizer.ReadStreamTokenizer=a,ReadStreamTokenizer}var BufferTokenizer={},hasRequiredBufferTokenizer;function requireBufferTokenizer(){if(hasRequiredBufferTokenizer)return BufferTokenizer;hasRequiredBufferTokenizer=1,Object.defineProperty(BufferTokenizer,"__esModule",{value:!0}),BufferTokenizer.BufferTokenizer=void 0;const n=requireLib$3(),r=requireAbstractTokenizer();let s=class extends r.AbstractTokenizer{constructor(l,d){super(d),this.uint8Array=l,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:l.length}async readBuffer(l,d){if(d&&d.position){if(d.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=d.position}const u=await this.peekBuffer(l,d);return this.position+=u,u}async peekBuffer(l,d){const u=this.normalizeOptions(l,d),c=Math.min(this.uint8Array.length-u.position,u.length);if(!u.mayBeLess&&c<u.length)throw new n.EndOfStreamError;return l.set(this.uint8Array.subarray(u.position,u.position+c),u.offset),c}async close(){}};return BufferTokenizer.BufferTokenizer=s,BufferTokenizer}var hasRequiredCore$2;function requireCore$2(){return hasRequiredCore$2||(hasRequiredCore$2=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.fromBuffer=n.fromStream=n.EndOfStreamError=void 0;const r=requireReadStreamTokenizer(),s=requireBufferTokenizer();var a=requireLib$3();Object.defineProperty(n,"EndOfStreamError",{enumerable:!0,get:function(){return a.EndOfStreamError}});function l(u,c){return c=c||{},new r.ReadStreamTokenizer(u,c)}n.fromStream=l;function d(u,c){return new s.BufferTokenizer(u,c)}n.fromBuffer=d})(core$1)),core$1}var ParserFactory={},lib$1={},ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredIeee754;function requireIeee754(){return hasRequiredIeee754||(hasRequiredIeee754=1,ieee754.read=function(n,r,s,a,l){var d,u,c=l*8-a-1,p=(1<<c)-1,h=p>>1,y=-7,b=s?l-1:0,x=s?-1:1,T=n[r+b];for(b+=x,d=T&(1<<-y)-1,T>>=-y,y+=c;y>0;d=d*256+n[r+b],b+=x,y-=8);for(u=d&(1<<-y)-1,d>>=-y,y+=a;y>0;u=u*256+n[r+b],b+=x,y-=8);if(d===0)d=1-h;else{if(d===p)return u?NaN:(T?-1:1)*(1/0);u=u+Math.pow(2,a),d=d-h}return(T?-1:1)*u*Math.pow(2,d-a)},ieee754.write=function(n,r,s,a,l,d){var u,c,p,h=d*8-l-1,y=(1<<h)-1,b=y>>1,x=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=a?0:d-1,S=a?1:-1,_=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(c=isNaN(r)?1:0,u=y):(u=Math.floor(Math.log(r)/Math.LN2),r*(p=Math.pow(2,-u))<1&&(u--,p*=2),u+b>=1?r+=x/p:r+=x*Math.pow(2,1-b),r*p>=2&&(u++,p/=2),u+b>=y?(c=0,u=y):u+b>=1?(c=(r*p-1)*Math.pow(2,l),u=u+b):(c=r*Math.pow(2,b-1)*Math.pow(2,l),u=0));l>=8;n[s+T]=c&255,T+=S,c/=256,l-=8);for(u=u<<l|c,h+=l;h>0;n[s+T]=u&255,T+=S,u/=256,h-=8);n[s+T-S]|=_*128}),ieee754}var hasRequiredLib$2;function requireLib$2(){return hasRequiredLib$2||(hasRequiredLib$2=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.AnsiStringType=n.StringType=n.BufferType=n.Uint8ArrayType=n.IgnoreType=n.Float80_LE=n.Float80_BE=n.Float64_LE=n.Float64_BE=n.Float32_LE=n.Float32_BE=n.Float16_LE=n.Float16_BE=n.INT64_BE=n.UINT64_BE=n.INT64_LE=n.UINT64_LE=n.INT32_LE=n.INT32_BE=n.INT24_BE=n.INT24_LE=n.INT16_LE=n.INT16_BE=n.INT8=n.UINT32_BE=n.UINT32_LE=n.UINT24_BE=n.UINT24_LE=n.UINT16_BE=n.UINT16_LE=n.UINT8=void 0;const r=requireIeee754();function s(p){return new DataView(p.buffer,p.byteOffset)}n.UINT8={len:1,get(p,h){return s(p).getUint8(h)},put(p,h,y){return s(p).setUint8(h,y),h+1}},n.UINT16_LE={len:2,get(p,h){return s(p).getUint16(h,!0)},put(p,h,y){return s(p).setUint16(h,y,!0),h+2}},n.UINT16_BE={len:2,get(p,h){return s(p).getUint16(h)},put(p,h,y){return s(p).setUint16(h,y),h+2}},n.UINT24_LE={len:3,get(p,h){const y=s(p);return y.getUint8(h)+(y.getUint16(h+1,!0)<<8)},put(p,h,y){const b=s(p);return b.setUint8(h,y&255),b.setUint16(h+1,y>>8,!0),h+3}},n.UINT24_BE={len:3,get(p,h){const y=s(p);return(y.getUint16(h)<<8)+y.getUint8(h+2)},put(p,h,y){const b=s(p);return b.setUint16(h,y>>8),b.setUint8(h+2,y&255),h+3}},n.UINT32_LE={len:4,get(p,h){return s(p).getUint32(h,!0)},put(p,h,y){return s(p).setUint32(h,y,!0),h+4}},n.UINT32_BE={len:4,get(p,h){return s(p).getUint32(h)},put(p,h,y){return s(p).setUint32(h,y),h+4}},n.INT8={len:1,get(p,h){return s(p).getInt8(h)},put(p,h,y){return s(p).setInt8(h,y),h+1}},n.INT16_BE={len:2,get(p,h){return s(p).getInt16(h)},put(p,h,y){return s(p).setInt16(h,y),h+2}},n.INT16_LE={len:2,get(p,h){return s(p).getInt16(h,!0)},put(p,h,y){return s(p).setInt16(h,y,!0),h+2}},n.INT24_LE={len:3,get(p,h){const y=n.UINT24_LE.get(p,h);return y>8388607?y-16777216:y},put(p,h,y){const b=s(p);return b.setUint8(h,y&255),b.setUint16(h+1,y>>8,!0),h+3}},n.INT24_BE={len:3,get(p,h){const y=n.UINT24_BE.get(p,h);return y>8388607?y-16777216:y},put(p,h,y){const b=s(p);return b.setUint16(h,y>>8),b.setUint8(h+2,y&255),h+3}},n.INT32_BE={len:4,get(p,h){return s(p).getInt32(h)},put(p,h,y){return s(p).setInt32(h,y),h+4}},n.INT32_LE={len:4,get(p,h){return s(p).getInt32(h,!0)},put(p,h,y){return s(p).setInt32(h,y,!0),h+4}},n.UINT64_LE={len:8,get(p,h){return s(p).getBigUint64(h,!0)},put(p,h,y){return s(p).setBigUint64(h,y,!0),h+8}},n.INT64_LE={len:8,get(p,h){return s(p).getBigInt64(h,!0)},put(p,h,y){return s(p).setBigInt64(h,y,!0),h+8}},n.UINT64_BE={len:8,get(p,h){return s(p).getBigUint64(h)},put(p,h,y){return s(p).setBigUint64(h,y),h+8}},n.INT64_BE={len:8,get(p,h){return s(p).getBigInt64(h)},put(p,h,y){return s(p).setBigInt64(h,y),h+8}},n.Float16_BE={len:2,get(p,h){return r.read(p,h,!1,10,this.len)},put(p,h,y){return r.write(p,y,h,!1,10,this.len),h+this.len}},n.Float16_LE={len:2,get(p,h){return r.read(p,h,!0,10,this.len)},put(p,h,y){return r.write(p,y,h,!0,10,this.len),h+this.len}},n.Float32_BE={len:4,get(p,h){return s(p).getFloat32(h)},put(p,h,y){return s(p).setFloat32(h,y),h+4}},n.Float32_LE={len:4,get(p,h){return s(p).getFloat32(h,!0)},put(p,h,y){return s(p).setFloat32(h,y,!0),h+4}},n.Float64_BE={len:8,get(p,h){return s(p).getFloat64(h)},put(p,h,y){return s(p).setFloat64(h,y),h+8}},n.Float64_LE={len:8,get(p,h){return s(p).getFloat64(h,!0)},put(p,h,y){return s(p).setFloat64(h,y,!0),h+8}},n.Float80_BE={len:10,get(p,h){return r.read(p,h,!1,63,this.len)},put(p,h,y){return r.write(p,y,h,!1,63,this.len),h+this.len}},n.Float80_LE={len:10,get(p,h){return r.read(p,h,!0,63,this.len)},put(p,h,y){return r.write(p,y,h,!0,63,this.len),h+this.len}};class a{constructor(h){this.len=h}get(h,y){}}n.IgnoreType=a;class l{constructor(h){this.len=h}get(h,y){return h.subarray(y,y+this.len)}}n.Uint8ArrayType=l;class d{constructor(h){this.len=h}get(h,y){return Buffer.from(h.subarray(y,y+this.len))}}n.BufferType=d;class u{constructor(h,y){this.len=h,this.encoding=y}get(h,y){return Buffer.from(h).toString(this.encoding,y,y+this.len)}}n.StringType=u;class c{constructor(h){this.len=h}static decode(h,y,b){let x="";for(let T=y;T<b;++T)x+=c.codePointToString(c.singleByteDecoder(h[T]));return x}static inRange(h,y,b){return y<=h&&h<=b}static codePointToString(h){return h<=65535?String.fromCharCode(h):(h-=65536,String.fromCharCode((h>>10)+55296,(h&1023)+56320))}static singleByteDecoder(h){if(c.inRange(h,0,127))return h;const y=c.windows1252[h-128];if(y===null)throw Error("invaliding encoding");return y}get(h,y=0){return c.decode(h,y,y+this.len)}}n.AnsiStringType=c,c.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]})(lib$1)),lib$1}var util$1={},hasRequiredUtil$2;function requireUtil$2(){return hasRequiredUtil$2||(hasRequiredUtil$2=1,util$1.stringToBytes=n=>[...n].map(r=>r.charCodeAt(0)),util$1.tarHeaderChecksumMatches=(n,r=0)=>{const s=parseInt(n.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(s))return!1;let a=256;for(let l=r;l<r+148;l++)a+=n[l];for(let l=r+156;l<r+512;l++)a+=n[l];return s===a},util$1.uint32SyncSafeToken={get:(n,r)=>n[r+3]&127|n[r+2]<<7|n[r+1]<<14|n[r]<<21,len:4}),util$1}var supported,hasRequiredSupported;function requireSupported(){return hasRequiredSupported||(hasRequiredSupported=1,supported={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]}),supported}var core,hasRequiredCore$1;function requireCore$1(){if(hasRequiredCore$1)return core;hasRequiredCore$1=1;const Token=requireLib$2(),strtok3=requireCore$2(),{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=requireUtil$2(),supported=requireSupported(),minimumBytes=4100;async function fromStream(n){const r=await strtok3.fromStream(n);try{return await fromTokenizer(r)}finally{await r.close()}}async function fromBuffer(n){if(!(n instanceof Uint8Array||n instanceof ArrayBuffer||Buffer.isBuffer(n)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof n}\``);const r=n instanceof Buffer?n:Buffer.from(n);if(!(r&&r.length>1))return;const s=strtok3.fromBuffer(r);return fromTokenizer(s)}function _check(n,r,s){s={offset:0,...s};for(const[a,l]of r.entries())if(s.mask){if(l!==(s.mask[a]&n[a+s.offset]))return!1}else if(l!==n[a+s.offset])return!1;return!0}async function fromTokenizer(n){try{return _fromTokenizer(n)}catch(r){if(!(r instanceof strtok3.EndOfStreamError))throw r}}async function _fromTokenizer(n){let r=Buffer.alloc(minimumBytes);const s=12,a=(d,u)=>_check(r,d,u),l=(d,u)=>a(stringToBytes(d),u);if(n.fileInfo.size||(n.fileInfo.size=Number.MAX_SAFE_INTEGER),await n.peekBuffer(r,{length:s,mayBeLess:!0}),a([66,77]))return{ext:"bmp",mime:"image/bmp"};if(a([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(a([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(a([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(a([37,33]))return await n.peekBuffer(r,{length:24,mayBeLess:!0}),l("PS-Adobe-",{offset:2})&&l(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(a([31,160])||a([31,157]))return{ext:"Z",mime:"application/x-compress"};if(a([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(a([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(a([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(a([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(l("ID3")){await n.ignore(6);const d=await n.readToken(uint32SyncSafeToken);return n.position+d>n.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await n.ignore(d),fromTokenizer(n))}if(l("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((r[0]===67||r[0]===70)&&a([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(a([71,73,70]))return{ext:"gif",mime:"image/gif"};if(l("FLIF"))return{ext:"flif",mime:"image/flif"};if(l("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(l("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(l("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(l("FORM"))return{ext:"aif",mime:"audio/aiff"};if(l("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(a([80,75,3,4])){try{for(;n.position+30<n.fileInfo.size;){await n.readBuffer(r,{length:30});const d={compressedSize:r.readUInt32LE(18),uncompressedSize:r.readUInt32LE(22),filenameLength:r.readUInt16LE(26),extraFieldLength:r.readUInt16LE(28)};if(d.filename=await n.readToken(new Token.StringType(d.filenameLength,"utf-8")),await n.ignore(d.extraFieldLength),d.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(d.filename.endsWith(".rels")||d.filename.endsWith(".xml"))switch(d.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if(d.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(d.filename.startsWith("3D/")&&d.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(d.filename==="mimetype"&&d.compressedSize===d.uncompressedSize)switch(await n.readToken(new Token.StringType(d.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if(d.compressedSize===0){let u=-1;for(;u<0&&n.position<n.fileInfo.size;)await n.peekBuffer(r,{mayBeLess:!0}),u=r.indexOf("504B0304",0,"hex"),await n.ignore(u>=0?u:r.length)}else await n.ignore(d.compressedSize)}}catch(d){if(!(d instanceof strtok3.EndOfStreamError))throw d}return{ext:"zip",mime:"application/zip"}}if(l("OggS")){await n.ignore(28);const d=Buffer.alloc(8);return await n.readBuffer(d),_check(d,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(d,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(d,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(d,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(d,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(d,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(a([80,75])&&(r[2]===3||r[2]===5||r[2]===7)&&(r[3]===4||r[3]===6||r[3]===8))return{ext:"zip",mime:"application/zip"};if(l("ftyp",{offset:4})&&(r[8]&96)!==0){const d=r.toString("binary",8,12).replace("\0"," ").trim();switch(d){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return d.startsWith("3g")?d.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(l("MThd"))return{ext:"mid",mime:"audio/midi"};if(l("wOFF")&&(a([0,1,0,0],{offset:4})||l("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(l("wOF2")&&(a([0,1,0,0],{offset:4})||l("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(a([212,195,178,161])||a([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(l("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(l("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(l("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(a([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(l("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(l("%PDF")){await n.ignore(1350);const d=10*1024*1024,u=Buffer.alloc(Math.min(d,n.fileInfo.size));return await n.readBuffer(u,{mayBeLess:!0}),u.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(a([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(a([73,73,42,0]))return l("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:a([28,0,254,0],{offset:8})||a([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:a([8,0,0,0],{offset:4})&&(a([45,0,254,0],{offset:8})||a([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(r=Buffer.alloc(24),await n.peekBuffer(r),(a([16,251,134,1],{offset:4})||a([8,0,0,0],{offset:4}))&&a([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(a([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(l("MAC "))return{ext:"ape",mime:"audio/ape"};if(a([26,69,223,163])){async function d(){const y=await n.peekNumber(Token.UINT8);let b=128,x=0;for(;(y&b)===0&&b!==0;)++x,b>>=1;const T=Buffer.alloc(x+1);return await n.readBuffer(T),T}async function u(){const y=await d(),b=await d();b[0]^=128>>b.length-1;const x=Math.min(6,b.length);return{id:y.readUIntBE(0,y.length),len:b.readUIntBE(b.length-x,x)}}async function c(y,b){for(;b>0;){const x=await u();if(x.id===17026)return n.readToken(new Token.StringType(x.len,"utf-8"));await n.ignore(x.len),--b}}const p=await u();switch(await c(1,p.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(a([82,73,70,70])){if(a([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(a([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(a([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(l("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(a([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(l("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(l("MSCF")||l("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(a([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(a([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(a([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(a([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(l("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(l("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(a([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(l("IMPM"))return{ext:"it",mime:"audio/x-it"};if(l("-lh0-",{offset:2})||l("-lh1-",{offset:2})||l("-lh2-",{offset:2})||l("-lh3-",{offset:2})||l("-lh4-",{offset:2})||l("-lh5-",{offset:2})||l("-lh6-",{offset:2})||l("-lh7-",{offset:2})||l("-lzs-",{offset:2})||l("-lz4-",{offset:2})||l("-lz5-",{offset:2})||l("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(a([0,0,1,186])){if(a([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(a([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(l("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(a([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(l("<?xml "))return{ext:"xml",mime:"application/xml"};if(a([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(a([82,97,114,33,26,7])&&(r[6]===0||r[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(l("solid "))return{ext:"stl",mime:"model/stl"};if(l("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(l("!<arch>"))return await n.ignore(8),await n.readToken(new Token.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(a([137,80,78,71,13,10,26,10])){await n.ignore(8);async function d(){return{length:await n.readToken(Token.INT32_BE),type:await n.readToken(new Token.StringType(4,"binary"))}}do{const u=await d();if(u.length<0)return;switch(u.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await n.ignore(u.length+4)}}while(n.position+8<n.fileInfo.size);return{ext:"png",mime:"image/png"}}if(a([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(a([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(a([102,114,101,101],{offset:4})||a([109,100,97,116],{offset:4})||a([109,111,111,118],{offset:4})||a([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(a([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(l("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(a([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(a([48,38,178,117,142,102,207,17,166,217])){async function d(){const u=Buffer.alloc(16);return await n.readBuffer(u),{id:u,size:Number(await n.readToken(Token.UINT64_LE))}}for(await n.ignore(30);n.position+24<n.fileInfo.size;){const u=await d();let c=u.size-24;if(_check(u.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const p=Buffer.alloc(16);if(c-=await n.readBuffer(p),_check(p,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(p,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await n.ignore(c)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(a([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((a([126,16,4])||a([126,24,4]))&&a([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(a([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(a([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await n.ignore(20),await n.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(a([255,10])||a([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(a([0,0,1,186])||a([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(a([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(a([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(a([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(a([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await n.peekBuffer(r,{length:Math.min(256,n.fileInfo.size),mayBeLess:!0}),l("BEGIN:")){if(l("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(l("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(l("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(l("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(l("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(a([4,0,0,0])&&r.length>=16){const d=r.readUInt32LE(12);if(d>12&&r.length>=d+16)try{const u=r.slice(16,d+16).toString();if(JSON.parse(u).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(a([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(l("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(a([71],{offset:4})&&(a([71],{offset:192})||a([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(a([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(a([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(a([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(a([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(a([76,80],{offset:34})&&(a([0,0,1],{offset:8})||a([1,0,2],{offset:8})||a([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(a([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await n.peekBuffer(r,{length:Math.min(512,n.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(r))return{ext:"tar",mime:"application/x-tar"};if(a([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(l("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(r.length>=2&&a([255,224],{offset:0,mask:[255,224]})){if(a([16],{offset:1,mask:[22]}))return a([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(a([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(a([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(a([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{const n=new stream.PassThrough;let r;stream.pipeline?r=stream.pipeline(readableStream,n,()=>{}):r=readableStream.pipe(n);const s=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const a=await fromBuffer(s);n.fileType=a}catch(a){reject(a)}resolve(r)})}),fileType={fromStream,fromTokenizer,fromBuffer,stream};return Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}}),Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}}),core=fileType,core}var contentType={};/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var hasRequiredContentType;function requireContentType(){if(hasRequiredContentType)return contentType;hasRequiredContentType=1;var n=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,r=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,a=/\\([\u000b\u0020-\u00ff])/g,l=/([\\"])/g,d=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;contentType.format=u,contentType.parse=c;function u(b){if(!b||typeof b!="object")throw new TypeError("argument obj is required");var x=b.parameters,T=b.type;if(!T||!d.test(T))throw new TypeError("invalid type");var S=T;if(x&&typeof x=="object")for(var _,C=Object.keys(x).sort(),k=0;k<C.length;k++){if(_=C[k],!s.test(_))throw new TypeError("invalid parameter name");S+="; "+_+"="+h(x[_])}return S}function c(b){if(!b)throw new TypeError("argument string is required");var x=typeof b=="object"?p(b):b;if(typeof x!="string")throw new TypeError("argument string is required to be a string");var T=x.indexOf(";"),S=T!==-1?x.slice(0,T).trim():x.trim();if(!d.test(S))throw new TypeError("invalid media type");var _=new y(S.toLowerCase());if(T!==-1){var C,k,I;for(n.lastIndex=T;k=n.exec(x);){if(k.index!==T)throw new TypeError("invalid parameter format");T+=k[0].length,C=k[1].toLowerCase(),I=k[2],I.charCodeAt(0)===34&&(I=I.slice(1,-1),I.indexOf("\\")!==-1&&(I=I.replace(a,"$1"))),_.parameters[C]=I}if(T!==x.length)throw new TypeError("invalid parameter format")}return _}function p(b){var x;if(typeof b.getHeader=="function"?x=b.getHeader("content-type"):typeof b.headers=="object"&&(x=b.headers&&b.headers["content-type"]),typeof x!="string")throw new TypeError("content-type header is missing from object");return x}function h(b){var x=String(b);if(s.test(x))return x;if(x.length>0&&!r.test(x))throw new TypeError("invalid parameter value");return'"'+x.replace(l,"\\$1")+'"'}function y(b){this.parameters=Object.create(null),this.type=b}return contentType}var mediaTyper={};/*!
 * media-typer
 * Copyright(c) 2014-2017 Douglas Christopher Wilson
 * MIT Licensed
 */var hasRequiredMediaTyper;function requireMediaTyper(){if(hasRequiredMediaTyper)return mediaTyper;hasRequiredMediaTyper=1;var n=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,r=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,s=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;mediaTyper.format=a,mediaTyper.parse=d,mediaTyper.test=l;function a(c){if(!c||typeof c!="object")throw new TypeError("argument obj is required");var p=c.subtype,h=c.suffix,y=c.type;if(!y||!r.test(y))throw new TypeError("invalid type");if(!p||!n.test(p))throw new TypeError("invalid subtype");var b=y+"/"+p;if(h){if(!r.test(h))throw new TypeError("invalid suffix");b+="+"+h}return b}function l(c){if(!c)throw new TypeError("argument string is required");if(typeof c!="string")throw new TypeError("argument string is required to be a string");return s.test(c.toLowerCase())}function d(c){if(!c)throw new TypeError("argument string is required");if(typeof c!="string")throw new TypeError("argument string is required to be a string");var p=s.exec(c.toLowerCase());if(!p)throw new TypeError("invalid media type");var h=p[1],y=p[2],b,x=y.lastIndexOf("+");return x!==-1&&(b=y.substr(x+1),y=y.substr(0,x)),new u(h,y,b)}function u(c,p,h){this.type=c,this.subtype=p,this.suffix=h}return mediaTyper}var MetadataCollector={},type={},types={},hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.TrackType=n.TargetType=n.DataType=void 0,(function(r){r[r.string=0]="string",r[r.uint=1]="uint",r[r.uid=2]="uid",r[r.bool=3]="bool",r[r.binary=4]="binary",r[r.float=5]="float"})(n.DataType||(n.DataType={})),(function(r){r[r.shot=10]="shot",r[r.scene=20]="scene",r[r.track=30]="track",r[r.part=40]="part",r[r.album=50]="album",r[r.edition=60]="edition",r[r.collection=70]="collection"})(n.TargetType||(n.TargetType={})),(function(r){r[r.video=1]="video",r[r.audio=2]="audio",r[r.complex=3]="complex",r[r.logo=4]="logo",r[r.subtitle=17]="subtitle",r[r.button=18]="button",r[r.control=32]="control"})(n.TrackType||(n.TrackType={}))})(types)),types}var hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.TrackType=void 0;var r=requireTypes();Object.defineProperty(n,"TrackType",{enumerable:!0,get:function(){return r.TrackType}})})(type)),type}var GenericTagTypes={},hasRequiredGenericTagTypes;function requireGenericTagTypes(){return hasRequiredGenericTagTypes||(hasRequiredGenericTagTypes=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isUnique=n.isSingleton=n.commonTags=void 0,n.commonTags={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function r(a){return n.commonTags.hasOwnProperty(a)&&!n.commonTags[a].multiple}n.isSingleton=r;function s(a){return!n.commonTags[a].multiple||n.commonTags[a].unique}n.isUnique=s})(GenericTagTypes)),GenericTagTypes}var CombinedTagMapper={},ID3v1TagMap={},GenericTagMapper={},hasRequiredGenericTagMapper;function requireGenericTagMapper(){if(hasRequiredGenericTagMapper)return GenericTagMapper;hasRequiredGenericTagMapper=1,Object.defineProperty(GenericTagMapper,"__esModule",{value:!0}),GenericTagMapper.CommonTagMapper=void 0;class n{static toIntOrNull(s){const a=parseInt(s,10);return isNaN(a)?null:a}static normalizeTrack(s){const a=s.toString().split("/");return{no:parseInt(a[0],10)||null,of:parseInt(a[1],10)||null}}constructor(s,a){this.tagTypes=s,this.tagMap=a}mapGenericTag(s,a){s={id:s.id,value:s.value},this.postMap(s,a);const l=this.getCommonName(s.id);return l?{id:l,value:s.value}:null}getCommonName(s){return this.tagMap[s]}postMap(s,a){}}return n.maxRatingScore=1,GenericTagMapper.CommonTagMapper=n,GenericTagMapper}var hasRequiredID3v1TagMap;function requireID3v1TagMap(){if(hasRequiredID3v1TagMap)return ID3v1TagMap;hasRequiredID3v1TagMap=1,Object.defineProperty(ID3v1TagMap,"__esModule",{value:!0}),ID3v1TagMap.ID3v1TagMapper=void 0;const n=requireGenericTagMapper(),r={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"};class s extends n.CommonTagMapper{constructor(){super(["ID3v1"],r)}}return ID3v1TagMap.ID3v1TagMapper=s,ID3v1TagMap}var ID3v24TagMapper={},CaseInsensitiveTagMap={},hasRequiredCaseInsensitiveTagMap;function requireCaseInsensitiveTagMap(){if(hasRequiredCaseInsensitiveTagMap)return CaseInsensitiveTagMap;hasRequiredCaseInsensitiveTagMap=1,Object.defineProperty(CaseInsensitiveTagMap,"__esModule",{value:!0}),CaseInsensitiveTagMap.CaseInsensitiveTagMap=void 0;const n=requireGenericTagMapper();let r=class extends n.CommonTagMapper{constructor(a,l){const d={};for(const u of Object.keys(l))d[u.toUpperCase()]=l[u];super(a,d)}getCommonName(a){return this.tagMap[a.toUpperCase()]}};return CaseInsensitiveTagMap.CaseInsensitiveTagMap=r,CaseInsensitiveTagMap}var Util={},hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return Util;hasRequiredUtil$1=1,Object.defineProperty(Util,"__esModule",{value:!0}),Util.toRatio=Util.dbToRatio=Util.ratioToDb=Util.a2hex=Util.isBitSet=Util.getBitAllignedNumber=Util.stripNulls=Util.decodeString=Util.trimRightNull=Util.findZero=Util.getBit=void 0;function n(x,T,S){return(x[T]&1<<S)!==0}Util.getBit=n;function r(x,T,S,_){let C=T;if(_==="utf16le"){for(;x[C]!==0||x[C+1]!==0;){if(C>=S)return S;C+=2}return C}else{for(;x[C]!==0;){if(C>=S)return S;C++}return C}}Util.findZero=r;function s(x){const T=x.indexOf("\0");return T===-1?x:x.substr(0,T)}Util.trimRightNull=s;function a(x){const T=x.length;if((T&1)!==0)throw new Error("Buffer length must be even");for(let S=0;S<T;S+=2){const _=x[S];x[S]=x[S+1],x[S+1]=_}return x}function l(x,T){if(x[0]===255&&x[1]===254)return l(x.subarray(2),T);if(T==="utf16le"&&x[0]===254&&x[1]===255){if((x.length&1)!==0)throw new Error("Expected even number of octets for 16-bit unicode string");return l(a(x),T)}return Buffer.from(x).toString(T)}Util.decodeString=l;function d(x){return x=x.replace(/^\x00+/g,""),x=x.replace(/\x00+$/g,""),x}Util.stripNulls=d;function u(x,T,S,_){const C=T+~~(S/8),k=S%8;let I=x[C];I&=255>>k;const N=8-k,F=_-N;return F<0?I>>=8-k-_:F>0&&(I<<=F,I|=u(x,T,S+N,F)),I}Util.getBitAllignedNumber=u;function c(x,T,S){return u(x,T,S,1)===1}Util.isBitSet=c;function p(x){const T=[];for(let S=0,_=x.length;S<_;S++){const C=Number(x.charCodeAt(S)).toString(16);T.push(C.length===1?"0"+C:C)}return T.join(" ")}Util.a2hex=p;function h(x){return 10*Math.log10(x)}Util.ratioToDb=h;function y(x){return Math.pow(10,x/10)}Util.dbToRatio=y;function b(x){const T=x.split(" ").map(S=>S.trim().toLowerCase());if(T.length>=1){const S=parseFloat(T[0]);return T.length===2&&T[1]==="db"?{dB:S,ratio:y(S)}:{dB:h(S),ratio:S}}}return Util.toRatio=b,Util}var hasRequiredID3v24TagMapper;function requireID3v24TagMapper(){if(hasRequiredID3v24TagMapper)return ID3v24TagMapper;hasRequiredID3v24TagMapper=1,Object.defineProperty(ID3v24TagMapper,"__esModule",{value:!0}),ID3v24TagMapper.ID3v24TagMapper=void 0;const n=requireGenericTagMapper(),r=requireCaseInsensitiveTagMap(),s=requireUtil$1(),a={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer","USLT:description":"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"date",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl"};let l=class Sh extends r.CaseInsensitiveTagMap{static toRating(u){return{source:u.email,rating:u.rating>0?(u.rating-1)/254*n.CommonTagMapper.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],a)}postMap(u,c){switch(u.id){case"UFID":u.value.owner_identifier==="http://musicbrainz.org"&&(u.id+=":"+u.value.owner_identifier,u.value=s.decodeString(u.value.identifier,"latin1"));break;case"PRIV":switch(u.value.owner_identifier){case"AverageLevel":case"PeakValue":u.id+=":"+u.value.owner_identifier,u.value=u.value.data.length===4?u.value.data.readUInt32LE(0):null,u.value===null&&c.addWarning("Failed to parse PRIV:PeakValue");break;default:c.addWarning(`Unknown PRIV owner-identifier: ${u.value.owner_identifier}`)}break;case"COMM":u.value=u.value?u.value.text:null;break;case"POPM":u.value=Sh.toRating(u.value);break}}};return ID3v24TagMapper.ID3v24TagMapper=l,ID3v24TagMapper}var AsfTagMapper={},hasRequiredAsfTagMapper;function requireAsfTagMapper(){if(hasRequiredAsfTagMapper)return AsfTagMapper;hasRequiredAsfTagMapper=1,Object.defineProperty(AsfTagMapper,"__esModule",{value:!0}),AsfTagMapper.AsfTagMapper=void 0;const n=requireGenericTagMapper(),r={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"};let s=class Eh extends n.CommonTagMapper{static toRating(l){return{rating:parseFloat(l+1)/5}}constructor(){super(["asf"],r)}postMap(l){switch(l.id){case"WM/SharedUserRating":const d=l.id.split(":");l.value=Eh.toRating(l.value),l.id=d[0];break}}};return AsfTagMapper.AsfTagMapper=s,AsfTagMapper}var ID3v22TagMapper={},hasRequiredID3v22TagMapper;function requireID3v22TagMapper(){return hasRequiredID3v22TagMapper||(hasRequiredID3v22TagMapper=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ID3v22TagMapper=n.id3v22TagMap=void 0;const r=requireCaseInsensitiveTagMap();n.id3v22TagMap={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website","COM:iTunPGAP":"gapless",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};class s extends r.CaseInsensitiveTagMap{constructor(){super(["ID3v2.2"],n.id3v22TagMap)}}n.ID3v22TagMapper=s})(ID3v22TagMapper)),ID3v22TagMapper}var APEv2TagMapper={},hasRequiredAPEv2TagMapper;function requireAPEv2TagMapper(){if(hasRequiredAPEv2TagMapper)return APEv2TagMapper;hasRequiredAPEv2TagMapper=1,Object.defineProperty(APEv2TagMapper,"__esModule",{value:!0}),APEv2TagMapper.APEv2TagMapper=void 0;const n=requireCaseInsensitiveTagMap(),r={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"};let s=class extends n.CaseInsensitiveTagMap{constructor(){super(["APEv2"],r)}};return APEv2TagMapper.APEv2TagMapper=s,APEv2TagMapper}var MP4TagMapper={},hasRequiredMP4TagMapper;function requireMP4TagMapper(){return hasRequiredMP4TagMapper||(hasRequiredMP4TagMapper=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.MP4TagMapper=n.tagType=void 0;const r=requireCaseInsensitiveTagMap(),s={"nam":"title","ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","alb":"album","day":"date","cmt":"comment","com":"comment",trkn:"track",disk:"disk","gen":"genre",covr:"picture","wrt":"composer","lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear",desc:"description",ldes:"longDescription","mvn":"movement","mvi":"movementIndex","mvc":"movementTotal","wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"};n.tagType="iTunes";class a extends r.CaseInsensitiveTagMap{constructor(){super([n.tagType],s)}postMap(d,u){switch(d.id){case"rate":d.value={source:void 0,rating:parseFloat(d.value)/100};break}}}n.MP4TagMapper=a})(MP4TagMapper)),MP4TagMapper}var VorbisTagMapper={},hasRequiredVorbisTagMapper;function requireVorbisTagMapper(){if(hasRequiredVorbisTagMapper)return VorbisTagMapper;hasRequiredVorbisTagMapper=1,Object.defineProperty(VorbisTagMapper,"__esModule",{value:!0}),VorbisTagMapper.VorbisTagMapper=void 0;const n=requireGenericTagMapper(),r={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"};let s=class mc extends n.CommonTagMapper{static toRating(l,d,u){return{source:l&&l.toLowerCase(),rating:parseFloat(d)/u*n.CommonTagMapper.maxRatingScore}}constructor(){super(["vorbis"],r)}postMap(l){if(l.id==="RATING")l.value=mc.toRating(void 0,l.value,100);else if(l.id.indexOf("RATING:")===0){const d=l.id.split(":");l.value=mc.toRating(d[1],l.value,1),l.id=d[0]}}};return VorbisTagMapper.VorbisTagMapper=s,VorbisTagMapper}var RiffInfoTagMap={},hasRequiredRiffInfoTagMap;function requireRiffInfoTagMap(){return hasRequiredRiffInfoTagMap||(hasRequiredRiffInfoTagMap=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.RiffInfoTagMapper=n.riffInfoTagMap=void 0;const r=requireGenericTagMapper();n.riffInfoTagMap={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};class s extends r.CommonTagMapper{constructor(){super(["exif"],n.riffInfoTagMap)}}n.RiffInfoTagMapper=s})(RiffInfoTagMap)),RiffInfoTagMap}var MatroskaTagMapper={},hasRequiredMatroskaTagMapper;function requireMatroskaTagMapper(){if(hasRequiredMatroskaTagMapper)return MatroskaTagMapper;hasRequiredMatroskaTagMapper=1,Object.defineProperty(MatroskaTagMapper,"__esModule",{value:!0}),MatroskaTagMapper.MatroskaTagMapper=void 0;const n=requireCaseInsensitiveTagMap(),r={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"};let s=class extends n.CaseInsensitiveTagMap{constructor(){super(["matroska"],r)}};return MatroskaTagMapper.MatroskaTagMapper=s,MatroskaTagMapper}var AiffTagMap={},hasRequiredAiffTagMap;function requireAiffTagMap(){if(hasRequiredAiffTagMap)return AiffTagMap;hasRequiredAiffTagMap=1,Object.defineProperty(AiffTagMap,"__esModule",{value:!0}),AiffTagMap.AiffTagMapper=void 0;const n=requireGenericTagMapper(),r={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"};class s extends n.CommonTagMapper{constructor(){super(["AIFF"],r)}}return AiffTagMap.AiffTagMapper=s,AiffTagMap}var hasRequiredCombinedTagMapper;function requireCombinedTagMapper(){if(hasRequiredCombinedTagMapper)return CombinedTagMapper;hasRequiredCombinedTagMapper=1,Object.defineProperty(CombinedTagMapper,"__esModule",{value:!0}),CombinedTagMapper.CombinedTagMapper=void 0;const n=requireID3v1TagMap(),r=requireID3v24TagMapper(),s=requireAsfTagMapper(),a=requireID3v22TagMapper(),l=requireAPEv2TagMapper(),d=requireMP4TagMapper(),u=requireVorbisTagMapper(),c=requireRiffInfoTagMap(),p=requireMatroskaTagMapper(),h=requireAiffTagMap();let y=class{constructor(){this.tagMappers={},[new n.ID3v1TagMapper,new a.ID3v22TagMapper,new r.ID3v24TagMapper,new d.MP4TagMapper,new d.MP4TagMapper,new u.VorbisTagMapper,new l.APEv2TagMapper,new s.AsfTagMapper,new c.RiffInfoTagMapper,new p.MatroskaTagMapper,new h.AiffTagMapper].forEach(x=>{this.registerTagMapper(x)})}mapTag(x,T,S){if(this.tagMappers[x])return this.tagMappers[x].mapGenericTag(T,S);throw new Error("No generic tag mapper defined for tag-format: "+x)}registerTagMapper(x){for(const T of x.tagTypes)this.tagMappers[T]=x}};return CombinedTagMapper.CombinedTagMapper=y,CombinedTagMapper}var hasRequiredMetadataCollector;function requireMetadataCollector(){if(hasRequiredMetadataCollector)return MetadataCollector;hasRequiredMetadataCollector=1,Object.defineProperty(MetadataCollector,"__esModule",{value:!0}),MetadataCollector.joinArtists=MetadataCollector.MetadataCollector=void 0;const n=requireType(),r=requireBrowser$3(),s=requireGenericTagTypes(),a=requireCombinedTagMapper(),l=requireGenericTagMapper(),d=requireUtil$1(),u=requireCore$1(),c=(0,r.default)("music-metadata:collector"),p=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"];let h=class{constructor(x){this.opts=x,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new a.CombinedTagMapper;let T=1;for(const S of p)this.originPriority[S]=T++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(x){c(`streamInfo: type=${n.TrackType[x.type]}, codec=${x.codecName}`),this.format.trackInfo.push(x)}setFormat(x,T){c(`format: ${x} = ${T}`),this.format[x]=T,this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:x,value:T}})}addTag(x,T,S){c(`tag ${x}.${T} = ${S}`),this.native[x]||(this.format.tagTypes.push(x),this.native[x]=[]),this.native[x].push({id:T,value:S}),this.toCommon(x,T,S)}addWarning(x){this.quality.warnings.push({message:x})}postMap(x,T){switch(T.id){case"artist":if(this.commonOrigin.artist===this.originPriority[x])return this.postMap("artificial",{id:"artists",value:T.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:T.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(T.value)===-1)){const k=(this.common.artists||[]).concat([T.value]),N={id:"artist",value:y(k)};this.setGenericTag("artificial",N)}break;case"picture":this.postFixPicture(T.value).then(k=>{k!==null&&(T.value=k,this.setGenericTag(x,T))});return;case"totaltracks":this.common.track.of=l.CommonTagMapper.toIntOrNull(T.value);return;case"totaldiscs":this.common.disk.of=l.CommonTagMapper.toIntOrNull(T.value);return;case"movementTotal":this.common.movementIndex.of=l.CommonTagMapper.toIntOrNull(T.value);return;case"track":case"disk":case"movementIndex":const S=this.common[T.id].of;this.common[T.id]=l.CommonTagMapper.normalizeTrack(T.value),this.common[T.id].of=S??this.common[T.id].of;return;case"bpm":case"year":case"originalyear":T.value=parseInt(T.value,10);break;case"date":const _=parseInt(T.value.substr(0,4),10);isNaN(_)||(this.common.year=_);break;case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":T.value=typeof T.value=="string"?parseInt(T.value,10):T.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":T.value=(0,d.toRatio)(T.value);break;case"replaygain_track_minmax":T.value=T.value.split(",").map(k=>parseInt(k,10));break;case"replaygain_undo":const C=T.value.split(",").map(k=>parseInt(k,10));T.value={leftChannel:C[0],rightChannel:C[1]};break;case"gapless":case"compilation":case"podcast":case"showMovement":T.value=T.value==="1"||T.value===1;break;case"isrc":if(this.common[T.id]&&this.common[T.id].indexOf(T.value)!==-1)return;break}T.value!==null&&this.setGenericTag(x,T)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}async postFixPicture(x){if(x.data&&x.data.length>0){if(!x.format){const T=await u.fromBuffer(x.data);if(T)x.format=T.mime;else return null}switch(x.format=x.format.toLocaleLowerCase(),x.format){case"image/jpg":x.format="image/jpeg"}return x}return this.addWarning("Empty picture tag found"),null}toCommon(x,T,S){const _={id:T,value:S},C=this.tagMapper.mapTag(x,_,this);C&&this.postMap(x,C)}setGenericTag(x,T){c(`common.${T.id} = ${T.value}`);const S=this.commonOrigin[T.id]||1e3,_=this.originPriority[x];if((0,s.isSingleton)(T.id))if(_<=S)this.common[T.id]=T.value,this.commonOrigin[T.id]=_;else return c(`Ignore native tag (singleton): ${x}.${T.id} = ${T.value}`);else if(_===S)!(0,s.isUnique)(T.id)||this.common[T.id].indexOf(T.value)===-1?this.common[T.id].push(T.value):c(`Ignore duplicate value: ${x}.${T.id} = ${T.value}`);else if(_<S)this.common[T.id]=[T.value],this.commonOrigin[T.id]=_;else return c(`Ignore native tag (list): ${x}.${T.id} = ${T.value}`);this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:T.id,value:T.value}})}};MetadataCollector.MetadataCollector=h;function y(b){return b.length>2?b.slice(0,b.length-1).join(", ")+" & "+b[b.length-1]:b.join(" & ")}return MetadataCollector.joinArtists=y,MetadataCollector}var AiffParser={},ID3v2Parser={},FrameParser={},ID3v2Token={},hasRequiredID3v2Token;function requireID3v2Token(){return hasRequiredID3v2Token||(hasRequiredID3v2Token=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.TextEncodingToken=n.ExtendedHeader=n.ID3v2Header=n.UINT32SYNCSAFE=n.AttachedPictureType=void 0;const r=requireLib$2(),s=requireUtil$1();(function(a){a[a.Other=0]="Other",a[a["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",a[a["Other file icon"]=2]="Other file icon",a[a["Cover (front)"]=3]="Cover (front)",a[a["Cover (back)"]=4]="Cover (back)",a[a["Leaflet page"]=5]="Leaflet page",a[a["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",a[a["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",a[a["Artist/performer"]=8]="Artist/performer",a[a.Conductor=9]="Conductor",a[a["Band/Orchestra"]=10]="Band/Orchestra",a[a.Composer=11]="Composer",a[a["Lyricist/text writer"]=12]="Lyricist/text writer",a[a["Recording Location"]=13]="Recording Location",a[a["During recording"]=14]="During recording",a[a["During performance"]=15]="During performance",a[a["Movie/video screen capture"]=16]="Movie/video screen capture",a[a["A bright coloured fish"]=17]="A bright coloured fish",a[a.Illustration=18]="Illustration",a[a["Band/artist logotype"]=19]="Band/artist logotype",a[a["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"})(n.AttachedPictureType||(n.AttachedPictureType={})),n.UINT32SYNCSAFE={get:(a,l)=>a[l+3]&127|a[l+2]<<7|a[l+1]<<14|a[l]<<21,len:4},n.ID3v2Header={len:10,get:(a,l)=>({fileIdentifier:new r.StringType(3,"ascii").get(a,l),version:{major:r.INT8.get(a,l+3),revision:r.INT8.get(a,l+4)},flags:{unsynchronisation:s.getBit(a,l+5,7),isExtendedHeader:s.getBit(a,l+5,6),expIndicator:s.getBit(a,l+5,5),footer:s.getBit(a,l+5,4)},size:n.UINT32SYNCSAFE.get(a,l+6)})},n.ExtendedHeader={len:10,get:(a,l)=>({size:r.UINT32_BE.get(a,l),extendedFlags:r.UINT16_BE.get(a,l+4),sizeOfPadding:r.UINT32_BE.get(a,l+6),crcDataPresent:s.getBit(a,l+4,31)})},n.TextEncodingToken={len:1,get:(a,l)=>{switch(a[l]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf16le",bom:!0};case 2:return{encoding:"utf16le",bom:!1};case 3:return{encoding:"utf8",bom:!1};default:return{encoding:"utf8",bom:!1}}}}})(ID3v2Token)),ID3v2Token}var ID3v1Parser={},BasicParser={},hasRequiredBasicParser;function requireBasicParser(){if(hasRequiredBasicParser)return BasicParser;hasRequiredBasicParser=1,Object.defineProperty(BasicParser,"__esModule",{value:!0}),BasicParser.BasicParser=void 0;let n=class{init(s,a,l){return this.metadata=s,this.tokenizer=a,this.options=l,this}};return BasicParser.BasicParser=n,BasicParser}var APEv2Parser={},APEv2Token={},FourCC={},hasRequiredFourCC;function requireFourCC(){return hasRequiredFourCC||(hasRequiredFourCC=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.FourCcToken=void 0;const r=requireUtil$1(),s=/^[\x21-\x7e][\x20-\x7e\x00()]{3}/;n.FourCcToken={len:4,get:(a,l)=>{const d=a.toString("binary",l,l+n.FourCcToken.len);if(!d.match(s))throw new Error(`FourCC contains invalid characters: ${r.a2hex(d)} "${d}"`);return d},put:(a,l,d)=>{const u=Buffer.from(d,"binary");if(u.length!==4)throw new Error("Invalid length");return u.copy(a,l)}}})(FourCC)),FourCC}var hasRequiredAPEv2Token;function requireAPEv2Token(){return hasRequiredAPEv2Token||(hasRequiredAPEv2Token=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.isBitSet=n.parseTagFlags=n.TagField=n.TagItemHeader=n.TagFooter=n.Header=n.DescriptorParser=n.DataType=void 0;const r=requireLib$2(),s=requireFourCC();(function(u){u[u.text_utf8=0]="text_utf8",u[u.binary=1]="binary",u[u.external_info=2]="external_info",u[u.reserved=3]="reserved"})(n.DataType||(n.DataType={})),n.DescriptorParser={len:52,get:(u,c)=>({ID:s.FourCcToken.get(u,c),version:r.UINT32_LE.get(u,c+4)/1e3,descriptorBytes:r.UINT32_LE.get(u,c+8),headerBytes:r.UINT32_LE.get(u,c+12),seekTableBytes:r.UINT32_LE.get(u,c+16),headerDataBytes:r.UINT32_LE.get(u,c+20),apeFrameDataBytes:r.UINT32_LE.get(u,c+24),apeFrameDataBytesHigh:r.UINT32_LE.get(u,c+28),terminatingDataBytes:r.UINT32_LE.get(u,c+32),fileMD5:new r.Uint8ArrayType(16).get(u,c+36)})},n.Header={len:24,get:(u,c)=>({compressionLevel:r.UINT16_LE.get(u,c),formatFlags:r.UINT16_LE.get(u,c+2),blocksPerFrame:r.UINT32_LE.get(u,c+4),finalFrameBlocks:r.UINT32_LE.get(u,c+8),totalFrames:r.UINT32_LE.get(u,c+12),bitsPerSample:r.UINT16_LE.get(u,c+16),channel:r.UINT16_LE.get(u,c+18),sampleRate:r.UINT32_LE.get(u,c+20)})},n.TagFooter={len:32,get:(u,c)=>({ID:new r.StringType(8,"ascii").get(u,c),version:r.UINT32_LE.get(u,c+8),size:r.UINT32_LE.get(u,c+12),fields:r.UINT32_LE.get(u,c+16),flags:l(r.UINT32_LE.get(u,c+20))})},n.TagItemHeader={len:8,get:(u,c)=>({size:r.UINT32_LE.get(u,c),flags:l(r.UINT32_LE.get(u,c+4))})};const a=u=>new r.Uint8ArrayType(u.size-n.TagFooter.len);n.TagField=a;function l(u){return{containsHeader:d(u,31),containsFooter:d(u,30),isHeader:d(u,31),readOnly:d(u,0),dataType:(u&6)>>1}}n.parseTagFlags=l;function d(u,c){return(u&1<<c)!==0}n.isBitSet=d})(APEv2Token)),APEv2Token}var hasRequiredAPEv2Parser;function requireAPEv2Parser(){if(hasRequiredAPEv2Parser)return APEv2Parser;hasRequiredAPEv2Parser=1,Object.defineProperty(APEv2Parser,"__esModule",{value:!0}),APEv2Parser.APEv2Parser=void 0;const n=requireBrowser$3(),r=requireCore$2(),s=requireLib$2(),a=requireUtil$1(),l=requireBasicParser(),d=requireAPEv2Token(),u=(0,n.default)("music-metadata:parser:APEv2"),c="APEv2",p="APETAGEX";let h=class lo extends l.BasicParser{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(b,x,T){const S=new lo;return S.init(b,x,T),S.tryParseApeHeader()}static calculateDuration(b){let x=b.totalFrames>1?b.blocksPerFrame*(b.totalFrames-1):0;return x+=b.finalFrameBlocks,x/b.sampleRate}static async findApeFooterOffset(b,x){const T=Buffer.alloc(d.TagFooter.len);await b.randomRead(T,0,d.TagFooter.len,x-d.TagFooter.len);const S=d.TagFooter.get(T,0);if(S.ID==="APETAGEX")return u(`APE footer header at offset=${x}`),{footer:S,offset:x-S.size}}static parseTagFooter(b,x,T){const S=d.TagFooter.get(x,x.length-d.TagFooter.len);if(S.ID!==p)throw new Error("Unexpected APEv2 Footer ID preamble value.");r.fromBuffer(x);const _=new lo;return _.init(b,r.fromBuffer(x),T),_.parseTags(S)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<d.TagFooter.len){u("No APEv2 header found, end-of-file reached");return}const b=await this.tokenizer.peekToken(d.TagFooter);if(b.ID===p)return await this.tokenizer.ignore(d.TagFooter.len),this.parseTags(b);if(u(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){const x=this.tokenizer.fileInfo.size-this.tokenizer.position,T=Buffer.alloc(x);return await this.tokenizer.readBuffer(T),lo.parseTagFooter(this.metadata,T,this.options)}}async parse(){const b=await this.tokenizer.readToken(d.DescriptorParser);if(b.ID!=="MAC ")throw new Error("Unexpected descriptor ID");this.ape.descriptor=b;const x=b.descriptorBytes-d.DescriptorParser.len,T=await(x>0?this.parseDescriptorExpansion(x):this.parseHeader());return await this.tokenizer.ignore(T.forwardBytes),this.tryParseApeHeader()}async parseTags(b){const x=Buffer.alloc(256);let T=b.size-d.TagFooter.len;u(`Parse APE tags at offset=${this.tokenizer.position}, size=${T}`);for(let S=0;S<b.fields;S++){if(T<d.TagItemHeader.len){this.metadata.addWarning(`APEv2 Tag-header: ${b.fields-S} items remaining, but no more tag data to read.`);break}const _=await this.tokenizer.readToken(d.TagItemHeader);T-=d.TagItemHeader.len+_.size,await this.tokenizer.peekBuffer(x,{length:Math.min(x.length,T)});let C=a.findZero(x,0,x.length);const k=await this.tokenizer.readToken(new s.StringType(C,"ascii"));switch(await this.tokenizer.ignore(1),T-=k.length+1,_.flags.dataType){case d.DataType.text_utf8:{const N=(await this.tokenizer.readToken(new s.StringType(_.size,"utf8"))).split(/\x00/g);for(const F of N)this.metadata.addTag(c,k,F);break}case d.DataType.binary:if(this.options.skipCovers)await this.tokenizer.ignore(_.size);else{const I=Buffer.alloc(_.size);await this.tokenizer.readBuffer(I),C=a.findZero(I,0,I.length);const N=I.toString("utf8",0,C),F=Buffer.from(I.slice(C+1));this.metadata.addTag(c,k,{description:N,data:F})}break;case d.DataType.external_info:u(`Ignore external info ${k}`),await this.tokenizer.ignore(_.size);break;case d.DataType.reserved:u(`Ignore external info ${k}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${k}"`),await this.tokenizer.ignore(_.size);break}}}async parseDescriptorExpansion(b){return await this.tokenizer.ignore(b),this.parseHeader()}async parseHeader(){const b=await this.tokenizer.readToken(d.Header);return this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",b.bitsPerSample),this.metadata.setFormat("sampleRate",b.sampleRate),this.metadata.setFormat("numberOfChannels",b.channel),this.metadata.setFormat("duration",lo.calculateDuration(b)),{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}};return APEv2Parser.APEv2Parser=h,APEv2Parser}var hasRequiredID3v1Parser;function requireID3v1Parser(){return hasRequiredID3v1Parser||(hasRequiredID3v1Parser=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.hasID3v1Header=n.ID3v1Parser=n.Genres=void 0;const r=requireBrowser$3(),s=requireLib$2(),a=requireUtil$1(),l=requireBasicParser(),d=requireAPEv2Parser(),u=(0,r.default)("music-metadata:parser:ID3v1");n.Genres=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"];const c={len:128,get:(b,x)=>{const T=new p(3).get(b,x);return T==="TAG"?{header:T,title:new p(30).get(b,x+3),artist:new p(30).get(b,x+33),album:new p(30).get(b,x+63),year:new p(4).get(b,x+93),comment:new p(28).get(b,x+97),zeroByte:s.UINT8.get(b,x+127),track:s.UINT8.get(b,x+126),genre:s.UINT8.get(b,x+127)}:null}};class p extends s.StringType{constructor(x){super(x,"binary")}get(x,T){let S=super.get(x,T);return S=a.trimRightNull(S),S=S.trim(),S.length>0?S:void 0}}class h extends l.BasicParser{static getGenre(x){if(x<n.Genres.length)return n.Genres[x]}async parse(){if(!this.tokenizer.fileInfo.size){u("Skip checking for ID3v1 because the file-size is unknown");return}if(this.options.apeHeader){this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position);const S=new d.APEv2Parser;S.init(this.metadata,this.tokenizer,this.options),await S.parseTags(this.options.apeHeader.footer)}const x=this.tokenizer.fileInfo.size-c.len;if(this.tokenizer.position>x){u("Already consumed the last 128 bytes");return}const T=await this.tokenizer.readToken(c,x);if(T){u("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-c.len);for(const _ of["title","artist","album","comment","track","year"])T[_]&&T[_]!==""&&this.addTag(_,T[_]);const S=h.getGenre(T.genre);S&&this.addTag("genre",S)}else u("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-c.len)}addTag(x,T){this.metadata.addTag("ID3v1",x,T)}}n.ID3v1Parser=h;async function y(b){if(b.fileSize>=128){const x=Buffer.alloc(3);return await b.randomRead(x,0,x.length,b.fileSize-128),x.toString("binary")==="TAG"}return!1}n.hasID3v1Header=y})(ID3v1Parser)),ID3v1Parser}var hasRequiredFrameParser;function requireFrameParser(){if(hasRequiredFrameParser)return FrameParser;hasRequiredFrameParser=1,Object.defineProperty(FrameParser,"__esModule",{value:!0}),FrameParser.FrameParser=FrameParser.parseGenre=void 0;const n=requireBrowser$3(),r=requireLib$2(),s=requireUtil$1(),a=requireID3v2Token(),l=requireID3v1Parser(),d=(0,n.default)("music-metadata:id3v2:frame-parser"),u="latin1";function c(y){const b=[];let x,T="";for(const S of y)if(typeof x=="string")if(S==="("&&x==="")T+="(",x=void 0;else if(S===")"){T!==""&&(b.push(T),T="");const _=p(x);_&&b.push(_),x=void 0}else x+=S;else S==="("?x="":T+=S;return T&&(b.length===0&&T.match(/^\d*$/)&&(T=l.Genres[T]),b.push(T)),b}FrameParser.parseGenre=c;function p(y){if(y==="RX")return"Remix";if(y==="CR")return"Cover";if(y.match(/^\d*$/))return l.Genres[y]}let h=class ui{constructor(b,x){this.major=b,this.warningCollector=x}readData(b,x,T){if(b.length===0){this.warningCollector.addWarning(`id3v2.${this.major} header has empty tag type=${x}`);return}const{encoding:S,bom:_}=a.TextEncodingToken.get(b,0),C=b.length;let k=0,I=[];const N=ui.getNullTerminatorLength(S);let F;const j={};switch(d(`Parsing tag type=${x}, encoding=${S}, bom=${_}`),x!=="TXXX"&&x[0]==="T"?"T*":x){case"T*":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":let V;try{V=s.decodeString(b.slice(1),S).replace(/\x00+$/,"")}catch(Se){this.warningCollector.addWarning(`id3v2.${this.major} type=${x} header has invalid string value: ${Se.message}`)}switch(x){case"TMCL":case"TIPL":case"IPLS":I=this.splitValue(x,V),I=ui.functionList(I);break;case"TRK":case"TRCK":case"TPOS":I=V;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":I=this.splitValue(x,V);break;case"TCO":case"TCON":I=this.splitValue(x,V).map(Se=>c(Se)).reduce((Se,Q)=>Se.concat(Q),[]);break;case"PCS":case"PCST":I=this.major>=4?this.splitValue(x,V):[V],I=Array.isArray(I)&&I[0]===""?1:0;break;default:I=this.major>=4?this.splitValue(x,V):[V]}break;case"TXXX":I=ui.readIdentifierAndData(b,k+1,C,S),I={description:I.id,text:this.splitValue(x,s.decodeString(I.data,S).replace(/\x00+$/,""))};break;case"PIC":case"APIC":if(T){const Se={};switch(k+=1,this.major){case 2:Se.format=s.decodeString(b.slice(k,k+3),"latin1"),k+=3;break;case 3:case 4:F=s.findZero(b,k,C,u),Se.format=s.decodeString(b.slice(k,F),u),k=F+1;break;default:throw new Error("Warning: unexpected major versionIndex: "+this.major)}Se.format=ui.fixPictureMimeType(Se.format),Se.type=a.AttachedPictureType[b[k]],k+=1,F=s.findZero(b,k,C,S),Se.description=s.decodeString(b.slice(k,F),S),k=F+N,Se.data=Buffer.from(b.slice(k,C)),I=Se}break;case"CNT":case"PCNT":I=r.UINT32_BE.get(b,0);break;case"SYLT":for(k+=7,I=[];k<C;){const Se=b.slice(k,k=s.findZero(b,k,C,S));k+=5,I.push(s.decodeString(Se,S))}break;case"ULT":case"USLT":case"COM":case"COMM":k+=1,j.language=s.decodeString(b.slice(k,k+3),u),k+=3,F=s.findZero(b,k,C,S),j.description=s.decodeString(b.slice(k,F),S),k=F+N,j.text=s.decodeString(b.slice(k,C),S).replace(/\x00+$/,""),I=[j];break;case"UFID":I=ui.readIdentifierAndData(b,k,C,u),I={owner_identifier:I.id,identifier:I.data};break;case"PRIV":I=ui.readIdentifierAndData(b,k,C,u),I={owner_identifier:I.id,data:I.data};break;case"POPM":F=s.findZero(b,k,C,u);const M=s.decodeString(b.slice(k,F),u);k=F+1;const q=C-k;I={email:M,rating:r.UINT8.get(b,k),counter:q>=5?r.UINT32_BE.get(b,k+1):void 0};break;case"GEOB":{F=s.findZero(b,k+1,C,S);const Se=s.decodeString(b.slice(k+1,F),u);k=F+1,F=s.findZero(b,k,C-k,S);const Q=s.decodeString(b.slice(k,F),u);k=F+1,F=s.findZero(b,k,C-k,S);const ee=s.decodeString(b.slice(k,F),u);I={type:Se,filename:Q,description:ee,data:b.slice(k+1,C)};break}case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":I=s.decodeString(b.slice(k,F),u);break;case"WXXX":{F=s.findZero(b,k+1,C,S);const Se=s.decodeString(b.slice(k+1,F),S);k=F+(S==="utf16le"?2:1),I={description:Se,url:s.decodeString(b.slice(k,C),u)};break}case"WFD":case"WFED":I=s.decodeString(b.slice(k+1,s.findZero(b,k+1,C,S)),S);break;case"MCDI":{I=b.slice(0,C);break}default:d("Warning: unsupported id3v2-tag-type: "+x);break}return I}static fixPictureMimeType(b){switch(b=b.toLocaleLowerCase(),b){case"jpg":return"image/jpeg";case"png":return"image/png"}return b}static functionList(b){const x={};for(let T=0;T+1<b.length;T+=2){const S=b[T+1].split(",");x[b[T]]=x.hasOwnProperty(b[T])?x[b[T]].concat(S):S}return x}splitValue(b,x){let T;return this.major<4?(T=x.split(/\x00/g),T.length>1?this.warningCollector.addWarning(`ID3v2.${this.major} ${b} uses non standard null-separator.`):T=x.split(/\//g)):T=x.split(/\x00/g),ui.trimArray(T)}static trimArray(b){return b.map(x=>x.replace(/\x00+$/,"").trim())}static readIdentifierAndData(b,x,T,S){const _=s.findZero(b,x,T,S),C=s.decodeString(b.slice(x,_),S);return x=_+ui.getNullTerminatorLength(S),{id:C,data:b.slice(x,T)}}static getNullTerminatorLength(b){return b==="utf16le"?2:1}};return FrameParser.FrameParser=h,FrameParser}var hasRequiredID3v2Parser;function requireID3v2Parser(){if(hasRequiredID3v2Parser)return ID3v2Parser;hasRequiredID3v2Parser=1,Object.defineProperty(ID3v2Parser,"__esModule",{value:!0}),ID3v2Parser.ID3v2Parser=void 0;const n=requireLib$2(),r=requireUtil$1(),s=requireFrameParser(),a=requireID3v2Token();let l=class Gi{static removeUnsyncBytes(u){let c=0,p=0;for(;c<u.length-1;)c!==p&&(u[p]=u[c]),c+=u[c]===255&&u[c+1]===0?2:1,p++;return c<u.length&&(u[p++]=u[c]),u.slice(0,p)}static getFrameHeaderLength(u){switch(u){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}static readFrameFlags(u){return{status:{tag_alter_preservation:r.getBit(u,0,6),file_alter_preservation:r.getBit(u,0,5),read_only:r.getBit(u,0,4)},format:{grouping_identity:r.getBit(u,1,7),compression:r.getBit(u,1,3),encryption:r.getBit(u,1,2),unsynchronisation:r.getBit(u,1,1),data_length_indicator:r.getBit(u,1,0)}}}static readFrameData(u,c,p,h,y){const b=new s.FrameParser(p,y);switch(p){case 2:return b.readData(u,c.id,h);case 3:case 4:return c.flags.format.unsynchronisation&&(u=Gi.removeUnsyncBytes(u)),c.flags.format.data_length_indicator&&(u=u.slice(4,u.length)),b.readData(u,c.id,h);default:throw new Error("Unexpected majorVer: "+p)}}static makeDescriptionTagName(u,c){return u+(c?":"+c:"")}async parse(u,c,p){this.tokenizer=c,this.metadata=u,this.options=p;const h=await this.tokenizer.readToken(a.ID3v2Header);if(h.fileIdentifier!=="ID3")throw new Error("expected ID3-header file-identifier 'ID3' was not found");return this.id3Header=h,this.headerType="ID3v2."+h.version.major,h.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(h.size)}async parseExtendedHeader(){const u=await this.tokenizer.readToken(a.ExtendedHeader),c=u.size-a.ExtendedHeader.len;return c>0?this.parseExtendedHeaderData(c,u.size):this.parseId3Data(this.id3Header.size-u.size)}async parseExtendedHeaderData(u,c){return await this.tokenizer.ignore(u),this.parseId3Data(this.id3Header.size-c)}async parseId3Data(u){const c=await this.tokenizer.readToken(new n.Uint8ArrayType(u));for(const p of this.parseMetadata(c))if(p.id==="TXXX"){if(p.value)for(const h of p.value.text)this.addTag(Gi.makeDescriptionTagName(p.id,p.value.description),h)}else if(p.id==="COM")for(const h of p.value)this.addTag(Gi.makeDescriptionTagName(p.id,h.description),h.text);else if(p.id==="COMM")for(const h of p.value)this.addTag(Gi.makeDescriptionTagName(p.id,h.description),h);else if(Array.isArray(p.value))for(const h of p.value)this.addTag(p.id,h);else this.addTag(p.id,p.value)}addTag(u,c){this.metadata.addTag(this.headerType,u,c)}parseMetadata(u){let c=0;const p=[];for(;c!==u.length;){const h=Gi.getFrameHeaderLength(this.id3Header.version.major);if(c+h>u.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}const y=u.slice(c,c+=h),b=this.readFrameHeader(y,this.id3Header.version.major),x=u.slice(c,c+=b.length),T=Gi.readFrameData(x,b,this.id3Header.version.major,!this.options.skipCovers,this.metadata);T&&p.push({id:b.id,value:T})}return p}readFrameHeader(u,c){let p;switch(c){case 2:p={id:Buffer.from(u.slice(0,3)).toString("ascii"),length:n.UINT24_BE.get(u,3)},p.id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${p.id}`);break;case 3:case 4:p={id:Buffer.from(u.slice(0,4)).toString("ascii"),length:(c===4?a.UINT32SYNCSAFE:n.UINT32_BE).get(u,4),flags:Gi.readFrameFlags(u.slice(8,10))},p.id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${p.id}`);break;default:throw new Error("Unexpected majorVer: "+c)}return p}};return ID3v2Parser.ID3v2Parser=l,ID3v2Parser}var AiffToken={},hasRequiredAiffToken;function requireAiffToken(){if(hasRequiredAiffToken)return AiffToken;hasRequiredAiffToken=1,Object.defineProperty(AiffToken,"__esModule",{value:!0}),AiffToken.Common=void 0;const n=requireLib$2(),r=requireFourCC();class s{constructor(l,d){this.isAifc=d;const u=d?22:18;if(l.chunkSize<u)throw new Error(`COMMON CHUNK size should always be at least ${u}`);this.len=l.chunkSize}get(l,d){const u=l.readUInt16BE(d+8)-16398,c=l.readUInt16BE(d+8+2),p={numChannels:l.readUInt16BE(d),numSampleFrames:l.readUInt32BE(d+2),sampleSize:l.readUInt16BE(d+6),sampleRate:u<0?c>>Math.abs(u):c<<u};if(this.isAifc){if(p.compressionType=r.FourCcToken.get(l,d+18),this.len>22){const h=l.readInt8(d+22);if(h>0){const y=(h+1)%2;if(23+h+y===this.len)p.compressionName=new n.StringType(h,"binary").get(l,d+23);else throw new Error("Illegal pstring length")}else p.compressionName=void 0}}else p.compressionName="PCM";return p}}return AiffToken.Common=s,AiffToken}var iff={},hasRequiredIff;function requireIff(){if(hasRequiredIff)return iff;hasRequiredIff=1,Object.defineProperty(iff,"__esModule",{value:!0}),iff.Header=void 0;const n=requireLib$2(),r=requireFourCC();return iff.Header={len:8,get:(s,a)=>({chunkID:r.FourCcToken.get(s,a),chunkSize:Number(BigInt(n.UINT32_BE.get(s,a+4)))})},iff}var hasRequiredAiffParser;function requireAiffParser(){if(hasRequiredAiffParser)return AiffParser;hasRequiredAiffParser=1,Object.defineProperty(AiffParser,"__esModule",{value:!0}),AiffParser.AIFFParser=void 0;const n=requireLib$2(),r=requireBrowser$3(),s=requireCore$2(),a=requireID3v2Parser(),l=requireFourCC(),d=requireBasicParser(),u=requireAiffToken(),c=requireIff(),p=(0,r.default)("music-metadata:parser:aiff"),h={NONE:"not compressed	PCM	Apple Computer",sowt:"PCM (byte swapped)",fl32:"32-bit floating point IEEE 32-bit float",fl64:"64-bit floating point IEEE 64-bit float	Apple Computer",alaw:"ALaw 2:1	8-bit ITU-T G.711 A-law",ulaw:"Law 2:1	8-bit ITU-T G.711 -law	Apple Computer",ULAW:"CCITT G.711 u-law 8-bit ITU-T G.711 -law",ALAW:"CCITT G.711 A-law 8-bit ITU-T G.711 A-law",FL32:"Float 32	IEEE 32-bit float "};class y extends d.BasicParser{async parse(){if((await this.tokenizer.readToken(c.Header)).chunkID!=="FORM")throw new Error("Invalid Chunk-ID, expected 'FORM'");const T=await this.tokenizer.readToken(l.FourCcToken);switch(T){case"AIFF":this.metadata.setFormat("container",T),this.isCompressed=!1;break;case"AIFC":this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0;break;default:throw Error("Unsupported AIFF type: "+T)}this.metadata.setFormat("lossless",!this.isCompressed);try{for(;!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=c.Header.len;){p("Reading AIFF chunk at offset="+this.tokenizer.position);const S=await this.tokenizer.readToken(c.Header),_=2*Math.round(S.chunkSize/2),C=await this.readData(S);await this.tokenizer.ignore(_-C)}}catch(S){if(S instanceof s.EndOfStreamError)p("End-of-stream");else throw S}}async readData(x){var T;switch(x.chunkID){case"COMM":const S=await this.tokenizer.readToken(new u.Common(x,this.isCompressed));return this.metadata.setFormat("bitsPerSample",S.sampleSize),this.metadata.setFormat("sampleRate",S.sampleRate),this.metadata.setFormat("numberOfChannels",S.numChannels),this.metadata.setFormat("numberOfSamples",S.numSampleFrames),this.metadata.setFormat("duration",S.numSampleFrames/S.sampleRate),this.metadata.setFormat("codec",(T=S.compressionName)!==null&&T!==void 0?T:h[S.compressionType]),x.chunkSize;case"ID3 ":const _=await this.tokenizer.readToken(new n.Uint8ArrayType(x.chunkSize)),C=s.fromBuffer(_);return await new a.ID3v2Parser().parse(this.metadata,C,this.options),x.chunkSize;case"SSND":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*x.chunkSize/this.metadata.format.duration),0;case"NAME":case"AUTH":case"(c) ":case"ANNO":return this.readTextChunk(x);default:return p(`Ignore chunk id=${x.chunkID}, size=${x.chunkSize}`),0}}async readTextChunk(x){return(await this.tokenizer.readToken(new n.StringType(x.chunkSize,"ascii"))).split("\0").map(S=>S.trim()).filter(S=>S&&S.length>0).forEach(S=>{this.metadata.addTag("AIFF",x.chunkID,S.trim())}),x.chunkSize}}return AiffParser.AIFFParser=y,AiffParser}var AsfParser={},GUID={},hasRequiredGUID;function requireGUID(){if(hasRequiredGUID)return GUID;hasRequiredGUID=1,Object.defineProperty(GUID,"__esModule",{value:!0});let n=class ci{static fromBin(s,a=0){return new ci(this.decode(s,a))}static decode(s,a=0){return(s.readUInt32LE(a).toString(16)+"-"+s.readUInt16LE(a+4).toString(16)+"-"+s.readUInt16LE(a+6).toString(16)+"-"+s.readUInt16BE(a+8).toString(16)+"-"+s.slice(a+10,a+16).toString("hex")).toUpperCase()}static decodeMediaType(s){switch(s.str){case ci.AudioMedia.str:return"audio";case ci.VideoMedia.str:return"video";case ci.CommandMedia.str:return"command";case ci.Degradable_JPEG_Media.str:return"degradable-jpeg";case ci.FileTransferMedia.str:return"file-transfer";case ci.BinaryMedia.str:return"binary"}}static encode(s){const a=Buffer.alloc(16);return a.writeUInt32LE(parseInt(s.slice(0,8),16),0),a.writeUInt16LE(parseInt(s.slice(9,13),16),4),a.writeUInt16LE(parseInt(s.slice(14,18),16),6),Buffer.from(s.slice(19,23),"hex").copy(a,8),Buffer.from(s.slice(24),"hex").copy(a,10),a}constructor(s){this.str=s}equals(s){return this.str===s.str}toBin(){return ci.encode(this.str)}};return n.HeaderObject=new n("75B22630-668E-11CF-A6D9-00AA0062CE6C"),n.DataObject=new n("75B22636-668E-11CF-A6D9-00AA0062CE6C"),n.SimpleIndexObject=new n("33000890-E5B1-11CF-89F4-00A0C90349CB"),n.IndexObject=new n("D6E229D3-35DA-11D1-9034-00A0C90349BE"),n.MediaObjectIndexObject=new n("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C"),n.TimecodeIndexObject=new n("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C"),n.FilePropertiesObject=new n("8CABDCA1-A947-11CF-8EE4-00C00C205365"),n.StreamPropertiesObject=new n("B7DC0791-A9B7-11CF-8EE6-00C00C205365"),n.HeaderExtensionObject=new n("5FBF03B5-A92E-11CF-8EE3-00C00C205365"),n.CodecListObject=new n("86D15240-311D-11D0-A3A4-00A0C90348F6"),n.ScriptCommandObject=new n("1EFB1A30-0B62-11D0-A39B-00A0C90348F6"),n.MarkerObject=new n("F487CD01-A951-11CF-8EE6-00C00C205365"),n.BitrateMutualExclusionObject=new n("D6E229DC-35DA-11D1-9034-00A0C90349BE"),n.ErrorCorrectionObject=new n("75B22635-668E-11CF-A6D9-00AA0062CE6C"),n.ContentDescriptionObject=new n("75B22633-668E-11CF-A6D9-00AA0062CE6C"),n.ExtendedContentDescriptionObject=new n("D2D0A440-E307-11D2-97F0-00A0C95EA850"),n.ContentBrandingObject=new n("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E"),n.StreamBitratePropertiesObject=new n("7BF875CE-468D-11D1-8D82-006097C9A2B2"),n.ContentEncryptionObject=new n("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E"),n.ExtendedContentEncryptionObject=new n("298AE614-2622-4C17-B935-DAE07EE9289C"),n.DigitalSignatureObject=new n("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E"),n.PaddingObject=new n("1806D474-CADF-4509-A4BA-9AABCB96AAE8"),n.ExtendedStreamPropertiesObject=new n("14E6A5CB-C672-4332-8399-A96952065B5A"),n.AdvancedMutualExclusionObject=new n("A08649CF-4775-4670-8A16-6E35357566CD"),n.GroupMutualExclusionObject=new n("D1465A40-5A79-4338-B71B-E36B8FD6C249"),n.StreamPrioritizationObject=new n("D4FED15B-88D3-454F-81F0-ED5C45999E24"),n.BandwidthSharingObject=new n("A69609E6-517B-11D2-B6AF-00C04FD908E9"),n.LanguageListObject=new n("7C4346A9-EFE0-4BFC-B229-393EDE415C85"),n.MetadataObject=new n("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA"),n.MetadataLibraryObject=new n("44231C94-9498-49D1-A141-1D134E457054"),n.IndexParametersObject=new n("D6E229DF-35DA-11D1-9034-00A0C90349BE"),n.MediaObjectIndexParametersObject=new n("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7"),n.TimecodeIndexParametersObject=new n("F55E496D-9797-4B5D-8C8B-604DFE9BFB24"),n.CompatibilityObject=new n("26F18B5D-4584-47EC-9F5F-0E651F0452C9"),n.AdvancedContentEncryptionObject=new n("43058533-6981-49E6-9B74-AD12CB86D58C"),n.AudioMedia=new n("F8699E40-5B4D-11CF-A8FD-00805F5C442B"),n.VideoMedia=new n("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B"),n.CommandMedia=new n("59DACFC0-59E6-11D0-A3AC-00A0C90348F6"),n.JFIF_Media=new n("B61BE100-5B4E-11CF-A8FD-00805F5C442B"),n.Degradable_JPEG_Media=new n("35907DE0-E415-11CF-A917-00805F5C442B"),n.FileTransferMedia=new n("91BD222C-F21C-497A-8B6D-5AA86BFC0185"),n.BinaryMedia=new n("3AFB65E2-47EF-40F2-AC2C-70A90D71D343"),n.ASF_Index_Placeholder_Object=new n("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2"),GUID.default=n,GUID}var AsfObject={},AsfUtil={},hasRequiredAsfUtil;function requireAsfUtil(){if(hasRequiredAsfUtil)return AsfUtil;hasRequiredAsfUtil=1,Object.defineProperty(AsfUtil,"__esModule",{value:!0}),AsfUtil.AsfUtil=void 0;const n=requireLib$2(),r=requireUtil$1();let s=class pc{static getParserForAttr(l){return pc.attributeParsers[l]}static parseUnicodeAttr(l){return r.stripNulls(r.decodeString(l,"utf16le"))}static parseByteArrayAttr(l){return Buffer.from(l)}static parseBoolAttr(l,d=0){return pc.parseWordAttr(l,d)===1}static parseDWordAttr(l,d=0){return l.readUInt32LE(d)}static parseQWordAttr(l,d=0){return n.UINT64_LE.get(l,d)}static parseWordAttr(l,d=0){return l.readUInt16LE(d)}};return s.attributeParsers=[s.parseUnicodeAttr,s.parseByteArrayAttr,s.parseBoolAttr,s.parseDWordAttr,s.parseQWordAttr,s.parseWordAttr,s.parseByteArrayAttr],AsfUtil.AsfUtil=s,AsfUtil}var hasRequiredAsfObject;function requireAsfObject(){return hasRequiredAsfObject||(hasRequiredAsfObject=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.WmPictureToken=n.MetadataLibraryObjectState=n.MetadataObjectState=n.ExtendedStreamPropertiesObjectState=n.ExtendedContentDescriptionObjectState=n.ContentDescriptionObjectState=n.readCodecEntries=n.HeaderExtensionObject=n.StreamPropertiesObject=n.FilePropertiesObject=n.IgnoreObjectState=n.State=n.HeaderObjectToken=n.TopLevelHeaderObjectToken=n.DataType=void 0;const r=requireUtil$1(),s=requireLib$2(),a=requireGUID(),l=requireAsfUtil(),d=requireID3v2Token();(function(V){V[V.UnicodeString=0]="UnicodeString",V[V.ByteArray=1]="ByteArray",V[V.Bool=2]="Bool",V[V.DWord=3]="DWord",V[V.QWord=4]="QWord",V[V.Word=5]="Word"})(n.DataType||(n.DataType={})),n.TopLevelHeaderObjectToken={len:30,get:(V,M)=>({objectId:a.default.fromBin(new s.BufferType(16).get(V,M)),objectSize:Number(s.UINT64_LE.get(V,M+16)),numberOfHeaderObjects:s.UINT32_LE.get(V,M+24)})},n.HeaderObjectToken={len:24,get:(V,M)=>({objectId:a.default.fromBin(new s.BufferType(16).get(V,M)),objectSize:Number(s.UINT64_LE.get(V,M+16))})};class u{constructor(M){this.len=Number(M.objectSize)-n.HeaderObjectToken.len}postProcessTag(M,q,Se,Q){if(q==="WM/Picture")M.push({id:q,value:j.fromBuffer(Q)});else{const ee=l.AsfUtil.getParserForAttr(Se);if(!ee)throw new Error("unexpected value headerType: "+Se);M.push({id:q,value:ee(Q)})}}}n.State=u;class c extends u{constructor(M){super(M)}get(M,q){return null}}n.IgnoreObjectState=c;class p extends u{constructor(M){super(M)}get(M,q){return{fileId:a.default.fromBin(M,q),fileSize:s.UINT64_LE.get(M,q+16),creationDate:s.UINT64_LE.get(M,q+24),dataPacketsCount:s.UINT64_LE.get(M,q+32),playDuration:s.UINT64_LE.get(M,q+40),sendDuration:s.UINT64_LE.get(M,q+48),preroll:s.UINT64_LE.get(M,q+56),flags:{broadcast:r.getBit(M,q+64,24),seekable:r.getBit(M,q+64,25)},minimumDataPacketSize:s.UINT32_LE.get(M,q+68),maximumDataPacketSize:s.UINT32_LE.get(M,q+72),maximumBitrate:s.UINT32_LE.get(M,q+76)}}}p.guid=a.default.FilePropertiesObject,n.FilePropertiesObject=p;class h extends u{constructor(M){super(M)}get(M,q){return{streamType:a.default.decodeMediaType(a.default.fromBin(M,q)),errorCorrectionType:a.default.fromBin(M,q+8)}}}h.guid=a.default.StreamPropertiesObject,n.StreamPropertiesObject=h;class y{constructor(){this.len=22}get(M,q){return{reserved1:a.default.fromBin(M,q),reserved2:M.readUInt16LE(q+16),extensionDataSize:M.readUInt32LE(q+18)}}}y.guid=a.default.HeaderExtensionObject,n.HeaderExtensionObject=y;const b={len:20,get:(V,M)=>({entryCount:V.readUInt16LE(M+16)})};async function x(V){const M=await V.readNumber(s.UINT16_LE);return(await V.readToken(new s.StringType(M*2,"utf16le"))).replace("\0","")}async function T(V){const M=await V.readToken(b),q=[];for(let Se=0;Se<M.entryCount;++Se)q.push(await _(V));return q}n.readCodecEntries=T;async function S(V){const M=await V.readNumber(s.UINT16_LE),q=Buffer.alloc(M);return await V.readBuffer(q),q}async function _(V){const M=await V.readNumber(s.UINT16_LE);return{type:{videoCodec:(M&1)===1,audioCodec:(M&2)===2},codecName:await x(V),description:await x(V),information:await S(V)}}class C extends u{constructor(M){super(M)}get(M,q){const Se=[];let Q=q+10;for(let ee=0;ee<C.contentDescTags.length;++ee){const we=M.readUInt16LE(q+ee*2);if(we>0){const he=C.contentDescTags[ee],He=Q+we;Se.push({id:he,value:l.AsfUtil.parseUnicodeAttr(M.slice(Q,He))}),Q=He}}return Se}}C.guid=a.default.ContentDescriptionObject,C.contentDescTags=["Title","Author","Copyright","Description","Rating"],n.ContentDescriptionObjectState=C;class k extends u{constructor(M){super(M)}get(M,q){const Se=[],Q=M.readUInt16LE(q);let ee=q+2;for(let we=0;we<Q;we+=1){const he=M.readUInt16LE(ee);ee+=2;const He=l.AsfUtil.parseUnicodeAttr(M.slice(ee,ee+he));ee+=he;const Je=M.readUInt16LE(ee);ee+=2;const de=M.readUInt16LE(ee);ee+=2;const Be=M.slice(ee,ee+de);ee+=de,this.postProcessTag(Se,He,Je,Be)}return Se}}k.guid=a.default.ExtendedContentDescriptionObject,n.ExtendedContentDescriptionObjectState=k;class I extends u{constructor(M){super(M)}get(M,q){return{startTime:s.UINT64_LE.get(M,q),endTime:s.UINT64_LE.get(M,q+8),dataBitrate:M.readInt32LE(q+12),bufferSize:M.readInt32LE(q+16),initialBufferFullness:M.readInt32LE(q+20),alternateDataBitrate:M.readInt32LE(q+24),alternateBufferSize:M.readInt32LE(q+28),alternateInitialBufferFullness:M.readInt32LE(q+32),maximumObjectSize:M.readInt32LE(q+36),flags:{reliableFlag:r.getBit(M,q+40,0),seekableFlag:r.getBit(M,q+40,1),resendLiveCleanpointsFlag:r.getBit(M,q+40,2)},streamNumber:M.readInt16LE(q+42),streamLanguageId:M.readInt16LE(q+44),averageTimePerFrame:M.readInt32LE(q+52),streamNameCount:M.readInt32LE(q+54),payloadExtensionSystems:M.readInt32LE(q+56),streamNames:[],streamPropertiesObject:null}}}I.guid=a.default.ExtendedStreamPropertiesObject,n.ExtendedStreamPropertiesObjectState=I;class N extends u{constructor(M){super(M)}get(M,q){const Se=[],Q=Buffer.from(M),ee=Q.readUInt16LE(q);let we=q+2;for(let he=0;he<ee;he+=1){we+=4;const He=Q.readUInt16LE(we);we+=2;const Je=Q.readUInt16LE(we);we+=2;const de=Q.readUInt32LE(we);we+=4;const Be=l.AsfUtil.parseUnicodeAttr(Q.slice(we,we+He));we+=He;const me=Q.slice(we,we+de);we+=de,this.postProcessTag(Se,Be,Je,me)}return Se}}N.guid=a.default.MetadataObject,n.MetadataObjectState=N;class F extends N{constructor(M){super(M)}}F.guid=a.default.MetadataLibraryObject,n.MetadataLibraryObjectState=F;class j{static fromBase64(M){return this.fromBuffer(Buffer.from(M,"base64"))}static fromBuffer(M){return new j(M.length).get(M,0)}constructor(M){this.len=M}get(M,q){const Se=M.readUInt8(q++),Q=M.readInt32LE(q);let ee=5;for(;M.readUInt16BE(ee)!==0;)ee+=2;const we=M.slice(5,ee).toString("utf16le");for(;M.readUInt16BE(ee)!==0;)ee+=2;const he=M.slice(5,ee).toString("utf16le");return{type:d.AttachedPictureType[Se],format:we,description:he,size:Q,data:M.slice(ee+4)}}}n.WmPictureToken=j})(AsfObject)),AsfObject}var hasRequiredAsfParser;function requireAsfParser(){if(hasRequiredAsfParser)return AsfParser;hasRequiredAsfParser=1,Object.defineProperty(AsfParser,"__esModule",{value:!0}),AsfParser.AsfParser=void 0;const n=requireBrowser$3(),r=requireType(),s=requireGUID(),a=requireAsfObject(),l=requireBasicParser(),d=(0,n.default)("music-metadata:parser:ASF"),u="asf";let c=class extends l.BasicParser{async parse(){const h=await this.tokenizer.readToken(a.TopLevelHeaderObjectToken);if(!h.objectId.equals(s.default.HeaderObject))throw new Error("expected asf header; but was not found; got: "+h.objectId.str);try{await this.parseObjectHeader(h.numberOfHeaderObjects)}catch(y){d("Error while parsing ASF: %s",y)}}async parseObjectHeader(h){let y;do{const b=await this.tokenizer.readToken(a.HeaderObjectToken);switch(d("header GUID=%s",b.objectId.str),b.objectId.str){case a.FilePropertiesObject.guid.str:const x=await this.tokenizer.readToken(new a.FilePropertiesObject(b));this.metadata.setFormat("duration",Number(x.playDuration/BigInt(1e3))/1e4-Number(x.preroll)/1e3),this.metadata.setFormat("bitrate",x.maximumBitrate);break;case a.StreamPropertiesObject.guid.str:const T=await this.tokenizer.readToken(new a.StreamPropertiesObject(b));this.metadata.setFormat("container","ASF/"+T.streamType);break;case a.HeaderExtensionObject.guid.str:const S=await this.tokenizer.readToken(new a.HeaderExtensionObject);await this.parseExtensionObject(S.extensionDataSize);break;case a.ContentDescriptionObjectState.guid.str:y=await this.tokenizer.readToken(new a.ContentDescriptionObjectState(b)),this.addTags(y);break;case a.ExtendedContentDescriptionObjectState.guid.str:y=await this.tokenizer.readToken(new a.ExtendedContentDescriptionObjectState(b)),this.addTags(y);break;case s.default.CodecListObject.str:const _=await a.readCodecEntries(this.tokenizer);_.forEach(k=>{this.metadata.addStreamInfo({type:k.type.videoCodec?r.TrackType.video:r.TrackType.audio,codecName:k.codecName})});const C=_.filter(k=>k.type.audioCodec).map(k=>k.codecName).join("/");this.metadata.setFormat("codec",C);break;case s.default.StreamBitratePropertiesObject.str:await this.tokenizer.ignore(b.objectSize-a.HeaderObjectToken.len);break;case s.default.PaddingObject.str:d("Padding: %s bytes",b.objectSize-a.HeaderObjectToken.len),await this.tokenizer.ignore(b.objectSize-a.HeaderObjectToken.len);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+b.objectId.str),d("Ignore ASF-Object-GUID: %s",b.objectId.str),await this.tokenizer.readToken(new a.IgnoreObjectState(b))}}while(--h)}addTags(h){h.forEach(y=>{this.metadata.addTag(u,y.id,y.value)})}async parseExtensionObject(h){do{const y=await this.tokenizer.readToken(a.HeaderObjectToken),b=y.objectSize-a.HeaderObjectToken.len;switch(y.objectId.str){case a.ExtendedStreamPropertiesObjectState.guid.str:await this.tokenizer.readToken(new a.ExtendedStreamPropertiesObjectState(y));break;case a.MetadataObjectState.guid.str:const x=await this.tokenizer.readToken(new a.MetadataObjectState(y));this.addTags(x);break;case a.MetadataLibraryObjectState.guid.str:const T=await this.tokenizer.readToken(new a.MetadataLibraryObjectState(y));this.addTags(T);break;case s.default.PaddingObject.str:await this.tokenizer.ignore(b);break;case s.default.CompatibilityObject.str:this.tokenizer.ignore(b);break;case s.default.ASF_Index_Placeholder_Object.str:await this.tokenizer.ignore(b);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+y.objectId.str),await this.tokenizer.readToken(new a.IgnoreObjectState(y));break}h-=y.objectSize}while(h>0)}};return AsfParser.AsfParser=c,AsfParser}var FlacParser={},Vorbis={},hasRequiredVorbis;function requireVorbis(){if(hasRequiredVorbis)return Vorbis;hasRequiredVorbis=1,Object.defineProperty(Vorbis,"__esModule",{value:!0}),Vorbis.IdentificationHeader=Vorbis.CommonHeader=Vorbis.VorbisPictureToken=void 0;const n=requireLib$2(),r=requireID3v2Token();class s{static fromBase64(l){return this.fromBuffer(Buffer.from(l,"base64"))}static fromBuffer(l){return new s(l.length).get(l,0)}constructor(l){this.len=l}get(l,d){const u=r.AttachedPictureType[n.UINT32_BE.get(l,d)],c=n.UINT32_BE.get(l,d+=4),p=l.toString("utf-8",d+=4,d+c),h=n.UINT32_BE.get(l,d+=c),y=l.toString("utf-8",d+=4,d+h),b=n.UINT32_BE.get(l,d+=h),x=n.UINT32_BE.get(l,d+=4),T=n.UINT32_BE.get(l,d+=4),S=n.UINT32_BE.get(l,d+=4),_=n.UINT32_BE.get(l,d+=4),C=Buffer.from(l.slice(d+=4,d+_));return{type:u,format:p,description:y,width:b,height:x,colour_depth:T,indexed_color:S,data:C}}}return Vorbis.VorbisPictureToken=s,Vorbis.CommonHeader={len:7,get:(a,l)=>({packetType:a.readUInt8(l),vorbis:new n.StringType(6,"ascii").get(a,l+1)})},Vorbis.IdentificationHeader={len:23,get:(a,l)=>{const d=new DataView(a.buffer,a.byteOffset);return{version:d.getUint32(l+0,!0),channelMode:d.getUint8(l+4),sampleRate:d.getUint32(l+5,!0),bitrateMax:d.getUint32(l+9,!0),bitrateNominal:d.getUint32(l+13,!0),bitrateMin:d.getUint32(l+17,!0)}}},Vorbis}var AbstractID3Parser={},hasRequiredAbstractID3Parser;function requireAbstractID3Parser(){if(hasRequiredAbstractID3Parser)return AbstractID3Parser;hasRequiredAbstractID3Parser=1,Object.defineProperty(AbstractID3Parser,"__esModule",{value:!0}),AbstractID3Parser.AbstractID3Parser=void 0;const n=requireCore$2(),r=requireBrowser$3(),s=requireID3v2Token(),a=requireID3v2Parser(),l=requireID3v1Parser(),d=requireBasicParser(),u=(0,r.default)("music-metadata:parser:ID3");let c=class extends d.BasicParser{constructor(){super(...arguments),this.id3parser=new a.ID3v2Parser}static async startsWithID3v2Header(h){return(await h.peekToken(s.ID3v2Header)).fileIdentifier==="ID3"}async parse(){try{await this.parseID3v2()}catch(h){if(h instanceof n.EndOfStreamError)u("End-of-stream");else throw h}}finalize(){}async parseID3v2(){await this.tryReadId3v2Headers(),u("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),await this.postId3v2Parse(),this.options.skipPostHeaders&&this.metadata.hasAny()?this.finalize():(await new l.ID3v1Parser().init(this.metadata,this.tokenizer,this.options).parse(),this.finalize())}async tryReadId3v2Headers(){if((await this.tokenizer.peekToken(s.ID3v2Header)).fileIdentifier==="ID3")return u("Found ID3v2 header, pos=%s",this.tokenizer.position),await this.id3parser.parse(this.metadata,this.tokenizer,this.options),this.tryReadId3v2Headers()}};return AbstractID3Parser.AbstractID3Parser=c,AbstractID3Parser}var VorbisParser={},VorbisDecoder={},hasRequiredVorbisDecoder;function requireVorbisDecoder(){if(hasRequiredVorbisDecoder)return VorbisDecoder;hasRequiredVorbisDecoder=1,Object.defineProperty(VorbisDecoder,"__esModule",{value:!0}),VorbisDecoder.VorbisDecoder=void 0;const n=requireLib$2();let r=class{constructor(a,l){this.data=a,this.offset=l}readInt32(){const a=n.UINT32_LE.get(this.data,this.offset);return this.offset+=4,a}readStringUtf8(){const a=this.readInt32(),l=Buffer.from(this.data).toString("utf-8",this.offset,this.offset+a);return this.offset+=a,l}parseUserComment(){const a=this.offset,l=this.readStringUtf8(),d=l.indexOf("=");return{key:l.slice(0,d).toUpperCase(),value:l.slice(d+1),len:this.offset-a}}};return VorbisDecoder.VorbisDecoder=r,VorbisDecoder}var hasRequiredVorbisParser;function requireVorbisParser(){if(hasRequiredVorbisParser)return VorbisParser;hasRequiredVorbisParser=1,Object.defineProperty(VorbisParser,"__esModule",{value:!0}),VorbisParser.VorbisParser=void 0;const n=requireLib$2(),r=requireBrowser$3(),s=requireVorbisDecoder(),a=requireVorbis(),l=(0,r.default)("music-metadata:parser:ogg:vorbis1");let d=class{constructor(c,p){this.metadata=c,this.options=p,this.pageSegments=[]}parsePage(c,p){if(c.headerType.firstPage)this.parseFirstPage(c,p);else{if(c.headerType.continued){if(this.pageSegments.length===0)throw new Error("Cannot continue on previous page");this.pageSegments.push(p)}if(c.headerType.lastPage||!c.headerType.continued){if(this.pageSegments.length>0){const h=Buffer.concat(this.pageSegments);this.parseFullPage(h)}this.pageSegments=c.headerType.lastPage?[]:[p]}}c.headerType.lastPage&&this.calculateDuration(c)}flush(){this.parseFullPage(Buffer.concat(this.pageSegments))}parseUserComment(c,p){const y=new s.VorbisDecoder(c,p).parseUserComment();return this.addTag(y.key,y.value),y.len}addTag(c,p){if(c==="METADATA_BLOCK_PICTURE"&&typeof p=="string"){if(this.options.skipCovers){l("Ignore picture");return}p=a.VorbisPictureToken.fromBase64(p),l(`Push picture: id=${c}, format=${p.format}`)}else l(`Push tag: id=${c}, value=${p}`);this.metadata.addTag("vorbis",c,p)}calculateDuration(c){this.metadata.format.sampleRate&&c.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",c.absoluteGranulePosition),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate))}parseFirstPage(c,p){this.metadata.setFormat("codec","Vorbis I"),l("Parse first page");const h=a.CommonHeader.get(p,0);if(h.vorbis!=="vorbis")throw new Error("Metadata does not look like Vorbis");if(h.packetType===1){const y=a.IdentificationHeader.get(p,a.CommonHeader.len);this.metadata.setFormat("sampleRate",y.sampleRate),this.metadata.setFormat("bitrate",y.bitrateNominal),this.metadata.setFormat("numberOfChannels",y.channelMode),l("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",y.sampleRate,y.bitrateNominal,y.channelMode)}else throw new Error("First Ogg page should be type 1: the identification header")}parseFullPage(c){const p=a.CommonHeader.get(c,0);switch(l("Parse full page: type=%s, byteLength=%s",p.packetType,c.byteLength),p.packetType){case 3:return this.parseUserCommentList(c,a.CommonHeader.len)}}parseUserCommentList(c,p){const h=n.UINT32_LE.get(c,p);p+=4,p+=h;let y=n.UINT32_LE.get(c,p);for(p+=4;y-- >0;)p+=this.parseUserComment(c,p)}};return VorbisParser.VorbisParser=d,VorbisParser}var hasRequiredFlacParser;function requireFlacParser(){if(hasRequiredFlacParser)return FlacParser;hasRequiredFlacParser=1,Object.defineProperty(FlacParser,"__esModule",{value:!0}),FlacParser.FlacParser=void 0;const n=requireLib$2(),r=requireBrowser$3(),s=requireUtil$1(),a=requireVorbis(),l=requireAbstractID3Parser(),d=requireFourCC(),u=requireVorbisParser(),c=requireVorbisDecoder(),p=(0,r.default)("music-metadata:parser:FLAC");var h;(function(x){x[x.STREAMINFO=0]="STREAMINFO",x[x.PADDING=1]="PADDING",x[x.APPLICATION=2]="APPLICATION",x[x.SEEKTABLE=3]="SEEKTABLE",x[x.VORBIS_COMMENT=4]="VORBIS_COMMENT",x[x.CUESHEET=5]="CUESHEET",x[x.PICTURE=6]="PICTURE"})(h||(h={}));let y=class extends l.AbstractID3Parser{constructor(){super(...arguments),this.padding=0}init(T,S,_){return super.init(T,S,_),this.vorbisParser=new u.VorbisParser(T,_),this}async postId3v2Parse(){if((await this.tokenizer.readToken(d.FourCcToken)).toString()!=="fLaC")throw new Error("Invalid FLAC preamble");let S;do S=await this.tokenizer.readToken(b.BlockHeader),await this.parseDataBlock(S);while(!S.lastBlock);if(this.tokenizer.fileInfo.size&&this.metadata.format.duration){const _=this.tokenizer.fileInfo.size-this.tokenizer.position;this.metadata.setFormat("bitrate",8*_/this.metadata.format.duration)}}parseDataBlock(T){switch(p(`blockHeader type=${T.type}, length=${T.length}`),T.type){case h.STREAMINFO:return this.parseBlockStreamInfo(T.length);case h.PADDING:this.padding+=T.length;break;case h.APPLICATION:break;case h.SEEKTABLE:break;case h.VORBIS_COMMENT:return this.parseComment(T.length);case h.CUESHEET:break;case h.PICTURE:return this.parsePicture(T.length).then();default:this.metadata.addWarning("Unknown block type: "+T.type)}return this.tokenizer.ignore(T.length).then()}async parseBlockStreamInfo(T){if(T!==b.BlockStreamInfo.len)throw new Error("Unexpected block-stream-info length");const S=await this.tokenizer.readToken(b.BlockStreamInfo);this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",S.channels),this.metadata.setFormat("bitsPerSample",S.bitsPerSample),this.metadata.setFormat("sampleRate",S.sampleRate),S.totalSamples>0&&this.metadata.setFormat("duration",S.totalSamples/S.sampleRate)}async parseComment(T){const S=await this.tokenizer.readToken(new n.Uint8ArrayType(T)),_=new c.VorbisDecoder(S,0);_.readStringUtf8();const C=_.readInt32();for(let k=0;k<C;k++){const I=_.parseUserComment();this.vorbisParser.addTag(I.key,I.value)}}async parsePicture(T){if(this.options.skipCovers)return this.tokenizer.ignore(T);{const S=await this.tokenizer.readToken(new a.VorbisPictureToken(T));this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",S)}}};FlacParser.FlacParser=y;class b{}return b.BlockHeader={len:4,get:(x,T)=>({lastBlock:s.getBit(x,T,7),type:s.getBitAllignedNumber(x,T,1,7),length:n.UINT24_BE.get(x,T+1)})},b.BlockStreamInfo={len:34,get:(x,T)=>({minimumBlockSize:n.UINT16_BE.get(x,T),maximumBlockSize:n.UINT16_BE.get(x,T+2)/1e3,minimumFrameSize:n.UINT24_BE.get(x,T+4),maximumFrameSize:n.UINT24_BE.get(x,T+7),sampleRate:n.UINT24_BE.get(x,T+10)>>4,channels:s.getBitAllignedNumber(x,T+12,4,3)+1,bitsPerSample:s.getBitAllignedNumber(x,T+12,7,5)+1,totalSamples:s.getBitAllignedNumber(x,T+13,4,36),fileMD5:new n.Uint8ArrayType(16).get(x,T+18)})},FlacParser}var MP4Parser={},Atom={},AtomToken={},hasRequiredAtomToken;function requireAtomToken(){return hasRequiredAtomToken||(hasRequiredAtomToken=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ChapterText=n.StcoAtom=n.StszAtom=n.StscAtom=n.SampleToChunkToken=n.SttsAtom=n.TimeToSampleToken=n.SoundSampleDescriptionV0=n.SoundSampleDescriptionVersion=n.StsdAtom=n.TrackHeaderAtom=n.NameAtom=n.DataAtom=n.MvhdAtom=n.MdhdAtom=n.FixedLengthAtom=n.mhdr=n.tkhd=n.ftyp=n.ExtendedSize=n.Header=void 0;const r=requireLib$2(),s=requireBrowser$3(),a=requireFourCC(),l=(0,s.default)("music-metadata:parser:MP4:atom");n.Header={len:8,get:(V,M)=>{const q=r.UINT32_BE.get(V,M);if(q<0)throw new Error("Invalid atom header length");return{length:BigInt(q),name:new r.StringType(4,"binary").get(V,M+4)}},put:(V,M,q)=>(r.UINT32_BE.put(V,M,Number(q.length)),a.FourCcToken.put(V,M+4,q.name))},n.ExtendedSize=r.UINT64_BE,n.ftyp={len:4,get:(V,M)=>({type:new r.StringType(4,"ascii").get(V,M)})},n.tkhd={len:4,get:(V,M)=>({type:new r.StringType(4,"ascii").get(V,M)})},n.mhdr={len:8,get:(V,M)=>({version:r.UINT8.get(V,M),flags:r.UINT24_BE.get(V,M+1),nextItemID:r.UINT32_BE.get(V,M+4)})};class d{constructor(M,q,Se){if(this.len=M,M<q)throw new Error(`Atom ${Se} expected to be ${q}, but specifies ${M} bytes long.`);M>q&&l(`Warning: atom ${Se} expected to be ${q}, but was actually ${M} bytes long.`)}}n.FixedLengthAtom=d;const u={len:4,get:(V,M)=>{const q=r.UINT32_BE.get(V,M)-2082844800;return new Date(q*1e3)}};class c extends d{constructor(M){super(M,24,"mdhd"),this.len=M}get(M,q){return{version:r.UINT8.get(M,q+0),flags:r.UINT24_BE.get(M,q+1),creationTime:u.get(M,q+4),modificationTime:u.get(M,q+8),timeScale:r.UINT32_BE.get(M,q+12),duration:r.UINT32_BE.get(M,q+16),language:r.UINT16_BE.get(M,q+20),quality:r.UINT16_BE.get(M,q+22)}}}n.MdhdAtom=c;class p extends d{constructor(M){super(M,100,"mvhd"),this.len=M}get(M,q){return{version:r.UINT8.get(M,q),flags:r.UINT24_BE.get(M,q+1),creationTime:u.get(M,q+4),modificationTime:u.get(M,q+8),timeScale:r.UINT32_BE.get(M,q+12),duration:r.UINT32_BE.get(M,q+16),preferredRate:r.UINT32_BE.get(M,q+20),preferredVolume:r.UINT16_BE.get(M,q+24),previewTime:r.UINT32_BE.get(M,q+72),previewDuration:r.UINT32_BE.get(M,q+76),posterTime:r.UINT32_BE.get(M,q+80),selectionTime:r.UINT32_BE.get(M,q+84),selectionDuration:r.UINT32_BE.get(M,q+88),currentTime:r.UINT32_BE.get(M,q+92),nextTrackID:r.UINT32_BE.get(M,q+96)}}}n.MvhdAtom=p;class h{constructor(M){this.len=M}get(M,q){return{type:{set:r.UINT8.get(M,q+0),type:r.UINT24_BE.get(M,q+1)},locale:r.UINT24_BE.get(M,q+4),value:Buffer.from(new r.Uint8ArrayType(this.len-8).get(M,q+8))}}}n.DataAtom=h;class y{constructor(M){this.len=M}get(M,q){return{version:r.UINT8.get(M,q),flags:r.UINT24_BE.get(M,q+1),name:new r.StringType(this.len-4,"utf-8").get(M,q+4)}}}n.NameAtom=y;class b{constructor(M){this.len=M}get(M,q){return{version:r.UINT8.get(M,q),flags:r.UINT24_BE.get(M,q+1),creationTime:u.get(M,q+4),modificationTime:u.get(M,q+8),trackId:r.UINT32_BE.get(M,q+12),duration:r.UINT32_BE.get(M,q+20),layer:r.UINT16_BE.get(M,q+24),alternateGroup:r.UINT16_BE.get(M,q+26),volume:r.UINT16_BE.get(M,q+28)}}}n.TrackHeaderAtom=b;const x={len:8,get:(V,M)=>({version:r.UINT8.get(V,M),flags:r.UINT24_BE.get(V,M+1),numberOfEntries:r.UINT32_BE.get(V,M+4)})};class T{constructor(M){this.len=M}get(M,q){return{dataFormat:a.FourCcToken.get(M,q),dataReferenceIndex:r.UINT16_BE.get(M,q+10),description:new r.Uint8ArrayType(this.len-12).get(M,q+12)}}}class S{constructor(M){this.len=M}get(M,q){const Se=x.get(M,q);q+=x.len;const Q=[];for(let ee=0;ee<Se.numberOfEntries;++ee){const we=r.UINT32_BE.get(M,q);q+=r.UINT32_BE.len,Q.push(new T(we).get(M,q)),q+=we}return{header:Se,table:Q}}}n.StsdAtom=S,n.SoundSampleDescriptionVersion={len:8,get(V,M){return{version:r.INT16_BE.get(V,M),revision:r.INT16_BE.get(V,M+2),vendor:r.INT32_BE.get(V,M+4)}}},n.SoundSampleDescriptionV0={len:12,get(V,M){return{numAudioChannels:r.INT16_BE.get(V,M+0),sampleSize:r.INT16_BE.get(V,M+2),compressionId:r.INT16_BE.get(V,M+4),packetSize:r.INT16_BE.get(V,M+6),sampleRate:r.UINT16_BE.get(V,M+8)+r.UINT16_BE.get(V,M+10)/1e4}}};class _{constructor(M,q){this.len=M,this.token=q}get(M,q){const Se=r.INT32_BE.get(M,q+4);return{version:r.INT8.get(M,q+0),flags:r.INT24_BE.get(M,q+1),numberOfEntries:Se,entries:j(M,this.token,q+8,this.len-8,Se)}}}n.TimeToSampleToken={len:8,get(V,M){return{count:r.INT32_BE.get(V,M+0),duration:r.INT32_BE.get(V,M+4)}}};class C extends _{constructor(M){super(M,n.TimeToSampleToken),this.len=M}}n.SttsAtom=C,n.SampleToChunkToken={len:12,get(V,M){return{firstChunk:r.INT32_BE.get(V,M),samplesPerChunk:r.INT32_BE.get(V,M+4),sampleDescriptionId:r.INT32_BE.get(V,M+8)}}};class k extends _{constructor(M){super(M,n.SampleToChunkToken),this.len=M}}n.StscAtom=k;class I{constructor(M){this.len=M}get(M,q){const Se=r.INT32_BE.get(M,q+8);return{version:r.INT8.get(M,q),flags:r.INT24_BE.get(M,q+1),sampleSize:r.INT32_BE.get(M,q+4),numberOfEntries:Se,entries:j(M,r.INT32_BE,q+12,this.len-12,Se)}}}n.StszAtom=I;class N extends _{constructor(M){super(M,r.INT32_BE),this.len=M}}n.StcoAtom=N;class F{constructor(M){this.len=M}get(M,q){const Se=r.INT16_BE.get(M,q+0);return new r.StringType(Se,"utf-8").get(M,q+2)}}n.ChapterText=F;function j(V,M,q,Se,Q){if(l(`remainingLen=${Se}, numberOfEntries=${Q} * token-len=${M.len}`),Se===0)return[];if(Se!==Q*M.len)throw new Error("mismatch number-of-entries with remaining atom-length");const ee=[];for(let we=0;we<Q;++we)ee.push(M.get(V,q)),q+=M.len;return ee}})(AtomToken)),AtomToken}var hasRequiredAtom;function requireAtom(){if(hasRequiredAtom)return Atom;hasRequiredAtom=1,Object.defineProperty(Atom,"__esModule",{value:!0}),Atom.Atom=void 0;const n=requireBrowser$3(),r=requireAtomToken(),s=(0,n.default)("music-metadata:parser:MP4:Atom");let a=class gc{static async readAtom(d,u,c,p){const h=d.position,y=await d.readToken(r.Header);y.length===BigInt(1)&&(y.length=await d.readToken(r.ExtendedSize));const x=new gc(y,y.length===BigInt(1),c),T=x.getPayloadLength(p);return s(`parse atom name=${x.atomPath}, extended=${x.extended}, offset=${h}, len=${x.header.length}`),await x.readData(d,u,T),x}constructor(d,u,c){this.header=d,this.extended=u,this.parent=c,this.children=[],this.atomPath=(this.parent?this.parent.atomPath+".":"")+this.header.name}getHeaderLength(){return this.extended?16:8}getPayloadLength(d){return(this.header.length===BigInt(0)?d:Number(this.header.length))-this.getHeaderLength()}async readAtoms(d,u,c){for(;c>0;){const p=await gc.readAtom(d,u,this,c);this.children.push(p),c-=p.header.length===BigInt(0)?c:Number(p.header.length)}}async readData(d,u,c){switch(this.header.name){case"moov":case"udta":case"trak":case"mdia":case"minf":case"stbl":case"<id>":case"ilst":case"tref":return this.readAtoms(d,u,this.getPayloadLength(c));case"meta":const h=(await d.peekToken(r.Header)).name==="hdlr"?0:4;return await d.ignore(h),this.readAtoms(d,u,this.getPayloadLength(c)-h);case"mdhd":case"mvhd":case"tkhd":case"stsz":case"mdat":default:return u(this,c)}}};return Atom.Atom=a,Atom}var hasRequiredMP4Parser;function requireMP4Parser(){if(hasRequiredMP4Parser)return MP4Parser;hasRequiredMP4Parser=1,Object.defineProperty(MP4Parser,"__esModule",{value:!0}),MP4Parser.MP4Parser=void 0;const n=requireBrowser$3(),r=requireLib$2(),s=requireBasicParser(),a=requireID3v1Parser(),l=requireType(),d=requireAtom(),u=requireAtomToken(),c=(0,n.default)("music-metadata:parser:MP4"),p="iTunes",h={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function y(x,T,S){return S.indexOf(x)===T}let b=class yc extends s.BasicParser{constructor(){super(...arguments),this.atomParsers={mvhd:async T=>{const S=await this.tokenizer.readToken(new u.MvhdAtom(T));this.metadata.setFormat("creationTime",S.creationTime),this.metadata.setFormat("modificationTime",S.modificationTime)},mdhd:async T=>{const S=await this.tokenizer.readToken(new u.MdhdAtom(T)),_=this.getTrackDescription();_.creationTime=S.creationTime,_.modificationTime=S.modificationTime,_.timeScale=S.timeScale,_.duration=S.duration},chap:async T=>{const S=this.getTrackDescription(),_=[];for(;T>=r.UINT32_BE.len;)_.push(await this.tokenizer.readNumber(r.UINT32_BE)),T-=r.UINT32_BE.len;S.chapterList=_},tkhd:async T=>{const S=await this.tokenizer.readToken(new u.TrackHeaderAtom(T));this.tracks.push(S)},mdat:async T=>{if(this.audioLengthInBytes=T,this.calculateBitRate(),this.options.includeChapters){const S=this.tracks.filter(_=>_.chapterList);if(S.length===1){const _=S[0].chapterList,C=this.tracks.filter(k=>_.indexOf(k.trackId)!==-1);if(C.length===1)return this.parseChapterTrack(C[0],S[0],T)}}await this.tokenizer.ignore(T)},ftyp:async T=>{const S=[];for(;T>0;){const C=await this.tokenizer.readToken(u.ftyp);T-=u.ftyp.len;const k=C.type.replace(/\W/g,"");k.length>0&&S.push(k)}c(`ftyp: ${S.join("/")}`);const _=S.filter(y).join("/");this.metadata.setFormat("container",_)},stsd:async T=>{const S=await this.tokenizer.readToken(new u.StsdAtom(T)),_=this.getTrackDescription();_.soundSampleDescription=S.table.map(C=>this.parseSoundSampleDescription(C))},stsc:async T=>{const S=await this.tokenizer.readToken(new u.StscAtom(T));this.getTrackDescription().sampleToChunkTable=S.entries},stts:async T=>{const S=await this.tokenizer.readToken(new u.SttsAtom(T));this.getTrackDescription().timeToSampleTable=S.entries},stsz:async T=>{const S=await this.tokenizer.readToken(new u.StszAtom(T)),_=this.getTrackDescription();_.sampleSize=S.sampleSize,_.sampleSizeTable=S.entries},stco:async T=>{const S=await this.tokenizer.readToken(new u.StcoAtom(T));this.getTrackDescription().chunkOffsetTable=S.entries},date:async T=>{const S=await this.tokenizer.readToken(new r.StringType(T,"utf-8"));this.addTag("date",S)}}}static read_BE_Integer(T,S){const _=(S?"INT":"UINT")+T.length*8+(T.length>1?"_BE":""),C=r[_];if(!C)throw new Error('Token for integer type not found: "'+_+'"');return Number(C.get(T,0))}async parse(){this.tracks=[];let T=this.tokenizer.fileInfo.size;for(;!this.tokenizer.fileInfo.size||T>0;){try{if((await this.tokenizer.peekToken(u.Header)).name==="\0\0\0\0"){const I=`Error at offset=${this.tokenizer.position}: box.id=0`;c(I),this.addWarning(I);break}}catch(k){const I=`Error at offset=${this.tokenizer.position}: ${k.message}`;c(I),this.addWarning(I);break}const C=await d.Atom.readAtom(this.tokenizer,(k,I)=>this.handleAtom(k,I),null,T);T-=C.header.length===BigInt(0)?T:Number(C.header.length)}const S=[];this.tracks.forEach(C=>{const k=[];C.soundSampleDescription.forEach(I=>{const N={},F=h[I.dataFormat];if(F?(k.push(F.format),N.codecName=F.format):N.codecName=`<${I.dataFormat}>`,I.description){const{description:j}=I;j.sampleRate>0&&(N.type=l.TrackType.audio,N.audio={samplingFrequency:j.sampleRate,bitDepth:j.sampleSize,channels:j.numAudioChannels})}this.metadata.addStreamInfo(N)}),k.length>=1&&S.push(k.join("/"))}),S.length>0&&this.metadata.setFormat("codec",S.filter(y).join("+"));const _=this.tracks.filter(C=>C.soundSampleDescription.length>=1&&C.soundSampleDescription[0].description&&C.soundSampleDescription[0].description.numAudioChannels>0);if(_.length>=1){const C=_[0];if(C.timeScale>0){const N=C.duration/C.timeScale;this.metadata.setFormat("duration",N)}const k=C.soundSampleDescription[0];if(k.description&&(this.metadata.setFormat("sampleRate",k.description.sampleRate),this.metadata.setFormat("bitsPerSample",k.description.sampleSize),this.metadata.setFormat("numberOfChannels",k.description.numAudioChannels),C.timeScale===0&&C.timeToSampleTable.length>0)){const F=C.timeToSampleTable.map(j=>j.count*j.duration).reduce((j,V)=>j+V)/k.description.sampleRate;this.metadata.setFormat("duration",F)}const I=h[k.dataFormat];I&&this.metadata.setFormat("lossless",!I.lossy),this.calculateBitRate()}}async handleAtom(T,S){if(T.parent)switch(T.parent.header.name){case"ilst":case"<id>":return this.parseMetadataItemData(T)}if(this.atomParsers[T.header.name])return this.atomParsers[T.header.name](S);c(`No parser for atom path=${T.atomPath}, payload-len=${S}, ignoring atom`),await this.tokenizer.ignore(S)}getTrackDescription(){return this.tracks[this.tracks.length-1]}calculateBitRate(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}addTag(T,S){this.metadata.addTag(p,T,S)}addWarning(T){c("Warning: "+T),this.metadata.addWarning(T)}parseMetadataItemData(T){let S=T.header.name;return T.readAtoms(this.tokenizer,async(_,C)=>{const k=_.getPayloadLength(C);switch(_.header.name){case"data":return this.parseValueAtom(S,_);case"name":case"mean":case"rate":const I=await this.tokenizer.readToken(new u.NameAtom(k));S+=":"+I.name;break;default:const N=await this.tokenizer.readToken(new r.BufferType(k));this.addWarning("Unsupported meta-item: "+S+"["+_.header.name+"] => value="+N.toString("hex")+" ascii="+N.toString("ascii"))}},T.getPayloadLength(0))}async parseValueAtom(T,S){const _=await this.tokenizer.readToken(new u.DataAtom(Number(S.header.length)-u.Header.len));if(_.type.set!==0)throw new Error("Unsupported type-set != 0: "+_.type.set);switch(_.type.type){case 0:switch(T){case"trkn":case"disk":const C=r.UINT8.get(_.value,3),k=r.UINT8.get(_.value,5);this.addTag(T,C+"/"+k);break;case"gnre":const I=r.UINT8.get(_.value,1),N=a.Genres[I-1];this.addTag(T,N);break;case"rate":const F=_.value.toString("ascii");this.addTag(T,F);break;default:c("unknown proprietary value type for: "+S.atomPath)}break;case 1:case 18:this.addTag(T,_.value.toString("utf-8"));break;case 13:if(this.options.skipCovers)break;this.addTag(T,{format:"image/jpeg",data:Buffer.from(_.value)});break;case 14:if(this.options.skipCovers)break;this.addTag(T,{format:"image/png",data:Buffer.from(_.value)});break;case 21:this.addTag(T,yc.read_BE_Integer(_.value,!0));break;case 22:this.addTag(T,yc.read_BE_Integer(_.value,!1));break;case 65:this.addTag(T,_.value.readInt8(0));break;case 66:this.addTag(T,_.value.readInt16BE(0));break;case 67:this.addTag(T,_.value.readInt32BE(0));break;default:this.addWarning(`atom key=${T}, has unknown well-known-type (data-type): ${_.type.type}`)}}parseSoundSampleDescription(T){const S={dataFormat:T.dataFormat,dataReferenceIndex:T.dataReferenceIndex};let _=0;const C=u.SoundSampleDescriptionVersion.get(T.description,_);return _+=u.SoundSampleDescriptionVersion.len,C.version===0||C.version===1?S.description=u.SoundSampleDescriptionV0.get(T.description,_):c(`Warning: sound-sample-description ${C} not implemented`),S}async parseChapterTrack(T,S,_){if(!T.sampleSize&&T.chunkOffsetTable.length!==T.sampleSizeTable.length)throw new Error("Expected equal chunk-offset-table & sample-size-table length.");const C=[];for(let k=0;k<T.chunkOffsetTable.length&&_>0;++k){const N=T.chunkOffsetTable[k]-this.tokenizer.position,F=T.sampleSize>0?T.sampleSize:T.sampleSizeTable[k];if(_-=N+F,_<0)throw new Error("Chapter chunk exceeding token length");await this.tokenizer.ignore(N);const j=await this.tokenizer.readToken(new u.ChapterText(F));c(`Chapter ${k+1}: ${j}`);const V={title:j,sampleOffset:this.findSampleOffset(S,this.tokenizer.position)};c(`Chapter title=${V.title}, offset=${V.sampleOffset}/${this.tracks[0].duration}`),C.push(V)}this.metadata.setFormat("chapters",C),await this.tokenizer.ignore(_)}findSampleOffset(T,S){let _=0;T.timeToSampleTable.forEach(k=>{_+=k.count*k.duration}),c(`Total duration=${_}`);let C=0;for(;C<T.chunkOffsetTable.length&&T.chunkOffsetTable[C]<S;)++C;return this.getChunkDuration(C+1,T)}getChunkDuration(T,S){let _=0,C=S.timeToSampleTable[_].count,k=S.timeToSampleTable[_].duration,I=1,N=this.getSamplesPerChunk(I,S.sampleToChunkTable),F=0;for(;I<T;){const j=Math.min(C,N);F+=j*k,C-=j,N-=j,N===0?(++I,N=this.getSamplesPerChunk(I,S.sampleToChunkTable)):(++_,C=S.timeToSampleTable[_].count,k=S.timeToSampleTable[_].duration)}return F}getSamplesPerChunk(T,S){for(let _=0;_<S.length-1;++_)if(T>=S[_].firstChunk&&T<S[_+1].firstChunk)return S[_].samplesPerChunk;return S[S.length-1].samplesPerChunk}};return MP4Parser.MP4Parser=b,MP4Parser}var MpegParser={},XingTag={},ExtendedLameHeader={},ReplayGainDataFormat={},hasRequiredReplayGainDataFormat;function requireReplayGainDataFormat(){if(hasRequiredReplayGainDataFormat)return ReplayGainDataFormat;hasRequiredReplayGainDataFormat=1,Object.defineProperty(ReplayGainDataFormat,"__esModule",{value:!0}),ReplayGainDataFormat.ReplayGain=void 0;const n=requireUtil$1();var r;(function(a){a[a.not_set=0]="not_set",a[a.radio=1]="radio",a[a.audiophile=2]="audiophile"})(r||(r={}));var s;return(function(a){a[a.unspecified=0]="unspecified",a[a.engineer=1]="engineer",a[a.user=2]="user",a[a.automatic=3]="automatic",a[a.rms_average=4]="rms_average"})(s||(s={})),ReplayGainDataFormat.ReplayGain={len:2,get:(a,l)=>{const d=n.getBitAllignedNumber(a,l,0,3),u=n.getBitAllignedNumber(a,l,6,1),c=n.getBitAllignedNumber(a,l,7,9)/10;if(d>0)return{type:n.getBitAllignedNumber(a,l,0,3),origin:n.getBitAllignedNumber(a,l,3,3),adjustment:u?-c:c}}},ReplayGainDataFormat}var hasRequiredExtendedLameHeader;function requireExtendedLameHeader(){if(hasRequiredExtendedLameHeader)return ExtendedLameHeader;hasRequiredExtendedLameHeader=1,Object.defineProperty(ExtendedLameHeader,"__esModule",{value:!0}),ExtendedLameHeader.ExtendedLameHeader=void 0;const n=requireLib$2(),r=requireUtil$1(),s=requireReplayGainDataFormat();return ExtendedLameHeader.ExtendedLameHeader={len:27,get:(a,l)=>{const d=n.UINT32_BE.get(a,l+2);return{revision:r.getBitAllignedNumber(a,l,0,4),vbr_method:r.getBitAllignedNumber(a,l,4,4),lowpass_filter:100*n.UINT8.get(a,l+1),track_peak:d===0?void 0:d/Math.pow(2,23),track_gain:s.ReplayGain.get(a,6),album_gain:s.ReplayGain.get(a,8),music_length:n.UINT32_BE.get(a,l+20),music_crc:n.UINT8.get(a,l+24),header_crc:n.UINT16_BE.get(a,l+24)}}},ExtendedLameHeader}var hasRequiredXingTag;function requireXingTag(){return hasRequiredXingTag||(hasRequiredXingTag=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.readXingHeader=n.XingHeaderFlags=n.LameEncoderVersion=n.InfoTagHeaderTag=void 0;const r=requireLib$2(),s=requireUtil$1(),a=requireExtendedLameHeader();n.InfoTagHeaderTag=new r.StringType(4,"ascii"),n.LameEncoderVersion=new r.StringType(6,"ascii"),n.XingHeaderFlags={len:4,get:(d,u)=>({frames:s.isBitSet(d,u,31),bytes:s.isBitSet(d,u,30),toc:s.isBitSet(d,u,29),vbrScale:s.isBitSet(d,u,28)})};async function l(d){const u=await d.readToken(n.XingHeaderFlags),c={};if(u.frames&&(c.numFrames=await d.readToken(r.UINT32_BE)),u.bytes&&(c.streamSize=await d.readToken(r.UINT32_BE)),u.toc&&(c.toc=Buffer.alloc(100),await d.readBuffer(c.toc)),u.vbrScale&&(c.vbrScale=await d.readToken(r.UINT32_BE)),await d.peekToken(new r.StringType(4,"ascii"))==="LAME"&&(await d.ignore(4),c.lame={version:await d.readToken(new r.StringType(5,"ascii"))},c.lame.version.match(/\d+.\d+/g))){const b=c.lame.version.match(/\d+.\d+/g)[0].split(".").map(x=>parseInt(x,10));b[0]>=3&&b[1]>=90&&(c.lame.extended=await d.readToken(a.ExtendedLameHeader))}return c}n.readXingHeader=l})(XingTag)),XingTag}var hasRequiredMpegParser;function requireMpegParser(){if(hasRequiredMpegParser)return MpegParser;hasRequiredMpegParser=1,Object.defineProperty(MpegParser,"__esModule",{value:!0}),MpegParser.MpegParser=void 0;const n=requireLib$2(),r=requireCore$2(),s=requireBrowser$3(),a=requireUtil$1(),l=requireAbstractID3Parser(),d=requireXingTag(),u=(0,s.default)("music-metadata:parser:mpeg"),c=1024,p={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,void 0,void 0,-1]},h=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]];class y{constructor(_,C){this.versionIndex=a.getBitAllignedNumber(_,C+1,3,2),this.layer=y.LayerDescription[a.getBitAllignedNumber(_,C+1,5,2)],this.versionIndex>1&&this.layer===0?this.parseAdtsHeader(_,C):this.parseMpegHeader(_,C),this.isProtectedByCRC=!a.isBitSet(_,C+1,7)}calcDuration(_){return _*this.calcSamplesPerFrame()/this.samplingRate}calcSamplesPerFrame(){return y.samplesInFrameTable[this.version===1?0:1][this.layer]}calculateSideInfoLength(){if(this.layer!==3)return 2;if(this.channelModeIndex===3){if(this.version===1)return 17;if(this.version===2||this.version===2.5)return 9}else{if(this.version===1)return 32;if(this.version===2||this.version===2.5)return 17}}calcSlotSize(){return[null,4,1,1][this.layer]}parseMpegHeader(_,C){this.container="MPEG",this.bitrateIndex=a.getBitAllignedNumber(_,C+2,0,4),this.sampRateFreqIndex=a.getBitAllignedNumber(_,C+2,4,2),this.padding=a.isBitSet(_,C+2,6),this.privateBit=a.isBitSet(_,C+2,7),this.channelModeIndex=a.getBitAllignedNumber(_,C+3,0,2),this.modeExtension=a.getBitAllignedNumber(_,C+3,2,2),this.isCopyrighted=a.isBitSet(_,C+3,4),this.isOriginalMedia=a.isBitSet(_,C+3,5),this.emphasis=a.getBitAllignedNumber(_,C+3,7,2),this.version=y.VersionID[this.versionIndex],this.channelMode=y.ChannelMode[this.channelModeIndex],this.codec=`MPEG ${this.version} Layer ${this.layer}`;const k=this.calcBitrate();if(!k)throw new Error("Cannot determine bit-rate");if(this.bitrate=k*1e3,this.samplingRate=this.calcSamplingRate(),this.samplingRate==null)throw new Error("Cannot determine sampling-rate")}parseAdtsHeader(_,C){u("layer=0 => ADTS"),this.version=this.versionIndex===2?4:2,this.container="ADTS/MPEG-"+this.version;const k=a.getBitAllignedNumber(_,C+2,0,2);this.codec="AAC",this.codecProfile=p.AudioObjectTypes[k],u(`MPEG-4 audio-codec=${this.codec}`);const I=a.getBitAllignedNumber(_,C+2,2,4);this.samplingRate=p.SamplingFrequencies[I],u(`sampling-rate=${this.samplingRate}`);const N=a.getBitAllignedNumber(_,C+2,7,3);this.mp4ChannelConfig=h[N],u(`channel-config=${this.mp4ChannelConfig.join("+")}`),this.frameLength=a.getBitAllignedNumber(_,C+3,6,2)<<11}calcBitrate(){if(this.bitrateIndex===0||this.bitrateIndex===15)return;const _=`${Math.floor(this.version)}${this.layer}`;return y.bitrate_index[this.bitrateIndex][_]}calcSamplingRate(){return this.sampRateFreqIndex===3?null:y.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}y.SyncByte1=255,y.SyncByte2=224,y.VersionID=[2.5,null,2,1],y.LayerDescription=[0,3,2,1],y.ChannelMode=["stereo","joint_stereo","dual_channel","mono"],y.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}},y.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}},y.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]];const b={len:4,get:(S,_)=>new y(S,_)};function x(S){return"V"+Math.floor((100-S)/10)}let T=class extends l.AbstractID3Parser{constructor(){super(...arguments),this.frameCount=0,this.syncFrameCount=-1,this.countSkipFrameData=0,this.totalDataLength=0,this.bitrates=[],this.calculateEofDuration=!1,this.buf_frame_header=Buffer.alloc(4),this.syncPeek={buf:Buffer.alloc(c),len:0}}async postId3v2Parse(){this.metadata.setFormat("lossless",!1);try{let _=!1;for(;!_;)await this.sync(),_=await this.parseCommonMpegHeader()}catch(_){if(_ instanceof r.EndOfStreamError){if(u("End-of-stream"),this.calculateEofDuration){const C=this.frameCount*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",C);const k=C/this.metadata.format.sampleRate;u(`Calculate duration at EOF: ${k} sec.`,k),this.metadata.setFormat("duration",k)}}else throw _}}finalize(){const _=this.metadata.format,C=this.metadata.native.hasOwnProperty("ID3v1");if(_.duration&&this.tokenizer.fileInfo.size){const k=this.tokenizer.fileInfo.size-this.mpegOffset-(C?128:0);_.codecProfile&&_.codecProfile[0]==="V"&&this.metadata.setFormat("bitrate",k*8/_.duration)}else if(this.tokenizer.fileInfo.size&&_.codecProfile==="CBR"){const k=this.tokenizer.fileInfo.size-this.mpegOffset-(C?128:0),I=Math.round(k/this.frame_size)*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",I);const N=I/_.sampleRate;u("Calculate CBR duration based on file size: %s",N),this.metadata.setFormat("duration",N)}}async sync(){let _=!1;for(;;){let C=0;if(this.syncPeek.len=await this.tokenizer.peekBuffer(this.syncPeek.buf,{length:c,mayBeLess:!0}),this.syncPeek.len<=163)throw new r.EndOfStreamError;for(;;)if(_&&(this.syncPeek.buf[C]&224)===224){this.buf_frame_header[0]=y.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[C],await this.tokenizer.ignore(C),u(`Sync at offset=${this.tokenizer.position-1}, frameCount=${this.frameCount}`),this.syncFrameCount===this.frameCount&&(u(`Re-synced MPEG stream, frameCount=${this.frameCount}`),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount;return}else if(_=!1,C=this.syncPeek.buf.indexOf(y.SyncByte1,C),C===-1){if(this.syncPeek.len<this.syncPeek.buf.length)throw new r.EndOfStreamError;await this.tokenizer.ignore(this.syncPeek.len);break}else++C,_=!0}}async parseCommonMpegHeader(){this.frameCount===0&&(this.mpegOffset=this.tokenizer.position-1),await this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});let _;try{_=b.get(this.buf_frame_header,0)}catch(C){return await this.tokenizer.ignore(1),this.metadata.addWarning("Parse error: "+C.message),!1}return await this.tokenizer.ignore(3),this.metadata.setFormat("container",_.container),this.metadata.setFormat("codec",_.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",_.samplingRate),this.frameCount++,_.version>=2&&_.layer===0?this.parseAdts(_):this.parseAudioFrameHeader(_)}async parseAudioFrameHeader(_){this.metadata.setFormat("numberOfChannels",_.channelMode==="mono"?1:2),this.metadata.setFormat("bitrate",_.bitrate),this.frameCount<20*1e4&&u("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,_.layer,_.bitrate,_.samplingRate);const C=_.calcSlotSize();if(C===null)throw new Error("invalid slot_size");const k=_.calcSamplesPerFrame();u(`samples_per_frame=${k}`);const N=k/8*_.bitrate/_.samplingRate+(_.padding?C:0);if(this.frame_size=Math.floor(N),this.audioFrameHeader=_,this.bitrates.push(_.bitrate),this.frameCount===1)return this.offset=b.len,await this.skipSideInformation(),!1;if(this.frameCount===3){if(this.areAllSame(this.bitrates)){if(this.samplesPerFrame=k,this.metadata.setFormat("codecProfile","CBR"),this.tokenizer.fileInfo.size)return!0}else if(this.metadata.format.duration)return!0;if(!this.options.duration)return!0}return this.options.duration&&this.frameCount===4&&(this.samplesPerFrame=k,this.calculateEofDuration=!0),this.offset=4,_.isProtectedByCRC?(await this.parseCrc(),!1):(await this.skipSideInformation(),!1)}async parseAdts(_){const C=Buffer.alloc(3);await this.tokenizer.readBuffer(C),_.frameLength+=a.getBitAllignedNumber(C,0,0,11),this.totalDataLength+=_.frameLength,this.samplesPerFrame=1024;const k=_.samplingRate/this.samplesPerFrame,N=8*(this.frameCount===0?0:this.totalDataLength/this.frameCount)*k+.5;if(this.metadata.setFormat("bitrate",N),u(`frame-count=${this.frameCount}, size=${_.frameLength} bytes, bit-rate=${N}`),await this.tokenizer.ignore(_.frameLength>7?_.frameLength-7:1),this.frameCount===3)if(this.metadata.setFormat("codecProfile",_.codecProfile),_.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",_.mp4ChannelConfig.length),this.options.duration)this.calculateEofDuration=!0;else return!0;return!1}async parseCrc(){return this.crc=await this.tokenizer.readNumber(n.INT16_BE),this.offset+=2,this.skipSideInformation()}async skipSideInformation(){const _=this.audioFrameHeader.calculateSideInfoLength();await this.tokenizer.readToken(new n.Uint8ArrayType(_)),this.offset+=_,await this.readXtraInfoHeader()}async readXtraInfoHeader(){const _=await this.tokenizer.readToken(d.InfoTagHeaderTag);switch(this.offset+=d.InfoTagHeaderTag.len,_){case"Info":return this.metadata.setFormat("codecProfile","CBR"),this.readXingInfoHeader();case"Xing":const k=await this.readXingInfoHeader(),I=x(k.vbrScale);return this.metadata.setFormat("codecProfile",I),null;case"Xtra":break;case"LAME":const N=await this.tokenizer.readToken(d.LameEncoderVersion);if(this.frame_size>=this.offset+d.LameEncoderVersion.len)return this.offset+=d.LameEncoderVersion.len,this.metadata.setFormat("tool","LAME "+N),await this.skipFrameData(this.frame_size-this.offset),null;this.metadata.addWarning("Corrupt LAME header");break}const C=this.frame_size-this.offset;return C<0?this.metadata.addWarning("Frame "+this.frameCount+"corrupt: negative frameDataLeft"):await this.skipFrameData(C),null}async readXingInfoHeader(){const _=this.tokenizer.position,C=await(0,d.readXingHeader)(this.tokenizer);if(this.offset+=this.tokenizer.position-_,C.lame&&(this.metadata.setFormat("tool","LAME "+a.stripNulls(C.lame.version)),C.lame.extended&&(this.metadata.setFormat("trackPeakLevel",C.lame.extended.track_peak),C.lame.extended.track_gain&&this.metadata.setFormat("trackGain",C.lame.extended.track_gain.adjustment),C.lame.extended.album_gain&&this.metadata.setFormat("albumGain",C.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",C.lame.extended.music_length/1e3))),C.streamSize){const I=this.audioFrameHeader.calcDuration(C.numFrames);return this.metadata.setFormat("duration",I),u("Get duration from Xing header: %s",this.metadata.format.duration),C}const k=this.frame_size-this.offset;return await this.skipFrameData(k),C}async skipFrameData(_){if(_<0)throw new Error("frame-data-left cannot be negative");await this.tokenizer.ignore(_),this.countSkipFrameData+=_}areAllSame(_){const C=_[0];return _.every(k=>k===C)}};return MpegParser.MpegParser=T,MpegParser}var musepack={},MpcSv8Parser={},StreamVersion8={},hasRequiredStreamVersion8;function requireStreamVersion8(){if(hasRequiredStreamVersion8)return StreamVersion8;hasRequiredStreamVersion8=1,Object.defineProperty(StreamVersion8,"__esModule",{value:!0}),StreamVersion8.StreamReader=void 0;const n=requireLib$2(),r=requireBrowser$3(),s=requireUtil$1(),a=(0,r.default)("music-metadata:parser:musepack:sv8"),l=new n.StringType(2,"binary"),d={len:5,get:(p,h)=>({crc:n.UINT32_LE.get(p,h),streamVersion:n.UINT8.get(p,h+4)})},u={len:2,get:(p,h)=>({sampleFrequency:[44100,48e3,37800,32e3][s.getBitAllignedNumber(p,h,0,3)],maxUsedBands:s.getBitAllignedNumber(p,h,3,5),channelCount:s.getBitAllignedNumber(p,h+1,0,4)+1,msUsed:s.isBitSet(p,h+1,4),audioBlockFrames:s.getBitAllignedNumber(p,h+1,5,3)})};class c{constructor(h){this.tokenizer=h}async readPacketHeader(){const h=await this.tokenizer.readToken(l),y=await this.readVariableSizeField();return{key:h,payloadLength:y.value-2-y.len}}async readStreamHeader(h){const y={};a(`Reading SH at offset=${this.tokenizer.position}`);const b=await this.tokenizer.readToken(d);h-=d.len,Object.assign(y,b),a(`SH.streamVersion = ${b.streamVersion}`);const x=await this.readVariableSizeField();h-=x.len,y.sampleCount=x.value;const T=await this.readVariableSizeField();h-=T.len,y.beginningOfSilence=T.value;const S=await this.tokenizer.readToken(u);return h-=u.len,Object.assign(y,S),await this.tokenizer.ignore(h),y}async readVariableSizeField(h=1,y=0){let b=await this.tokenizer.readNumber(n.UINT8);return(b&128)===0?{len:h,value:y+b}:(b&=127,b+=y,this.readVariableSizeField(h+1,b<<7))}}return StreamVersion8.StreamReader=c,StreamVersion8}var hasRequiredMpcSv8Parser;function requireMpcSv8Parser(){if(hasRequiredMpcSv8Parser)return MpcSv8Parser;hasRequiredMpcSv8Parser=1,Object.defineProperty(MpcSv8Parser,"__esModule",{value:!0}),MpcSv8Parser.MpcSv8Parser=void 0;const n=requireBrowser$3(),r=requireBasicParser(),s=requireAPEv2Parser(),a=requireFourCC(),l=requireStreamVersion8(),d=(0,n.default)("music-metadata:parser:musepack");let u=class extends r.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){if(await this.tokenizer.readToken(a.FourCcToken)!=="MPCK")throw new Error("Invalid Magic number");return this.metadata.setFormat("container","Musepack, SV8"),this.parsePacket()}async parsePacket(){const p=new l.StreamReader(this.tokenizer);do{const h=await p.readPacketHeader();switch(d(`packet-header key=${h.key}, payloadLength=${h.payloadLength}`),h.key){case"SH":const y=await p.readStreamHeader(h.payloadLength);this.metadata.setFormat("numberOfSamples",y.sampleCount),this.metadata.setFormat("sampleRate",y.sampleFrequency),this.metadata.setFormat("duration",y.sampleCount/y.sampleFrequency),this.metadata.setFormat("numberOfChannels",y.channelCount);break;case"AP":this.audioLength+=h.payloadLength,await this.tokenizer.ignore(h.payloadLength);break;case"RG":case"EI":case"SO":case"ST":case"CT":await this.tokenizer.ignore(h.payloadLength);break;case"SE":return this.metadata.setFormat("bitrate",this.audioLength*8/this.metadata.format.duration),s.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options);default:throw new Error(`Unexpected header: ${h.key}`)}}while(!0)}};return MpcSv8Parser.MpcSv8Parser=u,MpcSv8Parser}var MpcSv7Parser={},BitReader={},hasRequiredBitReader;function requireBitReader(){if(hasRequiredBitReader)return BitReader;hasRequiredBitReader=1,Object.defineProperty(BitReader,"__esModule",{value:!0}),BitReader.BitReader=void 0;const n=requireLib$2();let r=class{constructor(a){this.tokenizer=a,this.pos=0,this.dword=void 0}async read(a){for(;this.dword===void 0;)this.dword=await this.tokenizer.readToken(n.UINT32_LE);let l=this.dword;return this.pos+=a,this.pos<32?(l>>>=32-this.pos,l&(1<<a)-1):(this.pos-=32,this.pos===0?(this.dword=void 0,l&(1<<a)-1):(this.dword=await this.tokenizer.readToken(n.UINT32_LE),this.pos&&(l<<=this.pos,l|=this.dword>>>32-this.pos),l&(1<<a)-1))}async ignore(a){if(this.pos>0){const u=32-this.pos;this.dword=void 0,a-=u,this.pos=0}const l=a%32,d=(a-l)/32;return await this.tokenizer.ignore(d*4),this.read(l)}};return BitReader.BitReader=r,BitReader}var StreamVersion7={},hasRequiredStreamVersion7;function requireStreamVersion7(){if(hasRequiredStreamVersion7)return StreamVersion7;hasRequiredStreamVersion7=1,Object.defineProperty(StreamVersion7,"__esModule",{value:!0}),StreamVersion7.Header=void 0;const n=requireLib$2(),r=requireUtil$1();return StreamVersion7.Header={len:24,get:(s,a)=>{const l={signature:Buffer.from(s).toString("latin1",a,a+3),streamMinorVersion:r.getBitAllignedNumber(s,a+3,0,4),streamMajorVersion:r.getBitAllignedNumber(s,a+3,4,4),frameCount:n.UINT32_LE.get(s,a+4),maxLevel:n.UINT16_LE.get(s,a+8),sampleFrequency:[44100,48e3,37800,32e3][r.getBitAllignedNumber(s,a+10,0,2)],link:r.getBitAllignedNumber(s,a+10,2,2),profile:r.getBitAllignedNumber(s,a+10,4,4),maxBand:r.getBitAllignedNumber(s,a+11,0,6),intensityStereo:r.isBitSet(s,a+11,6),midSideStereo:r.isBitSet(s,a+11,7),titlePeak:n.UINT16_LE.get(s,a+12),titleGain:n.UINT16_LE.get(s,a+14),albumPeak:n.UINT16_LE.get(s,a+16),albumGain:n.UINT16_LE.get(s,a+18),lastFrameLength:n.UINT32_LE.get(s,a+20)>>>20&2047,trueGapless:r.isBitSet(s,a+23,0)};return l.lastFrameLength=l.trueGapless?n.UINT32_LE.get(s,20)>>>20&2047:0,l}},StreamVersion7}var hasRequiredMpcSv7Parser;function requireMpcSv7Parser(){if(hasRequiredMpcSv7Parser)return MpcSv7Parser;hasRequiredMpcSv7Parser=1,Object.defineProperty(MpcSv7Parser,"__esModule",{value:!0}),MpcSv7Parser.MpcSv7Parser=void 0;const n=requireBrowser$3(),r=requireBasicParser(),s=requireAPEv2Parser(),a=requireBitReader(),l=requireStreamVersion7(),d=(0,n.default)("music-metadata:parser:musepack");let u=class extends r.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){const p=await this.tokenizer.readToken(l.Header);if(p.signature!=="MP+")throw new Error("Unexpected magic number");d(`stream-version=${p.streamMajorVersion}.${p.streamMinorVersion}`),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",p.sampleFrequency);const h=1152*(p.frameCount-1)+p.lastFrameLength;this.metadata.setFormat("numberOfSamples",h),this.duration=h/p.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new a.BitReader(this.tokenizer),this.metadata.setFormat("numberOfChannels",p.midSideStereo||p.intensityStereo?2:1);const y=await this.bitreader.read(8);return this.metadata.setFormat("codec",(y/100).toFixed(2)),await this.skipAudioData(p.frameCount),d(`End of audio stream, switching to APEv2, offset=${this.tokenizer.position}`),s.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async skipAudioData(p){for(;p-- >0;){const y=await this.bitreader.read(20);this.audioLength+=20+y,await this.bitreader.ignore(y)}const h=await this.bitreader.read(11);this.audioLength+=h,this.metadata.setFormat("bitrate",this.audioLength/this.duration)}};return MpcSv7Parser.MpcSv7Parser=u,MpcSv7Parser}var hasRequiredMusepack;function requireMusepack(){if(hasRequiredMusepack)return musepack;hasRequiredMusepack=1,Object.defineProperty(musepack,"__esModule",{value:!0});const n=requireBrowser$3(),r=requireLib$2(),s=requireAbstractID3Parser(),a=requireMpcSv8Parser(),l=requireMpcSv7Parser(),d=(0,n.default)("music-metadata:parser:musepack");class u extends s.AbstractID3Parser{async postId3v2Parse(){const p=await this.tokenizer.peekToken(new r.StringType(3,"binary"));let h;switch(p){case"MP+":{d("Musepack stream-version 7"),h=new l.MpcSv7Parser;break}case"MPC":{d("Musepack stream-version 8"),h=new a.MpcSv8Parser;break}default:throw new Error("Invalid Musepack signature prefix")}return h.init(this.metadata,this.tokenizer,this.options),h.parse()}}return musepack.default=u,musepack}var OggParser={},OpusParser={},Opus={},hasRequiredOpus;function requireOpus(){if(hasRequiredOpus)return Opus;hasRequiredOpus=1,Object.defineProperty(Opus,"__esModule",{value:!0}),Opus.IdHeader=void 0;const n=requireLib$2();class r{constructor(a){if(this.len=a,a<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}get(a,l){return{magicSignature:new n.StringType(8,"ascii").get(a,l+0),version:a.readUInt8(l+8),channelCount:a.readUInt8(l+9),preSkip:a.readInt16LE(l+10),inputSampleRate:a.readInt32LE(l+12),outputGain:a.readInt16LE(l+16),channelMapping:a.readUInt8(l+18)}}}return Opus.IdHeader=r,Opus}var hasRequiredOpusParser;function requireOpusParser(){if(hasRequiredOpusParser)return OpusParser;hasRequiredOpusParser=1,Object.defineProperty(OpusParser,"__esModule",{value:!0}),OpusParser.OpusParser=void 0;const n=requireLib$2(),r=requireVorbisParser(),s=requireOpus();let a=class extends r.VorbisParser{constructor(d,u,c){super(d,u),this.tokenizer=c,this.lastPos=-1}parseFirstPage(d,u){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new s.IdHeader(u.length).get(u,0),this.idHeader.magicSignature!=="OpusHead")throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}parseFullPage(d){switch(new n.StringType(8,"ascii").get(d,0)){case"OpusTags":this.parseUserCommentList(d,8),this.lastPos=this.tokenizer.position-d.length;break}}calculateDuration(d){if(this.metadata.format.sampleRate&&d.absoluteGranulePosition>=0){const u=d.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",u),this.metadata.setFormat("duration",u/48e3),this.lastPos!==-1&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){const c=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*c/this.metadata.format.duration)}}}};return OpusParser.OpusParser=a,OpusParser}var SpeexParser={},Speex={},hasRequiredSpeex;function requireSpeex(){if(hasRequiredSpeex)return Speex;hasRequiredSpeex=1,Object.defineProperty(Speex,"__esModule",{value:!0}),Speex.Header=void 0;const n=requireLib$2(),r=requireUtil$1();return Speex.Header={len:80,get:(s,a)=>({speex:new n.StringType(8,"ascii").get(s,a+0),version:r.trimRightNull(new n.StringType(20,"ascii").get(s,a+8)),version_id:s.readInt32LE(a+28),header_size:s.readInt32LE(a+32),rate:s.readInt32LE(a+36),mode:s.readInt32LE(a+40),mode_bitstream_version:s.readInt32LE(a+44),nb_channels:s.readInt32LE(a+48),bitrate:s.readInt32LE(a+52),frame_size:s.readInt32LE(a+56),vbr:s.readInt32LE(a+60),frames_per_packet:s.readInt32LE(a+64),extra_headers:s.readInt32LE(a+68),reserved1:s.readInt32LE(a+72),reserved2:s.readInt32LE(a+76)})},Speex}var hasRequiredSpeexParser;function requireSpeexParser(){if(hasRequiredSpeexParser)return SpeexParser;hasRequiredSpeexParser=1,Object.defineProperty(SpeexParser,"__esModule",{value:!0}),SpeexParser.SpeexParser=void 0;const n=requireBrowser$3(),r=requireVorbisParser(),s=requireSpeex(),a=(0,n.default)("music-metadata:parser:ogg:speex");let l=class extends r.VorbisParser{constructor(u,c,p){super(u,c),this.tokenizer=p}parseFirstPage(u,c){a("First Ogg/Speex page");const p=s.Header.get(c,0);this.metadata.setFormat("codec",`Speex ${p.version}`),this.metadata.setFormat("numberOfChannels",p.nb_channels),this.metadata.setFormat("sampleRate",p.rate),p.bitrate!==-1&&this.metadata.setFormat("bitrate",p.bitrate)}};return SpeexParser.SpeexParser=l,SpeexParser}var TheoraParser={},Theora={},hasRequiredTheora;function requireTheora(){if(hasRequiredTheora)return Theora;hasRequiredTheora=1,Object.defineProperty(Theora,"__esModule",{value:!0}),Theora.IdentificationHeader=void 0;const n=requireLib$2();return Theora.IdentificationHeader={len:42,get:(r,s)=>({id:new n.StringType(7,"ascii").get(r,s),vmaj:r.readUInt8(s+7),vmin:r.readUInt8(s+8),vrev:r.readUInt8(s+9),vmbw:r.readUInt16BE(s+10),vmbh:r.readUInt16BE(s+17),nombr:n.UINT24_BE.get(r,s+37),nqual:r.readUInt8(s+40)})},Theora}var hasRequiredTheoraParser;function requireTheoraParser(){if(hasRequiredTheoraParser)return TheoraParser;hasRequiredTheoraParser=1,Object.defineProperty(TheoraParser,"__esModule",{value:!0}),TheoraParser.TheoraParser=void 0;const n=requireBrowser$3(),r=requireTheora(),s=(0,n.default)("music-metadata:parser:ogg:theora");let a=class{constructor(d,u,c){this.metadata=d,this.tokenizer=c}parsePage(d,u){d.headerType.firstPage&&this.parseFirstPage(d,u)}flush(){s("flush")}calculateDuration(d){s("duration calculation not implemented")}parseFirstPage(d,u){s("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");const c=r.IdentificationHeader.get(u,0);this.metadata.setFormat("bitrate",c.nombr)}};return TheoraParser.TheoraParser=a,TheoraParser}var hasRequiredOggParser;function requireOggParser(){if(hasRequiredOggParser)return OggParser;hasRequiredOggParser=1,Object.defineProperty(OggParser,"__esModule",{value:!0}),OggParser.OggParser=OggParser.SegmentTable=void 0;const n=requireLib$2(),r=requireCore$2(),s=requireBrowser$3(),a=requireUtil$1(),l=requireFourCC(),d=requireBasicParser(),u=requireVorbisParser(),c=requireOpusParser(),p=requireSpeexParser(),h=requireTheoraParser(),y=(0,s.default)("music-metadata:parser:ogg");class b{static sum(S,_,C){let k=0;for(let I=_;I<_+C;++I)k+=S[I];return k}constructor(S){this.len=S.page_segments}get(S,_){return{totalPageSize:b.sum(S,_,this.len)}}}OggParser.SegmentTable=b;let x=class wh extends d.BasicParser{async parse(){y("pos=%s, parsePage()",this.tokenizer.position);try{let S;do{if(S=await this.tokenizer.readToken(wh.Header),S.capturePattern!=="OggS")throw new Error("Invalid Ogg capture pattern");this.metadata.setFormat("container","Ogg"),this.header=S,this.pageNumber=S.pageSequenceNo,y("page#=%s, Ogg.id=%s",S.pageSequenceNo,S.capturePattern);const _=await this.tokenizer.readToken(new b(S));y("totalPageSize=%s",_.totalPageSize);const C=await this.tokenizer.readToken(new n.Uint8ArrayType(_.totalPageSize));if(y("firstPage=%s, lastPage=%s, continued=%s",S.headerType.firstPage,S.headerType.lastPage,S.headerType.continued),S.headerType.firstPage){const k=new n.StringType(7,"ascii").get(Buffer.from(C),0);switch(k){case"vorbis":y("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new u.VorbisParser(this.metadata,this.options);break;case"OpusHea":y("Set page consumer to Ogg/Opus"),this.pageConsumer=new c.OpusParser(this.metadata,this.options,this.tokenizer);break;case"Speex  ":y("Set page consumer to Ogg/Speex"),this.pageConsumer=new p.SpeexParser(this.metadata,this.options,this.tokenizer);break;case"fishead":case"\0theora":y("Set page consumer to Ogg/Theora"),this.pageConsumer=new h.TheoraParser(this.metadata,this.options,this.tokenizer);break;default:throw new Error("gg audio-codec not recognized (id="+k+")")}}this.pageConsumer.parsePage(S,C)}while(!S.headerType.lastPage)}catch(S){if(S instanceof r.EndOfStreamError)this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),y("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header);else if(S.message.startsWith("FourCC"))this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),this.pageConsumer.flush());else throw S}}};return x.Header={len:27,get:(T,S)=>({capturePattern:l.FourCcToken.get(T,S),version:n.UINT8.get(T,S+4),headerType:{continued:a.getBit(T,S+5,0),firstPage:a.getBit(T,S+5,1),lastPage:a.getBit(T,S+5,2)},absoluteGranulePosition:Number(n.UINT64_LE.get(T,S+6)),streamSerialNumber:n.UINT32_LE.get(T,S+14),pageSequenceNo:n.UINT32_LE.get(T,S+18),pageChecksum:n.UINT32_LE.get(T,S+22),page_segments:n.UINT8.get(T,S+26)})},OggParser.OggParser=x,OggParser}var WaveParser={},RiffChunk={},hasRequiredRiffChunk;function requireRiffChunk(){if(hasRequiredRiffChunk)return RiffChunk;hasRequiredRiffChunk=1,Object.defineProperty(RiffChunk,"__esModule",{value:!0}),RiffChunk.ListInfoTagValue=RiffChunk.Header=void 0;const n=requireLib$2();RiffChunk.Header={len:8,get:(s,a)=>({chunkID:s.toString("binary",a,a+4),chunkSize:n.UINT32_LE.get(s,4)})};class r{constructor(a){this.tagHeader=a,this.len=a.chunkSize,this.len+=this.len&1}get(a,l){return new n.StringType(this.tagHeader.chunkSize,"ascii").get(a,l)}}return RiffChunk.ListInfoTagValue=r,RiffChunk}var WaveChunk={},hasRequiredWaveChunk;function requireWaveChunk(){return hasRequiredWaveChunk||(hasRequiredWaveChunk=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.FactChunk=n.Format=n.WaveFormat=void 0,(function(a){a[a.PCM=1]="PCM",a[a.ADPCM=2]="ADPCM",a[a.IEEE_FLOAT=3]="IEEE_FLOAT",a[a.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",a[a.MPEG_LOAS=5634]="MPEG_LOAS",a[a.RAW_AAC1=255]="RAW_AAC1",a[a.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",a[a.DVM=8192]="DVM",a[a.RAW_SPORT=576]="RAW_SPORT",a[a.ESST_AC3=577]="ESST_AC3",a[a.DRM=9]="DRM",a[a.DTS2=8193]="DTS2",a[a.MPEG=80]="MPEG"})(n.WaveFormat||(n.WaveFormat={}));class r{constructor(l){if(l.chunkSize<16)throw new Error("Invalid chunk size");this.len=l.chunkSize}get(l,d){return{wFormatTag:l.readUInt16LE(d),nChannels:l.readUInt16LE(d+2),nSamplesPerSec:l.readUInt32LE(d+4),nAvgBytesPerSec:l.readUInt32LE(d+8),nBlockAlign:l.readUInt16LE(d+12),wBitsPerSample:l.readUInt16LE(d+14)}}}n.Format=r;class s{constructor(l){if(l.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=l.chunkSize}get(l,d){return{dwSampleLength:l.readUInt32LE(d)}}}n.FactChunk=s})(WaveChunk)),WaveChunk}var BwfChunk={},hasRequiredBwfChunk;function requireBwfChunk(){if(hasRequiredBwfChunk)return BwfChunk;hasRequiredBwfChunk=1,Object.defineProperty(BwfChunk,"__esModule",{value:!0}),BwfChunk.BroadcastAudioExtensionChunk=void 0;const n=requireLib$2(),r=requireUtil$1();return BwfChunk.BroadcastAudioExtensionChunk={len:420,get:(s,a)=>({description:(0,r.stripNulls)(new n.StringType(256,"ascii").get(s,a)).trim(),originator:(0,r.stripNulls)(new n.StringType(32,"ascii").get(s,a+256)).trim(),originatorReference:(0,r.stripNulls)(new n.StringType(32,"ascii").get(s,a+288)).trim(),originationDate:(0,r.stripNulls)(new n.StringType(10,"ascii").get(s,a+320)).trim(),originationTime:(0,r.stripNulls)(new n.StringType(8,"ascii").get(s,a+330)).trim(),timeReferenceLow:n.UINT32_LE.get(s,a+338),timeReferenceHigh:n.UINT32_LE.get(s,a+342),version:n.UINT16_LE.get(s,a+346),umid:new n.Uint8ArrayType(64).get(s,a+348),loudnessValue:n.UINT16_LE.get(s,a+412),maxTruePeakLevel:n.UINT16_LE.get(s,a+414),maxMomentaryLoudness:n.UINT16_LE.get(s,a+416),maxShortTermLoudness:n.UINT16_LE.get(s,a+418)})},BwfChunk}var hasRequiredWaveParser;function requireWaveParser(){if(hasRequiredWaveParser)return WaveParser;hasRequiredWaveParser=1,Object.defineProperty(WaveParser,"__esModule",{value:!0}),WaveParser.WaveParser=void 0;const n=requireCore$2(),r=requireLib$2(),s=requireBrowser$3(),a=requireRiffChunk(),l=requireWaveChunk(),d=requireID3v2Parser(),u=requireUtil$1(),c=requireFourCC(),p=requireBasicParser(),h=requireBwfChunk(),y=(0,s.default)("music-metadata:parser:RIFF");let b=class extends p.BasicParser{async parse(){const T=await this.tokenizer.readToken(a.Header);if(y(`pos=${this.tokenizer.position}, parse: chunkID=${T.chunkID}`),T.chunkID==="RIFF")return this.parseRiffChunk(T.chunkSize).catch(S=>{if(!(S instanceof n.EndOfStreamError))throw S})}async parseRiffChunk(T){const S=await this.tokenizer.readToken(c.FourCcToken);switch(this.metadata.setFormat("container",S),S){case"WAVE":return this.readWaveChunk(T-c.FourCcToken.len);default:throw new Error(`Unsupported RIFF format: RIFF/${S}`)}}async readWaveChunk(T){for(;T>=a.Header.len;){const S=await this.tokenizer.readToken(a.Header);switch(T-=a.Header.len+S.chunkSize,S.chunkSize>T&&this.metadata.addWarning("Data chunk size exceeds file size"),this.header=S,y(`pos=${this.tokenizer.position}, readChunk: chunkID=RIFF/WAVE/${S.chunkID}`),S.chunkID){case"LIST":await this.parseListTag(S);break;case"fact":this.metadata.setFormat("lossless",!1),this.fact=await this.tokenizer.readToken(new l.FactChunk(S));break;case"fmt ":const _=await this.tokenizer.readToken(new l.Format(S));let C=l.WaveFormat[_.wFormatTag];C||(y("WAVE/non-PCM format="+_.wFormatTag),C="non-PCM ("+_.wFormatTag+")"),this.metadata.setFormat("codec",C),this.metadata.setFormat("bitsPerSample",_.wBitsPerSample),this.metadata.setFormat("sampleRate",_.nSamplesPerSec),this.metadata.setFormat("numberOfChannels",_.nChannels),this.metadata.setFormat("bitrate",_.nBlockAlign*_.nSamplesPerSec*8),this.blockAlign=_.nBlockAlign;break;case"id3 ":case"ID3 ":const k=await this.tokenizer.readToken(new r.Uint8ArrayType(S.chunkSize)),I=n.fromBuffer(k);await new d.ID3v2Parser().parse(this.metadata,I,this.options);break;case"data":this.metadata.format.lossless!==!1&&this.metadata.setFormat("lossless",!0);let N=S.chunkSize;if(this.tokenizer.fileInfo.size){const M=this.tokenizer.fileInfo.size-this.tokenizer.position;M<N&&(this.metadata.addWarning("data chunk length exceeding file length"),N=M)}const F=this.fact?this.fact.dwSampleLength:N===4294967295?void 0:N/this.blockAlign;F&&(this.metadata.setFormat("numberOfSamples",F),this.metadata.setFormat("duration",F/this.metadata.format.sampleRate)),this.metadata.format.codec==="ADPCM"?this.metadata.setFormat("bitrate",352e3):this.metadata.setFormat("bitrate",this.blockAlign*this.metadata.format.sampleRate*8),await this.tokenizer.ignore(S.chunkSize);break;case"bext":const j=await this.tokenizer.readToken(h.BroadcastAudioExtensionChunk);Object.keys(j).forEach(M=>{this.metadata.addTag("exif","bext."+M,j[M])});const V=S.chunkSize-h.BroadcastAudioExtensionChunk.len;await this.tokenizer.ignore(V);break;case"\0\0\0\0":y(`Ignore padding chunk: RIFF/${S.chunkID} of ${S.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+S.chunkID),await this.tokenizer.ignore(S.chunkSize);break;default:y(`Ignore chunk: RIFF/${S.chunkID} of ${S.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+S.chunkID),await this.tokenizer.ignore(S.chunkSize)}this.header.chunkSize%2===1&&(y("Read odd padding byte"),await this.tokenizer.ignore(1))}}async parseListTag(T){const S=await this.tokenizer.readToken(new r.StringType(4,"binary"));switch(y("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,S),S){case"INFO":return this.parseRiffInfoTags(T.chunkSize-4);case"adtl":default:return this.metadata.addWarning("Ignore chunk: RIFF/WAVE/LIST/"+S),y("Ignoring chunkID=RIFF/WAVE/LIST/"+S),this.tokenizer.ignore(T.chunkSize-4).then()}}async parseRiffInfoTags(T){for(;T>=8;){const S=await this.tokenizer.readToken(a.Header),_=new a.ListInfoTagValue(S),C=await this.tokenizer.readToken(_);this.addTag(S.chunkID,u.stripNulls(C)),T-=8+_.len}if(T!==0)throw Error("Illegal remaining size: "+T)}addTag(T,S){this.metadata.addTag("exif",T,S)}};return WaveParser.WaveParser=b,WaveParser}var WavPackParser={},WavPackToken={},hasRequiredWavPackToken;function requireWavPackToken(){if(hasRequiredWavPackToken)return WavPackToken;hasRequiredWavPackToken=1,Object.defineProperty(WavPackToken,"__esModule",{value:!0}),WavPackToken.WavPack=void 0;const n=requireLib$2(),r=requireFourCC(),s=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1];class a{static isBitSet(d,u){return a.getBitAllignedNumber(d,u,1)===1}static getBitAllignedNumber(d,u,c){return d>>>u&4294967295>>>32-c}}return a.BlockHeaderToken={len:32,get:(l,d)=>{const u=n.UINT32_LE.get(l,d+24),c={BlockID:r.FourCcToken.get(l,d),blockSize:n.UINT32_LE.get(l,d+4),version:n.UINT16_LE.get(l,d+8),totalSamples:n.UINT32_LE.get(l,d+12),blockIndex:n.UINT32_LE.get(l,d+16),blockSamples:n.UINT32_LE.get(l,d+20),flags:{bitsPerSample:(1+a.getBitAllignedNumber(u,0,2))*8,isMono:a.isBitSet(u,2),isHybrid:a.isBitSet(u,3),isJointStereo:a.isBitSet(u,4),crossChannel:a.isBitSet(u,5),hybridNoiseShaping:a.isBitSet(u,6),floatingPoint:a.isBitSet(u,7),samplingRate:s[a.getBitAllignedNumber(u,23,4)],isDSD:a.isBitSet(u,31)},crc:new n.Uint8ArrayType(4).get(l,d+28)};return c.flags.isDSD&&(c.totalSamples*=8),c}},a.MetadataIdToken={len:1,get:(l,d)=>({functionId:a.getBitAllignedNumber(l[d],0,6),isOptional:a.isBitSet(l[d],5),isOddSize:a.isBitSet(l[d],6),largeBlock:a.isBitSet(l[d],7)})},WavPackToken.WavPack=a,WavPackToken}var hasRequiredWavPackParser;function requireWavPackParser(){if(hasRequiredWavPackParser)return WavPackParser;hasRequiredWavPackParser=1,Object.defineProperty(WavPackParser,"__esModule",{value:!0}),WavPackParser.WavPackParser=void 0;const n=requireLib$2(),r=requireAPEv2Parser(),s=requireFourCC(),a=requireBasicParser(),l=requireWavPackToken(),u=(0,requireBrowser$3().default)("music-metadata:parser:WavPack");let c=class extends a.BasicParser{async parse(){return this.audioDataSize=0,await this.parseWavPackBlocks(),r.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async parseWavPackBlocks(){do{if(await this.tokenizer.peekToken(s.FourCcToken)!=="wvpk")break;const y=await this.tokenizer.readToken(l.WavPack.BlockHeaderToken);if(y.BlockID!=="wvpk")throw new Error("Invalid WavPack Block-ID");u(`WavPack header blockIndex=${y.blockIndex}, len=${l.WavPack.BlockHeaderToken.len}`),y.blockIndex===0&&!this.metadata.format.container&&(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!y.flags.isHybrid),this.metadata.setFormat("bitsPerSample",y.flags.bitsPerSample),y.flags.isDSD||(this.metadata.setFormat("sampleRate",y.flags.samplingRate),this.metadata.setFormat("duration",y.totalSamples/y.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",y.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",y.totalSamples),this.metadata.setFormat("codec",y.flags.isDSD?"DSD":"PCM"));const b=y.blockSize-(l.WavPack.BlockHeaderToken.len-8);await(y.blockIndex===0?this.parseMetadataSubBlock(y,b):this.tokenizer.ignore(b)),y.blockSamples>0&&(this.audioDataSize+=y.blockSize)}while(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=l.WavPack.BlockHeaderToken.len);this.metadata.setFormat("bitrate",this.audioDataSize*8/this.metadata.format.duration)}async parseMetadataSubBlock(h,y){for(;y>l.WavPack.MetadataIdToken.len;){const b=await this.tokenizer.readToken(l.WavPack.MetadataIdToken),x=await this.tokenizer.readNumber(b.largeBlock?n.UINT24_LE:n.UINT8),T=Buffer.alloc(x*2-(b.isOddSize?1:0));switch(await this.tokenizer.readBuffer(T),u(`Metadata Sub-Blocks functionId=0x${b.functionId.toString(16)}, id.largeBlock=${b.largeBlock},data-size=${T.length}`),b.functionId){case 0:break;case 14:u("ID_DSD_BLOCK");const S=1<<T.readUInt8(0),_=h.flags.samplingRate*S*8;if(!h.flags.isDSD)throw new Error("Only expect DSD block if DSD-flag is set");this.metadata.setFormat("sampleRate",_),this.metadata.setFormat("duration",h.totalSamples/_);break;case 36:u("ID_ALT_TRAILER: trailer for non-wav files");break;case 38:this.metadata.setFormat("audioMD5",T);break;case 47:u(`ID_BLOCK_CHECKSUM: checksum=${T.toString("hex")}`);break;default:u(`Ignore unsupported meta-sub-block-id functionId=0x${b.functionId.toString(16)}`);break}y-=l.WavPack.MetadataIdToken.len+(b.largeBlock?n.UINT24_LE.len:n.UINT8.len)+x*2,u(`remainingLength=${y}`),b.isOddSize&&this.tokenizer.ignore(1)}if(y!==0)throw new Error("metadata-sub-block should fit it remaining length")}};return WavPackParser.WavPackParser=c,WavPackParser}var DsfParser={},DsfChunk={},hasRequiredDsfChunk;function requireDsfChunk(){return hasRequiredDsfChunk||(hasRequiredDsfChunk=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.FormatChunk=n.ChannelType=n.DsdChunk=n.ChunkHeader=void 0;const r=requireLib$2(),s=requireFourCC();n.ChunkHeader={len:12,get:(a,l)=>({id:s.FourCcToken.get(a,l),size:r.UINT64_LE.get(a,l+4)})},n.DsdChunk={len:16,get:(a,l)=>({fileSize:r.INT64_LE.get(a,l),metadataPointer:r.INT64_LE.get(a,l+8)})},(function(a){a[a.mono=1]="mono",a[a.stereo=2]="stereo",a[a.channels=3]="channels",a[a.quad=4]="quad",a[a["4 channels"]=5]="4 channels",a[a["5 channels"]=6]="5 channels",a[a["5.1 channels"]=7]="5.1 channels"})(n.ChannelType||(n.ChannelType={})),n.FormatChunk={len:40,get:(a,l)=>({formatVersion:r.INT32_LE.get(a,l),formatID:r.INT32_LE.get(a,l+4),channelType:r.INT32_LE.get(a,l+8),channelNum:r.INT32_LE.get(a,l+12),samplingFrequency:r.INT32_LE.get(a,l+16),bitsPerSample:r.INT32_LE.get(a,l+20),sampleCount:r.INT64_LE.get(a,l+24),blockSizePerChannel:r.INT32_LE.get(a,l+32)})}})(DsfChunk)),DsfChunk}var hasRequiredDsfParser;function requireDsfParser(){if(hasRequiredDsfParser)return DsfParser;hasRequiredDsfParser=1,Object.defineProperty(DsfParser,"__esModule",{value:!0}),DsfParser.DsfParser=void 0;const n=requireBrowser$3(),r=requireAbstractID3Parser(),s=requireDsfChunk(),a=requireID3v2Parser(),l=(0,n.default)("music-metadata:parser:DSF");let d=class extends r.AbstractID3Parser{async postId3v2Parse(){const c=this.tokenizer.position,p=await this.tokenizer.readToken(s.ChunkHeader);if(p.id!=="DSD ")throw new Error("Invalid chunk signature");this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0);const h=await this.tokenizer.readToken(s.DsdChunk);if(h.metadataPointer===BigInt(0))l("No ID3v2 tag present");else return l(`expect ID3v2 at offset=${h.metadataPointer}`),await this.parseChunks(h.fileSize-p.size),await this.tokenizer.ignore(Number(h.metadataPointer)-this.tokenizer.position-c),new a.ID3v2Parser().parse(this.metadata,this.tokenizer,this.options)}async parseChunks(c){for(;c>=s.ChunkHeader.len;){const p=await this.tokenizer.readToken(s.ChunkHeader);switch(l(`Parsing chunk name=${p.id} size=${p.size}`),p.id){case"fmt ":const h=await this.tokenizer.readToken(s.FormatChunk);this.metadata.setFormat("numberOfChannels",h.channelNum),this.metadata.setFormat("sampleRate",h.samplingFrequency),this.metadata.setFormat("bitsPerSample",h.bitsPerSample),this.metadata.setFormat("numberOfSamples",h.sampleCount),this.metadata.setFormat("duration",Number(h.sampleCount)/h.samplingFrequency);const y=h.bitsPerSample*h.samplingFrequency*h.channelNum;this.metadata.setFormat("bitrate",y);return;default:this.tokenizer.ignore(Number(p.size)-s.ChunkHeader.len);break}c-=p.size}}};return DsfParser.DsfParser=d,DsfParser}var DsdiffParser={},DsdiffToken={},hasRequiredDsdiffToken;function requireDsdiffToken(){if(hasRequiredDsdiffToken)return DsdiffToken;hasRequiredDsdiffToken=1,Object.defineProperty(DsdiffToken,"__esModule",{value:!0}),DsdiffToken.ChunkHeader64=void 0;const n=requireLib$2(),r=requireFourCC();return DsdiffToken.ChunkHeader64={len:12,get:(s,a)=>({chunkID:r.FourCcToken.get(s,a),chunkSize:n.INT64_BE.get(s,a+4)})},DsdiffToken}var hasRequiredDsdiffParser;function requireDsdiffParser(){if(hasRequiredDsdiffParser)return DsdiffParser;hasRequiredDsdiffParser=1,Object.defineProperty(DsdiffParser,"__esModule",{value:!0}),DsdiffParser.DsdiffParser=void 0;const n=requireLib$2(),r=requireBrowser$3(),s=requireCore$2(),a=requireFourCC(),l=requireBasicParser(),d=requireID3v2Parser(),u=requireDsdiffToken(),c=(0,r.default)("music-metadata:parser:aiff");let p=class extends l.BasicParser{async parse(){const y=await this.tokenizer.readToken(u.ChunkHeader64);if(y.chunkID!=="FRM8")throw new Error("Unexpected chunk-ID");const b=(await this.tokenizer.readToken(a.FourCcToken)).trim();switch(b){case"DSD":return this.metadata.setFormat("container",`DSDIFF/${b}`),this.metadata.setFormat("lossless",!0),this.readFmt8Chunks(y.chunkSize-BigInt(a.FourCcToken.len));default:throw Error(`Unsupported DSDIFF type: ${b}`)}}async readFmt8Chunks(y){for(;y>=u.ChunkHeader64.len;){const b=await this.tokenizer.readToken(u.ChunkHeader64);c(`Chunk id=${b.chunkID}`),await this.readData(b),y-=BigInt(u.ChunkHeader64.len)+b.chunkSize}}async readData(y){c(`Reading data of chunk[ID=${y.chunkID}, size=${y.chunkSize}]`);const b=this.tokenizer.position;switch(y.chunkID.trim()){case"FVER":const T=await this.tokenizer.readToken(n.UINT32_LE);c(`DSDIFF version=${T}`);break;case"PROP":if(await this.tokenizer.readToken(a.FourCcToken)!=="SND ")throw new Error("Unexpected PROP-chunk ID");await this.handleSoundPropertyChunks(y.chunkSize-BigInt(a.FourCcToken.len));break;case"ID3":const _=await this.tokenizer.readToken(new n.Uint8ArrayType(Number(y.chunkSize))),C=s.fromBuffer(_);await new d.ID3v2Parser().parse(this.metadata,C,this.options);break;default:c(`Ignore chunk[ID=${y.chunkID}, size=${y.chunkSize}]`);break;case"DSD":this.metadata.setFormat("numberOfSamples",Number(y.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate);break}const x=y.chunkSize-BigInt(this.tokenizer.position-b);x>0&&(c(`After Parsing chunk, remaining ${x} bytes`),await this.tokenizer.ignore(Number(x)))}async handleSoundPropertyChunks(y){for(c(`Parsing sound-property-chunks, remainingSize=${y}`);y>0;){const b=await this.tokenizer.readToken(u.ChunkHeader64);c(`Sound-property-chunk[ID=${b.chunkID}, size=${b.chunkSize}]`);const x=this.tokenizer.position;switch(b.chunkID.trim()){case"FS":const S=await this.tokenizer.readToken(n.UINT32_BE);this.metadata.setFormat("sampleRate",S);break;case"CHNL":const _=await this.tokenizer.readToken(n.UINT16_BE);this.metadata.setFormat("numberOfChannels",_),await this.handleChannelChunks(b.chunkSize-BigInt(n.UINT16_BE.len));break;case"CMPR":const C=(await this.tokenizer.readToken(a.FourCcToken)).trim(),k=await this.tokenizer.readToken(n.UINT8),I=await this.tokenizer.readToken(new n.StringType(k,"ascii"));C==="DSD"&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec",`${C} (${I})`);break;case"ABSS":const N=await this.tokenizer.readToken(n.UINT16_BE),F=await this.tokenizer.readToken(n.UINT8),j=await this.tokenizer.readToken(n.UINT8),V=await this.tokenizer.readToken(n.UINT32_BE);c(`ABSS ${N}:${F}:${j}.${V}`);break;case"LSCO":const M=await this.tokenizer.readToken(n.UINT16_BE);c(`LSCO lsConfig=${M}`);break;case"COMT":default:c(`Unknown sound-property-chunk[ID=${b.chunkID}, size=${b.chunkSize}]`),await this.tokenizer.ignore(Number(b.chunkSize))}const T=b.chunkSize-BigInt(this.tokenizer.position-x);T>0&&(c(`After Parsing sound-property-chunk ${b.chunkSize}, remaining ${T} bytes`),await this.tokenizer.ignore(Number(T))),y-=BigInt(u.ChunkHeader64.len)+b.chunkSize,c(`Parsing sound-property-chunks, remainingSize=${y}`)}if(this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample){const b=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample;this.metadata.setFormat("bitrate",b)}}async handleChannelChunks(y){c(`Parsing channel-chunks, remainingSize=${y}`);const b=[];for(;y>=a.FourCcToken.len;){const x=await this.tokenizer.readToken(a.FourCcToken);c(`Channel[ID=${x}]`),b.push(x),y-=BigInt(a.FourCcToken.len)}return c(`Channels: ${b.join(", ")}`),b}};return DsdiffParser.DsdiffParser=p,DsdiffParser}var MatroskaParser={},MatroskaDtd={},hasRequiredMatroskaDtd;function requireMatroskaDtd(){if(hasRequiredMatroskaDtd)return MatroskaDtd;hasRequiredMatroskaDtd=1,Object.defineProperty(MatroskaDtd,"__esModule",{value:!0}),MatroskaDtd.elements=void 0;const n=requireTypes();return MatroskaDtd.elements={440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:n.DataType.uint},17143:{name:"ebmlReadVersion",value:n.DataType.uint},17138:{name:"ebmlMaxIDWidth",value:n.DataType.uint},17139:{name:"ebmlMaxSizeWidth",value:n.DataType.uint},17026:{name:"docType",value:n.DataType.string},17031:{name:"docTypeVersion",value:n.DataType.uint},17029:{name:"docTypeReadVersion",value:n.DataType.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",container:{21419:{name:"seekId",value:n.DataType.binary},21420:{name:"seekPosition",value:n.DataType.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:n.DataType.uid},29572:{name:"filename",value:n.DataType.string},3979555:{name:"prevUID",value:n.DataType.uid},3965867:{name:"prevFilename",value:n.DataType.string},4110627:{name:"nextUID",value:n.DataType.uid},4096955:{name:"nextFilename",value:n.DataType.string},2807729:{name:"timecodeScale",value:n.DataType.uint},17545:{name:"duration",value:n.DataType.float},17505:{name:"dateUTC",value:n.DataType.uint},31657:{name:"title",value:n.DataType.string},19840:{name:"muxingApp",value:n.DataType.string},22337:{name:"writingApp",value:n.DataType.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:n.DataType.uid},163:{name:"unknown",value:n.DataType.binary},167:{name:"position",value:n.DataType.uid},171:{name:"prevSize",value:n.DataType.uid}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:n.DataType.uint},29637:{name:"uid",value:n.DataType.uid},131:{name:"trackType",value:n.DataType.uint},185:{name:"flagEnabled",value:n.DataType.bool},136:{name:"flagDefault",value:n.DataType.bool},21930:{name:"flagForced",value:n.DataType.bool},156:{name:"flagLacing",value:n.DataType.bool},28135:{name:"minCache",value:n.DataType.uint},28136:{name:"maxCache",value:n.DataType.uint},2352003:{name:"defaultDuration",value:n.DataType.uint},2306383:{name:"timecodeScale",value:n.DataType.float},21358:{name:"name",value:n.DataType.string},2274716:{name:"language",value:n.DataType.string},134:{name:"codecID",value:n.DataType.string},25506:{name:"codecPrivate",value:n.DataType.binary},2459272:{name:"codecName",value:n.DataType.string},3839639:{name:"codecSettings",value:n.DataType.string},3883072:{name:"codecInfoUrl",value:n.DataType.string},2536e3:{name:"codecDownloadUrl",value:n.DataType.string},170:{name:"codecDecodeAll",value:n.DataType.bool},28587:{name:"trackOverlay",value:n.DataType.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:n.DataType.bool},21432:{name:"stereoMode",value:n.DataType.uint},176:{name:"pixelWidth",value:n.DataType.uint},186:{name:"pixelHeight",value:n.DataType.uint},21680:{name:"displayWidth",value:n.DataType.uint},21690:{name:"displayHeight",value:n.DataType.uint},21683:{name:"aspectRatioType",value:n.DataType.uint},3061028:{name:"colourSpace",value:n.DataType.uint},3126563:{name:"gammaValue",value:n.DataType.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:n.DataType.float},30901:{name:"outputSamplingFrequency",value:n.DataType.float},159:{name:"channels",value:n.DataType.uint},148:{name:"channels",value:n.DataType.uint},32123:{name:"channelPositions",value:n.DataType.binary},25188:{name:"bitDepth",value:n.DataType.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:n.DataType.uint},20530:{name:"scope",value:n.DataType.bool},20531:{name:"type",value:n.DataType.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:n.DataType.uint},16981:{name:"contentCompSettings",value:n.DataType.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:n.DataType.uint},18402:{name:"contentEncKeyID",value:n.DataType.binary},18403:{name:"contentSignature ",value:n.DataType.binary},18404:{name:"ContentSigKeyID  ",value:n.DataType.binary},18405:{name:"contentSigAlgo ",value:n.DataType.uint},18406:{name:"contentSigHashAlgo ",value:n.DataType.uint}}},25188:{name:"bitDepth",value:n.DataType.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:n.DataType.uid},183:{name:"positions",container:{247:{name:"track",value:n.DataType.uint},241:{name:"clusterPosition",value:n.DataType.uint},21368:{name:"blockNumber",value:n.DataType.uint},234:{name:"codecState",value:n.DataType.uint},219:{name:"reference",container:{150:{name:"time",value:n.DataType.uint},151:{name:"cluster",value:n.DataType.uint},21343:{name:"number",value:n.DataType.uint},235:{name:"codecState",value:n.DataType.uint}}},240:{name:"relativePosition",value:n.DataType.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:n.DataType.string},18030:{name:"name",value:n.DataType.string},18016:{name:"mimeType",value:n.DataType.string},18012:{name:"data",value:n.DataType.binary},18094:{name:"uid",value:n.DataType.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:n.DataType.uid},145:{name:"timeStart",value:n.DataType.uint},146:{name:"timeEnd",value:n.DataType.uid},152:{name:"hidden",value:n.DataType.bool},17816:{name:"enabled",value:n.DataType.uid},143:{name:"track",container:{137:{name:"trackNumber",value:n.DataType.uid},128:{name:"display",container:{133:{name:"string",value:n.DataType.string},17276:{name:"language ",value:n.DataType.string},17278:{name:"country ",value:n.DataType.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:n.DataType.uid},25540:{name:"tagChapterUID",value:n.DataType.uint},25542:{name:"tagAttachmentUID",value:n.DataType.uid},25546:{name:"targetType",value:n.DataType.string},26826:{name:"targetTypeValue",value:n.DataType.uint},25545:{name:"tagEditionUID",value:n.DataType.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:n.DataType.string},17543:{name:"string",value:n.DataType.string},17541:{name:"binary",value:n.DataType.binary},17530:{name:"language",value:n.DataType.string},17531:{name:"languageIETF",value:n.DataType.string},17540:{name:"default",value:n.DataType.bool}}}}}}}}}},MatroskaDtd}var hasRequiredMatroskaParser;function requireMatroskaParser(){if(hasRequiredMatroskaParser)return MatroskaParser;hasRequiredMatroskaParser=1,Object.defineProperty(MatroskaParser,"__esModule",{value:!0}),MatroskaParser.MatroskaParser=void 0;const n=requireLib$2(),r=requireBrowser$3(),s=requireBasicParser(),a=requireTypes(),l=requireMatroskaDtd(),d=(0,r.default)("music-metadata:parser:matroska");let u=class extends s.BasicParser{constructor(){super(),this.padding=0,this.parserMap=new Map,this.ebmlMaxIDLength=4,this.ebmlMaxSizeLength=8,this.parserMap.set(a.DataType.uint,p=>this.readUint(p)),this.parserMap.set(a.DataType.string,p=>this.readString(p)),this.parserMap.set(a.DataType.binary,p=>this.readBuffer(p)),this.parserMap.set(a.DataType.uid,async p=>await this.readUint(p)===1),this.parserMap.set(a.DataType.bool,p=>this.readFlag(p)),this.parserMap.set(a.DataType.float,p=>this.readFloat(p))}init(p,h,y){return super.init(p,h,y),this}async parse(){const p=await this.parseContainer(l.elements,this.tokenizer.fileInfo.size,[]);if(this.metadata.setFormat("container",`EBML/${p.ebml.docType}`),p.segment){const h=p.segment.info;if(h){const b=h.timecodeScale?h.timecodeScale:1e6;if(typeof h.duration=="number"){const x=h.duration*b/1e9;this.addTag("segment:title",h.title),this.metadata.setFormat("duration",x)}}const y=p.segment.tracks;if(y&&y.entries){y.entries.forEach(x=>{const T={codecName:x.codecID.replace("A_","").replace("V_",""),codecSettings:x.codecSettings,flagDefault:x.flagDefault,flagLacing:x.flagLacing,flagEnabled:x.flagEnabled,language:x.language,name:x.name,type:x.trackType,audio:x.audio,video:x.video};this.metadata.addStreamInfo(T)});const b=y.entries.filter(x=>x.trackType===a.TrackType.audio.valueOf()).reduce((x,T)=>!x||!x.flagDefault&&T.flagDefault||T.trackNumber&&T.trackNumber<x.trackNumber?T:x,null);b&&(this.metadata.setFormat("codec",b.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",b.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",b.audio.channels)),p.segment.tags&&p.segment.tags.tag.forEach(x=>{const T=x.target,S=T!=null&&T.targetTypeValue?a.TargetType[T.targetTypeValue]:T!=null&&T.targetType?T.targetType:"track";x.simpleTags.forEach(_=>{const C=_.string?_.string:_.binary;this.addTag(`${S}:${_.name}`,C)})}),p.segment.attachments&&p.segment.attachments.attachedFiles.filter(x=>x.mimeType.startsWith("image/")).map(x=>({data:x.data,format:x.mimeType,description:x.description,name:x.name})).forEach(x=>{this.addTag("picture",x)})}}}async parseContainer(p,h,y){const b={};for(;this.tokenizer.position<h;){let x;try{x=await this.readElement()}catch(S){if(S.message==="End-Of-Stream")break;throw S}const T=p[x.id];if(T)if(d(`Element: name=${T.name}, container=${!!T.container}`),T.container){const S=await this.parseContainer(T.container,x.len>=0?this.tokenizer.position+x.len:-1,y.concat([T.name]));T.multiple?(b[T.name]||(b[T.name]=[]),b[T.name].push(S)):b[T.name]=S}else b[T.name]=await this.parserMap.get(T.value)(x);else switch(x.id){case 236:this.padding+=x.len,await this.tokenizer.ignore(x.len);break;default:d(`parseEbml: path=${y.join("/")}, unknown element: id=${x.id.toString(16)}`),this.padding+=x.len,await this.tokenizer.ignore(x.len)}}return b}async readVintData(p){const h=await this.tokenizer.peekNumber(n.UINT8);let y=128,b=1;for(;(h&y)===0;){if(b>p)throw new Error("VINT value exceeding maximum size");++b,y>>=1}const x=Buffer.alloc(b);return await this.tokenizer.readBuffer(x),x}async readElement(){const p=await this.readVintData(this.ebmlMaxIDLength),h=await this.readVintData(this.ebmlMaxSizeLength);h[0]^=128>>h.length-1;const y=Math.min(6,h.length);return{id:p.readUIntBE(0,p.length),len:h.readUIntBE(h.length-y,y)}}isMaxValue(p){if(p.length===this.ebmlMaxSizeLength){for(let h=1;h<this.ebmlMaxSizeLength;++h)if(p[h]!==255)return!1;return!0}return!1}async readFloat(p){switch(p.len){case 0:return 0;case 4:return this.tokenizer.readNumber(n.Float32_BE);case 8:return this.tokenizer.readNumber(n.Float64_BE);case 10:return this.tokenizer.readNumber(n.Float64_BE);default:throw new Error(`Invalid IEEE-754 float length: ${p.len}`)}}async readFlag(p){return await this.readUint(p)===1}async readUint(p){const h=await this.readBuffer(p),y=Math.min(6,p.len);return h.readUIntBE(p.len-y,y)}async readString(p){return(await this.tokenizer.readToken(new n.StringType(p.len,"utf-8"))).replace(/\00.*$/g,"")}async readBuffer(p){const h=Buffer.alloc(p.len);return await this.tokenizer.readBuffer(h),h}addTag(p,h){this.metadata.addTag("matroska",p,h)}};return MatroskaParser.MatroskaParser=u,MatroskaParser}var hasRequiredParserFactory;function requireParserFactory(){if(hasRequiredParserFactory)return ParserFactory;hasRequiredParserFactory=1,Object.defineProperty(ParserFactory,"__esModule",{value:!0}),ParserFactory.ParserFactory=ParserFactory.parseHttpContentType=void 0;const n=requireCore$1(),r=requireContentType(),s=requireMediaTyper(),a=requireBrowser$3(),l=requireMetadataCollector(),d=requireAiffParser(),u=requireAPEv2Parser(),c=requireAsfParser(),p=requireFlacParser(),h=requireMP4Parser(),y=requireMpegParser(),b=requireMusepack(),x=requireOggParser(),T=requireWaveParser(),S=requireWavPackParser(),_=requireDsfParser(),C=requireDsdiffParser(),k=requireMatroskaParser(),I=(0,a.default)("music-metadata:parser:factory");function N(V){const M=r.parse(V),q=s.parse(M.type);return{type:q.type,subtype:q.subtype,suffix:q.suffix,parameters:M.parameters}}ParserFactory.parseHttpContentType=N;async function F(V,M,q={}){const Se=await j.loadParser(M),Q=new l.MetadataCollector(q);return await Se.init(Q,V,q).parse(),Q.toCommonMetadata()}let j=class uo{static async parseOnContentType(M,q){const{mimeType:Se,path:Q,url:ee}=await M.fileInfo,we=uo.getParserIdForMimeType(Se)||uo.getParserIdForExtension(Q)||uo.getParserIdForExtension(ee);return we||I("No parser found for MIME-type / extension: "+Se),this.parse(M,we,q)}static async parse(M,q,Se){if(!q){I("Guess parser on content...");const Q=Buffer.alloc(4100);if(await M.peekBuffer(Q,{mayBeLess:!0}),M.fileInfo.path&&(q=this.getParserIdForExtension(M.fileInfo.path)),!q){const ee=await n.fromBuffer(Q);if(!ee)throw new Error("Failed to determine audio format");if(I(`Guessed file type is mime=${ee.mime}, extension=${ee.ext}`),q=uo.getParserIdForMimeType(ee.mime),!q)throw new Error("Guessed MIME-type not supported: "+ee.mime)}}return F(M,q,Se)}static getParserIdForExtension(M){if(!M)return;switch(this.getExtension(M).toLocaleLowerCase()||M){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}static async loadParser(M){switch(M){case"aiff":return new d.AIFFParser;case"adts":case"mpeg":return new y.MpegParser;case"apev2":return new u.APEv2Parser;case"asf":return new c.AsfParser;case"dsf":return new _.DsfParser;case"dsdiff":return new C.DsdiffParser;case"flac":return new p.FlacParser;case"mp4":return new h.MP4Parser;case"musepack":return new b.default;case"ogg":return new x.OggParser;case"riff":return new T.WaveParser;case"wavpack":return new S.WavPackParser;case"matroska":return new k.MatroskaParser;default:throw new Error(`Unknown parser type: ${M}`)}}static getExtension(M){const q=M.lastIndexOf(".");return q===-1?"":M.slice(q)}static getParserIdForMimeType(M){let q;try{q=N(M)}catch{I(`Invalid HTTP Content-Type header value: ${M}`);return}const Se=q.subtype.indexOf("x-")===0?q.subtype.substring(2):q.subtype;switch(q.type){case"audio":switch(Se){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(Se){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(Se){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}};return ParserFactory.ParserFactory=j,ParserFactory}var RandomUint8ArrayReader={},hasRequiredRandomUint8ArrayReader;function requireRandomUint8ArrayReader(){if(hasRequiredRandomUint8ArrayReader)return RandomUint8ArrayReader;hasRequiredRandomUint8ArrayReader=1,Object.defineProperty(RandomUint8ArrayReader,"__esModule",{value:!0}),RandomUint8ArrayReader.RandomUint8ArrayReader=void 0;let n=class{constructor(s){this.uint8Array=s,this.fileSize=s.length}async randomRead(s,a,l,d){return s.set(this.uint8Array.subarray(d,d+l),a),l}};return RandomUint8ArrayReader.RandomUint8ArrayReader=n,RandomUint8ArrayReader}var Lyrics3={},hasRequiredLyrics3;function requireLyrics3(){return hasRequiredLyrics3||(hasRequiredLyrics3=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getLyricsHeaderLength=n.endTag2=void 0,n.endTag2="LYRICS200";async function r(s){if(s.fileSize>=143){const a=Buffer.alloc(15);await s.randomRead(a,0,a.length,s.fileSize-143);const l=a.toString("binary");if(l.substr(6)===n.endTag2)return parseInt(l.substr(0,6),10)+15}return 0}n.getLyricsHeaderLength=r})(Lyrics3)),Lyrics3}var hasRequiredCore;function requireCore(){if(hasRequiredCore)return core$2;hasRequiredCore=1,Object.defineProperty(core$2,"__esModule",{value:!0}),core$2.scanAppendingHeaders=core$2.selectCover=core$2.ratingToStars=core$2.orderTags=core$2.parseFromTokenizer=core$2.parseBuffer=core$2.parseStream=void 0;const n=requireCore$2(),r=requireParserFactory(),s=requireRandomUint8ArrayReader(),a=requireAPEv2Parser(),l=requireID3v1Parser(),d=requireLyrics3();function u(T,S,_={}){return p(n.fromStream(T,typeof S=="string"?{mimeType:S}:S),_)}core$2.parseStream=u;async function c(T,S,_={}){const C=new s.RandomUint8ArrayReader(T);await x(C,_);const k=n.fromBuffer(T,typeof S=="string"?{mimeType:S}:S);return p(k,_)}core$2.parseBuffer=c;function p(T,S){return r.ParserFactory.parseOnContentType(T,S)}core$2.parseFromTokenizer=p;function h(T){const S={};for(const _ of T)(S[_.id]=S[_.id]||[]).push(_.value);return S}core$2.orderTags=h;function y(T){return T===void 0?0:1+Math.round(T*4)}core$2.ratingToStars=y;function b(T){return T?T.reduce((S,_)=>_.name&&_.name.toLowerCase()in["front","cover","cover (front)"]?_:S):null}core$2.selectCover=b;async function x(T,S={}){let _=T.fileSize;if(await(0,l.hasID3v1Header)(T)){_-=128;const C=await(0,d.getLyricsHeaderLength)(T);_-=C}S.apeHeader=await a.APEv2Parser.findApeFooterOffset(T,_)}return core$2.scanAppendingHeaders=x,core$2}var lib={},browser$2={exports:{}},stream={exports:{}},buffer={},base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=c,base64Js.toByteArray=h,base64Js.fromByteArray=x;for(var n=[],r=[],s=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,d=a.length;l<d;++l)n[l]=a[l],r[a.charCodeAt(l)]=l;r[45]=62,r[95]=63;function u(T){var S=T.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=T.indexOf("=");_===-1&&(_=S);var C=_===S?0:4-_%4;return[_,C]}function c(T){var S=u(T),_=S[0],C=S[1];return(_+C)*3/4-C}function p(T,S,_){return(S+_)*3/4-_}function h(T){var S,_=u(T),C=_[0],k=_[1],I=new s(p(T,C,k)),N=0,F=k>0?C-4:C,j;for(j=0;j<F;j+=4)S=r[T.charCodeAt(j)]<<18|r[T.charCodeAt(j+1)]<<12|r[T.charCodeAt(j+2)]<<6|r[T.charCodeAt(j+3)],I[N++]=S>>16&255,I[N++]=S>>8&255,I[N++]=S&255;return k===2&&(S=r[T.charCodeAt(j)]<<2|r[T.charCodeAt(j+1)]>>4,I[N++]=S&255),k===1&&(S=r[T.charCodeAt(j)]<<10|r[T.charCodeAt(j+1)]<<4|r[T.charCodeAt(j+2)]>>2,I[N++]=S>>8&255,I[N++]=S&255),I}function y(T){return n[T>>18&63]+n[T>>12&63]+n[T>>6&63]+n[T&63]}function b(T,S,_){for(var C,k=[],I=S;I<_;I+=3)C=(T[I]<<16&16711680)+(T[I+1]<<8&65280)+(T[I+2]&255),k.push(y(C));return k.join("")}function x(T){for(var S,_=T.length,C=_%3,k=[],I=16383,N=0,F=_-C;N<F;N+=I)k.push(b(T,N,N+I>F?F:N+I));return C===1?(S=T[_-1],k.push(n[S>>2]+n[S<<4&63]+"==")):C===2&&(S=(T[_-2]<<8)+T[_-1],k.push(n[S>>10]+n[S>>4&63]+n[S<<2&63]+"=")),k.join("")}return base64Js}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,(function(n){const r=requireBase64Js(),s=requireIeee754(),a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=c,n.SlowBuffer=I,n.INSPECT_MAX_BYTES=50;const l=2147483647;n.kMaxLength=l,c.TYPED_ARRAY_SUPPORT=d(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const O=new Uint8Array(1),w={foo:function(){return 42}};return Object.setPrototypeOf(w,Uint8Array.prototype),Object.setPrototypeOf(O,w),O.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function u(O){if(O>l)throw new RangeError('The value "'+O+'" is invalid for option "size"');const w=new Uint8Array(O);return Object.setPrototypeOf(w,c.prototype),w}function c(O,w,R){if(typeof O=="number"){if(typeof w=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(O)}return p(O,w,R)}c.poolSize=8192;function p(O,w,R){if(typeof O=="string")return x(O,w);if(ArrayBuffer.isView(O))return S(O);if(O==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O);if(ze(O,ArrayBuffer)||O&&ze(O.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ze(O,SharedArrayBuffer)||O&&ze(O.buffer,SharedArrayBuffer)))return _(O,w,R);if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const K=O.valueOf&&O.valueOf();if(K!=null&&K!==O)return c.from(K,w,R);const ue=C(O);if(ue)return ue;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return c.from(O[Symbol.toPrimitive]("string"),w,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}c.from=function(O,w,R){return p(O,w,R)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function h(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function y(O,w,R){return h(O),O<=0?u(O):w!==void 0?typeof R=="string"?u(O).fill(w,R):u(O).fill(w):u(O)}c.alloc=function(O,w,R){return y(O,w,R)};function b(O){return h(O),u(O<0?0:k(O)|0)}c.allocUnsafe=function(O){return b(O)},c.allocUnsafeSlow=function(O){return b(O)};function x(O,w){if((typeof w!="string"||w==="")&&(w="utf8"),!c.isEncoding(w))throw new TypeError("Unknown encoding: "+w);const R=N(O,w)|0;let K=u(R);const ue=K.write(O,w);return ue!==R&&(K=K.slice(0,ue)),K}function T(O){const w=O.length<0?0:k(O.length)|0,R=u(w);for(let K=0;K<w;K+=1)R[K]=O[K]&255;return R}function S(O){if(ze(O,Uint8Array)){const w=new Uint8Array(O);return _(w.buffer,w.byteOffset,w.byteLength)}return T(O)}function _(O,w,R){if(w<0||O.byteLength<w)throw new RangeError('"offset" is outside of buffer bounds');if(O.byteLength<w+(R||0))throw new RangeError('"length" is outside of buffer bounds');let K;return w===void 0&&R===void 0?K=new Uint8Array(O):R===void 0?K=new Uint8Array(O,w):K=new Uint8Array(O,w,R),Object.setPrototypeOf(K,c.prototype),K}function C(O){if(c.isBuffer(O)){const w=k(O.length)|0,R=u(w);return R.length===0||O.copy(R,0,0,w),R}if(O.length!==void 0)return typeof O.length!="number"||ft(O.length)?u(0):T(O);if(O.type==="Buffer"&&Array.isArray(O.data))return T(O.data)}function k(O){if(O>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return O|0}function I(O){return+O!=O&&(O=0),c.alloc(+O)}c.isBuffer=function(w){return w!=null&&w._isBuffer===!0&&w!==c.prototype},c.compare=function(w,R){if(ze(w,Uint8Array)&&(w=c.from(w,w.offset,w.byteLength)),ze(R,Uint8Array)&&(R=c.from(R,R.offset,R.byteLength)),!c.isBuffer(w)||!c.isBuffer(R))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(w===R)return 0;let K=w.length,ue=R.length;for(let xe=0,Pe=Math.min(K,ue);xe<Pe;++xe)if(w[xe]!==R[xe]){K=w[xe],ue=R[xe];break}return K<ue?-1:ue<K?1:0},c.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(w,R){if(!Array.isArray(w))throw new TypeError('"list" argument must be an Array of Buffers');if(w.length===0)return c.alloc(0);let K;if(R===void 0)for(R=0,K=0;K<w.length;++K)R+=w[K].length;const ue=c.allocUnsafe(R);let xe=0;for(K=0;K<w.length;++K){let Pe=w[K];if(ze(Pe,Uint8Array))xe+Pe.length>ue.length?(c.isBuffer(Pe)||(Pe=c.from(Pe)),Pe.copy(ue,xe)):Uint8Array.prototype.set.call(ue,Pe,xe);else if(c.isBuffer(Pe))Pe.copy(ue,xe);else throw new TypeError('"list" argument must be an Array of Buffers');xe+=Pe.length}return ue};function N(O,w){if(c.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||ze(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);const R=O.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&R===0)return 0;let ue=!1;for(;;)switch(w){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return Qe(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R*2;case"hex":return R>>>1;case"base64":return Le(O).length;default:if(ue)return K?-1:Qe(O).length;w=(""+w).toLowerCase(),ue=!0}}c.byteLength=N;function F(O,w,R){let K=!1;if((w===void 0||w<0)&&(w=0),w>this.length||((R===void 0||R>this.length)&&(R=this.length),R<=0)||(R>>>=0,w>>>=0,R<=w))return"";for(O||(O="utf8");;)switch(O){case"hex":return Ue(this,w,R);case"utf8":case"utf-8":return He(this,w,R);case"ascii":return Be(this,w,R);case"latin1":case"binary":return me(this,w,R);case"base64":return he(this,w,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,w,R);default:if(K)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),K=!0}}c.prototype._isBuffer=!0;function j(O,w,R){const K=O[w];O[w]=O[R],O[R]=K}c.prototype.swap16=function(){const w=this.length;if(w%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let R=0;R<w;R+=2)j(this,R,R+1);return this},c.prototype.swap32=function(){const w=this.length;if(w%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let R=0;R<w;R+=4)j(this,R,R+3),j(this,R+1,R+2);return this},c.prototype.swap64=function(){const w=this.length;if(w%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let R=0;R<w;R+=8)j(this,R,R+7),j(this,R+1,R+6),j(this,R+2,R+5),j(this,R+3,R+4);return this},c.prototype.toString=function(){const w=this.length;return w===0?"":arguments.length===0?He(this,0,w):F.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(w){if(!c.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w?!0:c.compare(this,w)===0},c.prototype.inspect=function(){let w="";const R=n.INSPECT_MAX_BYTES;return w=this.toString("hex",0,R).replace(/(.{2})/g,"$1 ").trim(),this.length>R&&(w+=" ... "),"<Buffer "+w+">"},a&&(c.prototype[a]=c.prototype.inspect),c.prototype.compare=function(w,R,K,ue,xe){if(ze(w,Uint8Array)&&(w=c.from(w,w.offset,w.byteLength)),!c.isBuffer(w))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof w);if(R===void 0&&(R=0),K===void 0&&(K=w?w.length:0),ue===void 0&&(ue=0),xe===void 0&&(xe=this.length),R<0||K>w.length||ue<0||xe>this.length)throw new RangeError("out of range index");if(ue>=xe&&R>=K)return 0;if(ue>=xe)return-1;if(R>=K)return 1;if(R>>>=0,K>>>=0,ue>>>=0,xe>>>=0,this===w)return 0;let Pe=xe-ue,pt=K-R;const St=Math.min(Pe,pt),Ke=this.slice(ue,xe),Lt=w.slice(R,K);for(let _t=0;_t<St;++_t)if(Ke[_t]!==Lt[_t]){Pe=Ke[_t],pt=Lt[_t];break}return Pe<pt?-1:pt<Pe?1:0};function V(O,w,R,K,ue){if(O.length===0)return-1;if(typeof R=="string"?(K=R,R=0):R>2147483647?R=2147483647:R<-2147483648&&(R=-2147483648),R=+R,ft(R)&&(R=ue?0:O.length-1),R<0&&(R=O.length+R),R>=O.length){if(ue)return-1;R=O.length-1}else if(R<0)if(ue)R=0;else return-1;if(typeof w=="string"&&(w=c.from(w,K)),c.isBuffer(w))return w.length===0?-1:M(O,w,R,K,ue);if(typeof w=="number")return w=w&255,typeof Uint8Array.prototype.indexOf=="function"?ue?Uint8Array.prototype.indexOf.call(O,w,R):Uint8Array.prototype.lastIndexOf.call(O,w,R):M(O,[w],R,K,ue);throw new TypeError("val must be string, number or Buffer")}function M(O,w,R,K,ue){let xe=1,Pe=O.length,pt=w.length;if(K!==void 0&&(K=String(K).toLowerCase(),K==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(O.length<2||w.length<2)return-1;xe=2,Pe/=2,pt/=2,R/=2}function St(Lt,_t){return xe===1?Lt[_t]:Lt.readUInt16BE(_t*xe)}let Ke;if(ue){let Lt=-1;for(Ke=R;Ke<Pe;Ke++)if(St(O,Ke)===St(w,Lt===-1?0:Ke-Lt)){if(Lt===-1&&(Lt=Ke),Ke-Lt+1===pt)return Lt*xe}else Lt!==-1&&(Ke-=Ke-Lt),Lt=-1}else for(R+pt>Pe&&(R=Pe-pt),Ke=R;Ke>=0;Ke--){let Lt=!0;for(let _t=0;_t<pt;_t++)if(St(O,Ke+_t)!==St(w,_t)){Lt=!1;break}if(Lt)return Ke}return-1}c.prototype.includes=function(w,R,K){return this.indexOf(w,R,K)!==-1},c.prototype.indexOf=function(w,R,K){return V(this,w,R,K,!0)},c.prototype.lastIndexOf=function(w,R,K){return V(this,w,R,K,!1)};function q(O,w,R,K){R=Number(R)||0;const ue=O.length-R;K?(K=Number(K),K>ue&&(K=ue)):K=ue;const xe=w.length;K>xe/2&&(K=xe/2);let Pe;for(Pe=0;Pe<K;++Pe){const pt=parseInt(w.substr(Pe*2,2),16);if(ft(pt))return Pe;O[R+Pe]=pt}return Pe}function Se(O,w,R,K){return $e(Qe(w,O.length-R),O,R,K)}function Q(O,w,R,K){return $e(Ye(w),O,R,K)}function ee(O,w,R,K){return $e(Le(w),O,R,K)}function we(O,w,R,K){return $e(fe(w,O.length-R),O,R,K)}c.prototype.write=function(w,R,K,ue){if(R===void 0)ue="utf8",K=this.length,R=0;else if(K===void 0&&typeof R=="string")ue=R,K=this.length,R=0;else if(isFinite(R))R=R>>>0,isFinite(K)?(K=K>>>0,ue===void 0&&(ue="utf8")):(ue=K,K=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const xe=this.length-R;if((K===void 0||K>xe)&&(K=xe),w.length>0&&(K<0||R<0)||R>this.length)throw new RangeError("Attempt to write outside buffer bounds");ue||(ue="utf8");let Pe=!1;for(;;)switch(ue){case"hex":return q(this,w,R,K);case"utf8":case"utf-8":return Se(this,w,R,K);case"ascii":case"latin1":case"binary":return Q(this,w,R,K);case"base64":return ee(this,w,R,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,w,R,K);default:if(Pe)throw new TypeError("Unknown encoding: "+ue);ue=(""+ue).toLowerCase(),Pe=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function he(O,w,R){return w===0&&R===O.length?r.fromByteArray(O):r.fromByteArray(O.slice(w,R))}function He(O,w,R){R=Math.min(O.length,R);const K=[];let ue=w;for(;ue<R;){const xe=O[ue];let Pe=null,pt=xe>239?4:xe>223?3:xe>191?2:1;if(ue+pt<=R){let St,Ke,Lt,_t;switch(pt){case 1:xe<128&&(Pe=xe);break;case 2:St=O[ue+1],(St&192)===128&&(_t=(xe&31)<<6|St&63,_t>127&&(Pe=_t));break;case 3:St=O[ue+1],Ke=O[ue+2],(St&192)===128&&(Ke&192)===128&&(_t=(xe&15)<<12|(St&63)<<6|Ke&63,_t>2047&&(_t<55296||_t>57343)&&(Pe=_t));break;case 4:St=O[ue+1],Ke=O[ue+2],Lt=O[ue+3],(St&192)===128&&(Ke&192)===128&&(Lt&192)===128&&(_t=(xe&15)<<18|(St&63)<<12|(Ke&63)<<6|Lt&63,_t>65535&&_t<1114112&&(Pe=_t))}}Pe===null?(Pe=65533,pt=1):Pe>65535&&(Pe-=65536,K.push(Pe>>>10&1023|55296),Pe=56320|Pe&1023),K.push(Pe),ue+=pt}return de(K)}const Je=4096;function de(O){const w=O.length;if(w<=Je)return String.fromCharCode.apply(String,O);let R="",K=0;for(;K<w;)R+=String.fromCharCode.apply(String,O.slice(K,K+=Je));return R}function Be(O,w,R){let K="";R=Math.min(O.length,R);for(let ue=w;ue<R;++ue)K+=String.fromCharCode(O[ue]&127);return K}function me(O,w,R){let K="";R=Math.min(O.length,R);for(let ue=w;ue<R;++ue)K+=String.fromCharCode(O[ue]);return K}function Ue(O,w,R){const K=O.length;(!w||w<0)&&(w=0),(!R||R<0||R>K)&&(R=K);let ue="";for(let xe=w;xe<R;++xe)ue+=Dt[O[xe]];return ue}function W(O,w,R){const K=O.slice(w,R);let ue="";for(let xe=0;xe<K.length-1;xe+=2)ue+=String.fromCharCode(K[xe]+K[xe+1]*256);return ue}c.prototype.slice=function(w,R){const K=this.length;w=~~w,R=R===void 0?K:~~R,w<0?(w+=K,w<0&&(w=0)):w>K&&(w=K),R<0?(R+=K,R<0&&(R=0)):R>K&&(R=K),R<w&&(R=w);const ue=this.subarray(w,R);return Object.setPrototypeOf(ue,c.prototype),ue};function z(O,w,R){if(O%1!==0||O<0)throw new RangeError("offset is not uint");if(O+w>R)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(w,R,K){w=w>>>0,R=R>>>0,K||z(w,R,this.length);let ue=this[w],xe=1,Pe=0;for(;++Pe<R&&(xe*=256);)ue+=this[w+Pe]*xe;return ue},c.prototype.readUintBE=c.prototype.readUIntBE=function(w,R,K){w=w>>>0,R=R>>>0,K||z(w,R,this.length);let ue=this[w+--R],xe=1;for(;R>0&&(xe*=256);)ue+=this[w+--R]*xe;return ue},c.prototype.readUint8=c.prototype.readUInt8=function(w,R){return w=w>>>0,R||z(w,1,this.length),this[w]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(w,R){return w=w>>>0,R||z(w,2,this.length),this[w]|this[w+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(w,R){return w=w>>>0,R||z(w,2,this.length),this[w]<<8|this[w+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(w,R){return w=w>>>0,R||z(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+this[w+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(w,R){return w=w>>>0,R||z(w,4,this.length),this[w]*16777216+(this[w+1]<<16|this[w+2]<<8|this[w+3])},c.prototype.readBigUInt64LE=Rt(function(w){w=w>>>0,oe(w,"offset");const R=this[w],K=this[w+7];(R===void 0||K===void 0)&&pe(w,this.length-8);const ue=R+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24,xe=this[++w]+this[++w]*2**8+this[++w]*2**16+K*2**24;return BigInt(ue)+(BigInt(xe)<<BigInt(32))}),c.prototype.readBigUInt64BE=Rt(function(w){w=w>>>0,oe(w,"offset");const R=this[w],K=this[w+7];(R===void 0||K===void 0)&&pe(w,this.length-8);const ue=R*2**24+this[++w]*2**16+this[++w]*2**8+this[++w],xe=this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+K;return(BigInt(ue)<<BigInt(32))+BigInt(xe)}),c.prototype.readIntLE=function(w,R,K){w=w>>>0,R=R>>>0,K||z(w,R,this.length);let ue=this[w],xe=1,Pe=0;for(;++Pe<R&&(xe*=256);)ue+=this[w+Pe]*xe;return xe*=128,ue>=xe&&(ue-=Math.pow(2,8*R)),ue},c.prototype.readIntBE=function(w,R,K){w=w>>>0,R=R>>>0,K||z(w,R,this.length);let ue=R,xe=1,Pe=this[w+--ue];for(;ue>0&&(xe*=256);)Pe+=this[w+--ue]*xe;return xe*=128,Pe>=xe&&(Pe-=Math.pow(2,8*R)),Pe},c.prototype.readInt8=function(w,R){return w=w>>>0,R||z(w,1,this.length),this[w]&128?(255-this[w]+1)*-1:this[w]},c.prototype.readInt16LE=function(w,R){w=w>>>0,R||z(w,2,this.length);const K=this[w]|this[w+1]<<8;return K&32768?K|4294901760:K},c.prototype.readInt16BE=function(w,R){w=w>>>0,R||z(w,2,this.length);const K=this[w+1]|this[w]<<8;return K&32768?K|4294901760:K},c.prototype.readInt32LE=function(w,R){return w=w>>>0,R||z(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},c.prototype.readInt32BE=function(w,R){return w=w>>>0,R||z(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},c.prototype.readBigInt64LE=Rt(function(w){w=w>>>0,oe(w,"offset");const R=this[w],K=this[w+7];(R===void 0||K===void 0)&&pe(w,this.length-8);const ue=this[w+4]+this[w+5]*2**8+this[w+6]*2**16+(K<<24);return(BigInt(ue)<<BigInt(32))+BigInt(R+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24)}),c.prototype.readBigInt64BE=Rt(function(w){w=w>>>0,oe(w,"offset");const R=this[w],K=this[w+7];(R===void 0||K===void 0)&&pe(w,this.length-8);const ue=(R<<24)+this[++w]*2**16+this[++w]*2**8+this[++w];return(BigInt(ue)<<BigInt(32))+BigInt(this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+K)}),c.prototype.readFloatLE=function(w,R){return w=w>>>0,R||z(w,4,this.length),s.read(this,w,!0,23,4)},c.prototype.readFloatBE=function(w,R){return w=w>>>0,R||z(w,4,this.length),s.read(this,w,!1,23,4)},c.prototype.readDoubleLE=function(w,R){return w=w>>>0,R||z(w,8,this.length),s.read(this,w,!0,52,8)},c.prototype.readDoubleBE=function(w,R){return w=w>>>0,R||z(w,8,this.length),s.read(this,w,!1,52,8)};function Z(O,w,R,K,ue,xe){if(!c.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>ue||w<xe)throw new RangeError('"value" argument is out of bounds');if(R+K>O.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(w,R,K,ue){if(w=+w,R=R>>>0,K=K>>>0,!ue){const pt=Math.pow(2,8*K)-1;Z(this,w,R,K,pt,0)}let xe=1,Pe=0;for(this[R]=w&255;++Pe<K&&(xe*=256);)this[R+Pe]=w/xe&255;return R+K},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(w,R,K,ue){if(w=+w,R=R>>>0,K=K>>>0,!ue){const pt=Math.pow(2,8*K)-1;Z(this,w,R,K,pt,0)}let xe=K-1,Pe=1;for(this[R+xe]=w&255;--xe>=0&&(Pe*=256);)this[R+xe]=w/Pe&255;return R+K},c.prototype.writeUint8=c.prototype.writeUInt8=function(w,R,K){return w=+w,R=R>>>0,K||Z(this,w,R,1,255,0),this[R]=w&255,R+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(w,R,K){return w=+w,R=R>>>0,K||Z(this,w,R,2,65535,0),this[R]=w&255,this[R+1]=w>>>8,R+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(w,R,K){return w=+w,R=R>>>0,K||Z(this,w,R,2,65535,0),this[R]=w>>>8,this[R+1]=w&255,R+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(w,R,K){return w=+w,R=R>>>0,K||Z(this,w,R,4,4294967295,0),this[R+3]=w>>>24,this[R+2]=w>>>16,this[R+1]=w>>>8,this[R]=w&255,R+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(w,R,K){return w=+w,R=R>>>0,K||Z(this,w,R,4,4294967295,0),this[R]=w>>>24,this[R+1]=w>>>16,this[R+2]=w>>>8,this[R+3]=w&255,R+4};function ce(O,w,R,K,ue){tt(w,K,ue,O,R,7);let xe=Number(w&BigInt(4294967295));O[R++]=xe,xe=xe>>8,O[R++]=xe,xe=xe>>8,O[R++]=xe,xe=xe>>8,O[R++]=xe;let Pe=Number(w>>BigInt(32)&BigInt(4294967295));return O[R++]=Pe,Pe=Pe>>8,O[R++]=Pe,Pe=Pe>>8,O[R++]=Pe,Pe=Pe>>8,O[R++]=Pe,R}function Ie(O,w,R,K,ue){tt(w,K,ue,O,R,7);let xe=Number(w&BigInt(4294967295));O[R+7]=xe,xe=xe>>8,O[R+6]=xe,xe=xe>>8,O[R+5]=xe,xe=xe>>8,O[R+4]=xe;let Pe=Number(w>>BigInt(32)&BigInt(4294967295));return O[R+3]=Pe,Pe=Pe>>8,O[R+2]=Pe,Pe=Pe>>8,O[R+1]=Pe,Pe=Pe>>8,O[R]=Pe,R+8}c.prototype.writeBigUInt64LE=Rt(function(w,R=0){return ce(this,w,R,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Rt(function(w,R=0){return Ie(this,w,R,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(w,R,K,ue){if(w=+w,R=R>>>0,!ue){const St=Math.pow(2,8*K-1);Z(this,w,R,K,St-1,-St)}let xe=0,Pe=1,pt=0;for(this[R]=w&255;++xe<K&&(Pe*=256);)w<0&&pt===0&&this[R+xe-1]!==0&&(pt=1),this[R+xe]=(w/Pe>>0)-pt&255;return R+K},c.prototype.writeIntBE=function(w,R,K,ue){if(w=+w,R=R>>>0,!ue){const St=Math.pow(2,8*K-1);Z(this,w,R,K,St-1,-St)}let xe=K-1,Pe=1,pt=0;for(this[R+xe]=w&255;--xe>=0&&(Pe*=256);)w<0&&pt===0&&this[R+xe+1]!==0&&(pt=1),this[R+xe]=(w/Pe>>0)-pt&255;return R+K},c.prototype.writeInt8=function(w,R,K){return w=+w,R=R>>>0,K||Z(this,w,R,1,127,-128),w<0&&(w=255+w+1),this[R]=w&255,R+1},c.prototype.writeInt16LE=function(w,R,K){return w=+w,R=R>>>0,K||Z(this,w,R,2,32767,-32768),this[R]=w&255,this[R+1]=w>>>8,R+2},c.prototype.writeInt16BE=function(w,R,K){return w=+w,R=R>>>0,K||Z(this,w,R,2,32767,-32768),this[R]=w>>>8,this[R+1]=w&255,R+2},c.prototype.writeInt32LE=function(w,R,K){return w=+w,R=R>>>0,K||Z(this,w,R,4,2147483647,-2147483648),this[R]=w&255,this[R+1]=w>>>8,this[R+2]=w>>>16,this[R+3]=w>>>24,R+4},c.prototype.writeInt32BE=function(w,R,K){return w=+w,R=R>>>0,K||Z(this,w,R,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),this[R]=w>>>24,this[R+1]=w>>>16,this[R+2]=w>>>8,this[R+3]=w&255,R+4},c.prototype.writeBigInt64LE=Rt(function(w,R=0){return ce(this,w,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Rt(function(w,R=0){return Ie(this,w,R,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Fe(O,w,R,K,ue,xe){if(R+K>O.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("Index out of range")}function at(O,w,R,K,ue){return w=+w,R=R>>>0,ue||Fe(O,w,R,4),s.write(O,w,R,K,23,4),R+4}c.prototype.writeFloatLE=function(w,R,K){return at(this,w,R,!0,K)},c.prototype.writeFloatBE=function(w,R,K){return at(this,w,R,!1,K)};function nt(O,w,R,K,ue){return w=+w,R=R>>>0,ue||Fe(O,w,R,8),s.write(O,w,R,K,52,8),R+8}c.prototype.writeDoubleLE=function(w,R,K){return nt(this,w,R,!0,K)},c.prototype.writeDoubleBE=function(w,R,K){return nt(this,w,R,!1,K)},c.prototype.copy=function(w,R,K,ue){if(!c.isBuffer(w))throw new TypeError("argument should be a Buffer");if(K||(K=0),!ue&&ue!==0&&(ue=this.length),R>=w.length&&(R=w.length),R||(R=0),ue>0&&ue<K&&(ue=K),ue===K||w.length===0||this.length===0)return 0;if(R<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("Index out of range");if(ue<0)throw new RangeError("sourceEnd out of bounds");ue>this.length&&(ue=this.length),w.length-R<ue-K&&(ue=w.length-R+K);const xe=ue-K;return this===w&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(R,K,ue):Uint8Array.prototype.set.call(w,this.subarray(K,ue),R),xe},c.prototype.fill=function(w,R,K,ue){if(typeof w=="string"){if(typeof R=="string"?(ue=R,R=0,K=this.length):typeof K=="string"&&(ue=K,K=this.length),ue!==void 0&&typeof ue!="string")throw new TypeError("encoding must be a string");if(typeof ue=="string"&&!c.isEncoding(ue))throw new TypeError("Unknown encoding: "+ue);if(w.length===1){const Pe=w.charCodeAt(0);(ue==="utf8"&&Pe<128||ue==="latin1")&&(w=Pe)}}else typeof w=="number"?w=w&255:typeof w=="boolean"&&(w=Number(w));if(R<0||this.length<R||this.length<K)throw new RangeError("Out of range index");if(K<=R)return this;R=R>>>0,K=K===void 0?this.length:K>>>0,w||(w=0);let xe;if(typeof w=="number")for(xe=R;xe<K;++xe)this[xe]=w;else{const Pe=c.isBuffer(w)?w:c.from(w,ue),pt=Pe.length;if(pt===0)throw new TypeError('The value "'+w+'" is invalid for argument "value"');for(xe=0;xe<K-R;++xe)this[xe+R]=Pe[xe%pt]}return this};const Ce={};function ke(O,w,R){Ce[O]=class extends R{constructor(){super(),Object.defineProperty(this,"message",{value:w.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${O}]`,this.stack,delete this.name}get code(){return O}set code(ue){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ue,writable:!0})}toString(){return`${this.name} [${O}]: ${this.message}`}}}ke("ERR_BUFFER_OUT_OF_BOUNDS",function(O){return O?`${O} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ke("ERR_INVALID_ARG_TYPE",function(O,w){return`The "${O}" argument must be of type number. Received type ${typeof w}`},TypeError),ke("ERR_OUT_OF_RANGE",function(O,w,R){let K=`The value of "${O}" is out of range.`,ue=R;return Number.isInteger(R)&&Math.abs(R)>2**32?ue=De(String(R)):typeof R=="bigint"&&(ue=String(R),(R>BigInt(2)**BigInt(32)||R<-(BigInt(2)**BigInt(32)))&&(ue=De(ue)),ue+="n"),K+=` It must be ${w}. Received ${ue}`,K},RangeError);function De(O){let w="",R=O.length;const K=O[0]==="-"?1:0;for(;R>=K+4;R-=3)w=`_${O.slice(R-3,R)}${w}`;return`${O.slice(0,R)}${w}`}function mt(O,w,R){oe(w,"offset"),(O[w]===void 0||O[w+R]===void 0)&&pe(w,O.length-(R+1))}function tt(O,w,R,K,ue,xe){if(O>R||O<w){const Pe=typeof w=="bigint"?"n":"";let pt;throw w===0||w===BigInt(0)?pt=`>= 0${Pe} and < 2${Pe} ** ${(xe+1)*8}${Pe}`:pt=`>= -(2${Pe} ** ${(xe+1)*8-1}${Pe}) and < 2 ** ${(xe+1)*8-1}${Pe}`,new Ce.ERR_OUT_OF_RANGE("value",pt,O)}mt(K,ue,xe)}function oe(O,w){if(typeof O!="number")throw new Ce.ERR_INVALID_ARG_TYPE(w,"number",O)}function pe(O,w,R){throw Math.floor(O)!==O?(oe(O,R),new Ce.ERR_OUT_OF_RANGE("offset","an integer",O)):w<0?new Ce.ERR_BUFFER_OUT_OF_BOUNDS:new Ce.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${w}`,O)}const Re=/[^+/0-9A-Za-z-_]/g;function Ze(O){if(O=O.split("=")[0],O=O.trim().replace(Re,""),O.length<2)return"";for(;O.length%4!==0;)O=O+"=";return O}function Qe(O,w){w=w||1/0;let R;const K=O.length;let ue=null;const xe=[];for(let Pe=0;Pe<K;++Pe){if(R=O.charCodeAt(Pe),R>55295&&R<57344){if(!ue){if(R>56319){(w-=3)>-1&&xe.push(239,191,189);continue}else if(Pe+1===K){(w-=3)>-1&&xe.push(239,191,189);continue}ue=R;continue}if(R<56320){(w-=3)>-1&&xe.push(239,191,189),ue=R;continue}R=(ue-55296<<10|R-56320)+65536}else ue&&(w-=3)>-1&&xe.push(239,191,189);if(ue=null,R<128){if((w-=1)<0)break;xe.push(R)}else if(R<2048){if((w-=2)<0)break;xe.push(R>>6|192,R&63|128)}else if(R<65536){if((w-=3)<0)break;xe.push(R>>12|224,R>>6&63|128,R&63|128)}else if(R<1114112){if((w-=4)<0)break;xe.push(R>>18|240,R>>12&63|128,R>>6&63|128,R&63|128)}else throw new Error("Invalid code point")}return xe}function Ye(O){const w=[];for(let R=0;R<O.length;++R)w.push(O.charCodeAt(R)&255);return w}function fe(O,w){let R,K,ue;const xe=[];for(let Pe=0;Pe<O.length&&!((w-=2)<0);++Pe)R=O.charCodeAt(Pe),K=R>>8,ue=R%256,xe.push(ue),xe.push(K);return xe}function Le(O){return r.toByteArray(Ze(O))}function $e(O,w,R,K){let ue;for(ue=0;ue<K&&!(ue+R>=w.length||ue>=O.length);++ue)w[ue+R]=O[ue];return ue}function ze(O,w){return O instanceof w||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===w.name}function ft(O){return O!==O}const Dt=(function(){const O="0123456789abcdef",w=new Array(256);for(let R=0;R<16;++R){const K=R*16;for(let ue=0;ue<16;++ue)w[K+ue]=O[R]+O[ue]}return w})();function Rt(O){return typeof BigInt>"u"?kt:O}function kt(){throw new Error("BigInt not supported")}})(buffer)),buffer}var primordials,hasRequiredPrimordials;function requirePrimordials(){if(hasRequiredPrimordials)return primordials;hasRequiredPrimordials=1;class n extends Error{constructor(s){if(!Array.isArray(s))throw new TypeError(`Expected input to be an Array, got ${typeof s}`);let a="";for(let l=0;l<s.length;l++)a+=`    ${s[l].stack}
`;super(a),this.name="AggregateError",this.errors=s}}return primordials={AggregateError:n,ArrayIsArray(r){return Array.isArray(r)},ArrayPrototypeIncludes(r,s){return r.includes(s)},ArrayPrototypeIndexOf(r,s){return r.indexOf(s)},ArrayPrototypeJoin(r,s){return r.join(s)},ArrayPrototypeMap(r,s){return r.map(s)},ArrayPrototypePop(r,s){return r.pop(s)},ArrayPrototypePush(r,s){return r.push(s)},ArrayPrototypeSlice(r,s,a){return r.slice(s,a)},Error,FunctionPrototypeCall(r,s,...a){return r.call(s,...a)},FunctionPrototypeSymbolHasInstance(r,s){return Function.prototype[Symbol.hasInstance].call(r,s)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(r,s){return Object.defineProperties(r,s)},ObjectDefineProperty(r,s,a){return Object.defineProperty(r,s,a)},ObjectGetOwnPropertyDescriptor(r,s){return Object.getOwnPropertyDescriptor(r,s)},ObjectKeys(r){return Object.keys(r)},ObjectSetPrototypeOf(r,s){return Object.setPrototypeOf(r,s)},Promise,PromisePrototypeCatch(r,s){return r.catch(s)},PromisePrototypeThen(r,s,a){return r.then(s,a)},PromiseReject(r){return Promise.reject(r)},PromiseResolve(r){return Promise.resolve(r)},ReflectApply:Reflect.apply,RegExpPrototypeTest(r,s){return r.test(s)},SafeSet:Set,String,StringPrototypeSlice(r,s,a){return r.slice(s,a)},StringPrototypeToLowerCase(r){return r.toLowerCase()},StringPrototypeToUpperCase(r){return r.toUpperCase()},StringPrototypeTrim(r){return r.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(r,s,a){return r.set(s,a)},Boolean,Uint8Array},primordials}var util={exports:{}},inspect,hasRequiredInspect;function requireInspect(){return hasRequiredInspect||(hasRequiredInspect=1,inspect={format(n,...r){return n.replace(/%([sdifj])/g,function(...[s,a]){const l=r.shift();return a==="f"?l.toFixed(6):a==="j"?JSON.stringify(l):a==="s"&&typeof l=="object"?`${l.constructor!==Object?l.constructor.name:""} {}`.trim():l.toString()})},inspect(n){switch(typeof n){case"string":if(n.includes("'"))if(n.includes('"')){if(!n.includes("`")&&!n.includes("${"))return`\`${n}\``}else return`"${n}"`;return`'${n}'`;case"number":return isNaN(n)?"NaN":Object.is(n,-0)?String(n):n;case"bigint":return`${String(n)}n`;case"boolean":case"undefined":return String(n);case"object":return"{}"}}}),inspect}var errors,hasRequiredErrors;function requireErrors(){if(hasRequiredErrors)return errors;hasRequiredErrors=1;const{format:n,inspect:r}=requireInspect(),{AggregateError:s}=requirePrimordials(),a=globalThis.AggregateError||s,l=Symbol("kIsNodeError"),d=["string","function","number","object","Function","Object","boolean","bigint","symbol"],u=/^([A-Z][a-z0-9]*)+$/,c="__node_internal_",p={};function h(C,k){if(!C)throw new p.ERR_INTERNAL_ASSERTION(k)}function y(C){let k="",I=C.length;const N=C[0]==="-"?1:0;for(;I>=N+4;I-=3)k=`_${C.slice(I-3,I)}${k}`;return`${C.slice(0,I)}${k}`}function b(C,k,I){if(typeof k=="function")return h(k.length<=I.length,`Code: ${C}; The provided arguments length (${I.length}) does not match the required ones (${k.length}).`),k(...I);const N=(k.match(/%[dfijoOs]/g)||[]).length;return h(N===I.length,`Code: ${C}; The provided arguments length (${I.length}) does not match the required ones (${N}).`),I.length===0?k:n(k,...I)}function x(C,k,I){I||(I=Error);class N extends I{constructor(...j){super(b(C,k,j))}toString(){return`${this.name} [${C}]: ${this.message}`}}Object.defineProperties(N.prototype,{name:{value:I.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${C}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),N.prototype.code=C,N.prototype[l]=!0,p[C]=N}function T(C){const k=c+C.name;return Object.defineProperty(C,"name",{value:k}),C}function S(C,k){if(C&&k&&C!==k){if(Array.isArray(k.errors))return k.errors.push(C),k;const I=new a([k,C],k.message);return I.code=k.code,I}return C||k}class _ extends Error{constructor(k="The operation was aborted",I=void 0){if(I!==void 0&&typeof I!="object")throw new p.ERR_INVALID_ARG_TYPE("options","Object",I);super(k,I),this.code="ABORT_ERR",this.name="AbortError"}}return x("ERR_ASSERTION","%s",Error),x("ERR_INVALID_ARG_TYPE",(C,k,I)=>{h(typeof C=="string","'name' must be a string"),Array.isArray(k)||(k=[k]);let N="The ";C.endsWith(" argument")?N+=`${C} `:N+=`"${C}" ${C.includes(".")?"property":"argument"} `,N+="must be ";const F=[],j=[],V=[];for(const q of k)h(typeof q=="string","All expected entries have to be of type string"),d.includes(q)?F.push(q.toLowerCase()):u.test(q)?j.push(q):(h(q!=="object",'The value "object" should be written as "Object"'),V.push(q));if(j.length>0){const q=F.indexOf("object");q!==-1&&(F.splice(F,q,1),j.push("Object"))}if(F.length>0){switch(F.length){case 1:N+=`of type ${F[0]}`;break;case 2:N+=`one of type ${F[0]} or ${F[1]}`;break;default:{const q=F.pop();N+=`one of type ${F.join(", ")}, or ${q}`}}(j.length>0||V.length>0)&&(N+=" or ")}if(j.length>0){switch(j.length){case 1:N+=`an instance of ${j[0]}`;break;case 2:N+=`an instance of ${j[0]} or ${j[1]}`;break;default:{const q=j.pop();N+=`an instance of ${j.join(", ")}, or ${q}`}}V.length>0&&(N+=" or ")}switch(V.length){case 0:break;case 1:V[0].toLowerCase()!==V[0]&&(N+="an "),N+=`${V[0]}`;break;case 2:N+=`one of ${V[0]} or ${V[1]}`;break;default:{const q=V.pop();N+=`one of ${V.join(", ")}, or ${q}`}}if(I==null)N+=`. Received ${I}`;else if(typeof I=="function"&&I.name)N+=`. Received function ${I.name}`;else if(typeof I=="object"){var M;if((M=I.constructor)!==null&&M!==void 0&&M.name)N+=`. Received an instance of ${I.constructor.name}`;else{const q=r(I,{depth:-1});N+=`. Received ${q}`}}else{let q=r(I,{colors:!1});q.length>25&&(q=`${q.slice(0,25)}...`),N+=`. Received type ${typeof I} (${q})`}return N},TypeError),x("ERR_INVALID_ARG_VALUE",(C,k,I="is invalid")=>{let N=r(k);return N.length>128&&(N=N.slice(0,128)+"..."),`The ${C.includes(".")?"property":"argument"} '${C}' ${I}. Received ${N}`},TypeError),x("ERR_INVALID_RETURN_VALUE",(C,k,I)=>{var N;const F=I!=null&&(N=I.constructor)!==null&&N!==void 0&&N.name?`instance of ${I.constructor.name}`:`type ${typeof I}`;return`Expected ${C} to be returned from the "${k}" function but got ${F}.`},TypeError),x("ERR_MISSING_ARGS",(...C)=>{h(C.length>0,"At least one arg needs to be specified");let k;const I=C.length;switch(C=(Array.isArray(C)?C:[C]).map(N=>`"${N}"`).join(" or "),I){case 1:k+=`The ${C[0]} argument`;break;case 2:k+=`The ${C[0]} and ${C[1]} arguments`;break;default:{const N=C.pop();k+=`The ${C.join(", ")}, and ${N} arguments`}break}return`${k} must be specified`},TypeError),x("ERR_OUT_OF_RANGE",(C,k,I)=>{h(k,'Missing "range" argument');let N;if(Number.isInteger(I)&&Math.abs(I)>2**32)N=y(String(I));else if(typeof I=="bigint"){N=String(I);const F=BigInt(2)**BigInt(32);(I>F||I<-F)&&(N=y(N)),N+="n"}else N=r(I);return`The value of "${C}" is out of range. It must be ${k}. Received ${N}`},RangeError),x("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),x("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),x("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),x("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),x("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),x("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),x("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),x("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),x("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),x("ERR_STREAM_WRITE_AFTER_END","write after end",Error),x("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),errors={AbortError:_,aggregateTwoErrors:T(S),hideStackFrames:T,codes:p},errors}var browser$1={exports:{}},hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$1.exports;hasRequiredBrowser$2=1;const{AbortController:n,AbortSignal:r}=typeof self<"u"?self:typeof window<"u"?window:void 0;return browser$1.exports=n,browser$1.exports.AbortSignal=r,browser$1.exports.default=n,browser$1.exports}var events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var n=typeof Reflect=="object"?Reflect:null,r=n&&typeof n.apply=="function"?n.apply:function(j,V,M){return Function.prototype.apply.call(j,V,M)},s;n&&typeof n.ownKeys=="function"?s=n.ownKeys:Object.getOwnPropertySymbols?s=function(j){return Object.getOwnPropertyNames(j).concat(Object.getOwnPropertySymbols(j))}:s=function(j){return Object.getOwnPropertyNames(j)};function a(F){console&&console.warn&&console.warn(F)}var l=Number.isNaN||function(j){return j!==j};function d(){d.init.call(this)}events.exports=d,events.exports.once=k,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._eventsCount=0,d.prototype._maxListeners=void 0;var u=10;function c(F){if(typeof F!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof F)}Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(F){if(typeof F!="number"||F<0||l(F))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+F+".");u=F}}),d.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},d.prototype.setMaxListeners=function(j){if(typeof j!="number"||j<0||l(j))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+j+".");return this._maxListeners=j,this};function p(F){return F._maxListeners===void 0?d.defaultMaxListeners:F._maxListeners}d.prototype.getMaxListeners=function(){return p(this)},d.prototype.emit=function(j){for(var V=[],M=1;M<arguments.length;M++)V.push(arguments[M]);var q=j==="error",Se=this._events;if(Se!==void 0)q=q&&Se.error===void 0;else if(!q)return!1;if(q){var Q;if(V.length>0&&(Q=V[0]),Q instanceof Error)throw Q;var ee=new Error("Unhandled error."+(Q?" ("+Q.message+")":""));throw ee.context=Q,ee}var we=Se[j];if(we===void 0)return!1;if(typeof we=="function")r(we,this,V);else for(var he=we.length,He=S(we,he),M=0;M<he;++M)r(He[M],this,V);return!0};function h(F,j,V,M){var q,Se,Q;if(c(V),Se=F._events,Se===void 0?(Se=F._events=Object.create(null),F._eventsCount=0):(Se.newListener!==void 0&&(F.emit("newListener",j,V.listener?V.listener:V),Se=F._events),Q=Se[j]),Q===void 0)Q=Se[j]=V,++F._eventsCount;else if(typeof Q=="function"?Q=Se[j]=M?[V,Q]:[Q,V]:M?Q.unshift(V):Q.push(V),q=p(F),q>0&&Q.length>q&&!Q.warned){Q.warned=!0;var ee=new Error("Possible EventEmitter memory leak detected. "+Q.length+" "+String(j)+" listeners added. Use emitter.setMaxListeners() to increase limit");ee.name="MaxListenersExceededWarning",ee.emitter=F,ee.type=j,ee.count=Q.length,a(ee)}return F}d.prototype.addListener=function(j,V){return h(this,j,V,!1)},d.prototype.on=d.prototype.addListener,d.prototype.prependListener=function(j,V){return h(this,j,V,!0)};function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b(F,j,V){var M={fired:!1,wrapFn:void 0,target:F,type:j,listener:V},q=y.bind(M);return q.listener=V,M.wrapFn=q,q}d.prototype.once=function(j,V){return c(V),this.on(j,b(this,j,V)),this},d.prototype.prependOnceListener=function(j,V){return c(V),this.prependListener(j,b(this,j,V)),this},d.prototype.removeListener=function(j,V){var M,q,Se,Q,ee;if(c(V),q=this._events,q===void 0)return this;if(M=q[j],M===void 0)return this;if(M===V||M.listener===V)--this._eventsCount===0?this._events=Object.create(null):(delete q[j],q.removeListener&&this.emit("removeListener",j,M.listener||V));else if(typeof M!="function"){for(Se=-1,Q=M.length-1;Q>=0;Q--)if(M[Q]===V||M[Q].listener===V){ee=M[Q].listener,Se=Q;break}if(Se<0)return this;Se===0?M.shift():_(M,Se),M.length===1&&(q[j]=M[0]),q.removeListener!==void 0&&this.emit("removeListener",j,ee||V)}return this},d.prototype.off=d.prototype.removeListener,d.prototype.removeAllListeners=function(j){var V,M,q;if(M=this._events,M===void 0)return this;if(M.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):M[j]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete M[j]),this;if(arguments.length===0){var Se=Object.keys(M),Q;for(q=0;q<Se.length;++q)Q=Se[q],Q!=="removeListener"&&this.removeAllListeners(Q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(V=M[j],typeof V=="function")this.removeListener(j,V);else if(V!==void 0)for(q=V.length-1;q>=0;q--)this.removeListener(j,V[q]);return this};function x(F,j,V){var M=F._events;if(M===void 0)return[];var q=M[j];return q===void 0?[]:typeof q=="function"?V?[q.listener||q]:[q]:V?C(q):S(q,q.length)}d.prototype.listeners=function(j){return x(this,j,!0)},d.prototype.rawListeners=function(j){return x(this,j,!1)},d.listenerCount=function(F,j){return typeof F.listenerCount=="function"?F.listenerCount(j):T.call(F,j)},d.prototype.listenerCount=T;function T(F){var j=this._events;if(j!==void 0){var V=j[F];if(typeof V=="function")return 1;if(V!==void 0)return V.length}return 0}d.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]};function S(F,j){for(var V=new Array(j),M=0;M<j;++M)V[M]=F[M];return V}function _(F,j){for(;j+1<F.length;j++)F[j]=F[j+1];F.pop()}function C(F){for(var j=new Array(F.length),V=0;V<j.length;++V)j[V]=F[V].listener||F[V];return j}function k(F,j){return new Promise(function(V,M){function q(Q){F.removeListener(j,Se),M(Q)}function Se(){typeof F.removeListener=="function"&&F.removeListener("error",q),V([].slice.call(arguments))}N(F,j,Se,{once:!0}),j!=="error"&&I(F,q,{once:!0})})}function I(F,j,V){typeof F.on=="function"&&N(F,"error",j,V)}function N(F,j,V,M){if(typeof F.on=="function")M.once?F.once(j,V):F.on(j,V);else if(typeof F.addEventListener=="function")F.addEventListener(j,function q(Se){M.once&&F.removeEventListener(j,q),V(Se)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof F)}return events.exports}var hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,(function(n){const r=requireBuffer(),{format:s,inspect:a}=requireInspect(),{codes:{ERR_INVALID_ARG_TYPE:l}}=requireErrors(),{kResistStopPropagation:d,AggregateError:u,SymbolDispose:c}=requirePrimordials(),p=globalThis.AbortSignal||requireBrowser$2().AbortSignal,h=globalThis.AbortController||requireBrowser$2().AbortController,y=Object.getPrototypeOf(async function(){}).constructor,b=globalThis.Blob||r.Blob,x=typeof b<"u"?function(C){return C instanceof b}:function(C){return!1},T=(_,C)=>{if(_!==void 0&&(_===null||typeof _!="object"||!("aborted"in _)))throw new l(C,"AbortSignal",_)},S=(_,C)=>{if(typeof _!="function")throw new l(C,"Function",_)};n.exports={AggregateError:u,kEmptyObject:Object.freeze({}),once(_){let C=!1;return function(...k){C||(C=!0,_.apply(this,k))}},createDeferredPromise:function(){let _,C;return{promise:new Promise((I,N)=>{_=I,C=N}),resolve:_,reject:C}},promisify(_){return new Promise((C,k)=>{_((I,...N)=>I?k(I):C(...N))})},debuglog(){return function(){}},format:s,inspect:a,types:{isAsyncFunction(_){return _ instanceof y},isArrayBufferView(_){return ArrayBuffer.isView(_)}},isBlob:x,deprecate(_,C){return _},addAbortListener:requireEvents().addAbortListener||function(C,k){if(C===void 0)throw new l("signal","AbortSignal",C);T(C,"signal"),S(k,"listener");let I;return C.aborted?queueMicrotask(()=>k()):(C.addEventListener("abort",k,{__proto__:null,once:!0,[d]:!0}),I=()=>{C.removeEventListener("abort",k)}),{__proto__:null,[c](){var N;(N=I)===null||N===void 0||N()}}},AbortSignalAny:p.any||function(C){if(C.length===1)return C[0];const k=new h,I=()=>k.abort();return C.forEach(N=>{T(N,"signals"),N.addEventListener("abort",I,{once:!0})}),k.signal.addEventListener("abort",()=>{C.forEach(N=>N.removeEventListener("abort",I))},{once:!0}),k.signal}},n.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(util)),util.exports}var operators={},validators,hasRequiredValidators;function requireValidators(){if(hasRequiredValidators)return validators;hasRequiredValidators=1;const{ArrayIsArray:n,ArrayPrototypeIncludes:r,ArrayPrototypeJoin:s,ArrayPrototypeMap:a,NumberIsInteger:l,NumberIsNaN:d,NumberMAX_SAFE_INTEGER:u,NumberMIN_SAFE_INTEGER:c,NumberParseInt:p,ObjectPrototypeHasOwnProperty:h,RegExpPrototypeExec:y,String:b,StringPrototypeToUpperCase:x,StringPrototypeTrim:T}=requirePrimordials(),{hideStackFrames:S,codes:{ERR_SOCKET_BAD_PORT:_,ERR_INVALID_ARG_TYPE:C,ERR_INVALID_ARG_VALUE:k,ERR_OUT_OF_RANGE:I,ERR_UNKNOWN_SIGNAL:N}}=requireErrors(),{normalizeEncoding:F}=requireUtil(),{isAsyncFunction:j,isArrayBufferView:V}=requireUtil().types,M={};function q(fe){return fe===(fe|0)}function Se(fe){return fe===fe>>>0}const Q=/^[0-7]+$/,ee="must be a 32-bit unsigned integer or an octal string";function we(fe,Le,$e){if(typeof fe>"u"&&(fe=$e),typeof fe=="string"){if(y(Q,fe)===null)throw new k(Le,fe,ee);fe=p(fe,8)}return Je(fe,Le),fe}const he=S((fe,Le,$e=c,ze=u)=>{if(typeof fe!="number")throw new C(Le,"number",fe);if(!l(fe))throw new I(Le,"an integer",fe);if(fe<$e||fe>ze)throw new I(Le,`>= ${$e} && <= ${ze}`,fe)}),He=S((fe,Le,$e=-2147483648,ze=2147483647)=>{if(typeof fe!="number")throw new C(Le,"number",fe);if(!l(fe))throw new I(Le,"an integer",fe);if(fe<$e||fe>ze)throw new I(Le,`>= ${$e} && <= ${ze}`,fe)}),Je=S((fe,Le,$e=!1)=>{if(typeof fe!="number")throw new C(Le,"number",fe);if(!l(fe))throw new I(Le,"an integer",fe);const ze=$e?1:0,ft=4294967295;if(fe<ze||fe>ft)throw new I(Le,`>= ${ze} && <= ${ft}`,fe)});function de(fe,Le){if(typeof fe!="string")throw new C(Le,"string",fe)}function Be(fe,Le,$e=void 0,ze){if(typeof fe!="number")throw new C(Le,"number",fe);if($e!=null&&fe<$e||ze!=null&&fe>ze||($e!=null||ze!=null)&&d(fe))throw new I(Le,`${$e!=null?`>= ${$e}`:""}${$e!=null&&ze!=null?" && ":""}${ze!=null?`<= ${ze}`:""}`,fe)}const me=S((fe,Le,$e)=>{if(!r($e,fe)){const ft="must be one of: "+s(a($e,Dt=>typeof Dt=="string"?`'${Dt}'`:b(Dt)),", ");throw new k(Le,fe,ft)}});function Ue(fe,Le){if(typeof fe!="boolean")throw new C(Le,"boolean",fe)}function W(fe,Le,$e){return fe==null||!h(fe,Le)?$e:fe[Le]}const z=S((fe,Le,$e=null)=>{const ze=W($e,"allowArray",!1),ft=W($e,"allowFunction",!1);if(!W($e,"nullable",!1)&&fe===null||!ze&&n(fe)||typeof fe!="object"&&(!ft||typeof fe!="function"))throw new C(Le,"Object",fe)}),Z=S((fe,Le)=>{if(fe!=null&&typeof fe!="object"&&typeof fe!="function")throw new C(Le,"a dictionary",fe)}),ce=S((fe,Le,$e=0)=>{if(!n(fe))throw new C(Le,"Array",fe);if(fe.length<$e){const ze=`must be longer than ${$e}`;throw new k(Le,fe,ze)}});function Ie(fe,Le){ce(fe,Le);for(let $e=0;$e<fe.length;$e++)de(fe[$e],`${Le}[${$e}]`)}function Fe(fe,Le){ce(fe,Le);for(let $e=0;$e<fe.length;$e++)Ue(fe[$e],`${Le}[${$e}]`)}function at(fe,Le){ce(fe,Le);for(let $e=0;$e<fe.length;$e++){const ze=fe[$e],ft=`${Le}[${$e}]`;if(ze==null)throw new C(ft,"AbortSignal",ze);mt(ze,ft)}}function nt(fe,Le="signal"){if(de(fe,Le),M[fe]===void 0)throw M[x(fe)]!==void 0?new N(fe+" (signals must use all capital letters)"):new N(fe)}const Ce=S((fe,Le="buffer")=>{if(!V(fe))throw new C(Le,["Buffer","TypedArray","DataView"],fe)});function ke(fe,Le){const $e=F(Le),ze=fe.length;if($e==="hex"&&ze%2!==0)throw new k("encoding",Le,`is invalid for data of length ${ze}`)}function De(fe,Le="Port",$e=!0){if(typeof fe!="number"&&typeof fe!="string"||typeof fe=="string"&&T(fe).length===0||+fe!==+fe>>>0||fe>65535||fe===0&&!$e)throw new _(Le,fe,$e);return fe|0}const mt=S((fe,Le)=>{if(fe!==void 0&&(fe===null||typeof fe!="object"||!("aborted"in fe)))throw new C(Le,"AbortSignal",fe)}),tt=S((fe,Le)=>{if(typeof fe!="function")throw new C(Le,"Function",fe)}),oe=S((fe,Le)=>{if(typeof fe!="function"||j(fe))throw new C(Le,"Function",fe)}),pe=S((fe,Le)=>{if(fe!==void 0)throw new C(Le,"undefined",fe)});function Re(fe,Le,$e){if(!r($e,fe))throw new C(Le,`('${s($e,"|")}')`,fe)}const Ze=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Qe(fe,Le){if(typeof fe>"u"||!y(Ze,fe))throw new k(Le,fe,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Ye(fe){if(typeof fe=="string")return Qe(fe,"hints"),fe;if(n(fe)){const Le=fe.length;let $e="";if(Le===0)return $e;for(let ze=0;ze<Le;ze++){const ft=fe[ze];Qe(ft,"hints"),$e+=ft,ze!==Le-1&&($e+=", ")}return $e}throw new k("hints",fe,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return validators={isInt32:q,isUint32:Se,parseFileMode:we,validateArray:ce,validateStringArray:Ie,validateBooleanArray:Fe,validateAbortSignalArray:at,validateBoolean:Ue,validateBuffer:Ce,validateDictionary:Z,validateEncoding:ke,validateFunction:tt,validateInt32:He,validateInteger:he,validateNumber:Be,validateObject:z,validateOneOf:me,validatePlainFunction:oe,validatePort:De,validateSignalName:nt,validateString:de,validateUint32:Je,validateUndefined:pe,validateUnion:Re,validateAbortSignal:mt,validateLinkHeaderValue:Ye},validators}var endOfStream={exports:{}},browser={exports:{}},hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser.exports;hasRequiredBrowser$1=1;var n=browser.exports={},r,s;function a(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?r=setTimeout:r=a}catch{r=a}try{typeof clearTimeout=="function"?s=clearTimeout:s=l}catch{s=l}})();function d(_){if(r===setTimeout)return setTimeout(_,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(_,0);try{return r(_,0)}catch{try{return r.call(null,_,0)}catch{return r.call(this,_,0)}}}function u(_){if(s===clearTimeout)return clearTimeout(_);if((s===l||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(_);try{return s(_)}catch{try{return s.call(null,_)}catch{return s.call(this,_)}}}var c=[],p=!1,h,y=-1;function b(){!p||!h||(p=!1,h.length?c=h.concat(c):y=-1,c.length&&x())}function x(){if(!p){var _=d(b);p=!0;for(var C=c.length;C;){for(h=c,c=[];++y<C;)h&&h[y].run();y=-1,C=c.length}h=null,p=!1,u(_)}}n.nextTick=function(_){var C=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)C[k-1]=arguments[k];c.push(new T(_,C)),c.length===1&&!p&&d(x)};function T(_,C){this.fun=_,this.array=C}T.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function S(){}return n.on=S,n.addListener=S,n.once=S,n.off=S,n.removeListener=S,n.removeAllListeners=S,n.emit=S,n.prependListener=S,n.prependOnceListener=S,n.listeners=function(_){return[]},n.binding=function(_){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(_){throw new Error("process.chdir is not supported")},n.umask=function(){return 0},browser.exports}var utils,hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;const{SymbolAsyncIterator:n,SymbolIterator:r,SymbolFor:s}=requirePrimordials(),a=s("nodejs.stream.destroyed"),l=s("nodejs.stream.errored"),d=s("nodejs.stream.readable"),u=s("nodejs.stream.writable"),c=s("nodejs.stream.disturbed"),p=s("nodejs.webstream.isClosedPromise"),h=s("nodejs.webstream.controllerErrorFunction");function y(W,z=!1){var Z;return!!(W&&typeof W.pipe=="function"&&typeof W.on=="function"&&(!z||typeof W.pause=="function"&&typeof W.resume=="function")&&(!W._writableState||((Z=W._readableState)===null||Z===void 0?void 0:Z.readable)!==!1)&&(!W._writableState||W._readableState))}function b(W){var z;return!!(W&&typeof W.write=="function"&&typeof W.on=="function"&&(!W._readableState||((z=W._writableState)===null||z===void 0?void 0:z.writable)!==!1))}function x(W){return!!(W&&typeof W.pipe=="function"&&W._readableState&&typeof W.on=="function"&&typeof W.write=="function")}function T(W){return W&&(W._readableState||W._writableState||typeof W.write=="function"&&typeof W.on=="function"||typeof W.pipe=="function"&&typeof W.on=="function")}function S(W){return!!(W&&!T(W)&&typeof W.pipeThrough=="function"&&typeof W.getReader=="function"&&typeof W.cancel=="function")}function _(W){return!!(W&&!T(W)&&typeof W.getWriter=="function"&&typeof W.abort=="function")}function C(W){return!!(W&&!T(W)&&typeof W.readable=="object"&&typeof W.writable=="object")}function k(W){return S(W)||_(W)||C(W)}function I(W,z){return W==null?!1:z===!0?typeof W[n]=="function":z===!1?typeof W[r]=="function":typeof W[n]=="function"||typeof W[r]=="function"}function N(W){if(!T(W))return null;const z=W._writableState,Z=W._readableState,ce=z||Z;return!!(W.destroyed||W[a]||ce!=null&&ce.destroyed)}function F(W){if(!b(W))return null;if(W.writableEnded===!0)return!0;const z=W._writableState;return z!=null&&z.errored?!1:typeof(z==null?void 0:z.ended)!="boolean"?null:z.ended}function j(W,z){if(!b(W))return null;if(W.writableFinished===!0)return!0;const Z=W._writableState;return Z!=null&&Z.errored?!1:typeof(Z==null?void 0:Z.finished)!="boolean"?null:!!(Z.finished||z===!1&&Z.ended===!0&&Z.length===0)}function V(W){if(!y(W))return null;if(W.readableEnded===!0)return!0;const z=W._readableState;return!z||z.errored?!1:typeof(z==null?void 0:z.ended)!="boolean"?null:z.ended}function M(W,z){if(!y(W))return null;const Z=W._readableState;return Z!=null&&Z.errored?!1:typeof(Z==null?void 0:Z.endEmitted)!="boolean"?null:!!(Z.endEmitted||z===!1&&Z.ended===!0&&Z.length===0)}function q(W){return W&&W[d]!=null?W[d]:typeof(W==null?void 0:W.readable)!="boolean"?null:N(W)?!1:y(W)&&W.readable&&!M(W)}function Se(W){return W&&W[u]!=null?W[u]:typeof(W==null?void 0:W.writable)!="boolean"?null:N(W)?!1:b(W)&&W.writable&&!F(W)}function Q(W,z){return T(W)?N(W)?!0:!((z==null?void 0:z.readable)!==!1&&q(W)||(z==null?void 0:z.writable)!==!1&&Se(W)):null}function ee(W){var z,Z;return T(W)?W.writableErrored?W.writableErrored:(z=(Z=W._writableState)===null||Z===void 0?void 0:Z.errored)!==null&&z!==void 0?z:null:null}function we(W){var z,Z;return T(W)?W.readableErrored?W.readableErrored:(z=(Z=W._readableState)===null||Z===void 0?void 0:Z.errored)!==null&&z!==void 0?z:null:null}function he(W){if(!T(W))return null;if(typeof W.closed=="boolean")return W.closed;const z=W._writableState,Z=W._readableState;return typeof(z==null?void 0:z.closed)=="boolean"||typeof(Z==null?void 0:Z.closed)=="boolean"?(z==null?void 0:z.closed)||(Z==null?void 0:Z.closed):typeof W._closed=="boolean"&&He(W)?W._closed:null}function He(W){return typeof W._closed=="boolean"&&typeof W._defaultKeepAlive=="boolean"&&typeof W._removedConnection=="boolean"&&typeof W._removedContLen=="boolean"}function Je(W){return typeof W._sent100=="boolean"&&He(W)}function de(W){var z;return typeof W._consuming=="boolean"&&typeof W._dumped=="boolean"&&((z=W.req)===null||z===void 0?void 0:z.upgradeOrConnect)===void 0}function Be(W){if(!T(W))return null;const z=W._writableState,Z=W._readableState,ce=z||Z;return!ce&&Je(W)||!!(ce&&ce.autoDestroy&&ce.emitClose&&ce.closed===!1)}function me(W){var z;return!!(W&&((z=W[c])!==null&&z!==void 0?z:W.readableDidRead||W.readableAborted))}function Ue(W){var z,Z,ce,Ie,Fe,at,nt,Ce,ke,De;return!!(W&&((z=(Z=(ce=(Ie=(Fe=(at=W[l])!==null&&at!==void 0?at:W.readableErrored)!==null&&Fe!==void 0?Fe:W.writableErrored)!==null&&Ie!==void 0?Ie:(nt=W._readableState)===null||nt===void 0?void 0:nt.errorEmitted)!==null&&ce!==void 0?ce:(Ce=W._writableState)===null||Ce===void 0?void 0:Ce.errorEmitted)!==null&&Z!==void 0?Z:(ke=W._readableState)===null||ke===void 0?void 0:ke.errored)!==null&&z!==void 0?z:!((De=W._writableState)===null||De===void 0)&&De.errored))}return utils={isDestroyed:N,kIsDestroyed:a,isDisturbed:me,kIsDisturbed:c,isErrored:Ue,kIsErrored:l,isReadable:q,kIsReadable:d,kIsClosedPromise:p,kControllerErrorFunction:h,kIsWritable:u,isClosed:he,isDuplexNodeStream:x,isFinished:Q,isIterable:I,isReadableNodeStream:y,isReadableStream:S,isReadableEnded:V,isReadableFinished:M,isReadableErrored:we,isNodeStream:T,isWebStream:k,isWritable:Se,isWritableNodeStream:b,isWritableStream:_,isWritableEnded:F,isWritableFinished:j,isWritableErrored:ee,isServerRequest:de,isServerResponse:Je,willEmitClose:Be,isTransformStream:C},utils}var hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream.exports;hasRequiredEndOfStream=1;const n=requireBrowser$1(),{AbortError:r,codes:s}=requireErrors(),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:l}=s,{kEmptyObject:d,once:u}=requireUtil(),{validateAbortSignal:c,validateFunction:p,validateObject:h,validateBoolean:y}=requireValidators(),{Promise:b,PromisePrototypeThen:x,SymbolDispose:T}=requirePrimordials(),{isClosed:S,isReadable:_,isReadableNodeStream:C,isReadableStream:k,isReadableFinished:I,isReadableErrored:N,isWritable:F,isWritableNodeStream:j,isWritableStream:V,isWritableFinished:M,isWritableErrored:q,isNodeStream:Se,willEmitClose:Q,kIsClosedPromise:ee}=requireUtils();let we;function he(me){return me.setHeader&&typeof me.abort=="function"}const He=()=>{};function Je(me,Ue,W){var z,Z;if(arguments.length===2?(W=Ue,Ue=d):Ue==null?Ue=d:h(Ue,"options"),p(W,"callback"),c(Ue.signal,"options.signal"),W=u(W),k(me)||V(me))return de(me,Ue,W);if(!Se(me))throw new a("stream",["ReadableStream","WritableStream","Stream"],me);const ce=(z=Ue.readable)!==null&&z!==void 0?z:C(me),Ie=(Z=Ue.writable)!==null&&Z!==void 0?Z:j(me),Fe=me._writableState,at=me._readableState,nt=()=>{me.writable||De()};let Ce=Q(me)&&C(me)===ce&&j(me)===Ie,ke=M(me,!1);const De=()=>{ke=!0,me.destroyed&&(Ce=!1),!(Ce&&(!me.readable||ce))&&(!ce||mt)&&W.call(me)};let mt=I(me,!1);const tt=()=>{mt=!0,me.destroyed&&(Ce=!1),!(Ce&&(!me.writable||Ie))&&(!Ie||ke)&&W.call(me)},oe=fe=>{W.call(me,fe)};let pe=S(me);const Re=()=>{pe=!0;const fe=q(me)||N(me);if(fe&&typeof fe!="boolean")return W.call(me,fe);if(ce&&!mt&&C(me,!0)&&!I(me,!1))return W.call(me,new l);if(Ie&&!ke&&!M(me,!1))return W.call(me,new l);W.call(me)},Ze=()=>{pe=!0;const fe=q(me)||N(me);if(fe&&typeof fe!="boolean")return W.call(me,fe);W.call(me)},Qe=()=>{me.req.on("finish",De)};he(me)?(me.on("complete",De),Ce||me.on("abort",Re),me.req?Qe():me.on("request",Qe)):Ie&&!Fe&&(me.on("end",nt),me.on("close",nt)),!Ce&&typeof me.aborted=="boolean"&&me.on("aborted",Re),me.on("end",tt),me.on("finish",De),Ue.error!==!1&&me.on("error",oe),me.on("close",Re),pe?n.nextTick(Re):Fe!=null&&Fe.errorEmitted||at!=null&&at.errorEmitted?Ce||n.nextTick(Ze):(!ce&&(!Ce||_(me))&&(ke||F(me)===!1)||!Ie&&(!Ce||F(me))&&(mt||_(me)===!1)||at&&me.req&&me.aborted)&&n.nextTick(Ze);const Ye=()=>{W=He,me.removeListener("aborted",Re),me.removeListener("complete",De),me.removeListener("abort",Re),me.removeListener("request",Qe),me.req&&me.req.removeListener("finish",De),me.removeListener("end",nt),me.removeListener("close",nt),me.removeListener("finish",De),me.removeListener("end",tt),me.removeListener("error",oe),me.removeListener("close",Re)};if(Ue.signal&&!pe){const fe=()=>{const Le=W;Ye(),Le.call(me,new r(void 0,{cause:Ue.signal.reason}))};if(Ue.signal.aborted)n.nextTick(fe);else{we=we||requireUtil().addAbortListener;const Le=we(Ue.signal,fe),$e=W;W=u((...ze)=>{Le[T](),$e.apply(me,ze)})}}return Ye}function de(me,Ue,W){let z=!1,Z=He;if(Ue.signal)if(Z=()=>{z=!0,W.call(me,new r(void 0,{cause:Ue.signal.reason}))},Ue.signal.aborted)n.nextTick(Z);else{we=we||requireUtil().addAbortListener;const Ie=we(Ue.signal,Z),Fe=W;W=u((...at)=>{Ie[T](),Fe.apply(me,at)})}const ce=(...Ie)=>{z||n.nextTick(()=>W.apply(me,Ie))};return x(me[ee].promise,ce,ce),He}function Be(me,Ue){var W;let z=!1;return Ue===null&&(Ue=d),(W=Ue)!==null&&W!==void 0&&W.cleanup&&(y(Ue.cleanup,"cleanup"),z=Ue.cleanup),new b((Z,ce)=>{const Ie=Je(me,Ue,Fe=>{z&&Ie(),Fe?ce(Fe):Z()})})}return endOfStream.exports=Je,endOfStream.exports.finished=Be,endOfStream.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;const n=requireBrowser$1(),{aggregateTwoErrors:r,codes:{ERR_MULTIPLE_CALLBACK:s},AbortError:a}=requireErrors(),{Symbol:l}=requirePrimordials(),{kIsDestroyed:d,isDestroyed:u,isFinished:c,isServerRequest:p}=requireUtils(),h=l("kDestroy"),y=l("kConstruct");function b(Q,ee,we){Q&&(Q.stack,ee&&!ee.errored&&(ee.errored=Q),we&&!we.errored&&(we.errored=Q))}function x(Q,ee){const we=this._readableState,he=this._writableState,He=he||we;return he!=null&&he.destroyed||we!=null&&we.destroyed?(typeof ee=="function"&&ee(),this):(b(Q,he,we),he&&(he.destroyed=!0),we&&(we.destroyed=!0),He.constructed?T(this,Q,ee):this.once(h,function(Je){T(this,r(Je,Q),ee)}),this)}function T(Q,ee,we){let he=!1;function He(Je){if(he)return;he=!0;const de=Q._readableState,Be=Q._writableState;b(Je,Be,de),Be&&(Be.closed=!0),de&&(de.closed=!0),typeof we=="function"&&we(Je),Je?n.nextTick(S,Q,Je):n.nextTick(_,Q)}try{Q._destroy(ee||null,He)}catch(Je){He(Je)}}function S(Q,ee){C(Q,ee),_(Q)}function _(Q){const ee=Q._readableState,we=Q._writableState;we&&(we.closeEmitted=!0),ee&&(ee.closeEmitted=!0),(we!=null&&we.emitClose||ee!=null&&ee.emitClose)&&Q.emit("close")}function C(Q,ee){const we=Q._readableState,he=Q._writableState;he!=null&&he.errorEmitted||we!=null&&we.errorEmitted||(he&&(he.errorEmitted=!0),we&&(we.errorEmitted=!0),Q.emit("error",ee))}function k(){const Q=this._readableState,ee=this._writableState;Q&&(Q.constructed=!0,Q.closed=!1,Q.closeEmitted=!1,Q.destroyed=!1,Q.errored=null,Q.errorEmitted=!1,Q.reading=!1,Q.ended=Q.readable===!1,Q.endEmitted=Q.readable===!1),ee&&(ee.constructed=!0,ee.destroyed=!1,ee.closed=!1,ee.closeEmitted=!1,ee.errored=null,ee.errorEmitted=!1,ee.finalCalled=!1,ee.prefinished=!1,ee.ended=ee.writable===!1,ee.ending=ee.writable===!1,ee.finished=ee.writable===!1)}function I(Q,ee,we){const he=Q._readableState,He=Q._writableState;if(He!=null&&He.destroyed||he!=null&&he.destroyed)return this;he!=null&&he.autoDestroy||He!=null&&He.autoDestroy?Q.destroy(ee):ee&&(ee.stack,He&&!He.errored&&(He.errored=ee),he&&!he.errored&&(he.errored=ee),we?n.nextTick(C,Q,ee):C(Q,ee))}function N(Q,ee){if(typeof Q._construct!="function")return;const we=Q._readableState,he=Q._writableState;we&&(we.constructed=!1),he&&(he.constructed=!1),Q.once(y,ee),!(Q.listenerCount(y)>1)&&n.nextTick(F,Q)}function F(Q){let ee=!1;function we(he){if(ee){I(Q,he??new s);return}ee=!0;const He=Q._readableState,Je=Q._writableState,de=Je||He;He&&(He.constructed=!0),Je&&(Je.constructed=!0),de.destroyed?Q.emit(h,he):he?I(Q,he,!0):n.nextTick(j,Q)}try{Q._construct(he=>{n.nextTick(we,he)})}catch(he){n.nextTick(we,he)}}function j(Q){Q.emit(y)}function V(Q){return(Q==null?void 0:Q.setHeader)&&typeof Q.abort=="function"}function M(Q){Q.emit("close")}function q(Q,ee){Q.emit("error",ee),n.nextTick(M,Q)}function Se(Q,ee){!Q||u(Q)||(!ee&&!c(Q)&&(ee=new a),p(Q)?(Q.socket=null,Q.destroy(ee)):V(Q)?Q.abort():V(Q.req)?Q.req.abort():typeof Q.destroy=="function"?Q.destroy(ee):typeof Q.close=="function"?Q.close():ee?n.nextTick(q,Q,ee):n.nextTick(M,Q),Q.destroyed||(Q[d]=!0))}return destroy_1={construct:N,destroyer:Se,destroy:x,undestroy:k,errorOrDestroy:I},destroy_1}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;const{ArrayIsArray:n,ObjectSetPrototypeOf:r}=requirePrimordials(),{EventEmitter:s}=requireEvents();function a(d){s.call(this,d)}r(a.prototype,s.prototype),r(a,s),a.prototype.pipe=function(d,u){const c=this;function p(_){d.writable&&d.write(_)===!1&&c.pause&&c.pause()}c.on("data",p);function h(){c.readable&&c.resume&&c.resume()}d.on("drain",h),!d._isStdio&&(!u||u.end!==!1)&&(c.on("end",b),c.on("close",x));let y=!1;function b(){y||(y=!0,d.end())}function x(){y||(y=!0,typeof d.destroy=="function"&&d.destroy())}function T(_){S(),s.listenerCount(this,"error")===0&&this.emit("error",_)}l(c,"error",T),l(d,"error",T);function S(){c.removeListener("data",p),d.removeListener("drain",h),c.removeListener("end",b),c.removeListener("close",x),c.removeListener("error",T),d.removeListener("error",T),c.removeListener("end",S),c.removeListener("close",S),d.removeListener("close",S)}return c.on("end",S),c.on("close",S),d.on("close",S),d.emit("pipe",c),d};function l(d,u,c){if(typeof d.prependListener=="function")return d.prependListener(u,c);!d._events||!d._events[u]?d.on(u,c):n(d._events[u])?d._events[u].unshift(c):d._events[u]=[c,d._events[u]]}return legacy={Stream:a,prependListener:l},legacy}var addAbortSignal={exports:{}},hasRequiredAddAbortSignal;function requireAddAbortSignal(){return hasRequiredAddAbortSignal||(hasRequiredAddAbortSignal=1,(function(n){const{SymbolDispose:r}=requirePrimordials(),{AbortError:s,codes:a}=requireErrors(),{isNodeStream:l,isWebStream:d,kControllerErrorFunction:u}=requireUtils(),c=requireEndOfStream(),{ERR_INVALID_ARG_TYPE:p}=a;let h;const y=(b,x)=>{if(typeof b!="object"||!("aborted"in b))throw new p(x,"AbortSignal",b)};n.exports.addAbortSignal=function(x,T){if(y(x,"signal"),!l(T)&&!d(T))throw new p("stream",["ReadableStream","WritableStream","Stream"],T);return n.exports.addAbortSignalNoValidate(x,T)},n.exports.addAbortSignalNoValidate=function(b,x){if(typeof b!="object"||!("aborted"in b))return x;const T=l(x)?()=>{x.destroy(new s(void 0,{cause:b.reason}))}:()=>{x[u](new s(void 0,{cause:b.reason}))};if(b.aborted)T();else{h=h||requireUtil().addAbortListener;const S=h(b,T);c(x,S[r])}return x}})(addAbortSignal)),addAbortSignal.exports}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;const{StringPrototypeSlice:n,SymbolIterator:r,TypedArrayPrototypeSet:s,Uint8Array:a}=requirePrimordials(),{Buffer:l}=requireBuffer(),{inspect:d}=requireUtil();return buffer_list=class{constructor(){this.head=null,this.tail=null,this.length=0}push(c){const p={data:c,next:null};this.length>0?this.tail.next=p:this.head=p,this.tail=p,++this.length}unshift(c){const p={data:c,next:this.head};this.length===0&&(this.tail=p),this.head=p,++this.length}shift(){if(this.length===0)return;const c=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,c}clear(){this.head=this.tail=null,this.length=0}join(c){if(this.length===0)return"";let p=this.head,h=""+p.data;for(;(p=p.next)!==null;)h+=c+p.data;return h}concat(c){if(this.length===0)return l.alloc(0);const p=l.allocUnsafe(c>>>0);let h=this.head,y=0;for(;h;)s(p,h.data,y),y+=h.data.length,h=h.next;return p}consume(c,p){const h=this.head.data;if(c<h.length){const y=h.slice(0,c);return this.head.data=h.slice(c),y}return c===h.length?this.shift():p?this._getString(c):this._getBuffer(c)}first(){return this.head.data}*[r](){for(let c=this.head;c;c=c.next)yield c.data}_getString(c){let p="",h=this.head,y=0;do{const b=h.data;if(c>b.length)p+=b,c-=b.length;else{c===b.length?(p+=b,++y,h.next?this.head=h.next:this.head=this.tail=null):(p+=n(b,0,c),this.head=h,h.data=n(b,c));break}++y}while((h=h.next)!==null);return this.length-=y,p}_getBuffer(c){const p=l.allocUnsafe(c),h=c;let y=this.head,b=0;do{const x=y.data;if(c>x.length)s(p,x,h-c),c-=x.length;else{c===x.length?(s(p,x,h-c),++b,y.next?this.head=y.next:this.head=this.tail=null):(s(p,new a(x.buffer,x.byteOffset,c),h-c),this.head=y,y.data=x.slice(c));break}++b}while((y=y.next)!==null);return this.length-=b,p}[Symbol.for("nodejs.util.inspect.custom")](c,p){return d(this,{...p,depth:0,customInspect:!1})}},buffer_list}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;const{MathFloor:n,NumberIsInteger:r}=requirePrimordials(),{validateInteger:s}=requireValidators(),{ERR_INVALID_ARG_VALUE:a}=requireErrors().codes;let l=16*1024,d=16;function u(y,b,x){return y.highWaterMark!=null?y.highWaterMark:b?y[x]:null}function c(y){return y?d:l}function p(y,b){s(b,"value",0),y?d=b:l=b}function h(y,b,x,T){const S=u(b,T,x);if(S!=null){if(!r(S)||S<0){const _=T?`options.${x}`:"options.highWaterMark";throw new a(_,S)}return n(S)}return c(y.objectMode)}return state={getHighWaterMark:h,getDefaultHighWaterMark:c,setDefaultHighWaterMark:p},state}var string_decoder={},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,(function(n,r){var s=requireBuffer(),a=s.Buffer;function l(u,c){for(var p in u)c[p]=u[p]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?n.exports=s:(l(s,r),r.Buffer=d);function d(u,c,p){return a(u,c,p)}d.prototype=Object.create(a.prototype),l(a,d),d.from=function(u,c,p){if(typeof u=="number")throw new TypeError("Argument must not be a number");return a(u,c,p)},d.alloc=function(u,c,p){if(typeof u!="number")throw new TypeError("Argument must be a number");var h=a(u);return c!==void 0?typeof p=="string"?h.fill(c,p):h.fill(c):h.fill(0),h},d.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return a(u)},d.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return s.SlowBuffer(u)}})(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var n=requireSafeBuffer().Buffer,r=n.isEncoding||function(k){switch(k=""+k,k&&k.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(k){if(!k)return"utf8";for(var I;;)switch(k){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return k;default:if(I)return;k=(""+k).toLowerCase(),I=!0}}function a(k){var I=s(k);if(typeof I!="string"&&(n.isEncoding===r||!r(k)))throw new Error("Unknown encoding: "+k);return I||k}string_decoder.StringDecoder=l;function l(k){this.encoding=a(k);var I;switch(this.encoding){case"utf16le":this.text=b,this.end=x,I=4;break;case"utf8":this.fillLast=p,I=4;break;case"base64":this.text=T,this.end=S,I=3;break;default:this.write=_,this.end=C;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(I)}l.prototype.write=function(k){if(k.length===0)return"";var I,N;if(this.lastNeed){if(I=this.fillLast(k),I===void 0)return"";N=this.lastNeed,this.lastNeed=0}else N=0;return N<k.length?I?I+this.text(k,N):this.text(k,N):I||""},l.prototype.end=y,l.prototype.text=h,l.prototype.fillLast=function(k){if(this.lastNeed<=k.length)return k.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);k.copy(this.lastChar,this.lastTotal-this.lastNeed,0,k.length),this.lastNeed-=k.length};function d(k){return k<=127?0:k>>5===6?2:k>>4===14?3:k>>3===30?4:k>>6===2?-1:-2}function u(k,I,N){var F=I.length-1;if(F<N)return 0;var j=d(I[F]);return j>=0?(j>0&&(k.lastNeed=j-1),j):--F<N||j===-2?0:(j=d(I[F]),j>=0?(j>0&&(k.lastNeed=j-2),j):--F<N||j===-2?0:(j=d(I[F]),j>=0?(j>0&&(j===2?j=0:k.lastNeed=j-3),j):0))}function c(k,I,N){if((I[0]&192)!==128)return k.lastNeed=0,"";if(k.lastNeed>1&&I.length>1){if((I[1]&192)!==128)return k.lastNeed=1,"";if(k.lastNeed>2&&I.length>2&&(I[2]&192)!==128)return k.lastNeed=2,""}}function p(k){var I=this.lastTotal-this.lastNeed,N=c(this,k);if(N!==void 0)return N;if(this.lastNeed<=k.length)return k.copy(this.lastChar,I,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);k.copy(this.lastChar,I,0,k.length),this.lastNeed-=k.length}function h(k,I){var N=u(this,k,I);if(!this.lastNeed)return k.toString("utf8",I);this.lastTotal=N;var F=k.length-(N-this.lastNeed);return k.copy(this.lastChar,0,F),k.toString("utf8",I,F)}function y(k){var I=k&&k.length?this.write(k):"";return this.lastNeed?I+"":I}function b(k,I){if((k.length-I)%2===0){var N=k.toString("utf16le",I);if(N){var F=N.charCodeAt(N.length-1);if(F>=55296&&F<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=k[k.length-2],this.lastChar[1]=k[k.length-1],N.slice(0,-1)}return N}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=k[k.length-1],k.toString("utf16le",I,k.length-1)}function x(k){var I=k&&k.length?this.write(k):"";if(this.lastNeed){var N=this.lastTotal-this.lastNeed;return I+this.lastChar.toString("utf16le",0,N)}return I}function T(k,I){var N=(k.length-I)%3;return N===0?k.toString("base64",I):(this.lastNeed=3-N,this.lastTotal=3,N===1?this.lastChar[0]=k[k.length-1]:(this.lastChar[0]=k[k.length-2],this.lastChar[1]=k[k.length-1]),k.toString("base64",I,k.length-N))}function S(k){var I=k&&k.length?this.write(k):"";return this.lastNeed?I+this.lastChar.toString("base64",0,3-this.lastNeed):I}function _(k){return k.toString(this.encoding)}function C(k){return k&&k.length?this.write(k):""}return string_decoder}var from_1,hasRequiredFrom;function requireFrom(){if(hasRequiredFrom)return from_1;hasRequiredFrom=1;const n=requireBrowser$1(),{PromisePrototypeThen:r,SymbolAsyncIterator:s,SymbolIterator:a}=requirePrimordials(),{Buffer:l}=requireBuffer(),{ERR_INVALID_ARG_TYPE:d,ERR_STREAM_NULL_VALUES:u}=requireErrors().codes;function c(p,h,y){let b;if(typeof h=="string"||h instanceof l)return new p({objectMode:!0,...y,read(){this.push(h),this.push(null)}});let x;if(h&&h[s])x=!0,b=h[s]();else if(h&&h[a])x=!1,b=h[a]();else throw new d("iterable",["Iterable"],h);const T=new p({objectMode:!0,highWaterMark:1,...y});let S=!1;T._read=function(){S||(S=!0,C())},T._destroy=function(k,I){r(_(k),()=>n.nextTick(I,k),N=>n.nextTick(I,N||k))};async function _(k){const I=k!=null,N=typeof b.throw=="function";if(I&&N){const{value:F,done:j}=await b.throw(k);if(await F,j)return}if(typeof b.return=="function"){const{value:F}=await b.return();await F}}async function C(){for(;;){try{const{value:k,done:I}=x?await b.next():b.next();if(I)T.push(null);else{const N=k&&typeof k.then=="function"?await k:k;if(N===null)throw S=!1,new u;if(T.push(N))continue;S=!1}}catch(k){T.destroy(k)}break}}return T}return from_1=c,from_1}var readable,hasRequiredReadable;function requireReadable(){if(hasRequiredReadable)return readable;hasRequiredReadable=1;const n=requireBrowser$1(),{ArrayPrototypeIndexOf:r,NumberIsInteger:s,NumberIsNaN:a,NumberParseInt:l,ObjectDefineProperties:d,ObjectKeys:u,ObjectSetPrototypeOf:c,Promise:p,SafeSet:h,SymbolAsyncDispose:y,SymbolAsyncIterator:b,Symbol:x}=requirePrimordials();readable=ze,ze.ReadableState=$e;const{EventEmitter:T}=requireEvents(),{Stream:S,prependListener:_}=requireLegacy(),{Buffer:C}=requireBuffer(),{addAbortSignal:k}=requireAddAbortSignal(),I=requireEndOfStream();let N=requireUtil().debuglog("stream",G=>{N=G});const F=requireBuffer_list(),j=requireDestroy(),{getHighWaterMark:V,getDefaultHighWaterMark:M}=requireState(),{aggregateTwoErrors:q,codes:{ERR_INVALID_ARG_TYPE:Se,ERR_METHOD_NOT_IMPLEMENTED:Q,ERR_OUT_OF_RANGE:ee,ERR_STREAM_PUSH_AFTER_EOF:we,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:he},AbortError:He}=requireErrors(),{validateObject:Je}=requireValidators(),de=x("kPaused"),{StringDecoder:Be}=requireString_decoder(),me=requireFrom();c(ze.prototype,S.prototype),c(ze,S);const Ue=()=>{},{errorOrDestroy:W}=j,z=1,Z=2,ce=4,Ie=8,Fe=16,at=32,nt=64,Ce=128,ke=256,De=512,mt=1024,tt=2048,oe=4096,pe=8192,Re=16384,Ze=32768,Qe=65536,Ye=1<<17,fe=1<<18;function Le(G){return{enumerable:!1,get(){return(this.state&G)!==0},set(Y){Y?this.state|=G:this.state&=~G}}}d($e.prototype,{objectMode:Le(z),ended:Le(Z),endEmitted:Le(ce),reading:Le(Ie),constructed:Le(Fe),sync:Le(at),needReadable:Le(nt),emittedReadable:Le(Ce),readableListening:Le(ke),resumeScheduled:Le(De),errorEmitted:Le(mt),emitClose:Le(tt),autoDestroy:Le(oe),destroyed:Le(pe),closed:Le(Re),closeEmitted:Le(Ze),multiAwaitDrain:Le(Qe),readingMore:Le(Ye),dataEmitted:Le(fe)});function $e(G,Y,We){typeof We!="boolean"&&(We=Y instanceof requireDuplex()),this.state=tt|oe|Fe|at,G&&G.objectMode&&(this.state|=z),We&&G&&G.readableObjectMode&&(this.state|=z),this.highWaterMark=G?V(this,G,"readableHighWaterMark",We):M(!1),this.buffer=new F,this.length=0,this.pipes=[],this.flowing=null,this[de]=null,G&&G.emitClose===!1&&(this.state&=~tt),G&&G.autoDestroy===!1&&(this.state&=~oe),this.errored=null,this.defaultEncoding=G&&G.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,G&&G.encoding&&(this.decoder=new Be(G.encoding),this.encoding=G.encoding)}function ze(G){if(!(this instanceof ze))return new ze(G);const Y=this instanceof requireDuplex();this._readableState=new $e(G,this,Y),G&&(typeof G.read=="function"&&(this._read=G.read),typeof G.destroy=="function"&&(this._destroy=G.destroy),typeof G.construct=="function"&&(this._construct=G.construct),G.signal&&!Y&&k(G.signal,this)),S.call(this,G),j.construct(this,()=>{this._readableState.needReadable&&ue(this,this._readableState)})}ze.prototype.destroy=j.destroy,ze.prototype._undestroy=j.undestroy,ze.prototype._destroy=function(G,Y){Y(G)},ze.prototype[T.captureRejectionSymbol]=function(G){this.destroy(G)},ze.prototype[y]=function(){let G;return this.destroyed||(G=this.readableEnded?null:new He,this.destroy(G)),new p((Y,We)=>I(this,et=>et&&et!==G?We(et):Y(null)))},ze.prototype.push=function(G,Y){return ft(this,G,Y,!1)},ze.prototype.unshift=function(G,Y){return ft(this,G,Y,!0)};function ft(G,Y,We,et){N("readableAddChunk",Y);const ct=G._readableState;let xt;if((ct.state&z)===0&&(typeof Y=="string"?(We=We||ct.defaultEncoding,ct.encoding!==We&&(et&&ct.encoding?Y=C.from(Y,We).toString(ct.encoding):(Y=C.from(Y,We),We=""))):Y instanceof C?We="":S._isUint8Array(Y)?(Y=S._uint8ArrayToBuffer(Y),We=""):Y!=null&&(xt=new Se("chunk",["string","Buffer","Uint8Array"],Y))),xt)W(G,xt);else if(Y===null)ct.state&=~Ie,w(G,ct);else if((ct.state&z)!==0||Y&&Y.length>0)if(et)if((ct.state&ce)!==0)W(G,new he);else{if(ct.destroyed||ct.errored)return!1;Dt(G,ct,Y,!0)}else if(ct.ended)W(G,new we);else{if(ct.destroyed||ct.errored)return!1;ct.state&=~Ie,ct.decoder&&!We?(Y=ct.decoder.write(Y),ct.objectMode||Y.length!==0?Dt(G,ct,Y,!1):ue(G,ct)):Dt(G,ct,Y,!1)}else et||(ct.state&=~Ie,ue(G,ct));return!ct.ended&&(ct.length<ct.highWaterMark||ct.length===0)}function Dt(G,Y,We,et){Y.flowing&&Y.length===0&&!Y.sync&&G.listenerCount("data")>0?((Y.state&Qe)!==0?Y.awaitDrainWriters.clear():Y.awaitDrainWriters=null,Y.dataEmitted=!0,G.emit("data",We)):(Y.length+=Y.objectMode?1:We.length,et?Y.buffer.unshift(We):Y.buffer.push(We),(Y.state&nt)!==0&&R(G)),ue(G,Y)}ze.prototype.isPaused=function(){const G=this._readableState;return G[de]===!0||G.flowing===!1},ze.prototype.setEncoding=function(G){const Y=new Be(G);this._readableState.decoder=Y,this._readableState.encoding=this._readableState.decoder.encoding;const We=this._readableState.buffer;let et="";for(const ct of We)et+=Y.write(ct);return We.clear(),et!==""&&We.push(et),this._readableState.length=et.length,this};const Rt=1073741824;function kt(G){if(G>Rt)throw new ee("size","<= 1GiB",G);return G--,G|=G>>>1,G|=G>>>2,G|=G>>>4,G|=G>>>8,G|=G>>>16,G++,G}function O(G,Y){return G<=0||Y.length===0&&Y.ended?0:(Y.state&z)!==0?1:a(G)?Y.flowing&&Y.length?Y.buffer.first().length:Y.length:G<=Y.length?G:Y.ended?Y.length:0}ze.prototype.read=function(G){N("read",G),G===void 0?G=NaN:s(G)||(G=l(G,10));const Y=this._readableState,We=G;if(G>Y.highWaterMark&&(Y.highWaterMark=kt(G)),G!==0&&(Y.state&=~Ce),G===0&&Y.needReadable&&((Y.highWaterMark!==0?Y.length>=Y.highWaterMark:Y.length>0)||Y.ended))return N("read: emitReadable",Y.length,Y.ended),Y.length===0&&Y.ended?mr(this):R(this),null;if(G=O(G,Y),G===0&&Y.ended)return Y.length===0&&mr(this),null;let et=(Y.state&nt)!==0;if(N("need readable",et),(Y.length===0||Y.length-G<Y.highWaterMark)&&(et=!0,N("length less than watermark",et)),Y.ended||Y.reading||Y.destroyed||Y.errored||!Y.constructed)et=!1,N("reading, ended or constructing",et);else if(et){N("do read"),Y.state|=Ie|at,Y.length===0&&(Y.state|=nt);try{this._read(Y.highWaterMark)}catch(xt){W(this,xt)}Y.state&=~at,Y.reading||(G=O(We,Y))}let ct;return G>0?ct=hr(G,Y):ct=null,ct===null?(Y.needReadable=Y.length<=Y.highWaterMark,G=0):(Y.length-=G,Y.multiAwaitDrain?Y.awaitDrainWriters.clear():Y.awaitDrainWriters=null),Y.length===0&&(Y.ended||(Y.needReadable=!0),We!==G&&Y.ended&&mr(this)),ct!==null&&!Y.errorEmitted&&!Y.closeEmitted&&(Y.dataEmitted=!0,this.emit("data",ct)),ct};function w(G,Y){if(N("onEofChunk"),!Y.ended){if(Y.decoder){const We=Y.decoder.end();We&&We.length&&(Y.buffer.push(We),Y.length+=Y.objectMode?1:We.length)}Y.ended=!0,Y.sync?R(G):(Y.needReadable=!1,Y.emittedReadable=!0,K(G))}}function R(G){const Y=G._readableState;N("emitReadable",Y.needReadable,Y.emittedReadable),Y.needReadable=!1,Y.emittedReadable||(N("emitReadable",Y.flowing),Y.emittedReadable=!0,n.nextTick(K,G))}function K(G){const Y=G._readableState;N("emitReadable_",Y.destroyed,Y.length,Y.ended),!Y.destroyed&&!Y.errored&&(Y.length||Y.ended)&&(G.emit("readable"),Y.emittedReadable=!1),Y.needReadable=!Y.flowing&&!Y.ended&&Y.length<=Y.highWaterMark,_t(G)}function ue(G,Y){!Y.readingMore&&Y.constructed&&(Y.readingMore=!0,n.nextTick(xe,G,Y))}function xe(G,Y){for(;!Y.reading&&!Y.ended&&(Y.length<Y.highWaterMark||Y.flowing&&Y.length===0);){const We=Y.length;if(N("maybeReadMore read 0"),G.read(0),We===Y.length)break}Y.readingMore=!1}ze.prototype._read=function(G){throw new Q("_read()")},ze.prototype.pipe=function(G,Y){const We=this,et=this._readableState;et.pipes.length===1&&(et.multiAwaitDrain||(et.multiAwaitDrain=!0,et.awaitDrainWriters=new h(et.awaitDrainWriters?[et.awaitDrainWriters]:[]))),et.pipes.push(G),N("pipe count=%d opts=%j",et.pipes.length,Y);const xt=(!Y||Y.end!==!1)&&G!==n.stdout&&G!==n.stderr?fi:Or;et.endEmitted?n.nextTick(xt):We.once("end",xt),G.on("unpipe",qt);function qt(vn,Pn){N("onunpipe"),vn===We&&Pn&&Pn.hasUnpiped===!1&&(Pn.hasUnpiped=!0,Pr())}function fi(){N("onend"),G.end()}let kn,xr=!1;function Pr(){N("cleanup"),G.removeListener("close",gn),G.removeListener("finish",tr),kn&&G.removeListener("drain",kn),G.removeListener("error",Jt),G.removeListener("unpipe",qt),We.removeListener("end",fi),We.removeListener("end",Or),We.removeListener("data",Ht),xr=!0,kn&&et.awaitDrainWriters&&(!G._writableState||G._writableState.needDrain)&&kn()}function Gn(){xr||(et.pipes.length===1&&et.pipes[0]===G?(N("false write response, pause",0),et.awaitDrainWriters=G,et.multiAwaitDrain=!1):et.pipes.length>1&&et.pipes.includes(G)&&(N("false write response, pause",et.awaitDrainWriters.size),et.awaitDrainWriters.add(G)),We.pause()),kn||(kn=Pe(We,G),G.on("drain",kn))}We.on("data",Ht);function Ht(vn){N("ondata");const Pn=G.write(vn);N("dest.write",Pn),Pn===!1&&Gn()}function Jt(vn){if(N("onerror",vn),Or(),G.removeListener("error",Jt),G.listenerCount("error")===0){const Pn=G._writableState||G._readableState;Pn&&!Pn.errorEmitted?W(G,vn):G.emit("error",vn)}}_(G,"error",Jt);function gn(){G.removeListener("finish",tr),Or()}G.once("close",gn);function tr(){N("onfinish"),G.removeListener("close",gn),Or()}G.once("finish",tr);function Or(){N("unpipe"),We.unpipe(G)}return G.emit("pipe",We),G.writableNeedDrain===!0?Gn():et.flowing||(N("pipe resume"),We.resume()),G};function Pe(G,Y){return function(){const et=G._readableState;et.awaitDrainWriters===Y?(N("pipeOnDrain",1),et.awaitDrainWriters=null):et.multiAwaitDrain&&(N("pipeOnDrain",et.awaitDrainWriters.size),et.awaitDrainWriters.delete(Y)),(!et.awaitDrainWriters||et.awaitDrainWriters.size===0)&&G.listenerCount("data")&&G.resume()}}ze.prototype.unpipe=function(G){const Y=this._readableState,We={hasUnpiped:!1};if(Y.pipes.length===0)return this;if(!G){const ct=Y.pipes;Y.pipes=[],this.pause();for(let xt=0;xt<ct.length;xt++)ct[xt].emit("unpipe",this,{hasUnpiped:!1});return this}const et=r(Y.pipes,G);return et===-1?this:(Y.pipes.splice(et,1),Y.pipes.length===0&&this.pause(),G.emit("unpipe",this,We),this)},ze.prototype.on=function(G,Y){const We=S.prototype.on.call(this,G,Y),et=this._readableState;return G==="data"?(et.readableListening=this.listenerCount("readable")>0,et.flowing!==!1&&this.resume()):G==="readable"&&!et.endEmitted&&!et.readableListening&&(et.readableListening=et.needReadable=!0,et.flowing=!1,et.emittedReadable=!1,N("on readable",et.length,et.reading),et.length?R(this):et.reading||n.nextTick(St,this)),We},ze.prototype.addListener=ze.prototype.on,ze.prototype.removeListener=function(G,Y){const We=S.prototype.removeListener.call(this,G,Y);return G==="readable"&&n.nextTick(pt,this),We},ze.prototype.off=ze.prototype.removeListener,ze.prototype.removeAllListeners=function(G){const Y=S.prototype.removeAllListeners.apply(this,arguments);return(G==="readable"||G===void 0)&&n.nextTick(pt,this),Y};function pt(G){const Y=G._readableState;Y.readableListening=G.listenerCount("readable")>0,Y.resumeScheduled&&Y[de]===!1?Y.flowing=!0:G.listenerCount("data")>0?G.resume():Y.readableListening||(Y.flowing=null)}function St(G){N("readable nexttick read 0"),G.read(0)}ze.prototype.resume=function(){const G=this._readableState;return G.flowing||(N("resume"),G.flowing=!G.readableListening,Ke(this,G)),G[de]=!1,this};function Ke(G,Y){Y.resumeScheduled||(Y.resumeScheduled=!0,n.nextTick(Lt,G,Y))}function Lt(G,Y){N("resume",Y.reading),Y.reading||G.read(0),Y.resumeScheduled=!1,G.emit("resume"),_t(G),Y.flowing&&!Y.reading&&G.read(0)}ze.prototype.pause=function(){return N("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(N("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[de]=!0,this};function _t(G){const Y=G._readableState;for(N("flow",Y.flowing);Y.flowing&&G.read()!==null;);}ze.prototype.wrap=function(G){let Y=!1;G.on("data",et=>{!this.push(et)&&G.pause&&(Y=!0,G.pause())}),G.on("end",()=>{this.push(null)}),G.on("error",et=>{W(this,et)}),G.on("close",()=>{this.destroy()}),G.on("destroy",()=>{this.destroy()}),this._read=()=>{Y&&G.resume&&(Y=!1,G.resume())};const We=u(G);for(let et=1;et<We.length;et++){const ct=We[et];this[ct]===void 0&&typeof G[ct]=="function"&&(this[ct]=G[ct].bind(G))}return this},ze.prototype[b]=function(){return Br(this)},ze.prototype.iterator=function(G){return G!==void 0&&Je(G,"options"),Br(this,G)};function Br(G,Y){typeof G.read!="function"&&(G=ze.wrap(G,{objectMode:!0}));const We=st(G,Y);return We.stream=G,We}async function*st(G,Y){let We=Ue;function et(qt){this===G?(We(),We=Ue):We=qt}G.on("readable",et);let ct;const xt=I(G,{writable:!1},qt=>{ct=qt?q(ct,qt):null,We(),We=Ue});try{for(;;){const qt=G.destroyed?null:G.read();if(qt!==null)yield qt;else{if(ct)throw ct;if(ct===null)return;await new p(et)}}}catch(qt){throw ct=q(ct,qt),ct}finally{(ct||(Y==null?void 0:Y.destroyOnReturn)!==!1)&&(ct===void 0||G._readableState.autoDestroy)?j.destroyer(G,null):(G.off("readable",et),xt())}}d(ze.prototype,{readable:{__proto__:null,get(){const G=this._readableState;return!!G&&G.readable!==!1&&!G.destroyed&&!G.errorEmitted&&!G.endEmitted},set(G){this._readableState&&(this._readableState.readable=!!G)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(G){this._readableState&&(this._readableState.flowing=G)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(G){this._readableState&&(this._readableState.destroyed=G)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),d($e.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[de]!==!1},set(G){this[de]=!!G}}}),ze._fromList=hr;function hr(G,Y){if(Y.length===0)return null;let We;return Y.objectMode?We=Y.buffer.shift():!G||G>=Y.length?(Y.decoder?We=Y.buffer.join(""):Y.buffer.length===1?We=Y.buffer.first():We=Y.buffer.concat(Y.length),Y.buffer.clear()):We=Y.buffer.consume(G,Y.decoder),We}function mr(G){const Y=G._readableState;N("endReadable",Y.endEmitted),Y.endEmitted||(Y.ended=!0,n.nextTick(Vn,Y,G))}function Vn(G,Y){if(N("endReadableNT",G.endEmitted,G.length),!G.errored&&!G.closeEmitted&&!G.endEmitted&&G.length===0){if(G.endEmitted=!0,Y.emit("end"),Y.writable&&Y.allowHalfOpen===!1)n.nextTick(Ir,Y);else if(G.autoDestroy){const We=Y._writableState;(!We||We.autoDestroy&&(We.finished||We.writable===!1))&&Y.destroy()}}}function Ir(G){G.writable&&!G.writableEnded&&!G.destroyed&&G.end()}ze.from=function(G,Y){return me(ze,G,Y)};let Hn;function va(){return Hn===void 0&&(Hn={}),Hn}return ze.fromWeb=function(G,Y){return va().newStreamReadableFromReadableStream(G,Y)},ze.toWeb=function(G,Y){return va().newReadableStreamFromStreamReadable(G,Y)},ze.wrap=function(G,Y){var We,et;return new ze({objectMode:(We=(et=G.readableObjectMode)!==null&&et!==void 0?et:G.objectMode)!==null&&We!==void 0?We:!0,...Y,destroy(ct,xt){j.destroyer(G,ct),xt(ct)}}).wrap(G)},readable}var writable,hasRequiredWritable;function requireWritable(){if(hasRequiredWritable)return writable;hasRequiredWritable=1;const n=requireBrowser$1(),{ArrayPrototypeSlice:r,Error:s,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:l,ObjectDefineProperties:d,ObjectSetPrototypeOf:u,StringPrototypeToLowerCase:c,Symbol:p,SymbolHasInstance:h}=requirePrimordials();writable=Je,Je.WritableState=he;const{EventEmitter:y}=requireEvents(),b=requireLegacy().Stream,{Buffer:x}=requireBuffer(),T=requireDestroy(),{addAbortSignal:S}=requireAddAbortSignal(),{getHighWaterMark:_,getDefaultHighWaterMark:C}=requireState(),{ERR_INVALID_ARG_TYPE:k,ERR_METHOD_NOT_IMPLEMENTED:I,ERR_MULTIPLE_CALLBACK:N,ERR_STREAM_CANNOT_PIPE:F,ERR_STREAM_DESTROYED:j,ERR_STREAM_ALREADY_FINISHED:V,ERR_STREAM_NULL_VALUES:M,ERR_STREAM_WRITE_AFTER_END:q,ERR_UNKNOWN_ENCODING:Se}=requireErrors().codes,{errorOrDestroy:Q}=T;u(Je.prototype,b.prototype),u(Je,b);function ee(){}const we=p("kOnFinished");function he(oe,pe,Re){typeof Re!="boolean"&&(Re=pe instanceof requireDuplex()),this.objectMode=!!(oe&&oe.objectMode),Re&&(this.objectMode=this.objectMode||!!(oe&&oe.writableObjectMode)),this.highWaterMark=oe?_(this,oe,"writableHighWaterMark",Re):C(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Ze=!!(oe&&oe.decodeStrings===!1);this.decodeStrings=!Ze,this.defaultEncoding=oe&&oe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=W.bind(void 0,pe),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,He(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!oe||oe.emitClose!==!1,this.autoDestroy=!oe||oe.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[we]=[]}function He(oe){oe.buffered=[],oe.bufferedIndex=0,oe.allBuffers=!0,oe.allNoop=!0}he.prototype.getBuffer=function(){return r(this.buffered,this.bufferedIndex)},l(he.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Je(oe){const pe=this instanceof requireDuplex();if(!pe&&!a(Je,this))return new Je(oe);this._writableState=new he(oe,this,pe),oe&&(typeof oe.write=="function"&&(this._write=oe.write),typeof oe.writev=="function"&&(this._writev=oe.writev),typeof oe.destroy=="function"&&(this._destroy=oe.destroy),typeof oe.final=="function"&&(this._final=oe.final),typeof oe.construct=="function"&&(this._construct=oe.construct),oe.signal&&S(oe.signal,this)),b.call(this,oe),T.construct(this,()=>{const Re=this._writableState;Re.writing||Ie(this,Re),Ce(this,Re)})}l(Je,h,{__proto__:null,value:function(oe){return a(this,oe)?!0:this!==Je?!1:oe&&oe._writableState instanceof he}}),Je.prototype.pipe=function(){Q(this,new F)};function de(oe,pe,Re,Ze){const Qe=oe._writableState;if(typeof Re=="function")Ze=Re,Re=Qe.defaultEncoding;else{if(!Re)Re=Qe.defaultEncoding;else if(Re!=="buffer"&&!x.isEncoding(Re))throw new Se(Re);typeof Ze!="function"&&(Ze=ee)}if(pe===null)throw new M;if(!Qe.objectMode)if(typeof pe=="string")Qe.decodeStrings!==!1&&(pe=x.from(pe,Re),Re="buffer");else if(pe instanceof x)Re="buffer";else if(b._isUint8Array(pe))pe=b._uint8ArrayToBuffer(pe),Re="buffer";else throw new k("chunk",["string","Buffer","Uint8Array"],pe);let Ye;return Qe.ending?Ye=new q:Qe.destroyed&&(Ye=new j("write")),Ye?(n.nextTick(Ze,Ye),Q(oe,Ye,!0),Ye):(Qe.pendingcb++,Be(oe,Qe,pe,Re,Ze))}Je.prototype.write=function(oe,pe,Re){return de(this,oe,pe,Re)===!0},Je.prototype.cork=function(){this._writableState.corked++},Je.prototype.uncork=function(){const oe=this._writableState;oe.corked&&(oe.corked--,oe.writing||Ie(this,oe))},Je.prototype.setDefaultEncoding=function(pe){if(typeof pe=="string"&&(pe=c(pe)),!x.isEncoding(pe))throw new Se(pe);return this._writableState.defaultEncoding=pe,this};function Be(oe,pe,Re,Ze,Qe){const Ye=pe.objectMode?1:Re.length;pe.length+=Ye;const fe=pe.length<pe.highWaterMark;return fe||(pe.needDrain=!0),pe.writing||pe.corked||pe.errored||!pe.constructed?(pe.buffered.push({chunk:Re,encoding:Ze,callback:Qe}),pe.allBuffers&&Ze!=="buffer"&&(pe.allBuffers=!1),pe.allNoop&&Qe!==ee&&(pe.allNoop=!1)):(pe.writelen=Ye,pe.writecb=Qe,pe.writing=!0,pe.sync=!0,oe._write(Re,Ze,pe.onwrite),pe.sync=!1),fe&&!pe.errored&&!pe.destroyed}function me(oe,pe,Re,Ze,Qe,Ye,fe){pe.writelen=Ze,pe.writecb=fe,pe.writing=!0,pe.sync=!0,pe.destroyed?pe.onwrite(new j("write")):Re?oe._writev(Qe,pe.onwrite):oe._write(Qe,Ye,pe.onwrite),pe.sync=!1}function Ue(oe,pe,Re,Ze){--pe.pendingcb,Ze(Re),ce(pe),Q(oe,Re)}function W(oe,pe){const Re=oe._writableState,Ze=Re.sync,Qe=Re.writecb;if(typeof Qe!="function"){Q(oe,new N);return}Re.writing=!1,Re.writecb=null,Re.length-=Re.writelen,Re.writelen=0,pe?(pe.stack,Re.errored||(Re.errored=pe),oe._readableState&&!oe._readableState.errored&&(oe._readableState.errored=pe),Ze?n.nextTick(Ue,oe,Re,pe,Qe):Ue(oe,Re,pe,Qe)):(Re.buffered.length>Re.bufferedIndex&&Ie(oe,Re),Ze?Re.afterWriteTickInfo!==null&&Re.afterWriteTickInfo.cb===Qe?Re.afterWriteTickInfo.count++:(Re.afterWriteTickInfo={count:1,cb:Qe,stream:oe,state:Re},n.nextTick(z,Re.afterWriteTickInfo)):Z(oe,Re,1,Qe))}function z({stream:oe,state:pe,count:Re,cb:Ze}){return pe.afterWriteTickInfo=null,Z(oe,pe,Re,Ze)}function Z(oe,pe,Re,Ze){for(!pe.ending&&!oe.destroyed&&pe.length===0&&pe.needDrain&&(pe.needDrain=!1,oe.emit("drain"));Re-- >0;)pe.pendingcb--,Ze();pe.destroyed&&ce(pe),Ce(oe,pe)}function ce(oe){if(oe.writing)return;for(let Qe=oe.bufferedIndex;Qe<oe.buffered.length;++Qe){var pe;const{chunk:Ye,callback:fe}=oe.buffered[Qe],Le=oe.objectMode?1:Ye.length;oe.length-=Le,fe((pe=oe.errored)!==null&&pe!==void 0?pe:new j("write"))}const Re=oe[we].splice(0);for(let Qe=0;Qe<Re.length;Qe++){var Ze;Re[Qe]((Ze=oe.errored)!==null&&Ze!==void 0?Ze:new j("end"))}He(oe)}function Ie(oe,pe){if(pe.corked||pe.bufferProcessing||pe.destroyed||!pe.constructed)return;const{buffered:Re,bufferedIndex:Ze,objectMode:Qe}=pe,Ye=Re.length-Ze;if(!Ye)return;let fe=Ze;if(pe.bufferProcessing=!0,Ye>1&&oe._writev){pe.pendingcb-=Ye-1;const Le=pe.allNoop?ee:ze=>{for(let ft=fe;ft<Re.length;++ft)Re[ft].callback(ze)},$e=pe.allNoop&&fe===0?Re:r(Re,fe);$e.allBuffers=pe.allBuffers,me(oe,pe,!0,pe.length,$e,"",Le),He(pe)}else{do{const{chunk:Le,encoding:$e,callback:ze}=Re[fe];Re[fe++]=null;const ft=Qe?1:Le.length;me(oe,pe,!1,ft,Le,$e,ze)}while(fe<Re.length&&!pe.writing);fe===Re.length?He(pe):fe>256?(Re.splice(0,fe),pe.bufferedIndex=0):pe.bufferedIndex=fe}pe.bufferProcessing=!1}Je.prototype._write=function(oe,pe,Re){if(this._writev)this._writev([{chunk:oe,encoding:pe}],Re);else throw new I("_write()")},Je.prototype._writev=null,Je.prototype.end=function(oe,pe,Re){const Ze=this._writableState;typeof oe=="function"?(Re=oe,oe=null,pe=null):typeof pe=="function"&&(Re=pe,pe=null);let Qe;if(oe!=null){const Ye=de(this,oe,pe);Ye instanceof s&&(Qe=Ye)}return Ze.corked&&(Ze.corked=1,this.uncork()),Qe||(!Ze.errored&&!Ze.ending?(Ze.ending=!0,Ce(this,Ze,!0),Ze.ended=!0):Ze.finished?Qe=new V("end"):Ze.destroyed&&(Qe=new j("end"))),typeof Re=="function"&&(Qe||Ze.finished?n.nextTick(Re,Qe):Ze[we].push(Re)),this};function Fe(oe){return oe.ending&&!oe.destroyed&&oe.constructed&&oe.length===0&&!oe.errored&&oe.buffered.length===0&&!oe.finished&&!oe.writing&&!oe.errorEmitted&&!oe.closeEmitted}function at(oe,pe){let Re=!1;function Ze(Qe){if(Re){Q(oe,Qe??N());return}if(Re=!0,pe.pendingcb--,Qe){const Ye=pe[we].splice(0);for(let fe=0;fe<Ye.length;fe++)Ye[fe](Qe);Q(oe,Qe,pe.sync)}else Fe(pe)&&(pe.prefinished=!0,oe.emit("prefinish"),pe.pendingcb++,n.nextTick(ke,oe,pe))}pe.sync=!0,pe.pendingcb++;try{oe._final(Ze)}catch(Qe){Ze(Qe)}pe.sync=!1}function nt(oe,pe){!pe.prefinished&&!pe.finalCalled&&(typeof oe._final=="function"&&!pe.destroyed?(pe.finalCalled=!0,at(oe,pe)):(pe.prefinished=!0,oe.emit("prefinish")))}function Ce(oe,pe,Re){Fe(pe)&&(nt(oe,pe),pe.pendingcb===0&&(Re?(pe.pendingcb++,n.nextTick((Ze,Qe)=>{Fe(Qe)?ke(Ze,Qe):Qe.pendingcb--},oe,pe)):Fe(pe)&&(pe.pendingcb++,ke(oe,pe))))}function ke(oe,pe){pe.pendingcb--,pe.finished=!0;const Re=pe[we].splice(0);for(let Ze=0;Ze<Re.length;Ze++)Re[Ze]();if(oe.emit("finish"),pe.autoDestroy){const Ze=oe._readableState;(!Ze||Ze.autoDestroy&&(Ze.endEmitted||Ze.readable===!1))&&oe.destroy()}}d(Je.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(oe){this._writableState&&(this._writableState.destroyed=oe)}},writable:{__proto__:null,get(){const oe=this._writableState;return!!oe&&oe.writable!==!1&&!oe.destroyed&&!oe.errored&&!oe.ending&&!oe.ended},set(oe){this._writableState&&(this._writableState.writable=!!oe)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const oe=this._writableState;return oe?!oe.destroyed&&!oe.ending&&oe.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const De=T.destroy;Je.prototype.destroy=function(oe,pe){const Re=this._writableState;return!Re.destroyed&&(Re.bufferedIndex<Re.buffered.length||Re[we].length)&&n.nextTick(ce,Re),De.call(this,oe,pe),this},Je.prototype._undestroy=T.undestroy,Je.prototype._destroy=function(oe,pe){pe(oe)},Je.prototype[y.captureRejectionSymbol]=function(oe){this.destroy(oe)};let mt;function tt(){return mt===void 0&&(mt={}),mt}return Je.fromWeb=function(oe,pe){return tt().newStreamWritableFromWritableStream(oe,pe)},Je.toWeb=function(oe){return tt().newWritableStreamFromStreamWritable(oe)},writable}var duplexify,hasRequiredDuplexify;function requireDuplexify(){if(hasRequiredDuplexify)return duplexify;hasRequiredDuplexify=1;const n=requireBrowser$1(),r=requireBuffer(),{isReadable:s,isWritable:a,isIterable:l,isNodeStream:d,isReadableNodeStream:u,isWritableNodeStream:c,isDuplexNodeStream:p,isReadableStream:h,isWritableStream:y}=requireUtils(),b=requireEndOfStream(),{AbortError:x,codes:{ERR_INVALID_ARG_TYPE:T,ERR_INVALID_RETURN_VALUE:S}}=requireErrors(),{destroyer:_}=requireDestroy(),C=requireDuplex(),k=requireReadable(),I=requireWritable(),{createDeferredPromise:N}=requireUtil(),F=requireFrom(),j=globalThis.Blob||r.Blob,V=typeof j<"u"?function(he){return he instanceof j}:function(he){return!1},M=globalThis.AbortController||requireBrowser$2().AbortController,{FunctionPrototypeCall:q}=requirePrimordials();class Se extends C{constructor(he){super(he),(he==null?void 0:he.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(he==null?void 0:he.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}duplexify=function we(he,He){if(p(he))return he;if(u(he))return ee({readable:he});if(c(he))return ee({writable:he});if(d(he))return ee({writable:!1,readable:!1});if(h(he))return ee({readable:k.fromWeb(he)});if(y(he))return ee({writable:I.fromWeb(he)});if(typeof he=="function"){const{value:de,write:Be,final:me,destroy:Ue}=Q(he);if(l(de))return F(Se,de,{objectMode:!0,write:Be,final:me,destroy:Ue});const W=de==null?void 0:de.then;if(typeof W=="function"){let z;const Z=q(W,de,ce=>{if(ce!=null)throw new S("nully","body",ce)},ce=>{_(z,ce)});return z=new Se({objectMode:!0,readable:!1,write:Be,final(ce){me(async()=>{try{await Z,n.nextTick(ce,null)}catch(Ie){n.nextTick(ce,Ie)}})},destroy:Ue})}throw new S("Iterable, AsyncIterable or AsyncFunction",He,de)}if(V(he))return we(he.arrayBuffer());if(l(he))return F(Se,he,{objectMode:!0,writable:!1});if(h(he==null?void 0:he.readable)&&y(he==null?void 0:he.writable))return Se.fromWeb(he);if(typeof(he==null?void 0:he.writable)=="object"||typeof(he==null?void 0:he.readable)=="object"){const de=he!=null&&he.readable?u(he==null?void 0:he.readable)?he==null?void 0:he.readable:we(he.readable):void 0,Be=he!=null&&he.writable?c(he==null?void 0:he.writable)?he==null?void 0:he.writable:we(he.writable):void 0;return ee({readable:de,writable:Be})}const Je=he==null?void 0:he.then;if(typeof Je=="function"){let de;return q(Je,he,Be=>{Be!=null&&de.push(Be),de.push(null)},Be=>{_(de,Be)}),de=new Se({objectMode:!0,writable:!1,read(){}})}throw new T(He,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],he)};function Q(we){let{promise:he,resolve:He}=N();const Je=new M,de=Je.signal;return{value:we((async function*(){for(;;){const me=he;he=null;const{chunk:Ue,done:W,cb:z}=await me;if(n.nextTick(z),W)return;if(de.aborted)throw new x(void 0,{cause:de.reason});({promise:he,resolve:He}=N()),yield Ue}})(),{signal:de}),write(me,Ue,W){const z=He;He=null,z({chunk:me,done:!1,cb:W})},final(me){const Ue=He;He=null,Ue({done:!0,cb:me})},destroy(me,Ue){Je.abort(),Ue(me)}}}function ee(we){const he=we.readable&&typeof we.readable.read!="function"?k.wrap(we.readable):we.readable,He=we.writable;let Je=!!s(he),de=!!a(He),Be,me,Ue,W,z;function Z(ce){const Ie=W;W=null,Ie?Ie(ce):ce&&z.destroy(ce)}return z=new Se({readableObjectMode:!!(he!=null&&he.readableObjectMode),writableObjectMode:!!(He!=null&&He.writableObjectMode),readable:Je,writable:de}),de&&(b(He,ce=>{de=!1,ce&&_(he,ce),Z(ce)}),z._write=function(ce,Ie,Fe){He.write(ce,Ie)?Fe():Be=Fe},z._final=function(ce){He.end(),me=ce},He.on("drain",function(){if(Be){const ce=Be;Be=null,ce()}}),He.on("finish",function(){if(me){const ce=me;me=null,ce()}})),Je&&(b(he,ce=>{Je=!1,ce&&_(he,ce),Z(ce)}),he.on("readable",function(){if(Ue){const ce=Ue;Ue=null,ce()}}),he.on("end",function(){z.push(null)}),z._read=function(){for(;;){const ce=he.read();if(ce===null){Ue=z._read;return}if(!z.push(ce))return}}),z._destroy=function(ce,Ie){!ce&&W!==null&&(ce=new x),Ue=null,Be=null,me=null,W===null?Ie(ce):(W=Ie,_(He,ce),_(he,ce))},z}return duplexify}var duplex,hasRequiredDuplex;function requireDuplex(){if(hasRequiredDuplex)return duplex;hasRequiredDuplex=1;const{ObjectDefineProperties:n,ObjectGetOwnPropertyDescriptor:r,ObjectKeys:s,ObjectSetPrototypeOf:a}=requirePrimordials();duplex=u;const l=requireReadable(),d=requireWritable();a(u.prototype,l.prototype),a(u,l);{const y=s(d.prototype);for(let b=0;b<y.length;b++){const x=y[b];u.prototype[x]||(u.prototype[x]=d.prototype[x])}}function u(y){if(!(this instanceof u))return new u(y);l.call(this,y),d.call(this,y),y?(this.allowHalfOpen=y.allowHalfOpen!==!1,y.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),y.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}n(u.prototype,{writable:{__proto__:null,...r(d.prototype,"writable")},writableHighWaterMark:{__proto__:null,...r(d.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...r(d.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...r(d.prototype,"writableBuffer")},writableLength:{__proto__:null,...r(d.prototype,"writableLength")},writableFinished:{__proto__:null,...r(d.prototype,"writableFinished")},writableCorked:{__proto__:null,...r(d.prototype,"writableCorked")},writableEnded:{__proto__:null,...r(d.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...r(d.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(y){this._readableState&&this._writableState&&(this._readableState.destroyed=y,this._writableState.destroyed=y)}}});let c;function p(){return c===void 0&&(c={}),c}u.fromWeb=function(y,b){return p().newStreamDuplexFromReadableWritablePair(y,b)},u.toWeb=function(y){return p().newReadableWritablePairFromDuplex(y)};let h;return u.from=function(y){return h||(h=requireDuplexify()),h(y,"body")},duplex}var transform,hasRequiredTransform;function requireTransform(){if(hasRequiredTransform)return transform;hasRequiredTransform=1;const{ObjectSetPrototypeOf:n,Symbol:r}=requirePrimordials();transform=u;const{ERR_METHOD_NOT_IMPLEMENTED:s}=requireErrors().codes,a=requireDuplex(),{getHighWaterMark:l}=requireState();n(u.prototype,a.prototype),n(u,a);const d=r("kCallback");function u(h){if(!(this instanceof u))return new u(h);const y=h?l(this,h,"readableHighWaterMark",!0):null;y===0&&(h={...h,highWaterMark:null,readableHighWaterMark:y,writableHighWaterMark:h.writableHighWaterMark||0}),a.call(this,h),this._readableState.sync=!1,this[d]=null,h&&(typeof h.transform=="function"&&(this._transform=h.transform),typeof h.flush=="function"&&(this._flush=h.flush)),this.on("prefinish",p)}function c(h){typeof this._flush=="function"&&!this.destroyed?this._flush((y,b)=>{if(y){h?h(y):this.destroy(y);return}b!=null&&this.push(b),this.push(null),h&&h()}):(this.push(null),h&&h())}function p(){this._final!==c&&c.call(this)}return u.prototype._final=c,u.prototype._transform=function(h,y,b){throw new s("_transform()")},u.prototype._write=function(h,y,b){const x=this._readableState,T=this._writableState,S=x.length;this._transform(h,y,(_,C)=>{if(_){b(_);return}C!=null&&this.push(C),T.ended||S===x.length||x.length<x.highWaterMark?b():this[d]=b})},u.prototype._read=function(){if(this[d]){const h=this[d];this[d]=null,h()}},transform}var passthrough,hasRequiredPassthrough;function requirePassthrough(){if(hasRequiredPassthrough)return passthrough;hasRequiredPassthrough=1;const{ObjectSetPrototypeOf:n}=requirePrimordials();passthrough=s;const r=requireTransform();n(s.prototype,r.prototype),n(s,r);function s(a){if(!(this instanceof s))return new s(a);r.call(this,a)}return s.prototype._transform=function(a,l,d){d(null,a)},passthrough}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;const n=requireBrowser$1(),{ArrayIsArray:r,Promise:s,SymbolAsyncIterator:a,SymbolDispose:l}=requirePrimordials(),d=requireEndOfStream(),{once:u}=requireUtil(),c=requireDestroy(),p=requireDuplex(),{aggregateTwoErrors:h,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:b,ERR_MISSING_ARGS:x,ERR_STREAM_DESTROYED:T,ERR_STREAM_PREMATURE_CLOSE:S},AbortError:_}=requireErrors(),{validateFunction:C,validateAbortSignal:k}=requireValidators(),{isIterable:I,isReadable:N,isReadableNodeStream:F,isNodeStream:j,isTransformStream:V,isWebStream:M,isReadableStream:q,isReadableFinished:Se}=requireUtils(),Q=globalThis.AbortController||requireBrowser$2().AbortController;let ee,we,he;function He(ce,Ie,Fe){let at=!1;ce.on("close",()=>{at=!0});const nt=d(ce,{readable:Ie,writable:Fe},Ce=>{at=!Ce});return{destroy:Ce=>{at||(at=!0,c.destroyer(ce,Ce||new T("pipe")))},cleanup:nt}}function Je(ce){return C(ce[ce.length-1],"streams[stream.length - 1]"),ce.pop()}function de(ce){if(I(ce))return ce;if(F(ce))return Be(ce);throw new y("val",["Readable","Iterable","AsyncIterable"],ce)}async function*Be(ce){we||(we=requireReadable()),yield*we.prototype[a].call(ce)}async function me(ce,Ie,Fe,{end:at}){let nt,Ce=null;const ke=tt=>{if(tt&&(nt=tt),Ce){const oe=Ce;Ce=null,oe()}},De=()=>new s((tt,oe)=>{nt?oe(nt):Ce=()=>{nt?oe(nt):tt()}});Ie.on("drain",ke);const mt=d(Ie,{readable:!1},ke);try{Ie.writableNeedDrain&&await De();for await(const tt of ce)Ie.write(tt)||await De();at&&(Ie.end(),await De()),Fe()}catch(tt){Fe(nt!==tt?h(nt,tt):tt)}finally{mt(),Ie.off("drain",ke)}}async function Ue(ce,Ie,Fe,{end:at}){V(Ie)&&(Ie=Ie.writable);const nt=Ie.getWriter();try{for await(const Ce of ce)await nt.ready,nt.write(Ce).catch(()=>{});await nt.ready,at&&await nt.close(),Fe()}catch(Ce){try{await nt.abort(Ce),Fe(Ce)}catch(ke){Fe(ke)}}}function W(...ce){return z(ce,u(Je(ce)))}function z(ce,Ie,Fe){if(ce.length===1&&r(ce[0])&&(ce=ce[0]),ce.length<2)throw new x("streams");const at=new Q,nt=at.signal,Ce=Fe==null?void 0:Fe.signal,ke=[];k(Ce,"options.signal");function De(){Qe(new _)}he=he||requireUtil().addAbortListener;let mt;Ce&&(mt=he(Ce,De));let tt,oe;const pe=[];let Re=0;function Ze(ze){Qe(ze,--Re===0)}function Qe(ze,ft){var Dt;if(ze&&(!tt||tt.code==="ERR_STREAM_PREMATURE_CLOSE")&&(tt=ze),!(!tt&&!ft)){for(;pe.length;)pe.shift()(tt);(Dt=mt)===null||Dt===void 0||Dt[l](),at.abort(),ft&&(tt||ke.forEach(Rt=>Rt()),n.nextTick(Ie,tt,oe))}}let Ye;for(let ze=0;ze<ce.length;ze++){const ft=ce[ze],Dt=ze<ce.length-1,Rt=ze>0,kt=Dt||(Fe==null?void 0:Fe.end)!==!1,O=ze===ce.length-1;if(j(ft)){let w=function(R){R&&R.name!=="AbortError"&&R.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ze(R)};var $e=w;if(kt){const{destroy:R,cleanup:K}=He(ft,Dt,Rt);pe.push(R),N(ft)&&O&&ke.push(K)}ft.on("error",w),N(ft)&&O&&ke.push(()=>{ft.removeListener("error",w)})}if(ze===0)if(typeof ft=="function"){if(Ye=ft({signal:nt}),!I(Ye))throw new b("Iterable, AsyncIterable or Stream","source",Ye)}else I(ft)||F(ft)||V(ft)?Ye=ft:Ye=p.from(ft);else if(typeof ft=="function"){if(V(Ye)){var fe;Ye=de((fe=Ye)===null||fe===void 0?void 0:fe.readable)}else Ye=de(Ye);if(Ye=ft(Ye,{signal:nt}),Dt){if(!I(Ye,!0))throw new b("AsyncIterable",`transform[${ze-1}]`,Ye)}else{var Le;ee||(ee=requirePassthrough());const w=new ee({objectMode:!0}),R=(Le=Ye)===null||Le===void 0?void 0:Le.then;if(typeof R=="function")Re++,R.call(Ye,xe=>{oe=xe,xe!=null&&w.write(xe),kt&&w.end(),n.nextTick(Ze)},xe=>{w.destroy(xe),n.nextTick(Ze,xe)});else if(I(Ye,!0))Re++,me(Ye,w,Ze,{end:kt});else if(q(Ye)||V(Ye)){const xe=Ye.readable||Ye;Re++,me(xe,w,Ze,{end:kt})}else throw new b("AsyncIterable or Promise","destination",Ye);Ye=w;const{destroy:K,cleanup:ue}=He(Ye,!1,!0);pe.push(K),O&&ke.push(ue)}}else if(j(ft)){if(F(Ye)){Re+=2;const w=Z(Ye,ft,Ze,{end:kt});N(ft)&&O&&ke.push(w)}else if(V(Ye)||q(Ye)){const w=Ye.readable||Ye;Re++,me(w,ft,Ze,{end:kt})}else if(I(Ye))Re++,me(Ye,ft,Ze,{end:kt});else throw new y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ye);Ye=ft}else if(M(ft)){if(F(Ye))Re++,Ue(de(Ye),ft,Ze,{end:kt});else if(q(Ye)||I(Ye))Re++,Ue(Ye,ft,Ze,{end:kt});else if(V(Ye))Re++,Ue(Ye.readable,ft,Ze,{end:kt});else throw new y("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],Ye);Ye=ft}else Ye=p.from(ft)}return(nt!=null&&nt.aborted||Ce!=null&&Ce.aborted)&&n.nextTick(De),Ye}function Z(ce,Ie,Fe,{end:at}){let nt=!1;if(Ie.on("close",()=>{nt||Fe(new S)}),ce.pipe(Ie,{end:!1}),at){let ke=function(){nt=!0,Ie.end()};var Ce=ke;Se(ce)?n.nextTick(ke):ce.once("end",ke)}else Fe();return d(ce,{readable:!0,writable:!1},ke=>{const De=ce._readableState;ke&&ke.code==="ERR_STREAM_PREMATURE_CLOSE"&&De&&De.ended&&!De.errored&&!De.errorEmitted?ce.once("end",Fe).once("error",Fe):Fe(ke)}),d(Ie,{readable:!1,writable:!0},Fe)}return pipeline_1={pipelineImpl:z,pipeline:W},pipeline_1}var compose,hasRequiredCompose;function requireCompose(){if(hasRequiredCompose)return compose;hasRequiredCompose=1;const{pipeline:n}=requirePipeline(),r=requireDuplex(),{destroyer:s}=requireDestroy(),{isNodeStream:a,isReadable:l,isWritable:d,isWebStream:u,isTransformStream:c,isWritableStream:p,isReadableStream:h}=requireUtils(),{AbortError:y,codes:{ERR_INVALID_ARG_VALUE:b,ERR_MISSING_ARGS:x}}=requireErrors(),T=requireEndOfStream();return compose=function(..._){if(_.length===0)throw new x("streams");if(_.length===1)return r.from(_[0]);const C=[..._];if(typeof _[0]=="function"&&(_[0]=r.from(_[0])),typeof _[_.length-1]=="function"){const ee=_.length-1;_[ee]=r.from(_[ee])}for(let ee=0;ee<_.length;++ee)if(!(!a(_[ee])&&!u(_[ee]))){if(ee<_.length-1&&!(l(_[ee])||h(_[ee])||c(_[ee])))throw new b(`streams[${ee}]`,C[ee],"must be readable");if(ee>0&&!(d(_[ee])||p(_[ee])||c(_[ee])))throw new b(`streams[${ee}]`,C[ee],"must be writable")}let k,I,N,F,j;function V(ee){const we=F;F=null,we?we(ee):ee?j.destroy(ee):!Q&&!Se&&j.destroy()}const M=_[0],q=n(_,V),Se=!!(d(M)||p(M)||c(M)),Q=!!(l(q)||h(q)||c(q));if(j=new r({writableObjectMode:!!(M!=null&&M.writableObjectMode),readableObjectMode:!!(q!=null&&q.readableObjectMode),writable:Se,readable:Q}),Se){if(a(M))j._write=function(we,he,He){M.write(we,he)?He():k=He},j._final=function(we){M.end(),I=we},M.on("drain",function(){if(k){const we=k;k=null,we()}});else if(u(M)){const he=(c(M)?M.writable:M).getWriter();j._write=async function(He,Je,de){try{await he.ready,he.write(He).catch(()=>{}),de()}catch(Be){de(Be)}},j._final=async function(He){try{await he.ready,he.close().catch(()=>{}),I=He}catch(Je){He(Je)}}}const ee=c(q)?q.readable:q;T(ee,()=>{if(I){const we=I;I=null,we()}})}if(Q){if(a(q))q.on("readable",function(){if(N){const ee=N;N=null,ee()}}),q.on("end",function(){j.push(null)}),j._read=function(){for(;;){const ee=q.read();if(ee===null){N=j._read;return}if(!j.push(ee))return}};else if(u(q)){const we=(c(q)?q.readable:q).getReader();j._read=async function(){for(;;)try{const{value:he,done:He}=await we.read();if(!j.push(he))return;if(He){j.push(null);return}}catch{return}}}}return j._destroy=function(ee,we){!ee&&F!==null&&(ee=new y),N=null,k=null,I=null,F===null?we(ee):(F=we,a(q)&&s(q,ee))},j},compose}var hasRequiredOperators;function requireOperators(){if(hasRequiredOperators)return operators;hasRequiredOperators=1;const n=globalThis.AbortController||requireBrowser$2().AbortController,{codes:{ERR_INVALID_ARG_VALUE:r,ERR_INVALID_ARG_TYPE:s,ERR_MISSING_ARGS:a,ERR_OUT_OF_RANGE:l},AbortError:d}=requireErrors(),{validateAbortSignal:u,validateInteger:c,validateObject:p}=requireValidators(),h=requirePrimordials().Symbol("kWeak"),y=requirePrimordials().Symbol("kResistStopPropagation"),{finished:b}=requireEndOfStream(),x=requireCompose(),{addAbortSignalNoValidate:T}=requireAddAbortSignal(),{isWritable:S,isNodeStream:_}=requireUtils(),{deprecate:C}=requireUtil(),{ArrayPrototypePush:k,Boolean:I,MathFloor:N,Number:F,NumberIsNaN:j,Promise:V,PromiseReject:M,PromiseResolve:q,PromisePrototypeThen:Se,Symbol:Q}=requirePrimordials(),ee=Q("kEmpty"),we=Q("kEof");function he(Ce,ke){if(ke!=null&&p(ke,"options"),(ke==null?void 0:ke.signal)!=null&&u(ke.signal,"options.signal"),_(Ce)&&!S(Ce))throw new r("stream",Ce,"must be writable");const De=x(this,Ce);return ke!=null&&ke.signal&&T(ke.signal,De),De}function He(Ce,ke){if(typeof Ce!="function")throw new s("fn",["Function","AsyncFunction"],Ce);ke!=null&&p(ke,"options"),(ke==null?void 0:ke.signal)!=null&&u(ke.signal,"options.signal");let De=1;(ke==null?void 0:ke.concurrency)!=null&&(De=N(ke.concurrency));let mt=De-1;return(ke==null?void 0:ke.highWaterMark)!=null&&(mt=N(ke.highWaterMark)),c(De,"options.concurrency",1),c(mt,"options.highWaterMark",0),mt+=De,(async function*(){const oe=requireUtil().AbortSignalAny([ke==null?void 0:ke.signal].filter(I)),pe=this,Re=[],Ze={signal:oe};let Qe,Ye,fe=!1,Le=0;function $e(){fe=!0,ze()}function ze(){Le-=1,ft()}function ft(){Ye&&!fe&&Le<De&&Re.length<mt&&(Ye(),Ye=null)}async function Dt(){try{for await(let Rt of pe){if(fe)return;if(oe.aborted)throw new d;try{if(Rt=Ce(Rt,Ze),Rt===ee)continue;Rt=q(Rt)}catch(kt){Rt=M(kt)}Le+=1,Se(Rt,ze,$e),Re.push(Rt),Qe&&(Qe(),Qe=null),!fe&&(Re.length>=mt||Le>=De)&&await new V(kt=>{Ye=kt})}Re.push(we)}catch(Rt){const kt=M(Rt);Se(kt,ze,$e),Re.push(kt)}finally{fe=!0,Qe&&(Qe(),Qe=null)}}Dt();try{for(;;){for(;Re.length>0;){const Rt=await Re[0];if(Rt===we)return;if(oe.aborted)throw new d;Rt!==ee&&(yield Rt),Re.shift(),ft()}await new V(Rt=>{Qe=Rt})}}finally{fe=!0,Ye&&(Ye(),Ye=null)}}).call(this)}function Je(Ce=void 0){return Ce!=null&&p(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&u(Ce.signal,"options.signal"),(async function*(){let De=0;for await(const tt of this){var mt;if(Ce!=null&&(mt=Ce.signal)!==null&&mt!==void 0&&mt.aborted)throw new d({cause:Ce.signal.reason});yield[De++,tt]}}).call(this)}async function de(Ce,ke=void 0){for await(const De of W.call(this,Ce,ke))return!0;return!1}async function Be(Ce,ke=void 0){if(typeof Ce!="function")throw new s("fn",["Function","AsyncFunction"],Ce);return!await de.call(this,async(...De)=>!await Ce(...De),ke)}async function me(Ce,ke){for await(const De of W.call(this,Ce,ke))return De}async function Ue(Ce,ke){if(typeof Ce!="function")throw new s("fn",["Function","AsyncFunction"],Ce);async function De(mt,tt){return await Ce(mt,tt),ee}for await(const mt of He.call(this,De,ke));}function W(Ce,ke){if(typeof Ce!="function")throw new s("fn",["Function","AsyncFunction"],Ce);async function De(mt,tt){return await Ce(mt,tt)?mt:ee}return He.call(this,De,ke)}class z extends a{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Z(Ce,ke,De){var mt;if(typeof Ce!="function")throw new s("reducer",["Function","AsyncFunction"],Ce);De!=null&&p(De,"options"),(De==null?void 0:De.signal)!=null&&u(De.signal,"options.signal");let tt=arguments.length>1;if(De!=null&&(mt=De.signal)!==null&&mt!==void 0&&mt.aborted){const Qe=new d(void 0,{cause:De.signal.reason});throw this.once("error",()=>{}),await b(this.destroy(Qe)),Qe}const oe=new n,pe=oe.signal;if(De!=null&&De.signal){const Qe={once:!0,[h]:this,[y]:!0};De.signal.addEventListener("abort",()=>oe.abort(),Qe)}let Re=!1;try{for await(const Qe of this){var Ze;if(Re=!0,De!=null&&(Ze=De.signal)!==null&&Ze!==void 0&&Ze.aborted)throw new d;tt?ke=await Ce(ke,Qe,{signal:pe}):(ke=Qe,tt=!0)}if(!Re&&!tt)throw new z}finally{oe.abort()}return ke}async function ce(Ce){Ce!=null&&p(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&u(Ce.signal,"options.signal");const ke=[];for await(const mt of this){var De;if(Ce!=null&&(De=Ce.signal)!==null&&De!==void 0&&De.aborted)throw new d(void 0,{cause:Ce.signal.reason});k(ke,mt)}return ke}function Ie(Ce,ke){const De=He.call(this,Ce,ke);return(async function*(){for await(const tt of De)yield*tt}).call(this)}function Fe(Ce){if(Ce=F(Ce),j(Ce))return 0;if(Ce<0)throw new l("number",">= 0",Ce);return Ce}function at(Ce,ke=void 0){return ke!=null&&p(ke,"options"),(ke==null?void 0:ke.signal)!=null&&u(ke.signal,"options.signal"),Ce=Fe(Ce),(async function*(){var mt;if(ke!=null&&(mt=ke.signal)!==null&&mt!==void 0&&mt.aborted)throw new d;for await(const oe of this){var tt;if(ke!=null&&(tt=ke.signal)!==null&&tt!==void 0&&tt.aborted)throw new d;Ce--<=0&&(yield oe)}}).call(this)}function nt(Ce,ke=void 0){return ke!=null&&p(ke,"options"),(ke==null?void 0:ke.signal)!=null&&u(ke.signal,"options.signal"),Ce=Fe(Ce),(async function*(){var mt;if(ke!=null&&(mt=ke.signal)!==null&&mt!==void 0&&mt.aborted)throw new d;for await(const oe of this){var tt;if(ke!=null&&(tt=ke.signal)!==null&&tt!==void 0&&tt.aborted)throw new d;if(Ce-- >0&&(yield oe),Ce<=0)return}}).call(this)}return operators.streamReturningOperators={asIndexedPairs:C(Je,"readable.asIndexedPairs will be removed in a future version."),drop:at,filter:W,flatMap:Ie,map:He,take:nt,compose:he},operators.promiseReturningOperators={every:Be,forEach:Ue,reduce:Z,toArray:ce,some:de,find:me},operators}var promises,hasRequiredPromises;function requirePromises(){if(hasRequiredPromises)return promises;hasRequiredPromises=1;const{ArrayPrototypePop:n,Promise:r}=requirePrimordials(),{isIterable:s,isNodeStream:a,isWebStream:l}=requireUtils(),{pipelineImpl:d}=requirePipeline(),{finished:u}=requireEndOfStream();requireStream();function c(...p){return new r((h,y)=>{let b,x;const T=p[p.length-1];if(T&&typeof T=="object"&&!a(T)&&!s(T)&&!l(T)){const S=n(p);b=S.signal,x=S.end}d(p,(S,_)=>{S?y(S):h(_)},{signal:b,end:x})})}return promises={finished:u,pipeline:c},promises}var hasRequiredStream;function requireStream(){if(hasRequiredStream)return stream.exports;hasRequiredStream=1;const{Buffer:n}=requireBuffer(),{ObjectDefineProperty:r,ObjectKeys:s,ReflectApply:a}=requirePrimordials(),{promisify:{custom:l}}=requireUtil(),{streamReturningOperators:d,promiseReturningOperators:u}=requireOperators(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c}}=requireErrors(),p=requireCompose(),{setDefaultHighWaterMark:h,getDefaultHighWaterMark:y}=requireState(),{pipeline:b}=requirePipeline(),{destroyer:x}=requireDestroy(),T=requireEndOfStream(),S=requirePromises(),_=requireUtils(),C=stream.exports=requireLegacy().Stream;C.isDestroyed=_.isDestroyed,C.isDisturbed=_.isDisturbed,C.isErrored=_.isErrored,C.isReadable=_.isReadable,C.isWritable=_.isWritable,C.Readable=requireReadable();for(const N of s(d)){let j=function(...V){if(new.target)throw c();return C.Readable.from(a(F,this,V))};var I=j;const F=d[N];r(j,"name",{__proto__:null,value:F.name}),r(j,"length",{__proto__:null,value:F.length}),r(C.Readable.prototype,N,{__proto__:null,value:j,enumerable:!1,configurable:!0,writable:!0})}for(const N of s(u)){let j=function(...M){if(new.target)throw c();return a(F,this,M)};var I=j;const F=u[N];r(j,"name",{__proto__:null,value:F.name}),r(j,"length",{__proto__:null,value:F.length}),r(C.Readable.prototype,N,{__proto__:null,value:j,enumerable:!1,configurable:!0,writable:!0})}C.Writable=requireWritable(),C.Duplex=requireDuplex(),C.Transform=requireTransform(),C.PassThrough=requirePassthrough(),C.pipeline=b;const{addAbortSignal:k}=requireAddAbortSignal();return C.addAbortSignal=k,C.finished=T,C.destroy=x,C.compose=p,C.setDefaultHighWaterMark=h,C.getDefaultHighWaterMark=y,r(C,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return S}}),r(b,l,{__proto__:null,enumerable:!0,get(){return S.pipeline}}),r(T,l,{__proto__:null,enumerable:!0,get(){return S.finished}}),C.Stream=C,C._isUint8Array=function(F){return F instanceof Uint8Array},C._uint8ArrayToBuffer=function(F){return n.from(F.buffer,F.byteOffset,F.byteLength)},stream.exports}var hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,(function(n){const r=requireStream(),s=requirePromises(),a=r.Readable.destroy;n.exports=r.Readable,n.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,n.exports._isUint8Array=r._isUint8Array,n.exports.isDisturbed=r.isDisturbed,n.exports.isErrored=r.isErrored,n.exports.isReadable=r.isReadable,n.exports.Readable=r.Readable,n.exports.Writable=r.Writable,n.exports.Duplex=r.Duplex,n.exports.Transform=r.Transform,n.exports.PassThrough=r.PassThrough,n.exports.addAbortSignal=r.addAbortSignal,n.exports.finished=r.finished,n.exports.destroy=r.destroy,n.exports.destroy=a,n.exports.pipeline=r.pipeline,n.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get(){return s}}),n.exports.Stream=r.Stream,n.exports.default=n.exports})(browser$2)),browser$2.exports}var hasRequiredLib$1;function requireLib$1(){if(hasRequiredLib$1)return lib;hasRequiredLib$1=1,Object.defineProperty(lib,"__esModule",{value:!0}),lib.ReadableWebToNodeStream=void 0;const n=requireBrowser();class r extends n.Readable{constructor(a){super(),this.bytesRead=0,this.released=!1,this.reader=a.getReader()}_read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read().then(a=>{delete this.pendingRead,a.done||this.released?this.push(null):(this.bytesRead+=a.value.length,this.push(a.value))}).catch(a=>{this.destroy(a)})}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}return lib.ReadableWebToNodeStream=r,lib}var hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.fetchFromUrl=n.parseBlob=n.parseReadableStream=n.parseNodeStream=n.selectCover=n.ratingToStars=n.orderTags=n.parseFromTokenizer=n.parseBuffer=void 0;const r=requireBrowser$3(),s=requireCore(),a=requireLib$1(),l=r("music-metadata-browser:main");var d=requireCore();Object.defineProperty(n,"parseBuffer",{enumerable:!0,get:function(){return d.parseBuffer}}),Object.defineProperty(n,"parseFromTokenizer",{enumerable:!0,get:function(){return d.parseFromTokenizer}}),Object.defineProperty(n,"orderTags",{enumerable:!0,get:function(){return d.orderTags}}),Object.defineProperty(n,"ratingToStars",{enumerable:!0,get:function(){return d.ratingToStars}}),Object.defineProperty(n,"selectCover",{enumerable:!0,get:function(){return d.selectCover}}),n.parseNodeStream=s.parseStream;async function u(y,b,x){const T=new a.ReadableWebToNodeStream(y),S=await(0,n.parseNodeStream)(T,typeof b=="string"?{mimeType:b}:b,x);return await T.close(),S}n.parseReadableStream=u;async function c(y,b){y.type,y.size,y instanceof File&&y.name;const x=y.stream?y.stream():p(y);return u(x,{mimeType:y.type,size:y.size},b)}n.parseBlob=c;function p(y){const b=new FileReader;return new ReadableStream({start(x){b.onloadend=T=>{let S=T.target.result;S instanceof ArrayBuffer&&(S=new Uint8Array(S)),x.enqueue(S),x.close()},b.onerror=T=>{x.close()},b.onabort=T=>{x.close()},b.readAsArrayBuffer(y)}})}async function h(y,b){const x=await fetch(y),T={size:parseInt(x.headers.get("Content-Length"),10),mimeType:x.headers.get("Content-Type")};if(x.ok)if(x.body){const S=await u(x.body,T,b);return l("Closing HTTP-readable-stream..."),x.body.locked||await x.body.cancel(),l("HTTP-readable-stream closed."),S}else return c(await x.blob(),b);else throw new Error(`HTTP error status=${x.status}: ${x.statusText}`)}n.fetchFromUrl=h})(lib$3)),lib$3}var libExports=requireLib();const AUDIO_EXTENSIONS=[".mp3",".flac",".wav",".m4a",".ogg",".opus",".aac",".wma"];function isFileSystemAccessSupported(){return"showDirectoryPicker"in window}class FileScanner{constructor(){En(this,"abortController",null)}async scanDirectory(r){if(!isFileSystemAccessSupported())throw new Error("File System Access API not supported in this browser");try{const s=await window.showDirectoryPicker({mode:"read"});this.abortController=new AbortController;const a=[];await this.collectFiles(s,"",a);const l=[];for(let d=0;d<a.length&&!this.abortController.signal.aborted;d++){const{handle:u,path:c}=a[d];r==null||r(d+1,a.length,u.name);try{const p=await this.parseFile(u,c);p&&(l.push(p),await addTrack(p))}catch(p){console.warn(`Failed to parse ${u.name}:`,p)}}return l}catch(s){if(s.name==="AbortError")return[];throw s}}async collectFiles(r,s,a){for await(const l of r.values()){const d=s?`${s}/${l.name}`:l.name;if(l.kind==="directory")await this.collectFiles(l,d,a);else if(l.kind==="file"){const u=l.name.substring(l.name.lastIndexOf(".")).toLowerCase();AUDIO_EXTENSIONS.includes(u)&&a.push({handle:l,path:d})}}}async parseFile(r,s){try{const a=await r.getFile(),l=await libExports.parseBlob(a);let d;if(l.common.picture&&l.common.picture.length>0){const u=l.common.picture[0],c=new Blob([u.data],{type:u.format});d=URL.createObjectURL(c)}return{id:crypto.randomUUID(),title:l.common.title||this.getFilenameWithoutExt(r.name),artist:l.common.artist||"Unknown Artist",album:l.common.album||"Unknown Album",duration:l.format.duration||0,coverArt:d,source:"local",fileHandle:r,bitrate:l.format.bitrate,format:l.format.codec,dateAdded:Date.now()}}catch(a){return console.error(`Error parsing ${r.name}:`,a),null}}getFilenameWithoutExt(r){const s=r.lastIndexOf(".");return s>0?r.substring(0,s):r}async addFiles(r){const s=[];for(const a of Array.from(r))try{const l=await libExports.parseBlob(a);let d;if(l.common.picture&&l.common.picture.length>0){const c=l.common.picture[0],p=new Blob([c.data],{type:c.format});d=URL.createObjectURL(p)}const u={id:crypto.randomUUID(),title:l.common.title||this.getFilenameWithoutExt(a.name),artist:l.common.artist||"Unknown Artist",album:l.common.album||"Unknown Album",duration:l.format.duration||0,coverArt:d,source:"local",bitrate:l.format.bitrate,format:l.format.codec,dateAdded:Date.now()};s.push(u),await addTrack(u)}catch(l){console.warn(`Failed to parse ${a.name}:`,l)}return s}async clearLibrary(){await clearLocalTracks()}cancelScan(){var r;(r=this.abortController)==null||r.abort()}}const fileScanner=new FileScanner;class SpotifyService{constructor(){En(this,"accessToken",null);En(this,"tokenExpiration",0);this.init()}async init(){await this.getAccessToken()}async getAccessToken(){if(this.accessToken&&Date.now()<this.tokenExpiration)return this.accessToken;try{const r=await fetch("/api/token");if(!r.ok)throw new Error(`Token fetch failed: ${r.statusText}`);const s=await r.json();return this.accessToken=s.access_token,this.tokenExpiration=Date.now()+s.expires_in*1e3-3e5,this.accessToken}catch(r){return console.error("Failed to get anonymous Spotify token:",r),null}}async search(r){const s=await this.getAccessToken();if(!s)return[];try{const a=await fetch(`https://api.spotify.com/v1/search?q=${encodeURIComponent(r)}&type=track&limit=20`,{headers:{Authorization:`Bearer ${s}`}});if(!a.ok){if(a.status===401)return this.accessToken=null,this.search(r);throw new Error("Spotify API Error")}return(await a.json()).tracks.items.map(this.mapSpotifyTrack)}catch(a){return console.error("Spotify search failed:",a),[]}}async getSavedTracks(){return[]}isAuthenticated(){return!!this.accessToken}login(){console.log("Anonymous mode: No login required")}logout(){this.accessToken=null}mapSpotifyTrack(r){var a,l;const s=((a=r.album.images[0])==null?void 0:a.url)||((l=r.album.images[1])==null?void 0:l.url);return{id:r.id,title:r.name,artist:r.artists.map(d=>d.name).join(", "),album:r.album.name,coverArt:s,duration:r.duration_ms/1e3,source:"spotify",dateAdded:Date.now()}}}const spotifyService=new SpotifyService;function LibraryView(){const{libraryTab:n,setLibraryTab:r,playTrack:s}=usePlayerStore(),[a,l]=reactExports.useState([]),[d,u]=reactExports.useState(!1),[c,p]=reactExports.useState(null),h=spotifyService.isAuthenticated(),y=[{id:"local",label:"Local"},{id:"playlists",label:"Playlists"}];reactExports.useEffect(()=>{b()},[n]);async function b(){u(!0);try{if(n==="local"){const _=await getTracksBySource("local");l(_)}else if(n==="spotify"&&h){const _=await spotifyService.getSavedTracks();l(_)}else l([])}catch(_){console.error("Failed to load tracks:",_)}finally{u(!1)}}async function x(){p({current:0,total:0,filename:""});try{const _=await fileScanner.scanDirectory((C,k,I)=>{p({current:C,total:k,filename:I})});l(C=>[...C,..._])}catch(_){_.name!=="AbortError"&&console.error("Scan failed:",_)}finally{p(null)}}async function T(){confirm("Are you sure you want to clear your local library?")&&(await fileScanner.clearLibrary(),l([]))}function S(_){s(_,a)}return jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold",children:"Library"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[n==="local"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[isFileSystemAccessSupported()&&jsxRuntimeExports.jsx("button",{onClick:x,disabled:!!c,className:"p-2 text-secondary hover:text-white transition-colors disabled:opacity-50",title:"Scan folder",children:jsxRuntimeExports.jsx(FolderOpen,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:b,className:"p-2 text-secondary hover:text-white transition-colors",title:"Refresh",children:jsxRuntimeExports.jsx(RefreshCw,{size:20})}),a.length>0&&jsxRuntimeExports.jsx("button",{onClick:T,className:"p-2 text-secondary hover:text-red-500 transition-colors",title:"Clear library",children:jsxRuntimeExports.jsx(Trash2,{size:20})})]}),n==="spotify"&&jsxRuntimeExports.jsx("button",{onClick:()=>h?spotifyService.logout():spotifyService.login(),className:"flex items-center gap-2 px-4 py-2 bg-primary/20 text-primary rounded-full hover:bg-primary/30 transition-colors",children:h?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LogOut,{size:16}),jsxRuntimeExports.jsx("span",{children:"Disconnect"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LogIn,{size:16}),jsxRuntimeExports.jsx("span",{children:"Connect"})]})})]})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 mb-6",children:y.map(_=>jsxRuntimeExports.jsx("button",{onClick:()=>r(_.id),className:`
              px-4 py-2 rounded-full text-sm font-medium transition-colors
              ${n===_.id?"bg-primary text-black":"bg-surface-container text-secondary hover:text-white"}
            `,children:_.label},_.id))}),c&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"glass rounded-xl p-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Scanning..."}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-secondary",children:[c.current," / ",c.total]})]}),jsxRuntimeExports.jsx("div",{className:"w-full h-1 bg-white/10 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${c.current/c.total*100}%`}})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-secondary mt-2 truncate",children:c.filename})]}),d?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-12",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):a.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx(Music,{size:48,className:"mx-auto text-secondary mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-secondary",children:n==="local"?"No local tracks yet. Scan a folder to add music.":n==="spotify"&&!h?"Connect Spotify to see your saved tracks.":"No tracks found."})]}):jsxRuntimeExports.jsx("div",{className:"space-y-1",children:a.map((_,C)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:Math.min(C*.02,.5)},className:"flex items-center gap-4 p-3 rounded-xl hover:bg-surface-container transition-colors group",children:[jsxRuntimeExports.jsxs("div",{className:"relative w-12 h-12 rounded-lg bg-surface-container-high flex-shrink-0 overflow-hidden",children:[_.coverArt?jsxRuntimeExports.jsx("img",{src:_.coverArt,alt:_.album,className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center",children:jsxRuntimeExports.jsx(Music,{size:20,className:"text-secondary"})}),jsxRuntimeExports.jsx("button",{onClick:()=>S(_),className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:jsxRuntimeExports.jsx(Play,{size:20,className:"text-white"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"font-medium truncate",children:_.title}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-secondary truncate",children:[_.artist,"  ",_.album]})]}),jsxRuntimeExports.jsx("span",{className:"text-sm text-secondary hidden sm:block",children:formatDuration(_.duration)}),jsxRuntimeExports.jsx("button",{className:"p-2 text-secondary hover:text-white transition-colors opacity-0 group-hover:opacity-100",children:jsxRuntimeExports.jsx(EllipsisVertical,{size:18})})]},_.id))})]})}function formatDuration(n){const r=Math.floor(n/60),s=Math.floor(n%60);return`${r}:${s.toString().padStart(2,"0")}`}const PIPED_INSTANCES=["https://pipedapi.kavin.rocks","https://api-piped.mha.fi","https://pipedapi.in.projectsegfau.lt","https://pipedapi.adminforge.de"];let currentInstanceIndex=0;function getPipedInstance(){return PIPED_INSTANCES[currentInstanceIndex]}function rotateInstance(){currentInstanceIndex=(currentInstanceIndex+1)%PIPED_INSTANCES.length,console.log("[StreamResolver] Rotated to instance:",getPipedInstance())}class StreamResolver{async resolveTrack(r){if(!r.spotifyId)return console.warn("[StreamResolver] Track has no Spotify ID"),null;const s=`stream_${r.spotifyId}`,a=await getCache(s);if(a)return console.log("[StreamResolver] Cache hit for:",r.title),a;try{const l=`${r.artist} ${r.title}`,d=await this.searchVideo(l,r.duration);if(!d)return console.warn("[StreamResolver] No matching video found for:",r.title),null;const u=await this.getAudioStream(d);return u&&await setCache(s,u,360*60),u}catch(l){return console.error("[StreamResolver] Error resolving track:",l),rotateInstance(),null}}async searchVideo(r,s){const a=getPipedInstance(),l=`${a}/search?q=${encodeURIComponent(r)}&filter=music_songs`;try{const d=await fetch(l);if(!d.ok)throw new Error(`Search failed: ${d.status}`);const c=(await d.json()).items||[];if(c.length===0){const x=await(await fetch(`${a}/search?q=${encodeURIComponent(r)}`)).json();c.push(...x.items||[])}if(c.length===0)return null;let p=c[0];if(s){let b=1/0;for(const x of c){const T=Math.abs(x.duration-s);if(T<b&&(b=T,p=x),T<=5)break}}const h=p.url;return h.split("v=")[1]||h.split("/watch/")[1]||null}catch(d){throw console.error("[StreamResolver] Search error:",d),d}}async getAudioStream(r){const a=`${getPipedInstance()}/streams/${r}`;try{const l=await fetch(a);if(!l.ok)throw new Error(`Stream fetch failed: ${l.status}`);const u=[...(await l.json()).audioStreams].sort((p,h)=>(h.bitrate||0)-(p.bitrate||0)),c=u.find(p=>{var h,y;return((h=p.mimeType)==null?void 0:h.includes("opus"))||((y=p.format)==null?void 0:y.includes("opus"))})||u.find(p=>{var h,y;return((h=p.mimeType)==null?void 0:h.includes("mp4a"))||((y=p.format)==null?void 0:y.includes("m4a"))})||u[0];return c?(console.log(`[StreamResolver] Selected stream: ${c.quality} @ ${c.bitrate}bps`),c.url):(console.warn("[StreamResolver] No audio streams found"),null)}catch(l){throw console.error("[StreamResolver] Stream error:",l),l}}async resolveAndUpdate(r){const s=await this.resolveTrack(r);return{...r,streamUrl:s||void 0,source:"stream"}}async checkInstance(r){try{return(await fetch(`${r}/healthcheck`,{signal:AbortSignal.timeout(5e3)})).ok}catch{return!1}}async findBestInstance(){const s=(await Promise.all(PIPED_INSTANCES.map(async a=>{const l=performance.now(),d=await this.checkInstance(a),u=performance.now()-l;return{instance:a,healthy:d,latency:u}}))).filter(a=>a.healthy).sort((a,l)=>a.latency-l.latency);if(s.length>0){const a=s[0].instance;return currentInstanceIndex=PIPED_INSTANCES.indexOf(a),console.log(`[StreamResolver] Best instance: ${a} (${Math.round(s[0].latency)}ms)`),a}return PIPED_INSTANCES[0]}}const streamResolver=new StreamResolver;function SearchView(){const{playTrack:n}=usePlayerStore(),[r,s]=reactExports.useState(""),[a,l]=reactExports.useState([]),[d,u]=reactExports.useState(!1),[c,p]=reactExports.useState(null),h=reactExports.useCallback(async()=>{if(!r.trim()){l([]);return}u(!0);try{const[b,x]=await Promise.all([searchTracks(r),spotifyService.search(r)]),T=[...b,...x];l(T)}catch(b){console.error("Search failed:",b)}finally{u(!1)}},[r]),y=async b=>{if(b.source==="spotify"&&!b.streamUrl){p(b.id);try{const x=await streamResolver.resolveAndUpdate(b);x.streamUrl?n(x,a):alert("Could not find a stream for this track. Try another version.")}catch(x){console.error("Stream resolution failed:",x),alert("Failed to load stream. Please try again.")}finally{p(null)}}else n(b,a)};return jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"relative mb-6",children:[jsxRuntimeExports.jsx(Search,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-secondary"}),jsxRuntimeExports.jsx("input",{type:"text",value:r,onChange:b=>s(b.target.value),onKeyDown:b=>b.key==="Enter"&&h(),placeholder:"Search artists, songs, albums...",className:"w-full pl-12 pr-4 py-4 bg-surface-container rounded-2xl text-white placeholder-secondary outline-none focus:ring-2 focus:ring-primary transition-shadow"}),d&&jsxRuntimeExports.jsx(LoaderCircle,{size:20,className:"absolute right-4 top-1/2 -translate-y-1/2 text-secondary animate-spin"})]}),jsxRuntimeExports.jsx("button",{onClick:h,disabled:d||!r.trim(),className:"w-full mb-6 py-3 bg-primary text-black font-medium rounded-xl hover:bg-primary-dim transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Search"}),a.length===0&&r&&!d?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx(Music,{size:48,className:"mx-auto text-secondary mb-4"}),jsxRuntimeExports.jsxs("p",{className:"text-secondary",children:['No results found for "',r,'"']})]}):jsxRuntimeExports.jsx("div",{className:"space-y-1",children:a.map((b,x)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:Math.min(x*.03,.3)},className:"flex items-center gap-4 p-3 rounded-xl hover:bg-surface-container transition-colors group",children:[jsxRuntimeExports.jsxs("div",{className:"relative w-12 h-12 rounded-lg bg-surface-container-high flex-shrink-0 overflow-hidden",children:[b.coverArt?jsxRuntimeExports.jsx("img",{src:b.coverArt,alt:b.album,className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center",children:jsxRuntimeExports.jsx(Music,{size:20,className:"text-secondary"})}),jsxRuntimeExports.jsx("button",{onClick:()=>y(b),disabled:c===b.id,className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center disabled:cursor-wait",children:c===b.id?jsxRuntimeExports.jsx(LoaderCircle,{size:20,className:"text-white animate-spin"}):jsxRuntimeExports.jsx(Play,{size:20,className:"text-white"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"font-medium truncate",children:b.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-secondary truncate",children:b.artist})]}),jsxRuntimeExports.jsx("span",{className:`
                  px-2 py-0.5 rounded-full text-xs font-medium
                  ${b.source==="local"?"bg-accent-purple/20 text-accent-purple":"bg-primary/20 text-primary"}
                `,children:b.source==="local"?"Local":"Spotify"})]},b.id))})]})}function SettingsView(){const{eqEnabled:n,eqBands:r,eqPresetName:s,volume:a,toggleEQ:l,setEQBand:d,applyEQPreset:u,setVolume:c}=usePlayerStore();return jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Settings"}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass rounded-2xl p-6 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(SlidersVertical,{size:24,className:"text-primary"}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold",children:"Equalizer"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>u("Flat"),className:"p-2 text-secondary hover:text-white transition-colors",title:"Reset to flat",children:jsxRuntimeExports.jsx(RotateCcw,{size:18})}),jsxRuntimeExports.jsx("button",{onClick:l,className:`
                relative w-12 h-6 rounded-full transition-colors
                ${n?"bg-primary":"bg-surface-container-high"}
              `,children:jsxRuntimeExports.jsx(motion.div,{animate:{x:n?24:2},transition:{type:"spring",stiffness:500,damping:30},className:"absolute top-1 w-4 h-4 bg-white rounded-full"})})]})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:EQ_PRESETS.map(p=>jsxRuntimeExports.jsx("button",{onClick:()=>u(p.name),className:`
                px-3 py-1.5 rounded-full text-sm font-medium transition-colors
                ${s===p.name?"bg-primary text-black":"bg-surface-container text-secondary hover:text-white"}
              `,children:p.name},p.name))}),jsxRuntimeExports.jsx("div",{className:"flex justify-between gap-2",children:r.map((p,h)=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"relative h-32",children:jsxRuntimeExports.jsx("input",{type:"range",min:"-12",max:"12",step:"0.5",value:p,onChange:y=>d(h,parseFloat(y.target.value)),disabled:!n,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-32 -rotate-90 origin-center disabled:opacity-50"})}),jsxRuntimeExports.jsx("span",{className:"text-xs text-secondary",children:formatFrequency(EQ_FREQUENCIES[h])}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-primary",children:p>0?`+${p.toFixed(1)}`:p.toFixed(1)})]},h))})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass rounded-2xl p-6 mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Volume"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("span",{className:"text-secondary w-8",children:"0%"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:a,onChange:p=>c(parseFloat(p.target.value)),className:"flex-1"}),jsxRuntimeExports.jsxs("span",{className:"text-secondary w-12 text-right",children:[Math.round(a*100),"%"]})]})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass rounded-2xl p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-4",children:"About"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 text-sm text-secondary",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{className:"text-white",children:"Streamix"})," v1.0.0"]}),jsxRuntimeExports.jsx("p",{children:"A high-fidelity hybrid music player with 10-band parametric EQ. Play local lossless files or stream from Spotify."}),jsxRuntimeExports.jsx("p",{className:"text-xs",children:"Built with React, Web Audio API, and "})]})]})]})}function formatFrequency(n){return n>=1e3?`${n/1e3}k`:String(n)}const navItems=[{id:"home",icon:House,label:"Home"},{id:"search",icon:Search,label:"Search"},{id:"library",icon:Library,label:"Library"},{id:"settings",icon:Settings,label:"Settings"}];function App(){const{currentView:n,setView:r,showNowPlaying:s,currentTrack:a}=usePlayerStore(),[l,d]=reactExports.useState(!1);reactExports.useEffect(()=>{const c=async()=>{try{await audioEngine.initialize(),d(!0)}catch(h){console.error("Failed to initialize audio:",h)}},p=()=>{l||c()};return window.addEventListener("click",p,{once:!0}),window.addEventListener("touchstart",p,{once:!0}),()=>{window.removeEventListener("click",p),window.removeEventListener("touchstart",p)}},[l]);const u=()=>{switch(n){case"home":return jsxRuntimeExports.jsx(HomeView,{});case"search":return jsxRuntimeExports.jsx(SearchView,{});case"library":return jsxRuntimeExports.jsx(LibraryView,{});case"settings":return jsxRuntimeExports.jsx(SettingsView,{});default:return jsxRuntimeExports.jsx(HomeView,{})}};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full bg-surface overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[jsxRuntimeExports.jsxs("aside",{className:"hidden md:flex flex-col w-64 bg-surface-dim border-r border-white/5",children:[jsxRuntimeExports.jsx("div",{className:"p-6",children:jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gradient",children:"Streamix"})}),jsxRuntimeExports.jsx("nav",{className:"flex-1 px-3",children:navItems.map(c=>{const p=c.icon,h=n===c.id;return jsxRuntimeExports.jsxs("button",{onClick:()=>r(c.id),className:`
                    w-full flex items-center gap-4 px-4 py-3 rounded-xl mb-1
                    transition-all duration-200
                    ${h?"bg-primary/20 text-primary":"text-secondary hover:bg-white/5 hover:text-white"}
                  `,children:[jsxRuntimeExports.jsx(p,{size:22}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:c.label})]},c.id)})})]}),jsxRuntimeExports.jsx("main",{className:"flex-1 overflow-y-auto pb-32 md:pb-24",children:jsxRuntimeExports.jsx(AnimatePresence,{mode:"wait",children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"h-full",children:u()},n)})})]}),jsxRuntimeExports.jsx(PlayerBar,{}),jsxRuntimeExports.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 glass safe-bottom z-40",children:jsxRuntimeExports.jsx("div",{className:"flex justify-around py-2",children:navItems.map(c=>{const p=c.icon,h=n===c.id;return jsxRuntimeExports.jsxs("button",{onClick:()=>r(c.id),className:`
                  flex flex-col items-center gap-1 px-4 py-2 rounded-xl
                  transition-all duration-200
                  ${h?"text-primary":"text-secondary"}
                `,children:[jsxRuntimeExports.jsx(p,{size:22}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:c.label})]},c.id)})})}),jsxRuntimeExports.jsx(AnimatePresence,{children:s&&a&&jsxRuntimeExports.jsx(NowPlaying,{})})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
